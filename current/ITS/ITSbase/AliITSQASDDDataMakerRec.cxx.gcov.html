<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - ITS/ITSbase/AliITSQASDDDataMakerRec.cxx</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">ITS/ITSbase</a> - AliITSQASDDDataMakerRec.cxx<span style="font-size: 80%;"> (source / <a href="AliITSQASDDDataMakerRec.cxx.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">40</td>
            <td class="headerCovTableEntry">901</td>
            <td class="headerCovTableEntryLo">4.4 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">4</td>
            <td class="headerCovTableEntry">27</td>
            <td class="headerCovTableEntryLo">14.8 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /**************************************************************************</a>
<span class="lineNum">       2 </span>            :  * Copyright(c) 2007-2009, ALICE Experiment at CERN, All rights reserved. *
<span class="lineNum">       3 </span>            :  *                                                                        *
<span class="lineNum">       4 </span>            :  * Author: The ALICE Off-line Project.                                    *
<span class="lineNum">       5 </span>            :  * Contributors are mentioned in the code where appropriate.              *
<span class="lineNum">       6 </span>            :  *                                                                        *
<span class="lineNum">       7 </span>            :  * Permission to use, copy, modify and distribute this software and its   *
<span class="lineNum">       8 </span>            :  * documentation strictly for non-commercial purposes is hereby granted   *
<span class="lineNum">       9 </span>            :  * without fee, provided that the above copyright notice appears in all   *
<span class="lineNum">      10 </span>            :  * copies and that both the copyright notice and this permission notice   *
<span class="lineNum">      11 </span>            :  * appear in the supporting documentation. The authors make no claims     *
<span class="lineNum">      12 </span>            :  * about the suitability of this software for any purpose. It is          *
<span class="lineNum">      13 </span>            :  * provided &quot;as is&quot; without express or implied warranty.                  *
<span class="lineNum">      14 </span>            :  **************************************************************************/
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            : /* $Id$ */
<span class="lineNum">      17 </span>            : 
<span class="lineNum">      18 </span>            : //  *************************************************************
<span class="lineNum">      19 </span>            : //  Checks the quality assurance 
<span class="lineNum">      20 </span>            : //  by comparing with reference data
<span class="lineNum">      21 </span>            : //  contained in a DB
<span class="lineNum">      22 </span>            : //  -------------------------------------------------------------
<span class="lineNum">      23 </span>            : //  W. Ferrarese + P. Cerello Feb 2008
<span class="lineNum">      24 </span>            : //  M.Siciliano Aug 2008 QA RecPoints 
<span class="lineNum">      25 </span>            : //  last review: F. Prino Apr 2015
<span class="lineNum">      26 </span>            : //  INFN Torino
<span class="lineNum">      27 </span>            : 
<span class="lineNum">      28 </span>            : // --- ROOT system ---
<span class="lineNum">      29 </span>            : 
<span class="lineNum">      30 </span>            : #include &lt;RVersion.h&gt;
<span class="lineNum">      31 </span>            : #include &lt;TProfile2D.h&gt;
<span class="lineNum">      32 </span>            : #include &lt;TH2F.h&gt;
<span class="lineNum">      33 </span>            : #include &lt;TH1F.h&gt;
<span class="lineNum">      34 </span>            : #include &lt;TBranch.h&gt;
<span class="lineNum">      35 </span>            : #include &lt;TTree.h&gt;
<span class="lineNum">      36 </span>            : #include &lt;TMath.h&gt;
<span class="lineNum">      37 </span>            : #include &lt;TPaveText.h&gt;
<span class="lineNum">      38 </span>            : //#include &lt;TObjArray.h&gt;
<span class="lineNum">      39 </span>            : 
<span class="lineNum">      40 </span>            : // --- Standard library ---
<span class="lineNum">      41 </span>            : 
<span class="lineNum">      42 </span>            : // --- AliRoot header files ---
<span class="lineNum">      43 </span>            : #include &quot;AliITSQASDDDataMakerRec.h&quot;
<span class="lineNum">      44 </span>            : #include &quot;AliQAv1.h&quot;
<span class="lineNum">      45 </span>            : #include &quot;AliRawReader.h&quot;
<span class="lineNum">      46 </span>            : #include &quot;AliITSRawStream.h&quot;
<span class="lineNum">      47 </span>            : #include &quot;AliITSRawStreamSDD.h&quot;
<span class="lineNum">      48 </span>            : #include &quot;AliITSdigit.h&quot;
<span class="lineNum">      49 </span>            : #include &quot;AliITSRecPoint.h&quot;
<span class="lineNum">      50 </span>            : #include &quot;AliITSRecPointContainer.h&quot;
<span class="lineNum">      51 </span>            : #include &quot;AliITSgeomTGeo.h&quot;
<span class="lineNum">      52 </span>            : #include &quot;AliCDBManager.h&quot;
<span class="lineNum">      53 </span>            : #include &quot;AliCDBEntry.h&quot;
<span class="lineNum">      54 </span>            : #include &quot;AliITSCalibrationSDD.h&quot;
<span class="lineNum">      55 </span>            : #include &quot;AliITSQADataMakerRec.h&quot;
<span class="lineNum">      56 </span>            : #include &quot;AliLog.h&quot;
<span class="lineNum">      57 </span>            : #include &lt;iostream&gt;
<span class="lineNum">      58 </span>            : 
<span class="lineNum">      59 </span>            : class TGaxis;
<span class="lineNum">      60 </span>            : class TF1;
<span class="lineNum">      61 </span>            : class TSystem;
<span class="lineNum">      62 </span>            : class AliLog;
<span class="lineNum">      63 </span>            : class AliQAChecker;
<span class="lineNum">      64 </span>            : class AliITSRawStreamSDDCompressed;
<span class="lineNum">      65 </span>            : class AliCDBStorage;
<span class="lineNum">      66 </span>            : class Riostream;
<span class="lineNum">      67 </span>            : class AliITSdigitSDD;
<span class="lineNum">      68 </span>            : class AliITS;
<span class="lineNum">      69 </span>            : class AliRunLoader;
<span class="lineNum">      70 </span>            : class AliITSLoader;
<span class="lineNum">      71 </span>            : class AliITSDetTypeRec;
<span class="lineNum">      72 </span>            : 
<a name="73"><span class="lineNum">      73 </span>            : using std::endl;</a>
<span class="lineNum">      74 </span>            : using std::cout;
<span class="lineNum">      75 </span><span class="lineCov">        118 : ClassImp(AliITSQASDDDataMakerRec)</span>
<a name="76"><span class="lineNum">      76 </span>            : </a>
<span class="lineNum">      77 </span>            : //____________________________________________________________________________ 
<span class="lineNum">      78 </span><span class="lineCov">          2 : AliITSQASDDDataMakerRec::AliITSQASDDDataMakerRec(AliITSQADataMakerRec *aliITSQADataMakerRec, Bool_t kMode, Short_t ldc) : TObject(),</span>
<span class="lineNum">      79 </span><span class="lineCov">          2 :   fAliITSQADataMakerRec(aliITSQADataMakerRec),</span>
<span class="lineNum">      80 </span><span class="lineCov">          2 :   fkOnline(kMode),</span>
<span class="lineNum">      81 </span><span class="lineCov">          2 :   fLDC(ldc),</span>
<span class="lineNum">      82 </span><span class="lineCov">          2 :   fSDDhRawsTask(0),</span>
<span class="lineNum">      83 </span><span class="lineCov">          2 :   fSDDhDigitsTask(0),</span>
<span class="lineNum">      84 </span><span class="lineCov">          2 :   fSDDhRecPointsTask(0),</span>
<span class="lineNum">      85 </span><span class="lineCov">          2 :   fOnlineOffsetRaws(0),</span>
<span class="lineNum">      86 </span><span class="lineCov">          2 :   fOnlineOffsetRecPoints(0),</span>
<span class="lineNum">      87 </span><span class="lineCov">          2 :   fGenRawsOffset(0),</span>
<span class="lineNum">      88 </span><span class="lineCov">          2 :   fGenDigitsOffset(0),</span>
<span class="lineNum">      89 </span><span class="lineCov">          2 :   fGenRecPointsOffset(0),</span>
<span class="lineNum">      90 </span><span class="lineCov">          2 :   fTimeBinSize(4),</span>
<span class="lineNum">      91 </span><span class="lineCov">          2 :   fDDLModuleMap(0),</span>
<span class="lineNum">      92 </span><span class="lineCov">          2 :   fCalibration(0),</span>
<span class="lineNum">      93 </span><span class="lineCov">          2 :   fHistoCalibration(0),</span>
<span class="lineNum">      94 </span><span class="lineCov">          2 :   fPulserRun(99999999)</span>
<span class="lineNum">      95 </span><span class="lineCov">          6 : {</span>
<span class="lineNum">      96 </span>            :   //ctor used to discriminate OnLine-Offline analysis
<span class="lineNum">      97 </span><span class="lineCov">          4 :   fGenRawsOffset = new Int_t[AliRecoParam::kNSpecies];</span>
<span class="lineNum">      98 </span><span class="lineCov">          4 :   fGenRecPointsOffset = new Int_t[AliRecoParam::kNSpecies];</span>
<span class="lineNum">      99 </span><span class="lineCov">          4 :   fGenDigitsOffset = new Int_t[AliRecoParam::kNSpecies];</span>
<span class="lineNum">     100 </span><span class="lineCov">         24 :   for(Int_t i=0; i&lt;AliRecoParam::kNSpecies; i++) {</span>
<span class="lineNum">     101 </span><span class="lineCov">         10 :     fGenRawsOffset[i] = 0;</span>
<span class="lineNum">     102 </span><span class="lineCov">         10 :     fGenRecPointsOffset[i] = 0;</span>
<span class="lineNum">     103 </span><span class="lineCov">         10 :     fGenDigitsOffset[i]=0;</span>
<span class="lineNum">     104 </span>            :   }
<span class="lineNum">     105 </span>            :   
<span class="lineNum">     106 </span><span class="lineCov">          2 :   InitCalibrationArray();</span>
<span class="lineNum">     107 </span><span class="lineCov">          4 : }</span>
<a name="108"><span class="lineNum">     108 </span>            : </a>
<span class="lineNum">     109 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     110 </span>            : AliITSQASDDDataMakerRec::AliITSQASDDDataMakerRec(const AliITSQASDDDataMakerRec&amp; qadm) :
<span class="lineNum">     111 </span><span class="lineNoCov">          0 :   TObject(),</span>
<span class="lineNum">     112 </span><span class="lineNoCov">          0 :   fAliITSQADataMakerRec(qadm.fAliITSQADataMakerRec),</span>
<span class="lineNum">     113 </span><span class="lineNoCov">          0 :   fkOnline(qadm.fkOnline),</span>
<span class="lineNum">     114 </span><span class="lineNoCov">          0 :   fLDC(qadm.fLDC),</span>
<span class="lineNum">     115 </span><span class="lineNoCov">          0 :   fSDDhRawsTask(qadm.fSDDhRawsTask),</span>
<span class="lineNum">     116 </span><span class="lineNoCov">          0 :   fSDDhDigitsTask(qadm.fSDDhDigitsTask),</span>
<span class="lineNum">     117 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask(qadm.fSDDhRecPointsTask),</span>
<span class="lineNum">     118 </span><span class="lineNoCov">          0 :   fOnlineOffsetRaws(qadm.fOnlineOffsetRaws),</span>
<span class="lineNum">     119 </span><span class="lineNoCov">          0 :   fOnlineOffsetRecPoints(qadm.fOnlineOffsetRecPoints),</span>
<span class="lineNum">     120 </span><span class="lineNoCov">          0 :   fGenRawsOffset(qadm.fGenRawsOffset),</span>
<span class="lineNum">     121 </span><span class="lineNoCov">          0 :   fGenDigitsOffset(qadm.fGenDigitsOffset),</span>
<span class="lineNum">     122 </span><span class="lineNoCov">          0 :   fGenRecPointsOffset(qadm.fGenRecPointsOffset),</span>
<span class="lineNum">     123 </span><span class="lineNoCov">          0 :   fTimeBinSize(qadm.fTimeBinSize),</span>
<span class="lineNum">     124 </span><span class="lineNoCov">          0 :   fDDLModuleMap(qadm.fDDLModuleMap),</span>
<span class="lineNum">     125 </span><span class="lineNoCov">          0 :   fCalibration(qadm.fCalibration),</span>
<span class="lineNum">     126 </span><span class="lineNoCov">          0 :   fHistoCalibration(qadm.fHistoCalibration),</span>
<span class="lineNum">     127 </span><span class="lineNoCov">          0 :   fPulserRun(qadm.fPulserRun)</span>
<span class="lineNum">     128 </span><span class="lineNoCov">          0 : {</span>
<span class="lineNum">     129 </span>            :   //copy ctor 
<span class="lineNum">     130 </span><span class="lineNoCov">          0 :   fAliITSQADataMakerRec-&gt;SetName((const char*)qadm.fAliITSQADataMakerRec-&gt;GetName()) ; </span>
<span class="lineNum">     131 </span><span class="lineNoCov">          0 :   fAliITSQADataMakerRec-&gt;SetTitle((const char*)qadm.fAliITSQADataMakerRec-&gt;GetTitle());</span>
<span class="lineNum">     132 </span>            :   //fDDLModuleMap=NULL;
<span class="lineNum">     133 </span><span class="lineNoCov">          0 : }</span>
<a name="134"><span class="lineNum">     134 </span>            : </a>
<span class="lineNum">     135 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     136 </span><span class="lineNoCov">          0 : AliITSQASDDDataMakerRec::~AliITSQASDDDataMakerRec(){</span>
<span class="lineNum">     137 </span>            :   // destructor
<span class="lineNum">     138 </span>            :   //if(fDDLModuleMap) delete fDDLModuleMap;
<span class="lineNum">     139 </span><span class="lineNoCov">          0 :   if(fHistoCalibration){delete fHistoCalibration; fHistoCalibration=NULL;}</span>
<a name="140"><span class="lineNum">     140 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     141 </span>            : //__________________________________________________________________
<span class="lineNum">     142 </span>            : AliITSQASDDDataMakerRec&amp; AliITSQASDDDataMakerRec::operator = (const AliITSQASDDDataMakerRec&amp; qac )
<span class="lineNum">     143 </span>            : {
<span class="lineNum">     144 </span>            :   // Equal operator.
<span class="lineNum">     145 </span><span class="lineNoCov">          0 :   this-&gt;~AliITSQASDDDataMakerRec();</span>
<span class="lineNum">     146 </span><span class="lineNoCov">          0 :   new(this) AliITSQASDDDataMakerRec(qac);</span>
<span class="lineNum">     147 </span><span class="lineNoCov">          0 :   return *this;</span>
<span class="lineNum">     148 </span><span class="lineNoCov">          0 : }</span>
<a name="149"><span class="lineNum">     149 </span>            : </a>
<span class="lineNum">     150 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     151 </span>            : void AliITSQASDDDataMakerRec::StartOfDetectorCycle()
<span class="lineNum">     152 </span>            : {
<span class="lineNum">     153 </span>            : 
<span class="lineNum">     154 </span>            :   //Start of a QA cycle
<span class="lineNum">     155 </span>            :   //
<span class="lineNum">     156 </span><span class="lineNoCov">          0 :   AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;Start of SDD Cycle with event specie %s for task %s\n&quot;,AliRecoParam::GetEventSpecieName(fAliITSQADataMakerRec-&gt;GetEventSpecie()),AliQAv1::GetTaskName(fAliITSQADataMakerRec-&gt;GetTaskIndexSelected()).Data()));</span>
<span class="lineNum">     157 </span><span class="lineNoCov">          0 :   if(!fCalibration) {</span>
<span class="lineNum">     158 </span><span class="lineNoCov">          0 :     CreateTheCalibration();</span>
<span class="lineNum">     159 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     160 </span>            : 
<span class="lineNum">     161 </span><span class="lineNoCov">          0 :   if(fAliITSQADataMakerRec-&gt;GetEventSpecie()==0) return;</span>
<span class="lineNum">     162 </span>            : 
<span class="lineNum">     163 </span>            :   //Detector specific actions at start of cycle
<span class="lineNum">     164 </span><span class="lineNoCov">          0 :   if(fAliITSQADataMakerRec-&gt;GetTaskIndexSelected()==AliQAv1::kRAWS){</span>
<span class="lineNum">     165 </span><span class="lineNoCov">          0 :     AliDebug(AliQAv1::GetQADebugLevel(),&quot;AliITSQADM::Start of SDD Cycle\n&quot;);</span>
<span class="lineNum">     166 </span><span class="lineNoCov">          0 :     if(fAliITSQADataMakerRec-&gt;ListExists(AliQAv1::kRAWS)==kFALSE)return;</span>
<span class="lineNum">     167 </span>            :     //
<span class="lineNum">     168 </span><span class="lineNoCov">          0 :     int offsRW = fGenRawsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     169 </span><span class="lineNoCov">          0 :     AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;Reset of Raw Data normalized histograms with eventspecie %s &quot;,AliRecoParam::GetEventSpecieName(fAliITSQADataMakerRec-&gt;GetEventSpecie())));</span>
<span class="lineNum">     170 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRawsData(kSDDRawDataCheck+offsRW );</span>
<span class="lineNum">     171 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRawsData(kSDDRawModPatternNorm+offsRW);</span>
<span class="lineNum">     172 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRawsData(kSDDRawLadModLay3Norm+offsRW);</span>
<span class="lineNum">     173 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRawsData(kSDDRawLadModLay4Norm+offsRW);</span>
<span class="lineNum">     174 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     175 </span>            : 
<span class="lineNum">     176 </span><span class="lineNoCov">          0 :   if(fAliITSQADataMakerRec-&gt;GetTaskIndexSelected()==AliQAv1::kRECPOINTS){</span>
<span class="lineNum">     177 </span><span class="lineNoCov">          0 :     if(fAliITSQADataMakerRec-&gt;ListExists(AliQAv1::kRECPOINTS)==kFALSE)return;</span>
<span class="lineNum">     178 </span>            :     
<span class="lineNum">     179 </span><span class="lineNoCov">          0 :     AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;Reset of RecPoints normalized histograms with eventspecie %s &quot;,AliRecoParam::GetEventSpecieName(fAliITSQADataMakerRec-&gt;GetEventSpecie())));</span>
<span class="lineNum">     180 </span><span class="lineNoCov">          0 :     int offsRP = fGenRecPointsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     181 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRecPointsData(kSDDRecpModPatternNorm+offsRP);</span>
<span class="lineNum">     182 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRecPointsData(kSDDRecpLadModLay3Norm+offsRP);</span>
<span class="lineNum">     183 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRecPointsData(kSDDRecpLadModLay4Norm+offsRP);</span>
<span class="lineNum">     184 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRecPointsData(kSDDRecpDataCheck+offsRP);</span>
<span class="lineNum">     185 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     186 </span><span class="lineNoCov">          0 : }</span>
<a name="187"><span class="lineNum">     187 </span>            : </a>
<span class="lineNum">     188 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     189 </span>            : void AliITSQASDDDataMakerRec::EndOfDetectorCycle(AliQAv1::TASKINDEX_t task, TObjArray** /*list*/)
<span class="lineNum">     190 </span>            : {
<span class="lineNum">     191 </span>            :   //end of a QA cycle
<span class="lineNum">     192 </span>            : 
<span class="lineNum">     193 </span><span class="lineNoCov">          0 :   AliDebug(AliQAv1::GetQADebugLevel(),&quot;AliITSDM instantiates checker with Run(AliQAv1::kITS, task, list)\n&quot;); </span>
<span class="lineNum">     194 </span>            :   
<span class="lineNum">     195 </span>            :   Double_t nGoodAnodesTot= 0.;
<span class="lineNum">     196 </span>            :   Double_t nGoodAnodesL3=0.;
<span class="lineNum">     197 </span>            :   Double_t nGoodAnodesL4=0.;
<span class="lineNum">     198 </span><span class="lineNoCov">          0 :   int offsRW = fGenRawsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     199 </span><span class="lineNoCov">          0 :   int offsRP = fGenRecPointsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     200 </span>            :   //
<span class="lineNum">     201 </span><span class="lineNoCov">          0 :   if(fHistoCalibration){</span>
<span class="lineNum">     202 </span><span class="lineNoCov">          0 :     nGoodAnodesTot= ((TH1F*)(fHistoCalibration-&gt;At(0)))-&gt;Integral();</span>
<span class="lineNum">     203 </span><span class="lineNoCov">          0 :     nGoodAnodesL3=((TH2F*)(fHistoCalibration-&gt;At(1)))-&gt;Integral();</span>
<span class="lineNum">     204 </span><span class="lineNoCov">          0 :     nGoodAnodesL4=((TH2F*)(fHistoCalibration-&gt;At(2)))-&gt;Integral();</span>
<span class="lineNum">     205 </span><span class="lineNoCov">          0 :     AliInfo(Form(&quot;Number of good anodes: Lay3=%.0f   Lay4=%.0f   Tot=%.0f&quot;,nGoodAnodesL3,nGoodAnodesL4,nGoodAnodesTot));</span>
<span class="lineNum">     206 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     207 </span><span class="lineNoCov">          0 :   else{ AliWarning(&quot;Calibration TObjArray is NULL! No Normalization and calibtaion plot will be filled\n&quot;);}</span>
<span class="lineNum">     208 </span>            :   //
<span class="lineNum">     209 </span><span class="lineNoCov">          0 :   for (int trCl=-1;trCl&lt;fAliITSQADataMakerRec-&gt;GetNTrigClasses();trCl++) { // RS Loop over all trigger classes (+ global counter, -1)</span>
<span class="lineNum">     210 </span>            :     //
<span class="lineNum">     211 </span><span class="lineNoCov">          0 :     if(task==AliQAv1::kRAWS) {</span>
<span class="lineNum">     212 </span><span class="lineNoCov">          0 :       TObjArray &amp;harr = *fAliITSQADataMakerRec-&gt;GetRawsDataOfTrigClass(trCl);</span>
<span class="lineNum">     213 </span><span class="lineNoCov">          0 :       Int_t nEvent = GetNumberOfEvents(AliQAv1::kRAWS,trCl);</span>
<span class="lineNum">     214 </span><span class="lineNoCov">          0 :       TH1* h10 = (TH1*)harr[kSDDRawDataCheck+offsRW];</span>
<span class="lineNum">     215 </span><span class="lineNoCov">          0 :       if(nEvent==0) if(h10) nEvent=h10-&gt;GetBinContent(1);</span>
<span class="lineNum">     216 </span>            :       Double_t countsMod=0.;
<span class="lineNum">     217 </span>            :       Double_t countsLay3=0.;
<span class="lineNum">     218 </span>            :       Double_t countsLay4=0.;
<span class="lineNum">     219 </span><span class="lineNoCov">          0 :       if(harr[kSDDRawModPattern+offsRW]) countsMod=((TH1*)harr[kSDDRawModPattern+offsRW])-&gt;GetEntries();</span>
<span class="lineNum">     220 </span><span class="lineNoCov">          0 :       if(harr[kSDDRawLadModLay3+offsRW]) countsLay3=((TH1*)harr[kSDDRawLadModLay3+offsRW])-&gt;GetEntries();</span>
<span class="lineNum">     221 </span><span class="lineNoCov">          0 :       if(harr[kSDDRawLadModLay4+offsRW]) countsLay4=((TH1*)harr[kSDDRawLadModLay4+offsRW])-&gt;GetEntries();</span>
<span class="lineNum">     222 </span>            :       Double_t normCountsMod=0.;
<span class="lineNum">     223 </span>            :       Double_t normCountsLay3=0.;
<span class="lineNum">     224 </span>            :       Double_t normCountsLay4=0.;
<span class="lineNum">     225 </span><span class="lineNoCov">          0 :       if(nEvent!=0) {</span>
<span class="lineNum">     226 </span><span class="lineNoCov">          0 :         if(nGoodAnodesTot!=0.) normCountsMod = countsMod/(nGoodAnodesTot*nEvent);</span>
<span class="lineNum">     227 </span><span class="lineNoCov">          0 :         if(nGoodAnodesL3!=0.) normCountsLay3 = countsLay3/(nGoodAnodesL3*nEvent);</span>
<span class="lineNum">     228 </span><span class="lineNoCov">          0 :         if(nGoodAnodesL4!=0.) normCountsLay4 = countsLay4/(nGoodAnodesL4*nEvent);</span>
<span class="lineNum">     229 </span><span class="lineNoCov">          0 :         if(fHistoCalibration){</span>
<span class="lineNum">     230 </span><span class="lineNoCov">          0 :           if (harr[kSDDRawModPattern+offsRW] &amp;&amp; harr[kSDDRawModPatternNorm+offsRW]){</span>
<span class="lineNum">     231 </span><span class="lineNoCov">          0 :             ((TH1*)harr[kSDDRawModPatternNorm+offsRW])-&gt;Divide( (TH1*)harr[kSDDRawModPattern+offsRW],((TH1F*)(fHistoCalibration-&gt;At(0))),1.,nEvent);</span>
<span class="lineNum">     232 </span><span class="lineNoCov">          0 :           }</span>
<span class="lineNum">     233 </span><span class="lineNoCov">          0 :           if (harr[kSDDRawLadModLay3+offsRW] &amp;&amp; harr[kSDDRawLadModLay3Norm+offsRW]){</span>
<span class="lineNum">     234 </span><span class="lineNoCov">          0 :             ((TH2*)harr[kSDDRawLadModLay3Norm+offsRW])-&gt;Divide( (TH2*)harr[kSDDRawLadModLay3+offsRW],((TH2F*)(fHistoCalibration-&gt;At(1))),1.,nEvent);</span>
<span class="lineNum">     235 </span><span class="lineNoCov">          0 :           }</span>
<span class="lineNum">     236 </span><span class="lineNoCov">          0 :           if (harr[kSDDRawLadModLay4+offsRW] &amp;&amp; harr[kSDDRawLadModLay4Norm+offsRW]){</span>
<span class="lineNum">     237 </span><span class="lineNoCov">          0 :             ((TH2*)harr[kSDDRawLadModLay4Norm+offsRW])-&gt;Divide( (TH2*)harr[kSDDRawLadModLay4+offsRW],((TH2F*)(fHistoCalibration-&gt;At(2))),1.,nEvent);</span>
<span class="lineNum">     238 </span><span class="lineNoCov">          0 :           }</span>
<span class="lineNum">     239 </span>            :         }
<span class="lineNum">     240 </span>            :       }
<span class="lineNum">     241 </span><span class="lineNoCov">          0 :       if (h10){</span>
<span class="lineNum">     242 </span><span class="lineNoCov">          0 :         h10-&gt;SetBinContent(1,nEvent);</span>
<span class="lineNum">     243 </span><span class="lineNoCov">          0 :         h10-&gt;SetBinContent(2,normCountsMod);</span>
<span class="lineNum">     244 </span><span class="lineNoCov">          0 :         h10-&gt;SetBinContent(3,normCountsLay3);</span>
<span class="lineNum">     245 </span><span class="lineNoCov">          0 :         h10-&gt;SetBinContent(4,normCountsLay4);</span>
<span class="lineNum">     246 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     247 </span>            : 
<span class="lineNum">     248 </span>            :       //
<span class="lineNum">     249 </span><span class="lineNoCov">          0 :       if(fHistoCalibration){</span>
<span class="lineNum">     250 </span><span class="lineNoCov">          0 :         TH1* hact3 = (TH1*)harr[kActiveModLay3+offsRW];</span>
<span class="lineNum">     251 </span><span class="lineNoCov">          0 :         if(hact3){</span>
<span class="lineNum">     252 </span><span class="lineNoCov">          0 :           TH1* hcal3 = (TH1*)fHistoCalibration-&gt;At(1);</span>
<span class="lineNum">     253 </span><span class="lineNoCov">          0 :           for(Int_t ii=1; ii&lt;hact3-&gt;GetNbinsX()+1;ii++) {</span>
<span class="lineNum">     254 </span><span class="lineNoCov">          0 :             for(Int_t jj=1; jj&lt;hact3-&gt;GetNbinsY()+1;jj++) {             </span>
<span class="lineNum">     255 </span><span class="lineNoCov">          0 :               if( hcal3-&gt;GetBinContent(ii,jj) &gt; 0. ) hact3-&gt;SetBinContent(ii,jj,1);</span>
<span class="lineNum">     256 </span><span class="lineNoCov">          0 :               else hact3-&gt;SetBinContent(ii,jj,0);</span>
<span class="lineNum">     257 </span>            :             }
<span class="lineNum">     258 </span>            :           }
<span class="lineNum">     259 </span><span class="lineNoCov">          0 :           hact3-&gt;SetTitle(Form(&quot;SDDCalibL3 - Pulser Run %d&quot;,fPulserRun));</span>
<span class="lineNum">     260 </span><span class="lineNoCov">          0 :         }</span>
<span class="lineNum">     261 </span><span class="lineNoCov">          0 :         TH1* hact4 = (TH1*)harr[kActiveModLay4+offsRW];</span>
<span class="lineNum">     262 </span><span class="lineNoCov">          0 :         if(hact4){</span>
<span class="lineNum">     263 </span><span class="lineNoCov">          0 :           TH1* hcal4 = (TH1*)fHistoCalibration-&gt;At(2);</span>
<span class="lineNum">     264 </span><span class="lineNoCov">          0 :           for(Int_t ii=1; ii&lt;hact4-&gt;GetNbinsX()+1;ii++) {</span>
<span class="lineNum">     265 </span><span class="lineNoCov">          0 :             for(Int_t jj=1; jj&lt;hact4-&gt;GetNbinsY()+1;jj++) {             </span>
<span class="lineNum">     266 </span><span class="lineNoCov">          0 :               if( hcal4-&gt;GetBinContent(ii,jj) &gt; 0. ) hact4-&gt;SetBinContent(ii,jj,1);</span>
<span class="lineNum">     267 </span><span class="lineNoCov">          0 :               else hact4-&gt;SetBinContent(ii,jj,0);</span>
<span class="lineNum">     268 </span>            :             }
<span class="lineNum">     269 </span>            :           }
<span class="lineNum">     270 </span><span class="lineNoCov">          0 :           hact4-&gt;SetTitle(Form(&quot;SDDCalibL4 - Pulser Run %d&quot;,fPulserRun));</span>
<span class="lineNum">     271 </span><span class="lineNoCov">          0 :         }</span>
<span class="lineNum">     272 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     273 </span><span class="lineNoCov">          0 :     }//end raws</span>
<span class="lineNum">     274 </span>            : 
<span class="lineNum">     275 </span>            : 
<span class="lineNum">     276 </span><span class="lineNoCov">          0 :     if(task==AliQAv1::kRECPOINTS) {</span>
<span class="lineNum">     277 </span><span class="lineNoCov">          0 :       TObjArray &amp;harr = *fAliITSQADataMakerRec-&gt;GetRecPointsDataOfTrigClass(trCl);</span>
<span class="lineNum">     278 </span><span class="lineNoCov">          0 :       Int_t nEventRP = GetNumberOfEvents(AliQAv1::kRECPOINTS,trCl);</span>
<span class="lineNum">     279 </span><span class="lineNoCov">          0 :       TH1* htmp27 = (TH1*)harr[kSDDRecpDataCheck+offsRP];</span>
<span class="lineNum">     280 </span><span class="lineNoCov">          0 :       if(nEventRP==0) if(htmp27) nEventRP=htmp27-&gt;GetBinContent(1);</span>
<span class="lineNum">     281 </span>            :       Double_t nrecpMod=0.;
<span class="lineNum">     282 </span>            :       Double_t nrecpLay3=0.;
<span class="lineNum">     283 </span>            :       Double_t nrecpLay4=0.;
<span class="lineNum">     284 </span><span class="lineNoCov">          0 :       if(harr[kSDDRecpModPattern+offsRP]) nrecpMod=((TH1*)harr[kSDDRecpModPattern+offsRP])-&gt;GetEntries();</span>
<span class="lineNum">     285 </span><span class="lineNoCov">          0 :       if(harr[kSDDRecpLadModLay3+offsRP]) nrecpLay3=((TH1*)harr[kSDDRecpLadModLay3+offsRP])-&gt;GetEntries();</span>
<span class="lineNum">     286 </span><span class="lineNoCov">          0 :       if(harr[kSDDRecpLadModLay4+offsRP]) nrecpLay4=((TH1*)harr[kSDDRecpLadModLay4+offsRP])-&gt;GetEntries();</span>
<span class="lineNum">     287 </span>            :       Double_t normNrecpMod=0.;
<span class="lineNum">     288 </span>            :       Double_t normNrecpLay3=0.;
<span class="lineNum">     289 </span>            :       Double_t normNrecpLay4=0.;
<span class="lineNum">     290 </span><span class="lineNoCov">          0 :       if(nEventRP!=0) {</span>
<span class="lineNum">     291 </span><span class="lineNoCov">          0 :         if(nGoodAnodesTot!=0.) normNrecpMod = nrecpMod/(nGoodAnodesTot*nEventRP);</span>
<span class="lineNum">     292 </span><span class="lineNoCov">          0 :         if(nGoodAnodesL3!=0.) normNrecpLay3 = nrecpLay3/(nGoodAnodesL3*nEventRP);</span>
<span class="lineNum">     293 </span><span class="lineNoCov">          0 :         if(nGoodAnodesL4!=0.) normNrecpLay4 = nrecpLay4/(nGoodAnodesL4*nEventRP);</span>
<span class="lineNum">     294 </span><span class="lineNoCov">          0 :         if(fHistoCalibration){</span>
<span class="lineNum">     295 </span><span class="lineNoCov">          0 :           if (harr[kSDDRecpModPattern+offsRP] &amp;&amp; harr[kSDDRecpModPatternNorm+offsRP]){</span>
<span class="lineNum">     296 </span><span class="lineNoCov">          0 :             ((TH1*)harr[kSDDRecpModPatternNorm+offsRP])-&gt;Divide( (TH1*)harr[kSDDRecpModPattern+offsRP],((TH1F*)(fHistoCalibration-&gt;At(0))),1.,nEventRP);</span>
<span class="lineNum">     297 </span><span class="lineNoCov">          0 :           }</span>
<span class="lineNum">     298 </span><span class="lineNoCov">          0 :           if (harr[kSDDRecpLadModLay3+offsRP] &amp;&amp; harr[kSDDRecpLadModLay3Norm+offsRP]){</span>
<span class="lineNum">     299 </span><span class="lineNoCov">          0 :             ((TH2*)harr[kSDDRecpLadModLay3Norm+offsRP])-&gt;Divide( (TH2*)harr[kSDDRecpLadModLay3+offsRP],((TH2F*)(fHistoCalibration-&gt;At(1))),1.,nEventRP);</span>
<span class="lineNum">     300 </span><span class="lineNoCov">          0 :           }</span>
<span class="lineNum">     301 </span><span class="lineNoCov">          0 :           if (harr[kSDDRecpLadModLay4+offsRP] &amp;&amp; harr[kSDDRecpLadModLay4Norm+offsRP]){</span>
<span class="lineNum">     302 </span><span class="lineNoCov">          0 :             ((TH2*)harr[kSDDRecpLadModLay4Norm+offsRP])-&gt;Divide( (TH2*)harr[kSDDRecpLadModLay4+offsRP],((TH2F*)(fHistoCalibration-&gt;At(2))),1.,nEventRP);</span>
<span class="lineNum">     303 </span><span class="lineNoCov">          0 :           }</span>
<span class="lineNum">     304 </span>            :         }
<span class="lineNum">     305 </span>            :       }
<span class="lineNum">     306 </span><span class="lineNoCov">          0 :       if (htmp27) {</span>
<span class="lineNum">     307 </span><span class="lineNoCov">          0 :         htmp27-&gt;SetBinContent(1,nEventRP);</span>
<span class="lineNum">     308 </span><span class="lineNoCov">          0 :         htmp27-&gt;SetBinContent(2,normNrecpMod);</span>
<span class="lineNum">     309 </span><span class="lineNoCov">          0 :         htmp27-&gt;SetBinContent(3,normNrecpLay3);</span>
<span class="lineNum">     310 </span><span class="lineNoCov">          0 :         htmp27-&gt;SetBinContent(4,normNrecpLay4);</span>
<span class="lineNum">     311 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     312 </span>            : 
<span class="lineNum">     313 </span><span class="lineNoCov">          0 :       FillRelativeOccupancyHistos((TH2*)harr[kSDDRecpLadModLay3Norm+offsRP],(TH1*)harr[kSDDRecpRelOccLay3+offsRP]);</span>
<span class="lineNum">     314 </span><span class="lineNoCov">          0 :       FillRelativeOccupancyHistos((TH2*)harr[kSDDRecpLadModLay4Norm+offsRP],(TH1*)harr[kSDDRecpRelOccLay4+offsRP]);</span>
<span class="lineNum">     315 </span>            :       
<span class="lineNum">     316 </span>            :       // RecPoints 2 Raws Ratio
<span class="lineNum">     317 </span><span class="lineNoCov">          0 :       if(fAliITSQADataMakerRec-&gt;ListExists(AliQAv1::kRAWS)==kTRUE) {</span>
<span class="lineNum">     318 </span><span class="lineNoCov">          0 :         TH2* hratio3  = (TH2*)harr[kSDDRecpToRawLay3+offsRP];</span>
<span class="lineNum">     319 </span><span class="lineNoCov">          0 :         TH2* hrp3  = (TH2*)harr[kSDDRecpLadModLay3+offsRP];</span>
<span class="lineNum">     320 </span><span class="lineNoCov">          0 :         TH2* hrw3 =  (TH2*)fAliITSQADataMakerRec-&gt;GetRawsData(kSDDRawLadModLay3 + offsRW,trCl);</span>
<span class="lineNum">     321 </span><span class="lineNoCov">          0 :         FillRecToRaw(hrp3,hrw3,hratio3);</span>
<span class="lineNum">     322 </span><span class="lineNoCov">          0 :         TH2* hratio4  = (TH2*)harr[kSDDRecpToRawLay4+offsRP];</span>
<span class="lineNum">     323 </span><span class="lineNoCov">          0 :         TH2* hrp4  = (TH2*)harr[kSDDRecpLadModLay4+offsRP];</span>
<span class="lineNum">     324 </span><span class="lineNoCov">          0 :         TH2* hrw4 =  (TH2*)fAliITSQADataMakerRec-&gt;GetRawsData(kSDDRawLadModLay4 + offsRW,trCl);</span>
<span class="lineNum">     325 </span><span class="lineNoCov">          0 :         FillRecToRaw(hrp4,hrw4,hratio4);</span>
<span class="lineNum">     326 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     327 </span><span class="lineNoCov">          0 :       else{AliWarning(&quot;Ratio between RecPoints and Raws not executed because the raw list has not been created\n&quot;);}</span>
<span class="lineNum">     328 </span><span class="lineNoCov">          0 :     }//end recpoints</span>
<span class="lineNum">     329 </span>            :     //
<span class="lineNum">     330 </span>            :   } // RS Loop over all trigger classes (+ global counter, -1)
<span class="lineNum">     331 </span>            :   //
<span class="lineNum">     332 </span><span class="lineNoCov">          0 : }</span>
<a name="333"><span class="lineNum">     333 </span>            : </a>
<span class="lineNum">     334 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     335 </span>            : Int_t AliITSQASDDDataMakerRec::InitRaws()
<span class="lineNum">     336 </span>            : { 
<span class="lineNum">     337 </span>            : 
<span class="lineNum">     338 </span>            :   // Initialization for RAW data - SDD -
<span class="lineNum">     339 </span>            :   const Bool_t expert   = kTRUE ; 
<span class="lineNum">     340 </span>            :   const Bool_t saveCorr = kTRUE ; 
<span class="lineNum">     341 </span>            :   const Bool_t image    = kTRUE ; 
<span class="lineNum">     342 </span>            : 
<span class="lineNum">     343 </span>            :   Int_t rv = 0 ; 
<span class="lineNum">     344 </span><span class="lineNoCov">          0 :   Int_t lay, lad, det;</span>
<span class="lineNum">     345 </span>            : 
<span class="lineNum">     346 </span><span class="lineNoCov">          0 :   int offsRW = fGenRawsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     347 </span><span class="lineNoCov">          0 :   fSDDhRawsTask = 0;</span>
<span class="lineNum">     348 </span><span class="lineNoCov">          0 :   if(fkOnline){AliInfo(&quot;Book Online Histograms for SDD\n&quot;);}</span>
<span class="lineNum">     349 </span><span class="lineNoCov">          0 :   else {AliInfo(&quot;Book Offline Histograms for SDD\n &quot;);}</span>
<span class="lineNum">     350 </span>            : 
<span class="lineNum">     351 </span><span class="lineNoCov">          0 :   TPaveText *paveText0=new TPaveText(0.3,0.88,0.9,0.99,&quot;NDC&quot;);</span>
<span class="lineNum">     352 </span><span class="lineNoCov">          0 :   paveText0-&gt;AddText(&quot;&quot;);</span>
<span class="lineNum">     353 </span><span class="lineNoCov">          0 :   paveText0-&gt;SetFillColor(kMagenta+2);</span>
<span class="lineNum">     354 </span><span class="lineNoCov">          0 :   paveText0-&gt;SetTextColor(kWhite);</span>
<span class="lineNum">     355 </span><span class="lineNoCov">          0 :   paveText0-&gt;SetBorderSize(1);</span>
<span class="lineNum">     356 </span><span class="lineNoCov">          0 :   paveText0-&gt;SetLineWidth(1);        </span>
<span class="lineNum">     357 </span>            :   
<span class="lineNum">     358 </span><span class="lineNoCov">          0 :   TH1D *h0 = new TH1D(&quot;SDDModPattern&quot;,&quot;HW Modules pattern&quot;,fgknSDDmodules,239.5,499.5); //0</span>
<span class="lineNum">     359 </span><span class="lineNoCov">          0 :   h0-&gt;GetXaxis()-&gt;SetTitle(&quot;Module Number&quot;);</span>
<span class="lineNum">     360 </span><span class="lineNoCov">          0 :   h0-&gt;GetYaxis()-&gt;SetTitle(&quot;Counts&quot;);</span>
<span class="lineNum">     361 </span><span class="lineNoCov">          0 :   h0-&gt;SetOption(&quot;bar1&quot;);</span>
<span class="lineNum">     362 </span><span class="lineNoCov">          0 :   h0-&gt;SetBarOffset(0.01);</span>
<span class="lineNum">     363 </span><span class="lineNoCov">          0 :   h0-&gt;SetBarWidth(0.95);</span>
<span class="lineNum">     364 </span><span class="lineNoCov">          0 :   h0-&gt;SetFillColor(45);</span>
<span class="lineNum">     365 </span><span class="lineNoCov">          0 :   h0-&gt;GetListOfFunctions()-&gt;Add(paveText0);</span>
<span class="lineNum">     366 </span>            :         
<span class="lineNum">     367 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(h0,kSDDRawModPattern+offsRW, expert, !image, !saveCorr);</span>
<span class="lineNum">     368 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     369 </span>            :         
<span class="lineNum">     370 </span><span class="lineNoCov">          0 :   TPaveText *paveText1=new TPaveText(0.3,0.88,0.9,0.99,&quot;NDC&quot;);</span>
<span class="lineNum">     371 </span><span class="lineNoCov">          0 :   paveText1-&gt;AddText(&quot;&quot;);</span>
<span class="lineNum">     372 </span><span class="lineNoCov">          0 :   paveText1-&gt;SetFillColor(kMagenta+2);</span>
<span class="lineNum">     373 </span><span class="lineNoCov">          0 :   paveText1-&gt;SetTextColor(kWhite);</span>
<span class="lineNum">     374 </span><span class="lineNoCov">          0 :   paveText1-&gt;SetBorderSize(1);</span>
<span class="lineNum">     375 </span><span class="lineNoCov">          0 :   paveText1-&gt;SetLineWidth(1);</span>
<span class="lineNum">     376 </span>            : 
<span class="lineNum">     377 </span>            :   //zPhi distribution using ladder and modules numbers
<span class="lineNum">     378 </span><span class="lineNoCov">          0 :   TH2D *hphil3 = new TH2D(&quot;SDDphizL3&quot;,&quot;SDD #varphiz Layer3 &quot;,12,0.5,6.5,14,0.5,14.5);//1</span>
<span class="lineNum">     379 </span><span class="lineNoCov">          0 :   hphil3-&gt;GetXaxis()-&gt;SetTitle(&quot;z[Module Number L3 ]&quot;);</span>
<span class="lineNum">     380 </span><span class="lineNoCov">          0 :   hphil3-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[ Ladder Number L3]&quot;);</span>
<span class="lineNum">     381 </span><span class="lineNoCov">          0 :   hphil3-&gt;SetStats(0);</span>
<span class="lineNum">     382 </span><span class="lineNoCov">          0 :   hphil3-&gt;GetListOfFunctions()-&gt;Add(paveText1);</span>
<span class="lineNum">     383 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hphil3,kSDDRawLadModLay3+offsRW, !expert, image, !saveCorr); </span>
<span class="lineNum">     384 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     385 </span>            :  
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :   TPaveText *paveText2=new TPaveText(0.3,0.88,0.9,0.99,&quot;NDC&quot;);</span>
<span class="lineNum">     387 </span><span class="lineNoCov">          0 :   paveText2-&gt;AddText(&quot;&quot;);</span>
<span class="lineNum">     388 </span><span class="lineNoCov">          0 :   paveText2-&gt;SetFillColor(kMagenta+2);</span>
<span class="lineNum">     389 </span><span class="lineNoCov">          0 :   paveText2-&gt;SetTextColor(kWhite);</span>
<span class="lineNum">     390 </span><span class="lineNoCov">          0 :   paveText2-&gt;SetBorderSize(1);</span>
<span class="lineNum">     391 </span><span class="lineNoCov">          0 :   paveText2-&gt;SetLineWidth(1);</span>
<span class="lineNum">     392 </span>            : 
<span class="lineNum">     393 </span><span class="lineNoCov">          0 :   TH2D *hphil4 = new TH2D(&quot;SDDphizL4&quot;,&quot;SDD #varphiz Layer4 &quot;,16,0.5,8.5,22,0.5,22.5); //2</span>
<span class="lineNum">     394 </span><span class="lineNoCov">          0 :   hphil4-&gt;GetXaxis()-&gt;SetTitle(&quot;z[Module Number L4]&quot;);</span>
<span class="lineNum">     395 </span><span class="lineNoCov">          0 :   hphil4-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[Ladder Number L4]&quot;);</span>
<span class="lineNum">     396 </span><span class="lineNoCov">          0 :   hphil4-&gt;SetStats(0);</span>
<span class="lineNum">     397 </span><span class="lineNoCov">          0 :   hphil4-&gt;GetListOfFunctions()-&gt;Add(paveText2);</span>
<span class="lineNum">     398 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hphil4,kSDDRawLadModLay4+offsRW, !expert, image, !saveCorr); </span>
<span class="lineNum">     399 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     400 </span>            :         
<span class="lineNum">     401 </span>            :   //normalized histograms
<span class="lineNum">     402 </span><span class="lineNoCov">          0 :   TH1F *h0norm = new TH1F(&quot;SDDModPatternNORM&quot;,&quot;NORM HW Modules pattern&quot;,fgknSDDmodules,239.5,499.5); //3</span>
<span class="lineNum">     403 </span><span class="lineNoCov">          0 :   h0norm-&gt;GetXaxis()-&gt;SetTitle(&quot;Module Number&quot;);</span>
<span class="lineNum">     404 </span><span class="lineNoCov">          0 :   h0norm-&gt;GetYaxis()-&gt;SetTitle(&quot;Counts&quot;);</span>
<span class="lineNum">     405 </span><span class="lineNoCov">          0 :   h0norm-&gt;SetOption(&quot;bar1&quot;);</span>
<span class="lineNum">     406 </span><span class="lineNoCov">          0 :   h0norm-&gt;SetBarOffset(0.01);</span>
<span class="lineNum">     407 </span><span class="lineNoCov">          0 :   h0norm-&gt;SetBarWidth(0.95);</span>
<span class="lineNum">     408 </span><span class="lineNoCov">          0 :   h0norm-&gt;SetFillColor(46);</span>
<span class="lineNum">     409 </span>            :   //h0norm-&gt;SetStats(0);
<span class="lineNum">     410 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(h0norm,kSDDRawModPatternNorm+offsRW, expert, !image, !saveCorr);</span>
<span class="lineNum">     411 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     412 </span>            :   
<span class="lineNum">     413 </span>            :   //zPhi distribution using ladder and modules numbers
<span class="lineNum">     414 </span><span class="lineNoCov">          0 :   TH2F *hphil3norm = new TH2F(&quot;SDDphizL3NORM&quot;,&quot;NORM SDD #varphiz Layer3 &quot;,12,0.5,6.5,14,0.5,14.5);//4</span>
<span class="lineNum">     415 </span><span class="lineNoCov">          0 :   hphil3norm-&gt;GetXaxis()-&gt;SetTitle(&quot;z[Module Number L3 ]&quot;);</span>
<span class="lineNum">     416 </span><span class="lineNoCov">          0 :   hphil3norm-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[ Ladder Number L3]&quot;);</span>
<span class="lineNum">     417 </span><span class="lineNoCov">          0 :   hphil3norm-&gt;SetStats(0);</span>
<span class="lineNum">     418 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hphil3norm,kSDDRawLadModLay3Norm+offsRW, expert, !image, !saveCorr); </span>
<span class="lineNum">     419 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     420 </span>            :   
<span class="lineNum">     421 </span><span class="lineNoCov">          0 :   TH2F *hphil4norm = new TH2F(&quot;SDDphizL4NORM&quot;,&quot;NORM SDD #varphiz Layer4 &quot;,16,0.5,8.5,22,0.5,22.5); //5</span>
<span class="lineNum">     422 </span><span class="lineNoCov">          0 :   hphil4norm-&gt;GetXaxis()-&gt;SetTitle(&quot;z[Module Number L4]&quot;);</span>
<span class="lineNum">     423 </span><span class="lineNoCov">          0 :   hphil4norm-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[Ladder Number L4]&quot;);</span>
<span class="lineNum">     424 </span><span class="lineNoCov">          0 :   hphil4norm-&gt;SetStats(0);</span>
<span class="lineNum">     425 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hphil4norm,kSDDRawLadModLay4Norm+offsRW, expert, !image, !saveCorr); </span>
<span class="lineNum">     426 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     427 </span>            :         
<span class="lineNum">     428 </span>            :   // Histos with number of digits distributions (filled once per event)
<span class="lineNum">     429 </span><span class="lineNoCov">          0 :   Float_t digbins[201];</span>
<span class="lineNum">     430 </span><span class="lineNoCov">          0 :   digbins[0]=-0.5;</span>
<span class="lineNum">     431 </span><span class="lineNoCov">          0 :   for(Int_t ib=1; ib&lt;=200; ib++) digbins[ib]=digbins[ib-1]+(1&lt;&lt;(ib/15));</span>
<span class="lineNum">     432 </span><span class="lineNoCov">          0 :   Float_t modBins[fgknSDDmodules+1];</span>
<span class="lineNum">     433 </span><span class="lineNoCov">          0 :   for(Int_t ib=0; ib&lt;=fgknSDDmodules; ib++) modBins[ib]=239.5+ib;</span>
<span class="lineNum">     434 </span>            :   
<span class="lineNum">     435 </span><span class="lineNoCov">          0 :   TH1F *hTotDigits = new TH1F(&quot;SDDnOfDigits&quot;,&quot;SDD Total number of digits ; # of digits&quot;,200,digbins);</span>
<span class="lineNum">     436 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hTotDigits,kSDDNofDigits+offsRW, expert, !image, !saveCorr); //6  </span>
<span class="lineNum">     437 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     438 </span>            :   
<span class="lineNum">     439 </span><span class="lineNoCov">          0 :   TH2F *hDigitsPerModule = new TH2F(&quot;SDDnOfDigitsPerModule&quot;,&quot;SDD Digits vs module ; module ID ; # of digits&quot;, fgknSDDmodules,modBins,200,digbins);</span>
<span class="lineNum">     440 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hDigitsPerModule,kSDDNofDigitsVsMod+offsRW, expert, !image, !saveCorr); //7   </span>
<span class="lineNum">     441 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     442 </span>            :   
<span class="lineNum">     443 </span>            :   // active modules and drift regions
<span class="lineNum">     444 </span><span class="lineNoCov">          0 :   TH2F *hcalibl3 = new TH2F(&quot;SDDphizCalibL3&quot;,&quot;SDDCalibL3 &quot;,12,0.5,6.5,14,0.5,14.5);//8</span>
<span class="lineNum">     445 </span><span class="lineNoCov">          0 :   hcalibl3-&gt;GetXaxis()-&gt;SetTitle(&quot;z[Module Number L3]&quot;);</span>
<span class="lineNum">     446 </span><span class="lineNoCov">          0 :   hcalibl3-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[ Ladder Number L3]&quot;);</span>
<span class="lineNum">     447 </span><span class="lineNoCov">          0 :   hcalibl3-&gt;SetStats(0);</span>
<span class="lineNum">     448 </span><span class="lineNoCov">          0 :   hcalibl3-&gt;SetMaximum(2);</span>
<span class="lineNum">     449 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hcalibl3,kActiveModLay3+offsRW, !expert, image, !saveCorr); </span>
<span class="lineNum">     450 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     451 </span>            :   
<span class="lineNum">     452 </span><span class="lineNoCov">          0 :   TH2F *hcalibl4 = new TH2F(&quot;SDDphizCalibL4&quot;,&quot;SDDCalibL4 &quot;,16,0.5,8.5,22,0.5,22.5); //9</span>
<span class="lineNum">     453 </span><span class="lineNoCov">          0 :   hcalibl4-&gt;GetXaxis()-&gt;SetTitle(&quot;z[Module Number L4]&quot;);</span>
<span class="lineNum">     454 </span><span class="lineNoCov">          0 :   hcalibl4-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[Ladder Number L4]&quot;);</span>
<span class="lineNum">     455 </span><span class="lineNoCov">          0 :   hcalibl4-&gt;SetStats(0);</span>
<span class="lineNum">     456 </span><span class="lineNoCov">          0 :   hcalibl4-&gt;SetMaximum(2);</span>
<span class="lineNum">     457 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hcalibl4,kActiveModLay4+offsRW, !expert, image, !saveCorr); </span>
<span class="lineNum">     458 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++;</span>
<span class="lineNum">     459 </span>            : 
<span class="lineNum">     460 </span><span class="lineNoCov">          0 :   TH1F *hsummarydata = new TH1F(&quot;SDDRawDataCheck&quot;,&quot;SDDRawDataCheck&quot;,46,-0.5,45.5);//10 summary of raw data checks Non expert and image</span>
<span class="lineNum">     461 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetLabelSize(0.02);</span>
<span class="lineNum">     462 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetTickLength(0.01);</span>
<span class="lineNum">     463 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetNdivisions(110);</span>
<span class="lineNum">     464 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetTicks(&quot;-&quot;);</span>
<span class="lineNum">     465 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetYaxis()-&gt;SetLabelSize(0.02);</span>
<span class="lineNum">     466 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetYaxis()-&gt;SetTitleSize(0.02);</span>
<span class="lineNum">     467 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetYaxis()-&gt;SetTitleOffset(1.5);</span>
<span class="lineNum">     468 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetYaxis()-&gt;SetTitle(&quot;#events(norm) or #modules (m) or #drift regions (dr)&quot;);</span>
<span class="lineNum">     469 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;SetStats(0);</span>
<span class="lineNum">     470 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;SetMaximum(272);</span>
<span class="lineNum">     471 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;SetMinimum(0.);</span>
<span class="lineNum">     472 </span>            : 
<span class="lineNum">     473 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;SetOption(&quot;textbar1&quot;);</span>
<span class="lineNum">     474 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;SetBarOffset(0.01);</span>
<span class="lineNum">     475 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;SetBarWidth(0.95);</span>
<span class="lineNum">     476 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;SetFillColor(8);</span>
<span class="lineNum">     477 </span>            : 
<span class="lineNum">     478 </span>            :   //information about the events
<span class="lineNum">     479 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(1,&quot;Events&quot;);</span>
<span class="lineNum">     480 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(2,&quot;Ent_NORM&quot;);</span>
<span class="lineNum">     481 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(3,&quot;Ent_NORML3&quot;);</span>
<span class="lineNum">     482 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(4,&quot;Ent_NORML4&quot;);</span>
<span class="lineNum">     483 </span>            :   //all
<span class="lineNum">     484 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(5,&quot;m_act&quot;);</span>
<span class="lineNum">     485 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(6,&quot;m_fil&quot;);</span>
<span class="lineNum">     486 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(7,&quot;dr_act&quot;);</span>
<span class="lineNum">     487 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(8,&quot;dr_fil&quot;);</span>
<span class="lineNum">     488 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(9,&quot;m_exc&quot;);</span>
<span class="lineNum">     489 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(10,&quot;m_emp&quot;);</span>
<span class="lineNum">     490 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(11,&quot;dr_exc&quot;);</span>
<span class="lineNum">     491 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(12,&quot;dr_emp&quot;);</span>
<span class="lineNum">     492 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(13,&quot;m_exc-act&quot;);</span>
<span class="lineNum">     493 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(14,&quot;m_act-emp&quot;);</span>
<span class="lineNum">     494 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(15,&quot;dr_exc-act&quot;);</span>
<span class="lineNum">     495 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(16,&quot;dr_act-emp&quot;);</span>
<span class="lineNum">     496 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(17,&quot;m_overth&quot;);</span>
<span class="lineNum">     497 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(18,&quot;dr_overth&quot;);</span>
<span class="lineNum">     498 </span>            :   //l3
<span class="lineNum">     499 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(19,&quot;m_actl3&quot;);</span>
<span class="lineNum">     500 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(20,&quot;m_fill3&quot;);</span>
<span class="lineNum">     501 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(21,&quot;dr_actl3&quot;);</span>
<span class="lineNum">     502 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(22,&quot;dr_fill3&quot;);</span>
<span class="lineNum">     503 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(23,&quot;m_excl3&quot;);</span>
<span class="lineNum">     504 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(24,&quot;m_empl3&quot;);</span>
<span class="lineNum">     505 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(25,&quot;dr_excl3&quot;);</span>
<span class="lineNum">     506 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(26,&quot;dr_empl3&quot;);</span>
<span class="lineNum">     507 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(27,&quot;m_exc-actl3&quot;);</span>
<span class="lineNum">     508 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(28,&quot;m_act-empl3&quot;);</span>
<span class="lineNum">     509 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(29,&quot;dr_exc-actl3&quot;);</span>
<span class="lineNum">     510 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(30,&quot;dr_act-empl3&quot;);</span>
<span class="lineNum">     511 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(31,&quot;m_overthl3&quot;);</span>
<span class="lineNum">     512 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(32,&quot;dr_overthl3&quot;);</span>
<span class="lineNum">     513 </span>            :   //l4
<span class="lineNum">     514 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(33,&quot;m_actl4&quot;);</span>
<span class="lineNum">     515 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(34,&quot;m_fill4&quot;);</span>
<span class="lineNum">     516 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(35,&quot;dr_actl4&quot;);</span>
<span class="lineNum">     517 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(36,&quot;dr_fill4&quot;);</span>
<span class="lineNum">     518 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(37,&quot;m_excl4&quot;);</span>
<span class="lineNum">     519 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(38,&quot;m_empl4&quot;);</span>
<span class="lineNum">     520 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(39,&quot;dr_excl4&quot;);</span>
<span class="lineNum">     521 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(40,&quot;dr_empl4&quot;);</span>
<span class="lineNum">     522 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(41,&quot;m_exc-actl4&quot;);</span>
<span class="lineNum">     523 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(42,&quot;m_act-empl4&quot;);</span>
<span class="lineNum">     524 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(43,&quot;dr_exc-actl4&quot;);</span>
<span class="lineNum">     525 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(44,&quot;dr_act-empl4&quot;);</span>
<span class="lineNum">     526 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(45,&quot;m_overthl4&quot;);</span>
<span class="lineNum">     527 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;SetBinLabel(46,&quot;dr_overthl4&quot;);</span>
<span class="lineNum">     528 </span><span class="lineNoCov">          0 :   hsummarydata-&gt;GetXaxis()-&gt;LabelsOption(&quot;v&quot;);</span>
<span class="lineNum">     529 </span>            : 
<span class="lineNum">     530 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hsummarydata,kSDDRawDataCheck+offsRW, !expert, image, !saveCorr); </span>
<span class="lineNum">     531 </span><span class="lineNoCov">          0 :   fSDDhRawsTask++; </span>
<span class="lineNum">     532 </span><span class="lineNoCov">          0 :   fOnlineOffsetRaws = fSDDhRawsTask;</span>
<span class="lineNum">     533 </span>            : 
<span class="lineNum">     534 </span>            :   //online part
<span class="lineNum">     535 </span><span class="lineNoCov">          0 :   if(fkOnline){</span>
<span class="lineNum">     536 </span>            :     //DDL Pattern 
<span class="lineNum">     537 </span><span class="lineNoCov">          0 :     TH2F *hddl = new TH2F(&quot;SDDDDLPattern&quot;,&quot;SDD DDL Pattern &quot;,24,-0.5,11.5,24,-0.5,23.5); //11</span>
<span class="lineNum">     538 </span><span class="lineNoCov">          0 :     hddl-&gt;GetXaxis()-&gt;SetTitle(&quot;Channel&quot;);</span>
<span class="lineNum">     539 </span><span class="lineNoCov">          0 :     hddl-&gt;GetYaxis()-&gt;SetTitle(&quot;DDL Number&quot;);</span>
<span class="lineNum">     540 </span><span class="lineNoCov">          0 :     rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hddl,kSDDOnlineDDLPattern+offsRW, expert, !image, !saveCorr);</span>
<span class="lineNum">     541 </span><span class="lineNoCov">          0 :     fSDDhRawsTask++;</span>
<span class="lineNum">     542 </span>            : 
<span class="lineNum">     543 </span>            :     //Event Size 
<span class="lineNum">     544 </span><span class="lineNoCov">          0 :     TH1F *hsize = new TH1F(&quot;SDDEventSize&quot;,&quot;SDD Event Size &quot;,500,-0.5,199.5);</span>
<span class="lineNum">     545 </span>            : #if ROOT_VERSION_CODE &lt; ROOT_VERSION(6,4,0)
<span class="lineNum">     546 </span><span class="lineNoCov">          0 :     hsize-&gt;SetBit(TH1::kCanRebin);</span>
<span class="lineNum">     547 </span>            : #endif
<span class="lineNum">     548 </span><span class="lineNoCov">          0 :     hsize-&gt;GetXaxis()-&gt;SetTitle(&quot;Event Size [kB]&quot;);</span>
<span class="lineNum">     549 </span><span class="lineNoCov">          0 :     hsize-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     550 </span><span class="lineNoCov">          0 :     rv = fAliITSQADataMakerRec-&gt;Add2RawsList(hsize,kSDDDataSize+offsRW, expert, !image, !saveCorr); </span>
<span class="lineNum">     551 </span><span class="lineNoCov">          0 :     fSDDhRawsTask++;</span>
<span class="lineNum">     552 </span>            : 
<span class="lineNum">     553 </span><span class="lineNoCov">          0 :     Int_t nTimeBins= 256/fTimeBinSize;</span>
<span class="lineNum">     554 </span>            :     Int_t index1 = 0;
<span class="lineNum">     555 </span>            : 
<span class="lineNum">     556 </span><span class="lineNoCov">          0 :     for(Int_t moduleSDD =0; moduleSDD&lt;fgknSDDmodules; moduleSDD++){</span>
<span class="lineNum">     557 </span><span class="lineNoCov">          0 :       for(Int_t iside=0;iside&lt;fgknSide;iside++){</span>
<span class="lineNum">     558 </span><span class="lineNoCov">          0 :         AliITSgeomTGeo::GetModuleId(moduleSDD+fgkmodoffset, lay, lad, det);</span>
<span class="lineNum">     559 </span><span class="lineNoCov">          0 :         TProfile2D *fModuleChargeMapFSE = new TProfile2D(Form(&quot;SDDchargeMapFSE_L%d_%d_%d_%d&quot;,lay,lad,det,iside),Form(&quot;SDDChargeMapForSingleEvent_L%d_%d_%d_%d&quot;,lay,lad,det,iside),nTimeBins,-0.5,255.5,256,-0.5,255.5);</span>
<span class="lineNum">     560 </span><span class="lineNoCov">          0 :         fModuleChargeMapFSE-&gt;GetXaxis()-&gt;SetTitle(&quot;Time Bin&quot;);</span>
<span class="lineNum">     561 </span><span class="lineNoCov">          0 :         fModuleChargeMapFSE-&gt;GetYaxis()-&gt;SetTitle(&quot;Anode&quot;);</span>
<span class="lineNum">     562 </span><span class="lineNoCov">          0 :         rv = fAliITSQADataMakerRec-&gt;Add2RawsList(fModuleChargeMapFSE,kChargeMapFirstMod + index1 + offsRW, expert, !image, !saveCorr);         </span>
<span class="lineNum">     563 </span><span class="lineNoCov">          0 :         index1++;</span>
<span class="lineNum">     564 </span>            :       }
<span class="lineNum">     565 </span>            :     }
<span class="lineNum">     566 </span><span class="lineNoCov">          0 :     for(Int_t moduleSDD =0; moduleSDD&lt;fgknSDDmodules; moduleSDD++){</span>
<span class="lineNum">     567 </span><span class="lineNoCov">          0 :       for(Int_t iside=0;iside&lt;fgknSide;iside++){</span>
<span class="lineNum">     568 </span><span class="lineNoCov">          0 :         AliITSgeomTGeo::GetModuleId(moduleSDD+fgkmodoffset, lay, lad, det);</span>
<span class="lineNum">     569 </span><span class="lineNoCov">          0 :         TProfile2D *fModuleChargeMap = new TProfile2D(Form(&quot;SDDchargeMap_L%d_%d_%d_%d&quot;,lay,lad,det,iside),Form(&quot;SDDChargeMap_L%d_%d_%d_%d&quot;,lay,lad,det,iside),nTimeBins,-0.5,255.5,256,-0.5,255.5);</span>
<span class="lineNum">     570 </span><span class="lineNoCov">          0 :         fModuleChargeMap-&gt;GetXaxis()-&gt;SetTitle(&quot;Time Bin&quot;);</span>
<span class="lineNum">     571 </span><span class="lineNoCov">          0 :         fModuleChargeMap-&gt;GetYaxis()-&gt;SetTitle(&quot;Anode Number&quot;);</span>
<span class="lineNum">     572 </span><span class="lineNoCov">          0 :         rv = fAliITSQADataMakerRec-&gt;Add2RawsList(fModuleChargeMap,kChargeMapFirstMod + index1 + offsRW, expert, !image, !saveCorr); </span>
<span class="lineNum">     573 </span><span class="lineNoCov">          0 :         index1++;</span>
<span class="lineNum">     574 </span>            :       }
<span class="lineNum">     575 </span>            :     }
<span class="lineNum">     576 </span><span class="lineNoCov">          0 :     fSDDhRawsTask+=index1;</span>
<span class="lineNum">     577 </span><span class="lineNoCov">          0 :   }  // kONLINE</span>
<span class="lineNum">     578 </span>            :   
<span class="lineNum">     579 </span><span class="lineNoCov">          0 :   cout &lt;&lt; fSDDhRawsTask &lt;&lt; &quot; SDD Raws histograms booked&quot; &lt;&lt; endl;</span>
<span class="lineNum">     580 </span>            :   
<span class="lineNum">     581 </span><span class="lineNoCov">          0 :   AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;%d SDD Raws histograms booked\n&quot;,fSDDhRawsTask));</span>
<span class="lineNum">     582 </span>            :   //
<span class="lineNum">     583 </span><span class="lineNoCov">          0 :   return rv ; </span>
<span class="lineNum">     584 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     585 </span>            : 
<a name="586"><span class="lineNum">     586 </span>            : </a>
<span class="lineNum">     587 </span>            : //____________________________________________________________________________
<span class="lineNum">     588 </span>            : Int_t AliITSQASDDDataMakerRec::MakeRaws(AliRawReader* rawReader)
<span class="lineNum">     589 </span>            : { 
<span class="lineNum">     590 </span>            :   // Fill QA for RAW - SDD -
<span class="lineNum">     591 </span>            : 
<span class="lineNum">     592 </span>            :   Int_t rv = 0;
<span class="lineNum">     593 </span><span class="lineNoCov">          0 :   int offsRW = fGenRawsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     594 </span>            : 
<span class="lineNum">     595 </span><span class="lineNoCov">          0 :   if(!fDDLModuleMap) CreateTheMap();</span>
<span class="lineNum">     596 </span><span class="lineNoCov">          0 :   if(rawReader-&gt;GetType() != 7) return rv;  // skips non physical triggers</span>
<span class="lineNum">     597 </span><span class="lineNoCov">          0 :   AliDebug(AliQAv1::GetQADebugLevel(),&quot;entering MakeRaws\n&quot;);                 </span>
<span class="lineNum">     598 </span><span class="lineNoCov">          0 :   rawReader-&gt;Reset();       </span>
<span class="lineNum">     599 </span><span class="lineNoCov">          0 :   rawReader-&gt;Select(&quot;ITSSDD&quot;);</span>
<span class="lineNum">     600 </span><span class="lineNoCov">          0 :   AliITSRawStream *stream=AliITSRawStreamSDD::CreateRawStreamSDD(rawReader);</span>
<span class="lineNum">     601 </span><span class="lineNoCov">          0 :   stream-&gt;SetDDLModuleMap(fDDLModuleMap);</span>
<span class="lineNum">     602 </span>            :   
<span class="lineNum">     603 </span>            :   Int_t index=0;
<span class="lineNum">     604 </span><span class="lineNoCov">          0 :   if(fkOnline) {</span>
<span class="lineNum">     605 </span><span class="lineNoCov">          0 :     for(Int_t moduleSDD =0; moduleSDD&lt;fgknSDDmodules; moduleSDD++){</span>
<span class="lineNum">     606 </span><span class="lineNoCov">          0 :       for(Int_t iside=0;iside&lt;fgknSide;iside++) {</span>
<span class="lineNum">     607 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;ResetRawsData(kChargeMapFirstMod+index+offsRW);   </span>
<span class="lineNum">     608 </span><span class="lineNoCov">          0 :         index++;</span>
<span class="lineNum">     609 </span>            :       }
<span class="lineNum">     610 </span>            :     }
<span class="lineNum">     611 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     612 </span>            :   
<span class="lineNum">     613 </span><span class="lineNoCov">          0 :   Int_t lay, lad, det;   </span>
<span class="lineNum">     614 </span>            :   Int_t cnt = 0;
<span class="lineNum">     615 </span><span class="lineNoCov">          0 :   Int_t cntMod[fgknSDDmodules];</span>
<span class="lineNum">     616 </span><span class="lineNoCov">          0 :   for(Int_t jmod=0; jmod&lt;fgknSDDmodules; jmod++) cntMod[jmod]=0;</span>
<span class="lineNum">     617 </span>            :   
<span class="lineNum">     618 </span>            :   Int_t iddl = -1;
<span class="lineNum">     619 </span>            :   Int_t isddmod = -1;
<span class="lineNum">     620 </span>            :   Int_t coord1, coord2, signal, moduleSDD; 
<span class="lineNum">     621 </span>            :   Int_t prevDDLID = -1;
<span class="lineNum">     622 </span>            :   UInt_t size = 0;
<span class="lineNum">     623 </span><span class="lineNoCov">          0 :   Int_t totalddl=static_cast&lt;int&gt;(fDDLModuleMap-&gt;GetNDDLs());</span>
<span class="lineNum">     624 </span><span class="lineNoCov">          0 :   Bool_t *ddldata=new Bool_t[totalddl];</span>
<span class="lineNum">     625 </span><span class="lineNoCov">          0 :   for(Int_t jddl=0;jddl&lt;totalddl;jddl++) ddldata[jddl]=kFALSE;</span>
<span class="lineNum">     626 </span>            : 
<span class="lineNum">     627 </span><span class="lineNoCov">          0 :   while(stream-&gt;Next()) {</span>
<span class="lineNum">     628 </span><span class="lineNoCov">          0 :     iddl = rawReader-&gt;GetDDLID();// - fgkDDLIDshift;</span>
<span class="lineNum">     629 </span><span class="lineNoCov">          0 :     if(iddl&lt;0)isddmod=-1;</span>
<span class="lineNum">     630 </span><span class="lineNoCov">          0 :     else isddmod = fDDLModuleMap-&gt;GetModuleNumber(iddl,stream-&gt;GetCarlosId());</span>
<span class="lineNum">     631 </span>            : 
<span class="lineNum">     632 </span><span class="lineNoCov">          0 :     if(isddmod==-1){</span>
<span class="lineNum">     633 </span><span class="lineNoCov">          0 :       AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;Found module with iddl: %d, stream-&gt;GetCarlosId: %d \n&quot;,iddl,stream-&gt;GetCarlosId()));</span>
<span class="lineNum">     634 </span>            :       continue;
<span class="lineNum">     635 </span>            :     }
<span class="lineNum">     636 </span><span class="lineNoCov">          0 :     if(stream-&gt;IsCompletedModule()) {</span>
<span class="lineNum">     637 </span><span class="lineNoCov">          0 :       AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;IsCompletedModule == KTRUE\n&quot;));</span>
<span class="lineNum">     638 </span>            :       continue;
<span class="lineNum">     639 </span>            :     } 
<span class="lineNum">     640 </span><span class="lineNoCov">          0 :     if(stream-&gt;IsCompletedDDL()) {</span>
<span class="lineNum">     641 </span><span class="lineNoCov">          0 :       if(fkOnline){</span>
<span class="lineNum">     642 </span><span class="lineNoCov">          0 :         if ((rawReader-&gt;GetDDLID() != prevDDLID)&amp;&amp;(ddldata[iddl])==kFALSE){</span>
<span class="lineNum">     643 </span><span class="lineNoCov">          0 :           size += rawReader-&gt;GetDataSize();//in bytes</span>
<span class="lineNum">     644 </span><span class="lineNoCov">          0 :           prevDDLID = rawReader-&gt;GetDDLID();</span>
<span class="lineNum">     645 </span><span class="lineNoCov">          0 :           ddldata[iddl]=kTRUE;</span>
<span class="lineNum">     646 </span><span class="lineNoCov">          0 :         }</span>
<span class="lineNum">     647 </span>            :       }
<span class="lineNum">     648 </span><span class="lineNoCov">          0 :       AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;IsCompletedDDL == KTRUE\n&quot;));</span>
<span class="lineNum">     649 </span>            :       continue;
<span class="lineNum">     650 </span>            :     } 
<span class="lineNum">     651 </span>            :     
<span class="lineNum">     652 </span><span class="lineNoCov">          0 :     coord1 = stream-&gt;GetCoord1();</span>
<span class="lineNum">     653 </span><span class="lineNoCov">          0 :     coord2 = stream-&gt;GetCoord2();</span>
<span class="lineNum">     654 </span><span class="lineNoCov">          0 :     signal = stream-&gt;GetSignal();</span>
<span class="lineNum">     655 </span>            :     
<span class="lineNum">     656 </span><span class="lineNoCov">          0 :     moduleSDD = isddmod - fgkmodoffset;</span>
<span class="lineNum">     657 </span>            :     
<span class="lineNum">     658 </span><span class="lineNoCov">          0 :     if(isddmod &lt;fgkmodoffset|| isddmod&gt;fgknSDDmodules+fgkmodoffset-1) {</span>
<span class="lineNum">     659 </span><span class="lineNoCov">          0 :       AliDebug(AliQAv1::GetQADebugLevel(),Form( &quot;Module SDD = %d, resetting it to 1 \n&quot;,isddmod));</span>
<span class="lineNum">     660 </span>            :       isddmod = 1;
<span class="lineNum">     661 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     662 </span>            :     
<span class="lineNum">     663 </span><span class="lineNoCov">          0 :     AliITSgeomTGeo::GetModuleId(isddmod, lay, lad, det);</span>
<span class="lineNum">     664 </span><span class="lineNoCov">          0 :     Short_t iside = stream-&gt;GetChannel();</span>
<span class="lineNum">     665 </span>            : 
<span class="lineNum">     666 </span>            :     //printf(&quot; \n%i %i %i %i \n &quot;,lay, lad, det,iside );
<span class="lineNum">     667 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;FillRawsData( kSDDRawModPattern + offsRW,isddmod);   </span>
<span class="lineNum">     668 </span><span class="lineNoCov">          0 :     if(lay==3) fAliITSQADataMakerRec-&gt;FillRawsData(kSDDRawLadModLay3+offsRW,det+0.5*iside-0.25,lad); //phiz l3 not norm</span>
<span class="lineNum">     669 </span><span class="lineNoCov">          0 :     else if(lay==4) fAliITSQADataMakerRec-&gt;FillRawsData(kSDDRawLadModLay4+offsRW,det+0.5*iside-0.25,lad); //phiz l4 not norm</span>
<span class="lineNum">     670 </span>            :  
<span class="lineNum">     671 </span><span class="lineNoCov">          0 :     if(fkOnline) {</span>
<span class="lineNum">     672 </span>            : 
<span class="lineNum">     673 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillRawsData(kSDDOnlineDDLPattern+offsRW, (stream-&gt;GetCarlosId())+0.5*iside -0.5,iddl);</span>
<span class="lineNum">     674 </span><span class="lineNoCov">          0 :       Int_t index1 = moduleSDD * 2 + iside;</span>
<span class="lineNum">     675 </span>            :       
<span class="lineNum">     676 </span><span class="lineNoCov">          0 :       if(index1&lt;0){</span>
<span class="lineNum">     677 </span><span class="lineNoCov">          0 :         AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;Wrong index number %d - patched to 0\n&quot;,index1));</span>
<span class="lineNum">     678 </span>            :         index1 = 0;
<span class="lineNum">     679 </span><span class="lineNoCov">          0 :       }      </span>
<span class="lineNum">     680 </span>            : 
<span class="lineNum">     681 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillRawsData(kChargeMapFirstMod + index1 +offsRW, coord2, coord1, signal);     </span>
<span class="lineNum">     682 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillRawsData(kChargeMapFirstMod + index1 + fgknSDDmodules*fgknSide +offsRW, coord2, coord1, signal); </span>
<span class="lineNum">     683 </span>            : 
<span class="lineNum">     684 </span><span class="lineNoCov">          0 :     }//online</span>
<span class="lineNum">     685 </span><span class="lineNoCov">          0 :     cnt++;</span>
<span class="lineNum">     686 </span><span class="lineNoCov">          0 :     if(moduleSDD&gt;=0 &amp;&amp; moduleSDD&lt;fgknSDDmodules) cntMod[moduleSDD]++;</span>
<span class="lineNum">     687 </span><span class="lineNoCov">          0 :     if(!(cnt%10000)) AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot; %d raw digits read&quot;,cnt));</span>
<span class="lineNum">     688 </span>            :   }//end next()
<span class="lineNum">     689 </span><span class="lineNoCov">          0 :   fAliITSQADataMakerRec-&gt;FillRawsData(kSDDNofDigits+offsRW,cnt);</span>
<span class="lineNum">     690 </span><span class="lineNoCov">          0 :   for(Int_t jmod=0; jmod&lt;fgknSDDmodules; jmod++){</span>
<span class="lineNum">     691 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;FillRawsData(kSDDNofDigitsVsMod+offsRW,jmod+fgkmodoffset,cntMod[jmod]);</span>
<span class="lineNum">     692 </span>            :   }
<span class="lineNum">     693 </span><span class="lineNoCov">          0 :   if(fkOnline){</span>
<span class="lineNum">     694 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;FillRawsData(kSDDDataSize+offsRW,size/1024.);//KB</span>
<span class="lineNum">     695 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     696 </span>            :         
<span class="lineNum">     697 </span><span class="lineNoCov">          0 :   AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;Event completed, %d raw digits read&quot;,cnt)); </span>
<span class="lineNum">     698 </span><span class="lineNoCov">          0 :   delete stream;</span>
<span class="lineNum">     699 </span><span class="lineNoCov">          0 :   delete [] ddldata;</span>
<span class="lineNum">     700 </span>            :   //
<span class="lineNum">     701 </span>            :   return rv ; 
<span class="lineNum">     702 </span><span class="lineNoCov">          0 : }</span>
<a name="703"><span class="lineNum">     703 </span>            : </a>
<span class="lineNum">     704 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     705 </span>            : Int_t AliITSQASDDDataMakerRec::InitDigits()
<span class="lineNum">     706 </span>            : { 
<span class="lineNum">     707 </span>            :   //  if(!fHistoCalibration)InitCalibrationArray();
<span class="lineNum">     708 </span>            :   // Initialization for DIGIT data - SDD -  
<span class="lineNum">     709 </span>            :   const Bool_t expert   = kTRUE ; 
<span class="lineNum">     710 </span>            :   const Bool_t image    = kTRUE ;
<span class="lineNum">     711 </span>            :   Int_t rv = 0 ; 
<span class="lineNum">     712 </span><span class="lineNoCov">          0 :   fSDDhDigitsTask=0;</span>
<span class="lineNum">     713 </span><span class="lineNoCov">          0 :   int offsD = fGenDigitsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     714 </span>            : 
<span class="lineNum">     715 </span><span class="lineNoCov">          0 :   TH1F* h0=new TH1F(&quot;SDD DIGITS Module Pattern&quot;,&quot;SDD DIGITS Module Pattern&quot;,260,239.5,499.5);       //hmod</span>
<span class="lineNum">     716 </span><span class="lineNoCov">          0 :   h0-&gt;GetXaxis()-&gt;SetTitle(&quot;SDD Module Number&quot;);</span>
<span class="lineNum">     717 </span><span class="lineNoCov">          0 :   h0-&gt;GetYaxis()-&gt;SetTitle(&quot;# DIGITS&quot;);</span>
<span class="lineNum">     718 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2DigitsList(h0,kSDDDigModPattern+offsD, !expert, image);</span>
<span class="lineNum">     719 </span><span class="lineNoCov">          0 :   fSDDhDigitsTask++;</span>
<span class="lineNum">     720 </span>            : 
<span class="lineNum">     721 </span><span class="lineNoCov">          0 :   TH1F* h1=new TH1F(&quot;SDD Anode Distribution&quot;,&quot;DIGITS Anode Distribution&quot;,512,-0.5,511.5);      //hanocc</span>
<span class="lineNum">     722 </span><span class="lineNoCov">          0 :   h1-&gt;GetXaxis()-&gt;SetTitle(&quot;Anode Number&quot;);</span>
<span class="lineNum">     723 </span><span class="lineNoCov">          0 :   h1-&gt;GetYaxis()-&gt;SetTitle(&quot;# DIGITS&quot;);</span>
<span class="lineNum">     724 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2DigitsList(h1,kSDDDigAnode+offsD, !expert, image);</span>
<span class="lineNum">     725 </span><span class="lineNoCov">          0 :   fSDDhDigitsTask++;</span>
<span class="lineNum">     726 </span>            : 
<span class="lineNum">     727 </span><span class="lineNoCov">          0 :   TH1F* h2=new TH1F(&quot;SDD Tbin Distribution&quot;,&quot;DIGITS Tbin Distribution&quot;,256,-0.5,255.5);      //htbocc</span>
<span class="lineNum">     728 </span><span class="lineNoCov">          0 :   h2-&gt;GetXaxis()-&gt;SetTitle(&quot;Tbin Number&quot;);</span>
<span class="lineNum">     729 </span><span class="lineNoCov">          0 :   h2-&gt;GetYaxis()-&gt;SetTitle(&quot;# DIGITS&quot;);</span>
<span class="lineNum">     730 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2DigitsList(h2,kSDDDigTimeBin+offsD, !expert, image);</span>
<span class="lineNum">     731 </span><span class="lineNoCov">          0 :   fSDDhDigitsTask++;</span>
<span class="lineNum">     732 </span>            : 
<span class="lineNum">     733 </span><span class="lineNoCov">          0 :   TH1F* h3=new TH1F(&quot;SDD ADC Counts Distribution&quot;,&quot;DIGITS ADC Counts Distribution&quot;,200,0.,1024.);          //hsig</span>
<span class="lineNum">     734 </span><span class="lineNoCov">          0 :   h3-&gt;GetXaxis()-&gt;SetTitle(&quot;ADC Value&quot;);</span>
<span class="lineNum">     735 </span><span class="lineNoCov">          0 :   h3-&gt;GetYaxis()-&gt;SetTitle(&quot;# DIGITS&quot;);</span>
<span class="lineNum">     736 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2DigitsList(h3,kSDDDigADC+offsD, !expert, image);</span>
<span class="lineNum">     737 </span><span class="lineNoCov">          0 :   fSDDhDigitsTask++;</span>
<span class="lineNum">     738 </span>            : 
<span class="lineNum">     739 </span><span class="lineNoCov">          0 :   AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;%d SDD Digits histograms booked\n&quot;,fSDDhDigitsTask));</span>
<span class="lineNum">     740 </span>            :   //
<span class="lineNum">     741 </span><span class="lineNoCov">          0 :   return rv ; </span>
<span class="lineNum">     742 </span><span class="lineNoCov">          0 : }</span>
<a name="743"><span class="lineNum">     743 </span>            : </a>
<span class="lineNum">     744 </span>            : //____________________________________________________________________________
<span class="lineNum">     745 </span>            : Int_t AliITSQASDDDataMakerRec::MakeDigits(TTree * digits)
<span class="lineNum">     746 </span>            : { 
<span class="lineNum">     747 </span>            : 
<span class="lineNum">     748 </span>            :   // Fill QA for DIGIT - SDD -
<span class="lineNum">     749 </span>            : 
<span class="lineNum">     750 </span>            :   Int_t rv = 0 ; 
<span class="lineNum">     751 </span><span class="lineNoCov">          0 :   int offsD = fGenDigitsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     752 </span><span class="lineNoCov">          0 :   TBranch *branchD = digits-&gt;GetBranch(&quot;ITSDigitsSDD&quot;);</span>
<span class="lineNum">     753 </span>            : 
<span class="lineNum">     754 </span><span class="lineNoCov">          0 :   if (!branchD) {</span>
<span class="lineNum">     755 </span><span class="lineNoCov">          0 :     AliError(&quot;can't get the branch with the ITS SDD digits !&quot;);</span>
<span class="lineNum">     756 </span><span class="lineNoCov">          0 :     return rv ;</span>
<span class="lineNum">     757 </span>            :   }
<span class="lineNum">     758 </span>            :   
<span class="lineNum">     759 </span><span class="lineNoCov">          0 :   static TClonesArray statDigits(&quot;AliITSdigitSDD&quot;);</span>
<span class="lineNum">     760 </span><span class="lineNoCov">          0 :   TClonesArray *iITSdigits = &amp;statDigits;</span>
<span class="lineNum">     761 </span><span class="lineNoCov">          0 :   branchD-&gt;SetAddress(&amp;iITSdigits);</span>
<span class="lineNum">     762 </span>            : 
<span class="lineNum">     763 </span><span class="lineNoCov">          0 :   for(Int_t i=0; i&lt;260; i++){</span>
<span class="lineNum">     764 </span><span class="lineNoCov">          0 :     Int_t nmod=i+240;</span>
<span class="lineNum">     765 </span><span class="lineNoCov">          0 :     digits-&gt;GetEvent(nmod);</span>
<span class="lineNum">     766 </span><span class="lineNoCov">          0 :     Int_t ndigits = iITSdigits-&gt;GetEntries();</span>
<span class="lineNum">     767 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;FillDigitsData(kSDDDigModPattern+offsD,nmod,ndigits);</span>
<span class="lineNum">     768 </span>            : 
<span class="lineNum">     769 </span><span class="lineNoCov">          0 :     for (Int_t idig=0; idig&lt;ndigits; idig++) {</span>
<span class="lineNum">     770 </span><span class="lineNoCov">          0 :       AliITSdigit *dig=(AliITSdigit*)iITSdigits-&gt;UncheckedAt(idig);</span>
<span class="lineNum">     771 </span><span class="lineNoCov">          0 :       Int_t iz=dig-&gt;GetCoord1();  // cell number z</span>
<span class="lineNum">     772 </span><span class="lineNoCov">          0 :       Int_t ix=dig-&gt;GetCoord2();  // cell number x</span>
<span class="lineNum">     773 </span><span class="lineNoCov">          0 :       Int_t sig=dig-&gt;GetSignal();</span>
<span class="lineNum">     774 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillDigitsData(kSDDDigAnode+offsD,iz);</span>
<span class="lineNum">     775 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillDigitsData(kSDDDigTimeBin+offsD,ix);</span>
<span class="lineNum">     776 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillDigitsData(kSDDDigADC+offsD,sig);</span>
<span class="lineNum">     777 </span>            :     }
<span class="lineNum">     778 </span>            :   }
<span class="lineNum">     779 </span>            : 
<span class="lineNum">     780 </span>            :   return rv ; 
<span class="lineNum">     781 </span><span class="lineNoCov">          0 : }</span>
<a name="782"><span class="lineNum">     782 </span>            : </a>
<span class="lineNum">     783 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     784 </span>            : Int_t AliITSQASDDDataMakerRec::InitRecPoints()
<span class="lineNum">     785 </span>            : {
<span class="lineNum">     786 </span>            :   // Initialization for RECPOINTS - SDD -
<span class="lineNum">     787 </span>            : 
<span class="lineNum">     788 </span>            :   const Bool_t expert   = kTRUE ; 
<span class="lineNum">     789 </span>            :   const Bool_t image    = kTRUE ; 
<span class="lineNum">     790 </span>            :   Int_t rv = 0 ; 
<span class="lineNum">     791 </span><span class="lineNoCov">          0 :   int offsRP = fGenRecPointsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">     792 </span>            : 
<span class="lineNum">     793 </span><span class="lineNoCov">          0 :   TH1F *h0 = new TH1F(&quot;SDDLay3TotCh&quot;,&quot;Layer 3 total charge&quot;,250,-0.5, 499.5); //position number 0</span>
<span class="lineNum">     794 </span>            :   //h0-&gt;SetBit(TH1::kCanRebin);
<span class="lineNum">     795 </span><span class="lineNoCov">          0 :   h0-&gt;GetXaxis()-&gt;SetTitle(&quot;Charge (keV)&quot;);</span>
<span class="lineNum">     796 </span><span class="lineNoCov">          0 :   h0-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     797 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h0, kSDDRecpChargeLay3+offsRP, !expert, image);//NON expert image</span>
<span class="lineNum">     798 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     799 </span>            :  
<span class="lineNum">     800 </span><span class="lineNoCov">          0 :   TH1F *h1 = new TH1F(&quot;SDDLay4TotCh&quot;,&quot;Layer 4 total charge&quot;,250,-0.5, 499.5);</span>
<span class="lineNum">     801 </span>            :   //h1-&gt;SetBit(TH1::kCanRebin);
<span class="lineNum">     802 </span><span class="lineNoCov">          0 :   h1-&gt;GetXaxis()-&gt;SetTitle(&quot;Charge (keV)&quot;);</span>
<span class="lineNum">     803 </span><span class="lineNoCov">          0 :   h1-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     804 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h1, kSDDRecpChargeLay4+offsRP, !expert, image);</span>
<span class="lineNum">     805 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     806 </span>            : 
<span class="lineNum">     807 </span><span class="lineNoCov">          0 :   TH2F *h2 = new TH2F(&quot;SDDGlobalCoordDistribYX&quot;,&quot;YX Global Coord Distrib&quot;,56,-28,28,56,-28,28);</span>
<span class="lineNum">     808 </span><span class="lineNoCov">          0 :   h2-&gt;GetYaxis()-&gt;SetTitle(&quot;Y (cm)&quot;);</span>
<span class="lineNum">     809 </span><span class="lineNoCov">          0 :   h2-&gt;GetXaxis()-&gt;SetTitle(&quot;X (cm)&quot;);</span>
<span class="lineNum">     810 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h2,kSDDRecpGloXY+offsRP, expert, image);</span>
<span class="lineNum">     811 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     812 </span>            : 
<span class="lineNum">     813 </span><span class="lineNoCov">          0 :   TH2F *h3 = new TH2F(&quot;SDDGlobalCoordDistribRZ&quot;,&quot;RZ Global Coord Distrib&quot;,128,-32,32,56,12,26);</span>
<span class="lineNum">     814 </span><span class="lineNoCov">          0 :   h3-&gt;GetYaxis()-&gt;SetTitle(&quot;R (cm)&quot;);</span>
<span class="lineNum">     815 </span><span class="lineNoCov">          0 :   h3-&gt;GetXaxis()-&gt;SetTitle(&quot;Z (cm)&quot;);</span>
<span class="lineNum">     816 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h3,kSDDRecpGloRZ+offsRP, expert, image);</span>
<span class="lineNum">     817 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     818 </span>            :   
<span class="lineNum">     819 </span><span class="lineNoCov">          0 :   TH2F *h4 = new TH2F(&quot;SDDGlobalCoordDistribL3PHIZ&quot;,&quot;#varphi Z Global Coord Distrib L3&quot;,96,-23,23,112,-TMath::Pi(),TMath::Pi());</span>
<span class="lineNum">     820 </span><span class="lineNoCov">          0 :   h4-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi (rad)&quot;);</span>
<span class="lineNum">     821 </span><span class="lineNoCov">          0 :   h4-&gt;GetXaxis()-&gt;SetTitle(&quot;Z (cm)&quot;);</span>
<span class="lineNum">     822 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h4,kSDDRecpPhiZLay3+offsRP, expert, image);</span>
<span class="lineNum">     823 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     824 </span>            : 
<span class="lineNum">     825 </span><span class="lineNoCov">          0 :   TH2F *h5 = new TH2F(&quot;SDDGlobalCoordDistribL4PHIZ&quot;,&quot;#varphi Z Global Coord Distrib L4&quot;,128,-31,31,176,-TMath::Pi(),TMath::Pi());</span>
<span class="lineNum">     826 </span><span class="lineNoCov">          0 :   h5-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi (rad)&quot;);</span>
<span class="lineNum">     827 </span><span class="lineNoCov">          0 :   h5-&gt;GetXaxis()-&gt;SetTitle(&quot;Z (cm)&quot;);</span>
<span class="lineNum">     828 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h5,kSDDRecpPhiZLay4+offsRP, expert, image);</span>
<span class="lineNum">     829 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     830 </span>            :   
<span class="lineNum">     831 </span><span class="lineNoCov">          0 :   TH1F *h6 = new TH1F(&quot;SDDModPatternRP&quot;,&quot;Modules pattern RP&quot;,fgknSDDmodules,239.5,499.5);</span>
<span class="lineNum">     832 </span><span class="lineNoCov">          0 :   h6-&gt;GetXaxis()-&gt;SetTitle(&quot;Module number&quot;);</span>
<span class="lineNum">     833 </span><span class="lineNoCov">          0 :   h6-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     834 </span><span class="lineNoCov">          0 :   h6-&gt;SetOption(&quot;bar1&quot;);</span>
<span class="lineNum">     835 </span><span class="lineNoCov">          0 :   h6-&gt;SetBarOffset(0.01);</span>
<span class="lineNum">     836 </span><span class="lineNoCov">          0 :   h6-&gt;SetBarWidth(0.95);</span>
<span class="lineNum">     837 </span><span class="lineNoCov">          0 :   h6-&gt;SetFillColor(39);</span>
<span class="lineNum">     838 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h6,kSDDRecpModPattern+offsRP, expert, !image);</span>
<span class="lineNum">     839 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     840 </span>            : 
<span class="lineNum">     841 </span><span class="lineNoCov">          0 :   TPaveText *paveText7=new TPaveText(0.3,0.88,0.9,0.99,&quot;NDC&quot;);</span>
<span class="lineNum">     842 </span><span class="lineNoCov">          0 :   paveText7-&gt;AddText(&quot;&quot;);</span>
<span class="lineNum">     843 </span><span class="lineNoCov">          0 :   paveText7-&gt;SetFillColor(kMagenta+2);</span>
<span class="lineNum">     844 </span><span class="lineNoCov">          0 :   paveText7-&gt;SetTextColor(kWhite);</span>
<span class="lineNum">     845 </span><span class="lineNoCov">          0 :   paveText7-&gt;SetBorderSize(1);</span>
<span class="lineNum">     846 </span><span class="lineNoCov">          0 :   paveText7-&gt;SetLineWidth(1);        </span>
<span class="lineNum">     847 </span>            :         
<span class="lineNum">     848 </span><span class="lineNoCov">          0 :   TH2F *h7 = new TH2F(&quot;SDDModPatternL3RP&quot;,&quot;Modules pattern L3 RP&quot;,12,0.5,6.5,14,0.5,14.5);</span>
<span class="lineNum">     849 </span><span class="lineNoCov">          0 :   h7-&gt;GetXaxis()-&gt;SetTitle(&quot;z[#Module L3 ]&quot;);</span>
<span class="lineNum">     850 </span><span class="lineNoCov">          0 :   h7-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[#Ladder L3]&quot;);</span>
<span class="lineNum">     851 </span><span class="lineNoCov">          0 :   h7-&gt;GetListOfFunctions()-&gt;Add(paveText7);</span>
<span class="lineNum">     852 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h7,kSDDRecpLadModLay3+offsRP, !expert, image);</span>
<span class="lineNum">     853 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     854 </span>            : 
<span class="lineNum">     855 </span><span class="lineNoCov">          0 :   TPaveText *paveText8=new TPaveText(0.3,0.88,0.9,0.99,&quot;NDC&quot;);</span>
<span class="lineNum">     856 </span><span class="lineNoCov">          0 :   paveText8-&gt;AddText(&quot;&quot;);</span>
<span class="lineNum">     857 </span><span class="lineNoCov">          0 :   paveText8-&gt;SetFillColor(kMagenta+2);</span>
<span class="lineNum">     858 </span><span class="lineNoCov">          0 :   paveText8-&gt;SetTextColor(kWhite);</span>
<span class="lineNum">     859 </span><span class="lineNoCov">          0 :   paveText8-&gt;SetBorderSize(1);</span>
<span class="lineNum">     860 </span><span class="lineNoCov">          0 :   paveText8-&gt;SetLineWidth(1);        </span>
<span class="lineNum">     861 </span>            :   
<span class="lineNum">     862 </span><span class="lineNoCov">          0 :   TH2F *h8 = new TH2F(&quot;SDDModPatternL4RP&quot;,&quot;Modules pattern L4 RP&quot;,16,0.5,8.5,22,0.5,22.5); </span>
<span class="lineNum">     863 </span><span class="lineNoCov">          0 :   h8-&gt;GetXaxis()-&gt;SetTitle(&quot;[#Module L3 ]&quot;);</span>
<span class="lineNum">     864 </span><span class="lineNoCov">          0 :   h8-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[#Ladder L4]&quot;);</span>
<span class="lineNum">     865 </span><span class="lineNoCov">          0 :   h8-&gt;GetListOfFunctions()-&gt;Add(paveText8);</span>
<span class="lineNum">     866 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h8,kSDDRecpLadModLay4+offsRP, !expert, image);</span>
<span class="lineNum">     867 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     868 </span>            : 
<span class="lineNum">     869 </span>            :   //------------------------norm--------------------------//
<span class="lineNum">     870 </span>            : 
<span class="lineNum">     871 </span>            : 
<span class="lineNum">     872 </span><span class="lineNoCov">          0 :   TH1F *h9 = new TH1F(&quot;SDDModPatternRPNORM&quot;,&quot;Modules pattern RP NORM&quot;,fgknSDDmodules,239.5,499.5); </span>
<span class="lineNum">     873 </span><span class="lineNoCov">          0 :   h9-&gt;GetXaxis()-&gt;SetTitle(&quot;Module number&quot;); </span>
<span class="lineNum">     874 </span><span class="lineNoCov">          0 :   h9-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     875 </span><span class="lineNoCov">          0 :   h9-&gt;SetOption(&quot;bar1&quot;);</span>
<span class="lineNum">     876 </span><span class="lineNoCov">          0 :   h9-&gt;SetBarOffset(0.01);</span>
<span class="lineNum">     877 </span><span class="lineNoCov">          0 :   h9-&gt;SetBarWidth(0.95);</span>
<span class="lineNum">     878 </span><span class="lineNoCov">          0 :   h9-&gt;SetFillColor(49);</span>
<span class="lineNum">     879 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h9,kSDDRecpModPatternNorm+offsRP, expert, !image);</span>
<span class="lineNum">     880 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     881 </span>            : 
<span class="lineNum">     882 </span>            :   
<span class="lineNum">     883 </span><span class="lineNoCov">          0 :   TH2F *h10 = new TH2F(&quot;SDDModPatternL3RPNORM&quot;,&quot;Modules pattern L3 RP NORM&quot;,12,0.5,6.5,14,0.5,14.5);</span>
<span class="lineNum">     884 </span><span class="lineNoCov">          0 :   h10-&gt;GetXaxis()-&gt;SetTitle(&quot;z[#Module L3 ]&quot;);</span>
<span class="lineNum">     885 </span><span class="lineNoCov">          0 :   h10-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[#Ladder L3]&quot;);</span>
<span class="lineNum">     886 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h10,kSDDRecpLadModLay3Norm+offsRP, expert, !image);</span>
<span class="lineNum">     887 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     888 </span>            : 
<span class="lineNum">     889 </span><span class="lineNoCov">          0 :   TH2F *h11 = new TH2F(&quot;SDDModPatternL4RPNORM&quot;,&quot;Modules pattern L4 RP NORM&quot;,16,0.5,8.5,22,0.5,22.5);</span>
<span class="lineNum">     890 </span><span class="lineNoCov">          0 :   h11-&gt;GetXaxis()-&gt;SetTitle(&quot;[#Module L4 ]&quot;);</span>
<span class="lineNum">     891 </span><span class="lineNoCov">          0 :   h10-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[#Ladder L4]&quot;);</span>
<span class="lineNum">     892 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h11,kSDDRecpLadModLay4Norm+offsRP, expert, !image);</span>
<span class="lineNum">     893 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     894 </span>            : 
<span class="lineNum">     895 </span>            :   //--------------------------------------------------------//
<span class="lineNum">     896 </span>            : 
<span class="lineNum">     897 </span><span class="lineNoCov">          0 :   TH2F *h12 = new TH2F(&quot;SDDLocalCoordDistrib&quot;,&quot;Local Coord Distrib&quot;,160,-4,4,160,-4,4);</span>
<span class="lineNum">     898 </span><span class="lineNoCov">          0 :   h12-&gt;GetXaxis()-&gt;SetTitle(&quot;X local coord, drift (cm)&quot;);</span>
<span class="lineNum">     899 </span><span class="lineNoCov">          0 :   h12-&gt;GetYaxis()-&gt;SetTitle(&quot;Z local coord, anode (cm)&quot;);</span>
<span class="lineNum">     900 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h12,kSDDRecpLocalCoord+offsRP, expert, !image);</span>
<span class="lineNum">     901 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     902 </span>            :   
<span class="lineNum">     903 </span><span class="lineNoCov">          0 :   TH1F *h13 = new TH1F(&quot;SDDrdistrib_Layer3&quot; ,&quot;SDD r distribution Layer3&quot; ,100,14.,16.5);</span>
<span class="lineNum">     904 </span>            : #if ROOT_VERSION_CODE &lt; ROOT_VERSION(6,4,0)
<span class="lineNum">     905 </span><span class="lineNoCov">          0 :   h13-&gt;SetBit(TH1::kCanRebin);</span>
<span class="lineNum">     906 </span>            : #endif
<span class="lineNum">     907 </span><span class="lineNoCov">          0 :   h13-&gt;GetXaxis()-&gt;SetTitle(&quot;r (cm)&quot;);</span>
<span class="lineNum">     908 </span><span class="lineNoCov">          0 :   h13-&gt;GetXaxis()-&gt;CenterTitle();</span>
<span class="lineNum">     909 </span><span class="lineNoCov">          0 :   h13-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     910 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h13,kSDDRecpRLay3+offsRP, expert, !image);</span>
<span class="lineNum">     911 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     912 </span>            :   
<span class="lineNum">     913 </span><span class="lineNoCov">          0 :   TH1F *h14 = new TH1F(&quot;SDDrdistrib_Layer4&quot; ,&quot;SDD r distribution Layer4&quot; ,100,23.,25.);</span>
<span class="lineNum">     914 </span>            : #if ROOT_VERSION_CODE &lt; ROOT_VERSION(6,4,0)
<span class="lineNum">     915 </span><span class="lineNoCov">          0 :   h14-&gt;SetBit(TH1::kCanRebin);</span>
<span class="lineNum">     916 </span>            : #endif
<span class="lineNum">     917 </span><span class="lineNoCov">          0 :   h14-&gt;GetXaxis()-&gt;SetTitle(&quot;r (cm)&quot;);</span>
<span class="lineNum">     918 </span><span class="lineNoCov">          0 :   h14-&gt;GetXaxis()-&gt;CenterTitle();</span>
<span class="lineNum">     919 </span><span class="lineNoCov">          0 :   h14-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     920 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h14,kSDDRecpRLay4+offsRP, expert, !image);</span>
<span class="lineNum">     921 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     922 </span>            :   
<span class="lineNum">     923 </span><span class="lineNoCov">          0 :   TH1F *h15 = new TH1F(&quot;SDDphidistrib_Layer3&quot;,&quot;SDDphidistrib_Layer3&quot; ,180,-TMath::Pi(),TMath::Pi());</span>
<span class="lineNum">     924 </span><span class="lineNoCov">          0 :   h15-&gt;GetXaxis()-&gt;SetTitle(&quot;#varphi (rad)&quot;);</span>
<span class="lineNum">     925 </span><span class="lineNoCov">          0 :   h15-&gt;GetXaxis()-&gt;CenterTitle();</span>
<span class="lineNum">     926 </span><span class="lineNoCov">          0 :   h15-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     927 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h15,kSDDRecpPhiLay3+offsRP, expert, !image);</span>
<span class="lineNum">     928 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     929 </span>            : 
<span class="lineNum">     930 </span><span class="lineNoCov">          0 :   TH1F *h16 = new TH1F(&quot;SDDphidistrib_Layer4&quot;,&quot;SDDphidistrib_Layer4&quot; ,180,-TMath::Pi(),TMath::Pi());</span>
<span class="lineNum">     931 </span><span class="lineNoCov">          0 :   h16-&gt;GetXaxis()-&gt;SetTitle(&quot;#varphi (rad)&quot;);</span>
<span class="lineNum">     932 </span><span class="lineNoCov">          0 :   h16-&gt;GetXaxis()-&gt;CenterTitle();</span>
<span class="lineNum">     933 </span><span class="lineNoCov">          0 :   h16-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     934 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h16,kSDDRecpPhiLay4+offsRP, expert, !image);</span>
<span class="lineNum">     935 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     936 </span>            : 
<span class="lineNum">     937 </span>            :   
<span class="lineNum">     938 </span><span class="lineNoCov">          0 :   TH1F *h17 = new TH1F(&quot;SDDdrifttime_Layer3&quot;,&quot;SDDdrifttime_Layer3&quot;,45,-0.5,4499.5);</span>
<span class="lineNum">     939 </span>            : #if ROOT_VERSION_CODE &lt; ROOT_VERSION(6,4,0)
<span class="lineNum">     940 </span><span class="lineNoCov">          0 :   h17-&gt;SetBit(TH1::kCanRebin);</span>
<span class="lineNum">     941 </span>            : #endif
<span class="lineNum">     942 </span><span class="lineNoCov">          0 :   h17-&gt;GetXaxis()-&gt;SetTitle(&quot;Drift time (ns)&quot;);</span>
<span class="lineNum">     943 </span><span class="lineNoCov">          0 :   h17-&gt;GetXaxis()-&gt;CenterTitle();</span>
<span class="lineNum">     944 </span><span class="lineNoCov">          0 :   h17-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     945 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h17,kSDDRecpDriftTimeLay3+offsRP, !expert, image);</span>
<span class="lineNum">     946 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     947 </span>            :   
<span class="lineNum">     948 </span><span class="lineNoCov">          0 :   TH1F *h18 = new TH1F(&quot;SDDdrifttime_Layer4&quot;,&quot;SDDdrifttime_Layer4&quot;,45,-0.5,4499.5);</span>
<span class="lineNum">     949 </span>            : #if ROOT_VERSION_CODE &lt; ROOT_VERSION(6,4,0)
<span class="lineNum">     950 </span><span class="lineNoCov">          0 :   h18-&gt;SetBit(TH1::kCanRebin);</span>
<span class="lineNum">     951 </span>            : #endif
<span class="lineNum">     952 </span><span class="lineNoCov">          0 :   h18-&gt;GetXaxis()-&gt;SetTitle(&quot;Drift time (ns)&quot;);</span>
<span class="lineNum">     953 </span><span class="lineNoCov">          0 :   h18-&gt;GetXaxis()-&gt;CenterTitle();</span>
<span class="lineNum">     954 </span><span class="lineNoCov">          0 :   h18-&gt;GetYaxis()-&gt;SetTitle(&quot;Entries&quot;);</span>
<span class="lineNum">     955 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h18,kSDDRecpDriftTimeLay4+offsRP, !expert, image);</span>
<span class="lineNum">     956 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     957 </span>            :   
<span class="lineNum">     958 </span><span class="lineNoCov">          0 :   TH1F *h19 = new TH1F(&quot;SDDL3_RelativeOccupancy&quot;,&quot;Layer 3 Relative Occupancy (RecPoints)&quot;,200,0.,0.2);</span>
<span class="lineNum">     959 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h19,kSDDRecpRelOccLay3+offsRP, expert, !image); </span>
<span class="lineNum">     960 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     961 </span>            :   
<span class="lineNum">     962 </span><span class="lineNoCov">          0 :   TH1F *h20 = new TH1F(&quot;SDDL4_RelativeOccupancy&quot;,&quot;Layer 4 Relative Occupancy (RecPoints)&quot;,200,0.,0.2);</span>
<span class="lineNum">     963 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h20,kSDDRecpRelOccLay4+offsRP, expert, !image);</span>
<span class="lineNum">     964 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     965 </span>            :                 
<span class="lineNum">     966 </span><span class="lineNoCov">          0 :   TH2F *h21 = new TH2F(&quot;SDDL3_Rec2Raw_2D&quot;,&quot;L3 RecPoints to Raws 2D&quot;,12,0.5,6.5,14,0.5,14.5);  </span>
<span class="lineNum">     967 </span><span class="lineNoCov">          0 :   h21-&gt;GetXaxis()-&gt;SetTitle(&quot;z[#Module L3 ]&quot;);</span>
<span class="lineNum">     968 </span><span class="lineNoCov">          0 :   h21-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[#Ladder L3]&quot;);</span>
<span class="lineNum">     969 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h21,kSDDRecpToRawLay3+offsRP, expert, !image);</span>
<span class="lineNum">     970 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     971 </span>            :   
<span class="lineNum">     972 </span><span class="lineNoCov">          0 :   TH2F *h22 = new TH2F(&quot;SDDL4_Rec2Raw_2D&quot;,&quot;L4 RecPoints to Raws 2D&quot;,16,0.5,8.5,22,0.5,22.5);</span>
<span class="lineNum">     973 </span><span class="lineNoCov">          0 :   h22-&gt;GetXaxis()-&gt;SetTitle(&quot;[#Module L4 ]&quot;);</span>
<span class="lineNum">     974 </span><span class="lineNoCov">          0 :   h22-&gt;GetYaxis()-&gt;SetTitle(&quot;#varphi[#Ladder L4]&quot;);</span>
<span class="lineNum">     975 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h22,kSDDRecpToRawLay4+offsRP, expert, !image);</span>
<span class="lineNum">     976 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     977 </span>            : 
<span class="lineNum">     978 </span><span class="lineNoCov">          0 :   TH2F *h23 = new TH2F(&quot;SDDL3_clusizAnode&quot;,&quot;L3 CluSiz Anode&quot;,50,0.,6400.,21,-0.5,20.5);</span>
<span class="lineNum">     979 </span><span class="lineNoCov">          0 :   h23-&gt;GetXaxis()-&gt;SetTitle(&quot;Drift time (ns)&quot;);</span>
<span class="lineNum">     980 </span><span class="lineNoCov">          0 :   h23-&gt;GetYaxis()-&gt;SetTitle(&quot;Cluster Size (anodes)&quot;);</span>
<span class="lineNum">     981 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h23,kSDDRecpCluSizAnLay3+offsRP, expert, !image); // 25</span>
<span class="lineNum">     982 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     983 </span>            :   
<span class="lineNum">     984 </span><span class="lineNoCov">          0 :   TH2F *h24 = new TH2F(&quot;SDDL4_clusizAnode&quot;,&quot;L4 CluSiz Anode&quot;,50,0.,6400.,21,-0.5,20.5);</span>
<span class="lineNum">     985 </span><span class="lineNoCov">          0 :   h24-&gt;GetXaxis()-&gt;SetTitle(&quot;Drift time (ns)&quot;);</span>
<span class="lineNum">     986 </span><span class="lineNoCov">          0 :   h24-&gt;GetYaxis()-&gt;SetTitle(&quot;Cluster Size (anodes)&quot;);</span>
<span class="lineNum">     987 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h24,kSDDRecpCluSizAnLay4+offsRP, expert, !image); // 26</span>
<span class="lineNum">     988 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     989 </span>            : 
<span class="lineNum">     990 </span><span class="lineNoCov">          0 :   TH2F *h25 = new TH2F(&quot;SDDL3_clusizTB&quot;,&quot;L3 CluSiz TimeBin&quot;,50,0.,6400.,21,-0.5,20.5);</span>
<span class="lineNum">     991 </span><span class="lineNoCov">          0 :   h25-&gt;GetXaxis()-&gt;SetTitle(&quot;Drift time (ns)&quot;);</span>
<span class="lineNum">     992 </span><span class="lineNoCov">          0 :   h25-&gt;GetYaxis()-&gt;SetTitle(&quot;Cluster Size (time bins)&quot;);</span>
<span class="lineNum">     993 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h25,kSDDRecpCluSizTbLay3+offsRP, expert, !image); // 25</span>
<span class="lineNum">     994 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">     995 </span>            :   
<span class="lineNum">     996 </span><span class="lineNoCov">          0 :   TH2F *h26 = new TH2F(&quot;SDDL4_clusizTB&quot;,&quot;L4 CluSiz TimeBin&quot;,50,0.,6400.,21,-0.5,20.5);</span>
<span class="lineNum">     997 </span><span class="lineNoCov">          0 :   h26-&gt;GetXaxis()-&gt;SetTitle(&quot;Drift time (ns)&quot;);</span>
<span class="lineNum">     998 </span><span class="lineNoCov">          0 :   h26-&gt;GetYaxis()-&gt;SetTitle(&quot;Cluster Size (time bins)&quot;);</span>
<span class="lineNum">     999 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(h26,kSDDRecpCluSizTbLay4+offsRP, expert, !image); // 26</span>
<span class="lineNum">    1000 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">    1001 </span>            :         
<span class="lineNum">    1002 </span>            : 
<span class="lineNum">    1003 </span><span class="lineNoCov">          0 :   TH1F *hsummarydatarp = new TH1F(&quot;SDDRecPointCheck&quot;,&quot;SDDRecPointCheck&quot;,46,-0.5,45.5);//27 summary of recpoint checks</span>
<span class="lineNum">    1004 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetLabelSize(0.02);</span>
<span class="lineNum">    1005 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetTickLength(0.01);</span>
<span class="lineNum">    1006 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetNdivisions(110);</span>
<span class="lineNum">    1007 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetTicks(&quot;-&quot;);</span>
<span class="lineNum">    1008 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetYaxis()-&gt;SetLabelSize(0.02);</span>
<span class="lineNum">    1009 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetYaxis()-&gt;SetTitleSize(0.02);</span>
<span class="lineNum">    1010 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetYaxis()-&gt;SetTitleOffset(1.5);</span>
<span class="lineNum">    1011 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetYaxis()-&gt;SetTitle(&quot;#events(norm) or #modules (m) or #drift regions (dr)&quot;);</span>
<span class="lineNum">    1012 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;SetStats(0);</span>
<span class="lineNum">    1013 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;SetMaximum(272);</span>
<span class="lineNum">    1014 </span>            : 
<span class="lineNum">    1015 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;SetOption(&quot;text bar1&quot;);</span>
<span class="lineNum">    1016 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;SetBarOffset(0.05);</span>
<span class="lineNum">    1017 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;SetBarWidth(0.95);</span>
<span class="lineNum">    1018 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;SetFillColor(32);</span>
<span class="lineNum">    1019 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;SetMinimum(0.);</span>
<span class="lineNum">    1020 </span>            : 
<span class="lineNum">    1021 </span>            :   //information about the events
<span class="lineNum">    1022 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(1,&quot;Events&quot;);</span>
<span class="lineNum">    1023 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(2,&quot;Ent_NORM&quot;);</span>
<span class="lineNum">    1024 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(3,&quot;Ent_NORML3&quot;);</span>
<span class="lineNum">    1025 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(4,&quot;Ent_NORML4&quot;);</span>
<span class="lineNum">    1026 </span>            :   //all
<span class="lineNum">    1027 </span>            : 
<span class="lineNum">    1028 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(5, &quot;m_act&quot;);</span>
<span class="lineNum">    1029 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(6, &quot;m_fil&quot;);</span>
<span class="lineNum">    1030 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(7, &quot;dr_act&quot;);</span>
<span class="lineNum">    1031 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(8, &quot;dr_fil&quot;);</span>
<span class="lineNum">    1032 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(9, &quot;m_exc&quot;);</span>
<span class="lineNum">    1033 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(10,&quot;m_emp&quot;);</span>
<span class="lineNum">    1034 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(11,&quot;dr_exc&quot;);</span>
<span class="lineNum">    1035 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(12,&quot;dr_emp&quot;);</span>
<span class="lineNum">    1036 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(13,&quot;m_exc-act&quot;);</span>
<span class="lineNum">    1037 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(14,&quot;m_act-emp&quot;);</span>
<span class="lineNum">    1038 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(15,&quot;dr_exc-act&quot;);</span>
<span class="lineNum">    1039 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(16,&quot;dr_act-emp&quot;);</span>
<span class="lineNum">    1040 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(17,&quot;m_overth&quot;);</span>
<span class="lineNum">    1041 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(18,&quot;dr_overth&quot;);</span>
<span class="lineNum">    1042 </span>            : 
<span class="lineNum">    1043 </span>            :   //l3
<span class="lineNum">    1044 </span>            : 
<span class="lineNum">    1045 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(19,&quot;m_actl3&quot;);</span>
<span class="lineNum">    1046 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(20,&quot;m_fill3&quot;);</span>
<span class="lineNum">    1047 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(21,&quot;dr_actl3&quot;);</span>
<span class="lineNum">    1048 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(22,&quot;dr_fill3&quot;);</span>
<span class="lineNum">    1049 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(23,&quot;m_excl3&quot;);</span>
<span class="lineNum">    1050 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(24,&quot;m_empl3&quot;);</span>
<span class="lineNum">    1051 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(25,&quot;dr_excl3&quot;);</span>
<span class="lineNum">    1052 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(26,&quot;dr_empl3&quot;);</span>
<span class="lineNum">    1053 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(27,&quot;m_exc-actl3&quot;);</span>
<span class="lineNum">    1054 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(28,&quot;m_act-empl3&quot;);</span>
<span class="lineNum">    1055 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(29,&quot;dr_exc-actl3&quot;);</span>
<span class="lineNum">    1056 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(30,&quot;dr_act-empl3&quot;);</span>
<span class="lineNum">    1057 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(31,&quot;m_overthl3&quot;);</span>
<span class="lineNum">    1058 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(32,&quot;dr_overthl3&quot;);</span>
<span class="lineNum">    1059 </span>            : 
<span class="lineNum">    1060 </span>            :   //l4
<span class="lineNum">    1061 </span>            : 
<span class="lineNum">    1062 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(33,&quot;m_actl4&quot;);</span>
<span class="lineNum">    1063 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(34,&quot;m_fill4&quot;);</span>
<span class="lineNum">    1064 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(35,&quot;dr_actl4&quot;);</span>
<span class="lineNum">    1065 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(36,&quot;dr_fill4&quot;);</span>
<span class="lineNum">    1066 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(37,&quot;m_excl4&quot;);</span>
<span class="lineNum">    1067 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(38,&quot;m_empl4&quot;);</span>
<span class="lineNum">    1068 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(39,&quot;dr_excl4&quot;);</span>
<span class="lineNum">    1069 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(40,&quot;dr_empl4&quot;);</span>
<span class="lineNum">    1070 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(41,&quot;m_exc-actl4&quot;);</span>
<span class="lineNum">    1071 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(42,&quot;m_act-empl4&quot;);</span>
<span class="lineNum">    1072 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(43,&quot;dr_exc-actl4&quot;);</span>
<span class="lineNum">    1073 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(44,&quot;dr_act-empl4&quot;);</span>
<span class="lineNum">    1074 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(45,&quot;m_overthl4&quot;);</span>
<span class="lineNum">    1075 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;SetBinLabel(46,&quot;dr_overthl4&quot;);</span>
<span class="lineNum">    1076 </span>            : 
<span class="lineNum">    1077 </span><span class="lineNoCov">          0 :   hsummarydatarp-&gt;GetXaxis()-&gt;LabelsOption(&quot;v&quot;);</span>
<span class="lineNum">    1078 </span>            : 
<span class="lineNum">    1079 </span><span class="lineNoCov">          0 :   rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(hsummarydatarp,kSDDRecpDataCheck+offsRP, !expert, image);</span>
<span class="lineNum">    1080 </span><span class="lineNoCov">          0 :   fSDDhRecPointsTask++;</span>
<span class="lineNum">    1081 </span>            : 
<span class="lineNum">    1082 </span><span class="lineNoCov">          0 :   fOnlineOffsetRecPoints = fSDDhRecPointsTask;</span>
<span class="lineNum">    1083 </span><span class="lineNoCov">          0 :   if(fkOnline){</span>
<span class="lineNum">    1084 </span><span class="lineNoCov">          0 :     TH2F *hxy1ev = new TH2F(&quot;SDDGlobalCoordDistribYXFSE&quot;,&quot;YX Global Coord Distrib FSE&quot;,112,-28,28,112,-28,28);</span>
<span class="lineNum">    1085 </span><span class="lineNoCov">          0 :     hxy1ev-&gt;GetYaxis()-&gt;SetTitle(&quot;Y (cm)&quot;);</span>
<span class="lineNum">    1086 </span><span class="lineNoCov">          0 :     hxy1ev-&gt;GetXaxis()-&gt;SetTitle(&quot;X (cm)&quot;);</span>
<span class="lineNum">    1087 </span><span class="lineNoCov">          0 :     rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(hxy1ev,kSDDRecpOnlineGloXYSingEv+offsRP, expert, !image);</span>
<span class="lineNum">    1088 </span><span class="lineNoCov">          0 :     fSDDhRecPointsTask++;</span>
<span class="lineNum">    1089 </span>            :     
<span class="lineNum">    1090 </span><span class="lineNoCov">          0 :     TH2F *hrz1ev = new TH2F(&quot;SDDGlobalCoordDistribRZFSE&quot;,&quot;RZ Global Coord Distrib FSE&quot;,128,-32,32,56,12,26);</span>
<span class="lineNum">    1091 </span><span class="lineNoCov">          0 :     hrz1ev-&gt;GetYaxis()-&gt;SetTitle(&quot;R (cm)&quot;);</span>
<span class="lineNum">    1092 </span><span class="lineNoCov">          0 :     hrz1ev-&gt;GetXaxis()-&gt;SetTitle(&quot;Z (cm)&quot;);</span>
<span class="lineNum">    1093 </span><span class="lineNoCov">          0 :     rv = fAliITSQADataMakerRec-&gt;Add2RecPointsList(hrz1ev,kSDDRecpOnlineGloRZSingEv+offsRP, expert, !image);</span>
<span class="lineNum">    1094 </span><span class="lineNoCov">          0 :     fSDDhRecPointsTask++;      </span>
<span class="lineNum">    1095 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">    1096 </span>            :   
<span class="lineNum">    1097 </span><span class="lineNoCov">          0 :   AliDebug(AliQAv1::GetQADebugLevel(),Form(&quot;%d SDD Recs histograms booked\n&quot;,fSDDhRecPointsTask));</span>
<span class="lineNum">    1098 </span>            :   //
<span class="lineNum">    1099 </span><span class="lineNoCov">          0 :   return rv ; </span>
<span class="lineNum">    1100 </span><span class="lineNoCov">          0 : }</span>
<a name="1101"><span class="lineNum">    1101 </span>            : </a>
<span class="lineNum">    1102 </span>            : //____________________________________________________________________________ 
<span class="lineNum">    1103 </span>            : Int_t AliITSQASDDDataMakerRec::MakeRecPoints(TTree * clustersTree)
<span class="lineNum">    1104 </span>            : {
<span class="lineNum">    1105 </span>            :  // Fill QA for RecPoints - SDD -
<span class="lineNum">    1106 </span>            :   Int_t rv = 0 ;
<span class="lineNum">    1107 </span><span class="lineNoCov">          0 :   Int_t lay, lad, det; </span>
<span class="lineNum">    1108 </span>            : 
<span class="lineNum">    1109 </span><span class="lineNoCov">          0 :   AliITSRecPointContainer* rpcont=AliITSRecPointContainer::Instance();</span>
<span class="lineNum">    1110 </span>            :   TClonesArray *recpoints=NULL; 
<span class="lineNum">    1111 </span><span class="lineNoCov">          0 :   if(fkOnline){</span>
<span class="lineNum">    1112 </span><span class="lineNoCov">          0 :     recpoints = rpcont-&gt;FetchClusters(0,clustersTree,fAliITSQADataMakerRec-&gt;GetEventNumber());</span>
<span class="lineNum">    1113 </span><span class="lineNoCov">          0 :   }else{</span>
<span class="lineNum">    1114 </span><span class="lineNoCov">          0 :     recpoints = rpcont-&gt;FetchClusters(0,clustersTree);</span>
<span class="lineNum">    1115 </span>            :   }
<span class="lineNum">    1116 </span><span class="lineNoCov">          0 :   AliDebug(10,Form(&quot;Fetched RecPoints for %d SDD modules&quot;,recpoints-&gt;GetEntriesFast()));</span>
<span class="lineNum">    1117 </span><span class="lineNoCov">          0 :   if(!rpcont-&gt;GetStatusOK() || !rpcont-&gt;IsSDDActive()){</span>
<span class="lineNum">    1118 </span><span class="lineNoCov">          0 :     AliError(&quot;can't get SDD clusters !&quot;);</span>
<span class="lineNum">    1119 </span><span class="lineNoCov">          0 :     return rv;</span>
<span class="lineNum">    1120 </span>            :   }
<span class="lineNum">    1121 </span><span class="lineNoCov">          0 :   int offsRP = fGenRecPointsOffset[fAliITSQADataMakerRec-&gt;GetEventSpecie()];</span>
<span class="lineNum">    1122 </span>            :   Int_t npoints = 0;      
<span class="lineNum">    1123 </span><span class="lineNoCov">          0 :   Float_t cluglo[3]={0.,0.,0.}; </span>
<span class="lineNum">    1124 </span><span class="lineNoCov">          0 :   if(fkOnline){</span>
<span class="lineNum">    1125 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRecPointsData(kSDDRecpOnlineGloXYSingEv+offsRP);</span>
<span class="lineNum">    1126 </span><span class="lineNoCov">          0 :     fAliITSQADataMakerRec-&gt;ResetRecPointsData(kSDDRecpOnlineGloRZSingEv+offsRP);</span>
<span class="lineNum">    1127 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">    1128 </span>            : 
<span class="lineNum">    1129 </span><span class="lineNoCov">          0 :   Int_t firMod=TMath::Max(0,AliITSgeomTGeo::GetModuleIndex(3,1,1));</span>
<span class="lineNum">    1130 </span><span class="lineNoCov">          0 :   Int_t lasMod=AliITSgeomTGeo::GetModuleIndex(5,1,1);</span>
<span class="lineNum">    1131 </span><span class="lineNoCov">          0 :   for(Int_t module=firMod; module&lt;lasMod;module++){</span>
<span class="lineNum">    1132 </span><span class="lineNoCov">          0 :     recpoints = rpcont-&gt;UncheckedGetClusters(module);</span>
<span class="lineNum">    1133 </span><span class="lineNoCov">          0 :     npoints += recpoints-&gt;GetEntries();</span>
<span class="lineNum">    1134 </span><span class="lineNoCov">          0 :     for(Int_t j=0;j&lt;recpoints-&gt;GetEntries();j++){</span>
<span class="lineNum">    1135 </span><span class="lineNoCov">          0 :       AliITSRecPoint *recp = (AliITSRecPoint*)recpoints-&gt;At(j); </span>
<span class="lineNum">    1136 </span><span class="lineNoCov">          0 :       Int_t index = recp-&gt;GetDetectorIndex();</span>
<span class="lineNum">    1137 </span><span class="lineNoCov">          0 :       lay=recp-&gt;GetLayer();</span>
<span class="lineNum">    1138 </span><span class="lineNoCov">          0 :       if(lay &lt; 2 || lay &gt; 3) continue;</span>
<span class="lineNum">    1139 </span><span class="lineNoCov">          0 :       Int_t modnumb=index+AliITSgeomTGeo::GetModuleIndex(lay+1,1,1);</span>
<span class="lineNum">    1140 </span><span class="lineNoCov">          0 :       AliITSgeomTGeo::GetModuleId(modnumb, lay, lad, det);  </span>
<span class="lineNum">    1141 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpModPattern+offsRP,modnumb);</span>
<span class="lineNum">    1142 </span><span class="lineNoCov">          0 :       recp-&gt;GetGlobalXYZ(cluglo);</span>
<span class="lineNum">    1143 </span><span class="lineNoCov">          0 :       Float_t rad=TMath::Sqrt(cluglo[0]*cluglo[0]+cluglo[1]*cluglo[1]); </span>
<span class="lineNum">    1144 </span><span class="lineNoCov">          0 :       Float_t phi=TMath::ATan2(cluglo[1],cluglo[0]);</span>
<span class="lineNum">    1145 </span><span class="lineNoCov">          0 :       Float_t drifttime=recp-&gt;GetDriftTime();</span>
<span class="lineNum">    1146 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpLocalCoord+offsRP,recp-&gt;GetDetLocalX(),recp-&gt;GetDetLocalZ());</span>
<span class="lineNum">    1147 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpGloXY+offsRP,cluglo[0],cluglo[1]);</span>
<span class="lineNum">    1148 </span><span class="lineNoCov">          0 :       fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpGloRZ+offsRP,cluglo[2],rad);</span>
<span class="lineNum">    1149 </span><span class="lineNoCov">          0 :       if(fkOnline) {</span>
<span class="lineNum">    1150 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpOnlineGloXYSingEv+offsRP,cluglo[0],cluglo[1]);</span>
<span class="lineNum">    1151 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpOnlineGloRZSingEv+offsRP,cluglo[2],rad);</span>
<span class="lineNum">    1152 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">    1153 </span><span class="lineNoCov">          0 :       Int_t iside=recp-&gt;GetDriftSide();</span>
<span class="lineNum">    1154 </span><span class="lineNoCov">          0 :       lay=recp-&gt;GetLayer();</span>
<span class="lineNum">    1155 </span><span class="lineNoCov">          0 :       if(lay == 2) {</span>
<span class="lineNum">    1156 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpChargeLay3+offsRP, recp-&gt;GetQ());</span>
<span class="lineNum">    1157 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpLadModLay3+offsRP, det+0.5*iside-0.5,lad);</span>
<span class="lineNum">    1158 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpRLay3+offsRP, rad);</span>
<span class="lineNum">    1159 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpPhiLay3+offsRP, phi);</span>
<span class="lineNum">    1160 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpPhiZLay3+offsRP, cluglo[2],phi);</span>
<span class="lineNum">    1161 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpDriftTimeLay3+offsRP, drifttime);</span>
<span class="lineNum">    1162 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpCluSizAnLay3+offsRP, drifttime,recp-&gt;GetNz());</span>
<span class="lineNum">    1163 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpCluSizTbLay3+offsRP, drifttime,recp-&gt;GetNy());</span>
<span class="lineNum">    1164 </span><span class="lineNoCov">          0 :       } else if(lay == 3) {</span>
<span class="lineNum">    1165 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpChargeLay4+offsRP, recp-&gt;GetQ());</span>
<span class="lineNum">    1166 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpLadModLay4+offsRP, det+0.5*iside-0.5,lad);</span>
<span class="lineNum">    1167 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpRLay4+offsRP, rad);</span>
<span class="lineNum">    1168 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpPhiLay4+offsRP, phi);</span>
<span class="lineNum">    1169 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpPhiZLay4+offsRP, cluglo[2],phi);</span>
<span class="lineNum">    1170 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpDriftTimeLay4+offsRP, drifttime);</span>
<span class="lineNum">    1171 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpCluSizAnLay4+offsRP, drifttime, recp-&gt;GetNz());</span>
<span class="lineNum">    1172 </span><span class="lineNoCov">          0 :         fAliITSQADataMakerRec-&gt;FillRecPointsData(kSDDRecpCluSizTbLay4+offsRP, drifttime, recp-&gt;GetNy());</span>
<span class="lineNum">    1173 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">    1174 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">    1175 </span>            :   }
<span class="lineNum">    1176 </span>            :   //
<span class="lineNum">    1177 </span>            :   return rv ; 
<span class="lineNum">    1178 </span><span class="lineNoCov">          0 : }</span>
<a name="1179"><span class="lineNum">    1179 </span>            : </a>
<span class="lineNum">    1180 </span>            : //_______________________________________________________________
<span class="lineNum">    1181 </span>            : Int_t AliITSQASDDDataMakerRec::GetOffset(AliQAv1::TASKINDEX_t task, Int_t specie) const
<span class="lineNum">    1182 </span>            : {
<span class="lineNum">    1183 </span>            :   // Returns offset number according to the specified task
<span class="lineNum">    1184 </span>            :   Int_t offset=0;
<span class="lineNum">    1185 </span><span class="lineNoCov">          0 :   if( task == AliQAv1::kRAWS ){offset=fGenRawsOffset[specie];}</span>
<span class="lineNum">    1186 </span><span class="lineNoCov">          0 :   else if(task == AliQAv1::kDIGITSR ){offset=fGenDigitsOffset[specie];}</span>
<span class="lineNum">    1187 </span><span class="lineNoCov">          0 :   else if( task == AliQAv1::kRECPOINTS ){offset=fGenRecPointsOffset[specie];}</span>
<span class="lineNum">    1188 </span><span class="lineNoCov">          0 :   return offset;</span>
<span class="lineNum">    1189 </span>            : }
<a name="1190"><span class="lineNum">    1190 </span>            : </a>
<span class="lineNum">    1191 </span>            : //_______________________________________________________________
<span class="lineNum">    1192 </span>            : void AliITSQASDDDataMakerRec::SetOffset(AliQAv1::TASKINDEX_t task, Int_t offset, Int_t specie) {
<span class="lineNum">    1193 </span>            :   // Set offset number according to the specified task
<span class="lineNum">    1194 </span><span class="lineNoCov">          0 :   if( task == AliQAv1::kRAWS ) {fGenRawsOffset[specie]=offset;}</span>
<span class="lineNum">    1195 </span><span class="lineNoCov">          0 :   else if( task == AliQAv1::kDIGITSR ) {fGenDigitsOffset[specie]=offset;}</span>
<span class="lineNum">    1196 </span><span class="lineNoCov">          0 :   else if( task == AliQAv1::kRECPOINTS ) {fGenRecPointsOffset[specie]=offset;}</span>
<span class="lineNum">    1197 </span><span class="lineNoCov">          0 : }</span>
<a name="1198"><span class="lineNum">    1198 </span>            : </a>
<span class="lineNum">    1199 </span>            : //_______________________________________________________________
<span class="lineNum">    1200 </span>            : Int_t AliITSQASDDDataMakerRec::GetTaskHisto(AliQAv1::TASKINDEX_t task)
<span class="lineNum">    1201 </span>            : {
<span class="lineNum">    1202 </span>            :   //return the number of histo booked for a given Task
<span class="lineNum">    1203 </span>            :   Int_t histotot=0;
<span class="lineNum">    1204 </span><span class="lineNoCov">          0 :   if( task == AliQAv1::kRAWS ){ histotot=fSDDhRawsTask ;}</span>
<span class="lineNum">    1205 </span><span class="lineNoCov">          0 :   else if(task == AliQAv1::kDIGITSR) { histotot=fSDDhDigitsTask;}</span>
<span class="lineNum">    1206 </span><span class="lineNoCov">          0 :   else if( task == AliQAv1::kRECPOINTS ){ histotot=fSDDhRecPointsTask;}</span>
<span class="lineNum">    1207 </span><span class="lineNoCov">          0 :   else {AliInfo(&quot;No task has been selected. TaskHisto set to zero.\n&quot;);}</span>
<span class="lineNum">    1208 </span><span class="lineNoCov">          0 :   return histotot;</span>
<span class="lineNum">    1209 </span>            : }
<span class="lineNum">    1210 </span>            : 
<a name="1211"><span class="lineNum">    1211 </span>            : </a>
<span class="lineNum">    1212 </span>            : //_______________________________________________________________
<span class="lineNum">    1213 </span>            : void AliITSQASDDDataMakerRec::CreateTheMap()
<span class="lineNum">    1214 </span>            : {
<span class="lineNum">    1215 </span>            :   //Create the SDD DDL Module Map
<span class="lineNum">    1216 </span><span class="lineNoCov">          0 :   AliCDBEntry *ddlMapSDD = AliCDBManager::Instance()-&gt;Get(&quot;ITS/Calib/DDLMapSDD&quot;);</span>
<span class="lineNum">    1217 </span><span class="lineNoCov">          0 :   Bool_t cacheStatus = AliCDBManager::Instance()-&gt;GetCacheFlag();</span>
<span class="lineNum">    1218 </span><span class="lineNoCov">          0 :   if(!ddlMapSDD){</span>
<span class="lineNum">    1219 </span><span class="lineNoCov">          0 :       AliError(&quot;Calibration object retrieval failed! SDD will not be processed&quot;);</span>
<span class="lineNum">    1220 </span><span class="lineNoCov">          0 :       fDDLModuleMap = NULL;</span>
<span class="lineNum">    1221 </span>            :       //return rv;
<span class="lineNum">    1222 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">    1223 </span>            :   else{
<span class="lineNum">    1224 </span><span class="lineNoCov">          0 :     fDDLModuleMap = (AliITSDDLModuleMapSDD*)ddlMapSDD-&gt;GetObject();</span>
<span class="lineNum">    1225 </span><span class="lineNoCov">          0 :     if(!cacheStatus)ddlMapSDD-&gt;SetObject(NULL);</span>
<span class="lineNum">    1226 </span><span class="lineNoCov">          0 :     ddlMapSDD-&gt;SetOwner(kTRUE);</span>
<span class="lineNum">    1227 </span><span class="lineNoCov">          0 :     if(!cacheStatus){ delete ddlMapSDD;}</span>
<span class="lineNum">    1228 </span><span class="lineNoCov">          0 :     AliInfo(&quot;DDL Map Created\n &quot;);</span>
<span class="lineNum">    1229 </span>            :   }
<span class="lineNum">    1230 </span><span class="lineNoCov">          0 : }</span>
<a name="1231"><span class="lineNum">    1231 </span>            : </a>
<span class="lineNum">    1232 </span>            : //_______________________________________________________________
<span class="lineNum">    1233 </span>            : void AliITSQASDDDataMakerRec::CreateTheCalibration()
<span class="lineNum">    1234 </span>            : {
<span class="lineNum">    1235 </span>            :   //Take from the OCDB the calibration information for the SDD 
<span class="lineNum">    1236 </span><span class="lineNoCov">          0 :   AliCDBEntry *calibSDD = AliCDBManager::Instance()-&gt;Get(&quot;ITS/Calib/CalibSDD&quot;);</span>
<span class="lineNum">    1237 </span><span class="lineNoCov">          0 :   Bool_t cacheStatus = AliCDBManager::Instance()-&gt;GetCacheFlag();</span>
<span class="lineNum">    1238 </span><span class="lineNoCov">          0 :   if(!calibSDD){</span>
<span class="lineNum">    1239 </span><span class="lineNoCov">          0 :     AliError(&quot;Calibration object retrieval failed! SDD will not be processed&quot;);</span>
<span class="lineNum">    1240 </span><span class="lineNoCov">          0 :     fCalibration = NULL;</span>
<span class="lineNum">    1241 </span><span class="lineNoCov">          0 :   }else{</span>
<span class="lineNum">    1242 </span><span class="lineNoCov">          0 :     fCalibration = (TObjArray *)calibSDD-&gt;GetObject();      </span>
<span class="lineNum">    1243 </span><span class="lineNoCov">          0 :     if(!cacheStatus) calibSDD-&gt;SetObject(NULL);</span>
<span class="lineNum">    1244 </span><span class="lineNoCov">          0 :     calibSDD-&gt;SetOwner(kTRUE);</span>
<span class="lineNum">    1245 </span><span class="lineNoCov">          0 :     if(!cacheStatus) delete calibSDD;</span>
<span class="lineNum">    1246 </span>            : 
<span class="lineNum">    1247 </span><span class="lineNoCov">          0 :     AliCDBId cdbid=calibSDD-&gt;GetId();</span>
<span class="lineNum">    1248 </span><span class="lineNoCov">          0 :     fPulserRun=cdbid.GetFirstRun();</span>
<span class="lineNum">    1249 </span>            : 
<span class="lineNum">    1250 </span>            :     AliITSCalibrationSDD * cal=NULL;
<span class="lineNum">    1251 </span><span class="lineNoCov">          0 :     for(Int_t imod=0;imod&lt;fgknSDDmodules;imod++){</span>
<span class="lineNum">    1252 </span><span class="lineNoCov">          0 :       Int_t module=imod + 240;</span>
<span class="lineNum">    1253 </span><span class="lineNoCov">          0 :       Int_t lay,lad,det;</span>
<span class="lineNum">    1254 </span><span class="lineNoCov">          0 :       AliITSgeomTGeo::GetModuleId(module,lay,lad,det);</span>
<span class="lineNum">    1255 </span><span class="lineNoCov">          0 :       Int_t index=1+(det-1)*2;</span>
<span class="lineNum">    1256 </span><span class="lineNoCov">          0 :       Int_t nGoodAnPerSide[2]={0,0};</span>
<span class="lineNum">    1257 </span><span class="lineNoCov">          0 :       cal=(AliITSCalibrationSDD*)fCalibration-&gt;At(imod);</span>
<span class="lineNum">    1258 </span><span class="lineNoCov">          0 :       if(cal &amp;&amp; !cal-&gt;IsBad()){</span>
<span class="lineNum">    1259 </span><span class="lineNoCov">          0 :         for(Int_t iAn=0; iAn&lt;512; iAn++){</span>
<span class="lineNum">    1260 </span><span class="lineNoCov">          0 :           Int_t iwing=cal-&gt;GetWing(iAn);</span>
<span class="lineNum">    1261 </span><span class="lineNoCov">          0 :           Int_t ichip=cal-&gt;GetChip(iAn);</span>
<span class="lineNum">    1262 </span><span class="lineNoCov">          0 :           if(!cal-&gt;IsChipBad(ichip) &amp;&amp; !cal-&gt;IsBadChannel(iAn)) nGoodAnPerSide[iwing]++;      </span>
<span class="lineNum">    1263 </span>            :         }
<span class="lineNum">    1264 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">    1265 </span><span class="lineNoCov">          0 :       Int_t totGoodAn=nGoodAnPerSide[0]+nGoodAnPerSide[1];</span>
<span class="lineNum">    1266 </span><span class="lineNoCov">          0 :       ((TH1F*)(fHistoCalibration-&gt;At(0)))-&gt;SetBinContent(imod+1,totGoodAn);</span>
<span class="lineNum">    1267 </span><span class="lineNoCov">          0 :       ((TH2F*)(fHistoCalibration-&gt;At(lay-2)))-&gt;SetBinContent(index,lad,nGoodAnPerSide[0]);</span>
<span class="lineNum">    1268 </span><span class="lineNoCov">          0 :       ((TH2F*)(fHistoCalibration-&gt;At(lay-2)))-&gt;SetBinContent(index+1,lad,nGoodAnPerSide[1]);</span>
<span class="lineNum">    1269 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">    1270 </span><span class="lineNoCov">          0 :   }  </span>
<span class="lineNum">    1271 </span><span class="lineNoCov">          0 : }</span>
<a name="1272"><span class="lineNum">    1272 </span>            : </a>
<span class="lineNum">    1273 </span>            : //____________________________________________________________________
<span class="lineNum">    1274 </span>            : void AliITSQASDDDataMakerRec::InitCalibrationArray()
<span class="lineNum">    1275 </span>            : {
<span class="lineNum">    1276 </span>            :   //create the histograms with the calibration informations. The histograms are stored in a TObjArray
<span class="lineNum">    1277 </span><span class="lineCov">          4 :     TH1F *pattern1  = new TH1F(&quot;CALSDDModPattern&quot;,&quot;Calibration HW Modules pattern&quot;,fgknSDDmodules,239.5,499.5);</span>
<span class="lineNum">    1278 </span><span class="lineCov">          2 :     pattern1-&gt;SetDirectory(0) ;</span>
<span class="lineNum">    1279 </span><span class="lineCov">          2 :     TH2F *patternl3 = new TH2F(&quot;CALSDDphizL3&quot;,&quot;Calibration SDD #varphiz Layer3 &quot;,12,0.5,6.5,14,0.5,14.5);</span>
<span class="lineNum">    1280 </span><span class="lineCov">          2 :     patternl3-&gt;SetDirectory(0) ;</span>
<span class="lineNum">    1281 </span><span class="lineCov">          2 :     TH2F *patternl4 = new TH2F(&quot;CALSDDphizL4&quot;,&quot; Calibration SDD #varphiz Layer4 &quot;,16,0.5,8.5,22,0.5,22.5);</span>
<span class="lineNum">    1282 </span><span class="lineCov">          2 :     patternl4-&gt;SetDirectory(0) ;</span>
<span class="lineNum">    1283 </span>            : 
<span class="lineNum">    1284 </span><span class="lineCov">          6 :     if(!fHistoCalibration)fHistoCalibration = new TObjArray(3);</span>
<span class="lineNum">    1285 </span><span class="lineCov">          2 :     fHistoCalibration-&gt;AddAtAndExpand(pattern1,0);</span>
<span class="lineNum">    1286 </span><span class="lineCov">          2 :     fHistoCalibration-&gt;AddAtAndExpand(patternl3,1);</span>
<span class="lineNum">    1287 </span><span class="lineCov">          2 :     fHistoCalibration-&gt;AddAtAndExpand(patternl4,2);</span>
<span class="lineNum">    1288 </span><span class="lineCov">          2 :     fHistoCalibration-&gt;SetOwner(kTRUE); </span>
<span class="lineNum">    1289 </span>            :     //    printf(&quot;Calibration Histograms created!\n&quot;);
<span class="lineNum">    1290 </span><span class="lineCov">          2 : }</span>
<a name="1291"><span class="lineNum">    1291 </span>            : </a>
<span class="lineNum">    1292 </span>            : //____________________________________________________________________
<span class="lineNum">    1293 </span>            : void AliITSQASDDDataMakerRec::ResetDetector(AliQAv1::TASKINDEX_t task)
<span class="lineNum">    1294 </span>            : {
<span class="lineNum">    1295 </span>            :   //reset the SDD calibration histograms
<span class="lineNum">    1296 </span><span class="lineNoCov">          0 :   AliInfo(Form(&quot;Reset detector in SDD called for task index %i&quot;, task));</span>
<span class="lineNum">    1297 </span><span class="lineNoCov">          0 :   if(task== AliQAv1::kRAWS ){</span>
<span class="lineNum">    1298 </span><span class="lineNoCov">          0 :     fDDLModuleMap=NULL;</span>
<span class="lineNum">    1299 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">    1300 </span>            : 
<span class="lineNum">    1301 </span><span class="lineNoCov">          0 :   fCalibration=NULL;</span>
<span class="lineNum">    1302 </span>            : 
<span class="lineNum">    1303 </span><span class="lineNoCov">          0 :   ((TH1F*)(fHistoCalibration-&gt;At(0)))-&gt;Reset();</span>
<span class="lineNum">    1304 </span><span class="lineNoCov">          0 :   ((TH2F*)(fHistoCalibration-&gt;At(1)))-&gt;Reset();</span>
<span class="lineNum">    1305 </span><span class="lineNoCov">          0 :   ((TH2F*)(fHistoCalibration-&gt;At(2)))-&gt;Reset();</span>
<span class="lineNum">    1306 </span>            :   //delete fHistoCalibration;
<span class="lineNum">    1307 </span>            :   //fHistoCalibration=NULL;
<span class="lineNum">    1308 </span>            :   
<span class="lineNum">    1309 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">    1310 </span>            : 
<a name="1311"><span class="lineNum">    1311 </span>            : //____________________________________________________________________</a>
<span class="lineNum">    1312 </span>            : 
<span class="lineNum">    1313 </span>            : Int_t AliITSQASDDDataMakerRec::GetNumberOfEvents(AliQAv1::TASKINDEX_t task, Int_t trigCl)
<span class="lineNum">    1314 </span>            : {
<span class="lineNum">    1315 </span>            :   //return the number of the processed events for a given task and trigger class (-1 for all)
<span class="lineNum">    1316 </span><span class="lineNoCov">          0 :   return fAliITSQADataMakerRec-&gt;GetEvCountTotal(task, trigCl);</span>
<a name="1317"><span class="lineNum">    1317 </span>            : }</a>
<span class="lineNum">    1318 </span>            : //____________________________________________________________________
<span class="lineNum">    1319 </span>            : void AliITSQASDDDataMakerRec::FillRelativeOccupancyHistos(TH2* hnormc, TH1* hrelocc) const{
<span class="lineNum">    1320 </span>            :   // fill histograms with relative occupancy
<span class="lineNum">    1321 </span><span class="lineNoCov">          0 :   if (hnormc &amp;&amp; hrelocc){</span>
<span class="lineNum">    1322 </span><span class="lineNoCov">          0 :     for(Int_t i=0; i&lt;hnormc-&gt;GetNbinsX(); i++){</span>
<span class="lineNum">    1323 </span><span class="lineNoCov">          0 :       for(Int_t j=0; j&lt;hnormc-&gt;GetNbinsY(); j++){</span>
<span class="lineNum">    1324 </span><span class="lineNoCov">          0 :         hrelocc-&gt;Fill(hnormc-&gt;GetBinContent(i,j));</span>
<span class="lineNum">    1325 </span>            :       }
<span class="lineNum">    1326 </span>            :     }
<span class="lineNum">    1327 </span><span class="lineNoCov">          0 :   }</span>
<a name="1328"><span class="lineNum">    1328 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1329 </span>            : //____________________________________________________________________
<span class="lineNum">    1330 </span>            : void AliITSQASDDDataMakerRec::FillRecToRaw(TH2* hrpLay,TH2* hrwLay,TH2* hratioLay) const{
<span class="lineNum">    1331 </span>            :   // fill histogram with rec to raw ratios
<span class="lineNum">    1332 </span><span class="lineNoCov">          0 :   if (hrpLay &amp;&amp; hrwLay &amp;&amp; hratioLay){</span>
<span class="lineNum">    1333 </span><span class="lineNoCov">          0 :     Int_t nbx1=hrpLay-&gt;GetNbinsX();</span>
<span class="lineNum">    1334 </span><span class="lineNoCov">          0 :     Int_t nbx2=hrwLay-&gt;GetNbinsX();</span>
<span class="lineNum">    1335 </span><span class="lineNoCov">          0 :     Int_t nbx3=hratioLay-&gt;GetNbinsX();</span>
<span class="lineNum">    1336 </span><span class="lineNoCov">          0 :     Int_t nby1=hrpLay-&gt;GetNbinsY();</span>
<span class="lineNum">    1337 </span><span class="lineNoCov">          0 :     Int_t nby2=hrwLay-&gt;GetNbinsY();</span>
<span class="lineNum">    1338 </span><span class="lineNoCov">          0 :     Int_t nby3=hratioLay-&gt;GetNbinsY();</span>
<span class="lineNum">    1339 </span><span class="lineNoCov">          0 :     if(nbx1==nbx2 &amp;&amp; nbx1==nbx3 &amp;&amp; nby1==nby2 &amp;&amp; nby1==nby3){</span>
<span class="lineNum">    1340 </span><span class="lineNoCov">          0 :       hratioLay-&gt;Divide(hrpLay,hrwLay);</span>
<span class="lineNum">    1341 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">    1342 </span><span class="lineNoCov">          0 :     else AliWarning(&quot;Number of bins for Raws and RecPoints do not match\n&quot;);</span>
<span class="lineNum">    1343 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">    1344 </span><span class="lineNoCov">          0 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
