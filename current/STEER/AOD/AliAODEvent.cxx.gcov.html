<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - STEER/AOD/AliAODEvent.cxx</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">STEER/AOD</a> - AliAODEvent.cxx<span style="font-size: 80%;"> (source / <a href="AliAODEvent.cxx.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">203</td>
            <td class="headerCovTableEntry">629</td>
            <td class="headerCovTableEntryLo">32.3 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">20</td>
            <td class="headerCovTableEntry">52</td>
            <td class="headerCovTableEntryLo">38.5 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /**************************************************************************</a>
<span class="lineNum">       2 </span>            :  * Copyright(c) 1998-2007, ALICE Experiment at CERN, All rights reserved. *
<span class="lineNum">       3 </span>            :  *                                                                        *
<span class="lineNum">       4 </span>            :  * Author: The ALICE Off-line Project.                                    *
<span class="lineNum">       5 </span>            :  * Contributors are mentioned in the code where appropriate.              *
<span class="lineNum">       6 </span>            :  *                                                                        *
<span class="lineNum">       7 </span>            :  * Permission to use, copy, modify and distribute this software and its   *
<span class="lineNum">       8 </span>            :  * documentation strictly for non-commercial purposes is hereby granted   *
<span class="lineNum">       9 </span>            :  * without fee, provided that the above copyright notice appears in all   *
<span class="lineNum">      10 </span>            :  * copies and that both the copyright notice and this permission notice   *
<span class="lineNum">      11 </span>            :  * appear in the supporting documentation. The authors make no claims     *
<span class="lineNum">      12 </span>            :  * about the suitability of this software for any purpose. It is          *
<span class="lineNum">      13 </span>            :  * provided &quot;as is&quot; without express or implied warranty.                  *
<span class="lineNum">      14 </span>            :  **************************************************************************/
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            : /* $Id$ */
<span class="lineNum">      17 </span>            : 
<span class="lineNum">      18 </span>            : //-------------------------------------------------------------------------
<span class="lineNum">      19 </span>            : //     AOD base class
<span class="lineNum">      20 </span>            : //     Author: Markus Oldenburg, CERN
<span class="lineNum">      21 </span>            : //-------------------------------------------------------------------------
<span class="lineNum">      22 </span>            : 
<span class="lineNum">      23 </span>            : #include &lt;TROOT.h&gt;
<span class="lineNum">      24 </span>            : #include &lt;TTree.h&gt;
<span class="lineNum">      25 </span>            : #include &lt;TFolder.h&gt;
<span class="lineNum">      26 </span>            : #include &lt;TFriendElement.h&gt;
<span class="lineNum">      27 </span>            : #include &lt;TProcessID.h&gt;
<span class="lineNum">      28 </span>            : #include &lt;TCollection.h&gt;
<span class="lineNum">      29 </span>            : #include &quot;Riostream.h&quot;
<span class="lineNum">      30 </span>            : #include &quot;AliAODEvent.h&quot;
<span class="lineNum">      31 </span>            : #include &quot;AliAODHeader.h&quot;
<span class="lineNum">      32 </span>            : #include &quot;AliAODTrack.h&quot;
<span class="lineNum">      33 </span>            : #include &quot;AliAODDimuon.h&quot;
<span class="lineNum">      34 </span>            : #include &quot;AliAODTrdTrack.h&quot;
<a name="35"><span class="lineNum">      35 </span>            : #include &quot;event.h&quot;</a>
<span class="lineNum">      36 </span>            : 
<span class="lineNum">      37 </span><span class="lineCov">        170 : ClassImp(AliAODEvent)</span>
<span class="lineNum">      38 </span>            : 
<span class="lineNum">      39 </span>            : // definition of std AOD member names
<span class="lineNum">      40 </span>            :   const char* AliAODEvent::fAODListName[kAODListN] = {&quot;header&quot;,
<span class="lineNum">      41 </span>            :                                                       &quot;tracks&quot;,
<span class="lineNum">      42 </span>            :                                                       &quot;vertices&quot;,
<span class="lineNum">      43 </span>            :                                                       &quot;v0s&quot;,
<span class="lineNum">      44 </span>            :                                                       &quot;cascades&quot;,
<span class="lineNum">      45 </span>            :                                                       &quot;tracklets&quot;,
<span class="lineNum">      46 </span>            :                                                       &quot;jets&quot;,
<span class="lineNum">      47 </span>            :                                                       &quot;emcalCells&quot;,
<span class="lineNum">      48 </span>            :                                                       &quot;phosCells&quot;,
<span class="lineNum">      49 </span>            :                                                                         &quot;caloClusters&quot;,
<span class="lineNum">      50 </span>            :                                                                         &quot;emcalTrigger&quot;,
<span class="lineNum">      51 </span>            :                                                                         &quot;phosTrigger&quot;,
<span class="lineNum">      52 </span>            :                                                       &quot;fmdClusters&quot;,
<span class="lineNum">      53 </span>            :                                                       &quot;pmdClusters&quot;,
<span class="lineNum">      54 </span>            :                                                       &quot;hmpidRings&quot;,
<span class="lineNum">      55 </span>            :                                                       &quot;dimuons&quot;,
<span class="lineNum">      56 </span>            :                                                       &quot;AliAODTZERO&quot;,
<span class="lineNum">      57 </span>            :                                                       &quot;AliAODVZERO&quot;,
<span class="lineNum">      58 </span>            :                                                       &quot;AliAODZDC&quot;,
<span class="lineNum">      59 </span>            :                                                       &quot;AliAODAD&quot;,
<span class="lineNum">      60 </span>            :                                                       &quot;AliTOFHeader&quot;,
<span class="lineNum">      61 </span>            :                                                       &quot;trdTracks&quot;
<span class="lineNum">      62 </span>            :                                                                               
<a name="63"><span class="lineNum">      63 </span>            : };</a>
<span class="lineNum">      64 </span>            : //______________________________________________________________________________
<span class="lineNum">      65 </span>            : AliAODEvent::AliAODEvent() :
<span class="lineNum">      66 </span><span class="lineCov">          2 :   AliVEvent(),</span>
<span class="lineNum">      67 </span><span class="lineCov">          2 :   fAODObjects(0),</span>
<span class="lineNum">      68 </span><span class="lineCov">          2 :   fAODFolder(0),</span>
<span class="lineNum">      69 </span><span class="lineCov">          2 :   fConnected(kFALSE),</span>
<span class="lineNum">      70 </span><span class="lineCov">          2 :   fTracksConnected(kFALSE),</span>
<span class="lineNum">      71 </span><span class="lineCov">          2 :   fHeader(0),</span>
<span class="lineNum">      72 </span><span class="lineCov">          2 :   fTracks(0),</span>
<span class="lineNum">      73 </span><span class="lineCov">          2 :   fVertices(0),</span>
<span class="lineNum">      74 </span><span class="lineCov">          2 :   fV0s(0),</span>
<span class="lineNum">      75 </span><span class="lineCov">          2 :   fCascades(0),</span>
<span class="lineNum">      76 </span><span class="lineCov">          2 :   fTracklets(0),</span>
<span class="lineNum">      77 </span><span class="lineCov">          2 :   fJets(0),</span>
<span class="lineNum">      78 </span><span class="lineCov">          2 :   fEmcalCells(0),</span>
<span class="lineNum">      79 </span><span class="lineCov">          2 :   fPhosCells(0),</span>
<span class="lineNum">      80 </span><span class="lineCov">          2 :   fCaloClusters(0),</span>
<span class="lineNum">      81 </span><span class="lineCov">          2 :   fEMCALTrigger(0),</span>
<span class="lineNum">      82 </span><span class="lineCov">          2 :   fPHOSTrigger(0),</span>
<span class="lineNum">      83 </span><span class="lineCov">          2 :   fFmdClusters(0),</span>
<span class="lineNum">      84 </span><span class="lineCov">          2 :   fPmdClusters(0),</span>
<span class="lineNum">      85 </span><span class="lineCov">          2 :   fHMPIDrings(0),</span>
<span class="lineNum">      86 </span><span class="lineCov">          2 :   fDimuons(0),</span>
<span class="lineNum">      87 </span><span class="lineCov">          2 :   fAODTZERO(0),</span>
<span class="lineNum">      88 </span><span class="lineCov">          2 :   fAODVZERO(0),</span>
<span class="lineNum">      89 </span><span class="lineCov">          2 :   fAODZDC(0),</span>
<span class="lineNum">      90 </span><span class="lineCov">          2 :   fAODAD(0),</span>
<span class="lineNum">      91 </span><span class="lineCov">          2 :   fTOFHeader(0),</span>
<span class="lineNum">      92 </span><span class="lineCov">          2 :   fTrdTracks(0)</span>
<span class="lineNum">      93 </span><span class="lineCov">         10 : {</span>
<span class="lineNum">      94 </span>            :   // default constructor
<span class="lineNum">      95 </span><span class="lineCov">         10 :   if (TClass::IsCallingNew() != TClass::kDummyNew) fAODObjects = new TList();</span>
<span class="lineNum">      96 </span><span class="lineCov">          4 : }</span>
<a name="97"><span class="lineNum">      97 </span>            : </a>
<span class="lineNum">      98 </span>            : //______________________________________________________________________________
<span class="lineNum">      99 </span>            : AliAODEvent::AliAODEvent(const AliAODEvent&amp; aod):
<span class="lineNum">     100 </span><span class="lineNoCov">          0 :   AliVEvent(aod),</span>
<span class="lineNum">     101 </span><span class="lineNoCov">          0 :   fAODObjects(new TList()),</span>
<span class="lineNum">     102 </span><span class="lineNoCov">          0 :   fAODFolder(0),</span>
<span class="lineNum">     103 </span><span class="lineNoCov">          0 :   fConnected(kFALSE),</span>
<span class="lineNum">     104 </span><span class="lineNoCov">          0 :   fTracksConnected(kFALSE),</span>
<span class="lineNum">     105 </span>            :   //  fHeader(new AliAODHeader(*aod.fHeader)),
<span class="lineNum">     106 </span><span class="lineNoCov">          0 :   fHeader(0),</span>
<span class="lineNum">     107 </span><span class="lineNoCov">          0 :   fTracks(new TClonesArray(*aod.fTracks)),</span>
<span class="lineNum">     108 </span><span class="lineNoCov">          0 :   fVertices(new TClonesArray(*aod.fVertices)),</span>
<span class="lineNum">     109 </span><span class="lineNoCov">          0 :   fV0s(new TClonesArray(*aod.fV0s)),</span>
<span class="lineNum">     110 </span><span class="lineNoCov">          0 :   fCascades(new TClonesArray(*aod.fCascades)),</span>
<span class="lineNum">     111 </span><span class="lineNoCov">          0 :   fTracklets(new AliAODTracklets(*aod.fTracklets)),</span>
<span class="lineNum">     112 </span><span class="lineNoCov">          0 :   fJets(new TClonesArray(*aod.fJets)),</span>
<span class="lineNum">     113 </span><span class="lineNoCov">          0 :   fEmcalCells(new AliAODCaloCells(*aod.fEmcalCells)),</span>
<span class="lineNum">     114 </span><span class="lineNoCov">          0 :   fPhosCells(new AliAODCaloCells(*aod.fPhosCells)),</span>
<span class="lineNum">     115 </span><span class="lineNoCov">          0 :   fCaloClusters(new TClonesArray(*aod.fCaloClusters)),</span>
<span class="lineNum">     116 </span><span class="lineNoCov">          0 :   fEMCALTrigger(new AliAODCaloTrigger(*aod.fEMCALTrigger)),</span>
<span class="lineNum">     117 </span><span class="lineNoCov">          0 :   fPHOSTrigger(new AliAODCaloTrigger(*aod.fPHOSTrigger)),</span>
<span class="lineNum">     118 </span><span class="lineNoCov">          0 :   fFmdClusters(new TClonesArray(*aod.fFmdClusters)),</span>
<span class="lineNum">     119 </span><span class="lineNoCov">          0 :   fPmdClusters(new TClonesArray(*aod.fPmdClusters)),</span>
<span class="lineNum">     120 </span><span class="lineNoCov">          0 :   fHMPIDrings(new TClonesArray(*aod.fHMPIDrings)),</span>
<span class="lineNum">     121 </span><span class="lineNoCov">          0 :   fDimuons(new TClonesArray(*aod.fDimuons)),</span>
<span class="lineNum">     122 </span><span class="lineNoCov">          0 :   fAODTZERO(new AliAODTZERO(*aod.fAODTZERO)),</span>
<span class="lineNum">     123 </span><span class="lineNoCov">          0 :   fAODVZERO(new AliAODVZERO(*aod.fAODVZERO)),</span>
<span class="lineNum">     124 </span><span class="lineNoCov">          0 :   fAODZDC(new AliAODZDC(*aod.fAODZDC)),</span>
<span class="lineNum">     125 </span><span class="lineNoCov">          0 :   fAODAD(new AliAODAD(*aod.fAODAD)),</span>
<span class="lineNum">     126 </span><span class="lineNoCov">          0 :   fTOFHeader(new AliTOFHeader(*aod.fTOFHeader)),</span>
<span class="lineNum">     127 </span><span class="lineNoCov">          0 :   fTrdTracks(new TClonesArray(*aod.fTrdTracks))</span>
<span class="lineNum">     128 </span><span class="lineNoCov">          0 : {</span>
<span class="lineNum">     129 </span>            :   // Copy constructor
<span class="lineNum">     130 </span><span class="lineNoCov">          0 :   AddHeader(fHeader);</span>
<span class="lineNum">     131 </span><span class="lineNoCov">          0 :   AddObject(fHeader);</span>
<span class="lineNum">     132 </span><span class="lineNoCov">          0 :   AddObject(fTracks);</span>
<span class="lineNum">     133 </span><span class="lineNoCov">          0 :   AddObject(fVertices);</span>
<span class="lineNum">     134 </span><span class="lineNoCov">          0 :   AddObject(fV0s);</span>
<span class="lineNum">     135 </span><span class="lineNoCov">          0 :   AddObject(fCascades);</span>
<span class="lineNum">     136 </span><span class="lineNoCov">          0 :   AddObject(fTracklets);</span>
<span class="lineNum">     137 </span><span class="lineNoCov">          0 :   AddObject(fJets);</span>
<span class="lineNum">     138 </span><span class="lineNoCov">          0 :   AddObject(fEmcalCells);</span>
<span class="lineNum">     139 </span><span class="lineNoCov">          0 :   AddObject(fPhosCells);</span>
<span class="lineNum">     140 </span><span class="lineNoCov">          0 :   AddObject(fCaloClusters);</span>
<span class="lineNum">     141 </span><span class="lineNoCov">          0 :   AddObject(fEMCALTrigger);</span>
<span class="lineNum">     142 </span><span class="lineNoCov">          0 :   AddObject(fPHOSTrigger);</span>
<span class="lineNum">     143 </span><span class="lineNoCov">          0 :   AddObject(fFmdClusters);</span>
<span class="lineNum">     144 </span><span class="lineNoCov">          0 :   AddObject(fPmdClusters);</span>
<span class="lineNum">     145 </span><span class="lineNoCov">          0 :   AddObject(fHMPIDrings);</span>
<span class="lineNum">     146 </span><span class="lineNoCov">          0 :   AddObject(fDimuons);</span>
<span class="lineNum">     147 </span><span class="lineNoCov">          0 :   AddObject(fAODTZERO);</span>
<span class="lineNum">     148 </span><span class="lineNoCov">          0 :   AddObject(fAODVZERO);</span>
<span class="lineNum">     149 </span><span class="lineNoCov">          0 :   AddObject(fAODZDC);</span>
<span class="lineNum">     150 </span><span class="lineNoCov">          0 :   AddObject(fAODAD);</span>
<span class="lineNum">     151 </span><span class="lineNoCov">          0 :   AddObject(fTOFHeader);</span>
<span class="lineNum">     152 </span><span class="lineNoCov">          0 :   AddObject(fTrdTracks);</span>
<span class="lineNum">     153 </span><span class="lineNoCov">          0 :   fConnected = aod.fConnected;</span>
<span class="lineNum">     154 </span><span class="lineNoCov">          0 :   ConnectTracks();</span>
<span class="lineNum">     155 </span><span class="lineNoCov">          0 :   GetStdContent();</span>
<span class="lineNum">     156 </span><span class="lineNoCov">          0 :   CreateStdFolders();</span>
<span class="lineNum">     157 </span><span class="lineNoCov">          0 : }</span>
<a name="158"><span class="lineNum">     158 </span>            : </a>
<span class="lineNum">     159 </span>            : //______________________________________________________________________________
<span class="lineNum">     160 </span>            : AliAODEvent &amp; AliAODEvent::operator=(const AliAODEvent&amp; aod) {
<span class="lineNum">     161 </span>            : 
<span class="lineNum">     162 </span>            :     // Assignment operator
<span class="lineNum">     163 </span>            : 
<span class="lineNum">     164 </span><span class="lineNoCov">          0 :   if(&amp;aod == this) return *this;</span>
<span class="lineNum">     165 </span><span class="lineNoCov">          0 :   AliVEvent::operator=(aod);</span>
<span class="lineNum">     166 </span>            : 
<span class="lineNum">     167 </span>            :   // This assumes that the list is already created
<span class="lineNum">     168 </span>            :   // and that the virtual void Copy(Tobject&amp;) function
<span class="lineNum">     169 </span>            :   // is correctly implemented in the derived class
<span class="lineNum">     170 </span>            :   // otherwise only TObject::Copy() will be used
<span class="lineNum">     171 </span>            : 
<span class="lineNum">     172 </span><span class="lineNoCov">          0 :   if((fAODObjects-&gt;GetSize()==0)&amp;&amp;(aod.fAODObjects-&gt;GetSize()&gt;=kAODListN)){</span>
<span class="lineNum">     173 </span>            :     // We cover the case that we do not yet have the 
<span class="lineNum">     174 </span>            :     // standard content but the source has it
<span class="lineNum">     175 </span><span class="lineNoCov">          0 :     CreateStdContent();</span>
<span class="lineNum">     176 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     177 </span>            :   
<span class="lineNum">     178 </span>            :   // Here we have the standard content without user additions, but the content is 
<span class="lineNum">     179 </span>            :   // not matching the aod source.
<span class="lineNum">     180 </span>            :   
<span class="lineNum">     181 </span>            :   // Iterate the list of source objects
<span class="lineNum">     182 </span><span class="lineNoCov">          0 :   TIter next(aod.GetList());</span>
<span class="lineNum">     183 </span>            :   TObject *its = 0;
<span class="lineNum">     184 </span><span class="lineNoCov">          0 :   TString name;</span>
<span class="lineNum">     185 </span><span class="lineNoCov">          0 :   while ((its = next())) {</span>
<span class="lineNum">     186 </span><span class="lineNoCov">          0 :     name = its-&gt;GetName();</span>
<span class="lineNum">     187 </span>            :     // Check if we have this object type in out list
<span class="lineNum">     188 </span><span class="lineNoCov">          0 :     TObject *mine = fAODObjects-&gt;FindObject(name);    </span>
<span class="lineNum">     189 </span><span class="lineNoCov">          0 :     if(!mine) {</span>
<span class="lineNum">     190 </span>            :       // We have to create the same type of object.
<span class="lineNum">     191 </span><span class="lineNoCov">          0 :       TClass* pClass=TClass::GetClass(its-&gt;ClassName());     </span>
<span class="lineNum">     192 </span><span class="lineNoCov">          0 :       if (!pClass) {</span>
<span class="lineNum">     193 </span><span class="lineNoCov">          0 :         AliWarning(Form(&quot;Can not find class description for entry %s (%s)\n&quot;,</span>
<span class="lineNum">     194 </span>            :                    its-&gt;ClassName(), name.Data()));
<span class="lineNum">     195 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">     196 </span>            :       }
<span class="lineNum">     197 </span><span class="lineNoCov">          0 :       mine=(TObject*)pClass-&gt;New();</span>
<span class="lineNum">     198 </span><span class="lineNoCov">          0 :       if(!mine){</span>
<span class="lineNum">     199 </span>            :         // not in this: can be added to list
<span class="lineNum">     200 </span><span class="lineNoCov">          0 :         AliWarning(Form(&quot;%s:%d Could not find %s for copying \n&quot;,</span>
<span class="lineNum">     201 </span>            :                    (char*)__FILE__,__LINE__,name.Data()));
<span class="lineNum">     202 </span><span class="lineNoCov">          0 :         continue;</span>
<span class="lineNum">     203 </span>            :       }  
<span class="lineNum">     204 </span><span class="lineNoCov">          0 :       if(mine-&gt;InheritsFrom(&quot;TNamed&quot;))     {</span>
<span class="lineNum">     205 </span><span class="lineNoCov">          0 :         ((TNamed*)mine)-&gt;SetName(name);</span>
<span class="lineNum">     206 </span><span class="lineNoCov">          0 :       } else if(mine-&gt;InheritsFrom(&quot;TCollection&quot;)){</span>
<span class="lineNum">     207 </span><span class="lineNoCov">          0 :         if(mine-&gt;InheritsFrom(&quot;TClonesArray&quot;)) {</span>
<span class="lineNum">     208 </span><span class="lineNoCov">          0 :           TClonesArray *itscl = dynamic_cast&lt;TClonesArray*&gt;(its);</span>
<span class="lineNum">     209 </span><span class="lineNoCov">          0 :           if (!itscl) {</span>
<span class="lineNum">     210 </span><span class="lineNoCov">          0 :             AliWarning(Form(&quot;Class description for entry %s (%s) not TClonesArray\n&quot;,</span>
<span class="lineNum">     211 </span>            :                    its-&gt;ClassName(), name.Data()));
<span class="lineNum">     212 </span><span class="lineNoCov">          0 :             continue;</span>
<span class="lineNum">     213 </span>            :           
<span class="lineNum">     214 </span>            :           }
<span class="lineNum">     215 </span><span class="lineNoCov">          0 :                dynamic_cast&lt;TClonesArray*&gt;(mine)-&gt;SetClass(itscl-&gt;GetClass(), itscl-&gt;GetSize());</span>
<span class="lineNum">     216 </span><span class="lineNoCov">          0 :         }</span>
<span class="lineNum">     217 </span><span class="lineNoCov">          0 :         dynamic_cast&lt;TCollection*&gt;(mine)-&gt;SetName(name);</span>
<span class="lineNum">     218 </span>            :       }
<span class="lineNum">     219 </span><span class="lineNoCov">          0 :       AliDebug(1, Form(&quot;adding object %s of type %s&quot;, mine-&gt;GetName(), mine-&gt;ClassName()));</span>
<span class="lineNum">     220 </span><span class="lineNoCov">          0 :       AddObject(mine);</span>
<span class="lineNum">     221 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     222 </span>            :     // Now we have an object of the same type and name, but different content.        
<span class="lineNum">     223 </span><span class="lineNoCov">          0 :     if(!its-&gt;InheritsFrom(&quot;TCollection&quot;)){</span>
<span class="lineNum">     224 </span>            :       // simple objects (do they have a Copy method that calls operator= ?)
<span class="lineNum">     225 </span><span class="lineNoCov">          0 :       its-&gt;Copy(*mine);</span>
<span class="lineNum">     226 </span><span class="lineNoCov">          0 :     } else if (its-&gt;InheritsFrom(&quot;TClonesArray&quot;)) {</span>
<span class="lineNum">     227 </span>            :       // Create or expand the tclonesarray pointers
<span class="lineNum">     228 </span>            :       // so we can directly copy to the object
<span class="lineNum">     229 </span><span class="lineNoCov">          0 :       TClonesArray *its_tca = (TClonesArray*)its;</span>
<span class="lineNum">     230 </span><span class="lineNoCov">          0 :       TClonesArray *mine_tca = (TClonesArray*)mine;</span>
<span class="lineNum">     231 </span>            :       // this leaves the capacity of the TClonesArray the same
<span class="lineNum">     232 </span>            :       // except for a factor of 2 increase when size &gt; capacity
<span class="lineNum">     233 </span>            :       // does not release any memory occupied by the tca
<span class="lineNum">     234 </span><span class="lineNoCov">          0 :       Int_t its_entries = its_tca-&gt;GetEntriesFast();</span>
<span class="lineNum">     235 </span><span class="lineNoCov">          0 :       mine_tca-&gt;ExpandCreate(its_entries);</span>
<span class="lineNum">     236 </span><span class="lineNoCov">          0 :       for(int i=0; i&lt;its_entries; i++){</span>
<span class="lineNum">     237 </span>            :         // copy 
<span class="lineNum">     238 </span><span class="lineNoCov">          0 :         TObject *mine_tca_obj = mine_tca-&gt;At(i);</span>
<span class="lineNum">     239 </span><span class="lineNoCov">          0 :         TObject *its_tca_obj = its_tca-&gt;At(i);</span>
<span class="lineNum">     240 </span>            :         // no need to delete first
<span class="lineNum">     241 </span>            :         // pointers within the class should be handled by Copy()...
<span class="lineNum">     242 </span>            :         // Can there be Empty slots?
<span class="lineNum">     243 </span><span class="lineNoCov">          0 :         its_tca_obj-&gt;Copy(*mine_tca_obj);</span>
<span class="lineNum">     244 </span>            :       }
<span class="lineNum">     245 </span><span class="lineNoCov">          0 :     } else {</span>
<span class="lineNum">     246 </span><span class="lineNoCov">          0 :       AliWarning(Form(&quot;%s:%d cannot copy TCollection \n&quot;,</span>
<span class="lineNum">     247 </span>            :                       (char*)__FILE__,__LINE__));
<span class="lineNum">     248 </span>            :     }
<span class="lineNum">     249 </span><span class="lineNoCov">          0 :   }  </span>
<span class="lineNum">     250 </span><span class="lineNoCov">          0 :   fConnected = aod.fConnected;</span>
<span class="lineNum">     251 </span><span class="lineNoCov">          0 :   fTracksConnected = kFALSE;</span>
<span class="lineNum">     252 </span><span class="lineNoCov">          0 :   ConnectTracks();</span>
<span class="lineNum">     253 </span>            :   return *this;
<span class="lineNum">     254 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     255 </span>            : 
<a name="256"><span class="lineNum">     256 </span>            : </a>
<span class="lineNum">     257 </span>            : //______________________________________________________________________________
<span class="lineNum">     258 </span>            : AliAODEvent::~AliAODEvent() 
<span class="lineNum">     259 </span><span class="lineCov">         12 : {</span>
<span class="lineNum">     260 </span>            : // destructor
<span class="lineNum">     261 </span><span class="lineCov">          4 :     delete fAODFolder;</span>
<span class="lineNum">     262 </span><span class="lineCov">          2 :     fAODFolder = 0;</span>
<span class="lineNum">     263 </span><span class="lineCov">          2 :     if(!fConnected) {</span>
<span class="lineNum">     264 </span>            : //       fAODObjects-&gt;Delete(&quot;slow&quot;);
<span class="lineNum">     265 </span><span class="lineCov">          4 :        delete fAODObjects;</span>
<span class="lineNum">     266 </span>            :     }   
<span class="lineNum">     267 </span><span class="lineCov">          6 : }</span>
<a name="268"><span class="lineNum">     268 </span>            : </a>
<span class="lineNum">     269 </span>            : //______________________________________________________________________________
<span class="lineNum">     270 </span>            : void AliAODEvent::AddObject(TObject* obj) 
<span class="lineNum">     271 </span>            : {
<span class="lineNum">     272 </span>            :   // Add an object to the list of objects.
<span class="lineNum">     273 </span>            :   // Please be aware that in order to increase performance you should
<span class="lineNum">     274 </span>            :   // refrain from using TObjArrays (if possible). Use TClonesArrays, instead.
<span class="lineNum">     275 </span>            :   
<span class="lineNum">     276 </span>            : //  if ( !fAODObjects ) {
<span class="lineNum">     277 </span>            : //     fAODObjects = new TList();
<span class="lineNum">     278 </span>            : //     fAODObjects-&gt;SetOwner();
<span class="lineNum">     279 </span>            : //  }
<span class="lineNum">     280 </span><span class="lineCov">         92 :   if ( !fAODObjects-&gt;FindObject(obj) ) </span>
<span class="lineNum">     281 </span>            :   {
<span class="lineNum">     282 </span><span class="lineCov">         46 :     fAODObjects-&gt;AddLast(obj);</span>
<span class="lineNum">     283 </span><span class="lineCov">         46 :   }</span>
<span class="lineNum">     284 </span><span class="lineCov">         46 : }</span>
<a name="285"><span class="lineNum">     285 </span>            : </a>
<span class="lineNum">     286 </span>            : //______________________________________________________________________________
<span class="lineNum">     287 </span>            : Int_t AliAODEvent::AddTrack(const AliAODTrack* trk)
<span class="lineNum">     288 </span>            : {
<span class="lineNum">     289 </span>            : // Add new AOD track. Make sure to set the event if needed.
<span class="lineNum">     290 </span><span class="lineNoCov">          0 :   AliAODTrack *track =  new((*fTracks)[fTracks-&gt;GetEntriesFast()]) AliAODTrack(*trk);</span>
<span class="lineNum">     291 </span><span class="lineNoCov">          0 :   track-&gt;SetAODEvent(this);</span>
<span class="lineNum">     292 </span><span class="lineNoCov">          0 :   return fTracks-&gt;GetEntriesFast()-1;</span>
<span class="lineNum">     293 </span><span class="lineNoCov">          0 : }  </span>
<a name="294"><span class="lineNum">     294 </span>            : </a>
<span class="lineNum">     295 </span>            : //______________________________________________________________________________
<span class="lineNum">     296 </span>            : void AliAODEvent::RemoveObject(TObject* obj) 
<span class="lineNum">     297 </span>            : {
<span class="lineNum">     298 </span>            :   // Removes an object from the list of objects.
<span class="lineNum">     299 </span>            :   
<span class="lineNum">     300 </span><span class="lineNoCov">          0 :   fAODObjects-&gt;Remove(obj);</span>
<span class="lineNum">     301 </span><span class="lineNoCov">          0 : }</span>
<a name="302"><span class="lineNum">     302 </span>            : </a>
<span class="lineNum">     303 </span>            : //______________________________________________________________________________
<span class="lineNum">     304 </span>            : TObject *AliAODEvent::FindListObject(const char *objName) const
<span class="lineNum">     305 </span>            : {
<span class="lineNum">     306 </span>            :   // Return the pointer to the object with the given name.
<span class="lineNum">     307 </span>            : 
<span class="lineNum">     308 </span><span class="lineCov">         48 :   return fAODObjects-&gt;FindObject(objName);</span>
<span class="lineNum">     309 </span>            : }
<a name="310"><span class="lineNum">     310 </span>            : </a>
<span class="lineNum">     311 </span>            : //______________________________________________________________________________
<span class="lineNum">     312 </span>            : void AliAODEvent::CreateStdContent() 
<span class="lineNum">     313 </span>            : {
<span class="lineNum">     314 </span>            :   // create the standard AOD content and set pointers
<span class="lineNum">     315 </span>            : 
<span class="lineNum">     316 </span>            :   // create standard objects and add them to the TList of objects
<span class="lineNum">     317 </span><span class="lineCov">          6 :   AddObject(new AliAODHeader());</span>
<span class="lineNum">     318 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODTrack&quot;, 0));</span>
<span class="lineNum">     319 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODVertex&quot;, 0));</span>
<span class="lineNum">     320 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODv0&quot;, 0));</span>
<span class="lineNum">     321 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODcascade&quot;, 0));</span>
<span class="lineNum">     322 </span><span class="lineCov">          4 :   AddObject(new AliAODTracklets());</span>
<span class="lineNum">     323 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODJet&quot;, 0));</span>
<span class="lineNum">     324 </span><span class="lineCov">          4 :   AddObject(new AliAODCaloCells());</span>
<span class="lineNum">     325 </span><span class="lineCov">          4 :   AddObject(new AliAODCaloCells());</span>
<span class="lineNum">     326 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODCaloCluster&quot;, 0));</span>
<span class="lineNum">     327 </span><span class="lineCov">          4 :   AddObject(new AliAODCaloTrigger()); // EMCAL </span>
<span class="lineNum">     328 </span><span class="lineCov">          4 :   AddObject(new AliAODCaloTrigger()); // PHOS</span>
<span class="lineNum">     329 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODFmdCluster&quot;, 0));</span>
<span class="lineNum">     330 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODPmdCluster&quot;, 0));</span>
<span class="lineNum">     331 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODHMPIDrings&quot;, 0));</span>
<span class="lineNum">     332 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODDimuon&quot;, 0));</span>
<span class="lineNum">     333 </span><span class="lineCov">          4 :   AddObject(new AliAODTZERO());</span>
<span class="lineNum">     334 </span><span class="lineCov">          4 :   AddObject(new AliAODVZERO());</span>
<span class="lineNum">     335 </span><span class="lineCov">          4 :   AddObject(new AliAODZDC());</span>
<span class="lineNum">     336 </span><span class="lineCov">          4 :   AddObject(new AliAODAD());</span>
<span class="lineNum">     337 </span><span class="lineCov">          4 :   AddObject(new AliTOFHeader());</span>
<span class="lineNum">     338 </span><span class="lineCov">          4 :   AddObject(new TClonesArray(&quot;AliAODTrdTrack&quot;, 0));</span>
<span class="lineNum">     339 </span>            :   // set names
<span class="lineNum">     340 </span><span class="lineCov">          2 :   SetStdNames();</span>
<span class="lineNum">     341 </span>            : 
<span class="lineNum">     342 </span>            :   // read back pointers
<span class="lineNum">     343 </span><span class="lineCov">          2 :   GetStdContent();</span>
<span class="lineNum">     344 </span><span class="lineCov">          2 :   CreateStdFolders();</span>
<span class="lineNum">     345 </span><span class="lineCov">          2 :   return;</span>
<a name="346"><span class="lineNum">     346 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     347 </span>            : 
<span class="lineNum">     348 </span>            : void  AliAODEvent::MakeEntriesReferencable()
<span class="lineNum">     349 </span>            : {
<span class="lineNum">     350 </span>            :     // Make all entries referencable in a subsequent process
<span class="lineNum">     351 </span>            :     //
<span class="lineNum">     352 </span><span class="lineCov">         16 :     TIter next(fAODObjects);</span>
<span class="lineNum">     353 </span>            :     TObject* obj;
<span class="lineNum">     354 </span><span class="lineCov">        392 :     while ((obj = next()))</span>
<span class="lineNum">     355 </span>            :     {
<span class="lineNum">     356 </span><span class="lineCov">        368 :         if(obj-&gt;InheritsFrom(&quot;TCollection&quot;))</span>
<span class="lineNum">     357 </span>            :             {
<span class="lineNum">     358 </span><span class="lineCov">         92 :                 AssignIDtoCollection((TCollection*)obj);</span>
<span class="lineNum">     359 </span>            :             }
<span class="lineNum">     360 </span>            :     }
<span class="lineNum">     361 </span><span class="lineCov">          8 : }</span>
<a name="362"><span class="lineNum">     362 </span>            : </a>
<span class="lineNum">     363 </span>            : //______________________________________________________________________________
<span class="lineNum">     364 </span>            : void AliAODEvent::SetStdNames()
<span class="lineNum">     365 </span>            : {
<span class="lineNum">     366 </span>            :   // introduce the standard naming
<span class="lineNum">     367 </span>            : 
<span class="lineNum">     368 </span><span class="lineCov">          4 :   if(fAODObjects-&gt;GetEntries()==kAODListN){</span>
<span class="lineNum">     369 </span><span class="lineCov">         92 :     for(int i = 0;i &lt; fAODObjects-&gt;GetEntries();i++){</span>
<span class="lineNum">     370 </span><span class="lineCov">         44 :       TObject *fObj = fAODObjects-&gt;At(i);</span>
<span class="lineNum">     371 </span><span class="lineCov">         44 :       if(fObj-&gt;InheritsFrom(&quot;TNamed&quot;)){</span>
<span class="lineNum">     372 </span><span class="lineCov">         12 :         ((TNamed*)fObj)-&gt;SetName(fAODListName[i]);</span>
<span class="lineNum">     373 </span><span class="lineCov">         12 :       }</span>
<span class="lineNum">     374 </span><span class="lineCov">         32 :       else if(fObj-&gt;InheritsFrom(&quot;TClonesArray&quot;)){</span>
<span class="lineNum">     375 </span><span class="lineCov">         22 :         ((TClonesArray*)fObj)-&gt;SetName(fAODListName[i]);</span>
<span class="lineNum">     376 </span><span class="lineCov">         22 :       }</span>
<span class="lineNum">     377 </span>            :     }
<span class="lineNum">     378 </span><span class="lineCov">          2 :   }</span>
<span class="lineNum">     379 </span>            :   else{
<span class="lineNum">     380 </span><span class="lineNoCov">          0 :     printf(&quot;%s:%d SetStdNames() Wrong number of Std Entries \n&quot;,(char*)__FILE__,__LINE__);</span>
<span class="lineNum">     381 </span>            :   }
<span class="lineNum">     382 </span><span class="lineCov">          2 : } </span>
<a name="383"><span class="lineNum">     383 </span>            : </a>
<span class="lineNum">     384 </span>            : //______________________________________________________________________________
<span class="lineNum">     385 </span>            : void AliAODEvent::CreateStdFolders()
<span class="lineNum">     386 </span>            : {
<span class="lineNum">     387 </span>            :     // Create the standard folder structure
<span class="lineNum">     388 </span><span class="lineCov">          4 :   if(fAODFolder)delete fAODFolder;</span>
<span class="lineNum">     389 </span><span class="lineCov">          2 :     fAODFolder = gROOT-&gt;GetRootFolder()-&gt;AddFolder(&quot;AOD&quot;, &quot;AOD&quot;);</span>
<span class="lineNum">     390 </span><span class="lineCov">          2 :     if(fAODObjects-&gt;GetEntries()==kAODListN){</span>
<span class="lineNum">     391 </span><span class="lineCov">         92 :         for(int i = 0;i &lt; fAODObjects-&gt;GetEntries();i++){</span>
<span class="lineNum">     392 </span><span class="lineCov">         44 :             TObject *fObj = fAODObjects-&gt;At(i);</span>
<span class="lineNum">     393 </span><span class="lineCov">         88 :             if(fObj-&gt;InheritsFrom(&quot;TClonesArray&quot;)){</span>
<span class="lineNum">     394 </span><span class="lineCov">         66 :                 fAODFolder-&gt;AddFolder(fAODListName[i], fAODListName[i], (TCollection*) fObj);</span>
<span class="lineNum">     395 </span><span class="lineCov">         22 :             } else {</span>
<span class="lineNum">     396 </span><span class="lineCov">         22 :                 fAODFolder-&gt;AddFolder(fAODListName[i], fAODListName[i], 0);</span>
<span class="lineNum">     397 </span>            :             }
<span class="lineNum">     398 </span>            :         }
<span class="lineNum">     399 </span><span class="lineCov">          2 :     }</span>
<span class="lineNum">     400 </span>            :     else{
<span class="lineNum">     401 </span><span class="lineNoCov">          0 :         printf(&quot;%s:%d CreateStdFolders() Wrong number of Std Entries \n&quot;,(char*)__FILE__,__LINE__);</span>
<span class="lineNum">     402 </span>            :     }
<span class="lineNum">     403 </span><span class="lineCov">          2 : } </span>
<a name="404"><span class="lineNum">     404 </span>            : </a>
<span class="lineNum">     405 </span>            : //______________________________________________________________________________
<span class="lineNum">     406 </span>            : void AliAODEvent::GetStdContent()
<span class="lineNum">     407 </span>            : {
<span class="lineNum">     408 </span>            :   // set pointers for standard content
<span class="lineNum">     409 </span>            : 
<span class="lineNum">     410 </span><span class="lineCov">          4 :   fHeader        = (AliVAODHeader*)fAODObjects-&gt;FindObject(&quot;header&quot;);</span>
<span class="lineNum">     411 </span><span class="lineCov">          2 :   fTracks        = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;tracks&quot;);</span>
<span class="lineNum">     412 </span><span class="lineCov">          2 :   fVertices      = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;vertices&quot;);</span>
<span class="lineNum">     413 </span><span class="lineCov">          2 :   fV0s           = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;v0s&quot;);</span>
<span class="lineNum">     414 </span><span class="lineCov">          2 :   fCascades      = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;cascades&quot;);</span>
<span class="lineNum">     415 </span><span class="lineCov">          2 :   fTracklets     = (AliAODTracklets*)fAODObjects-&gt;FindObject(&quot;tracklets&quot;);</span>
<span class="lineNum">     416 </span><span class="lineCov">          2 :   fJets          = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;jets&quot;);</span>
<span class="lineNum">     417 </span><span class="lineCov">          2 :   fEmcalCells    = (AliAODCaloCells*)fAODObjects-&gt;FindObject(&quot;emcalCells&quot;);</span>
<span class="lineNum">     418 </span><span class="lineCov">          2 :   fPhosCells     = (AliAODCaloCells*)fAODObjects-&gt;FindObject(&quot;phosCells&quot;);</span>
<span class="lineNum">     419 </span><span class="lineCov">          2 :   fCaloClusters  = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;caloClusters&quot;);</span>
<span class="lineNum">     420 </span><span class="lineCov">          2 :   fEMCALTrigger  = (AliAODCaloTrigger*)fAODObjects-&gt;FindObject(&quot;emcalTrigger&quot;);</span>
<span class="lineNum">     421 </span><span class="lineCov">          2 :   fPHOSTrigger   = (AliAODCaloTrigger*)fAODObjects-&gt;FindObject(&quot;phosTrigger&quot;);</span>
<span class="lineNum">     422 </span><span class="lineCov">          2 :   fFmdClusters   = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;fmdClusters&quot;);</span>
<span class="lineNum">     423 </span><span class="lineCov">          2 :   fPmdClusters   = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;pmdClusters&quot;);</span>
<span class="lineNum">     424 </span><span class="lineCov">          2 :   fHMPIDrings    = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;hmpidRings&quot;);  </span>
<span class="lineNum">     425 </span><span class="lineCov">          2 :   fDimuons       = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;dimuons&quot;);</span>
<span class="lineNum">     426 </span><span class="lineCov">          2 :   fAODTZERO      = (AliAODTZERO*)fAODObjects-&gt;FindObject(&quot;AliAODTZERO&quot;);</span>
<span class="lineNum">     427 </span><span class="lineCov">          2 :   fAODVZERO      = (AliAODVZERO*)fAODObjects-&gt;FindObject(&quot;AliAODVZERO&quot;);</span>
<span class="lineNum">     428 </span><span class="lineCov">          2 :   fAODZDC        = (AliAODZDC*)fAODObjects-&gt;FindObject(&quot;AliAODZDC&quot;);</span>
<span class="lineNum">     429 </span><span class="lineCov">          2 :   fAODAD         = (AliAODAD*)fAODObjects-&gt;FindObject(&quot;AliAODAD&quot;);</span>
<span class="lineNum">     430 </span><span class="lineCov">          2 :   fTOFHeader     = (AliTOFHeader*)fAODObjects-&gt;FindObject(&quot;AliTOFHeader&quot;);</span>
<span class="lineNum">     431 </span><span class="lineCov">          2 :   fTrdTracks     = (TClonesArray*)fAODObjects-&gt;FindObject(&quot;trdTracks&quot;);</span>
<span class="lineNum">     432 </span><span class="lineCov">          2 : }</span>
<a name="433"><span class="lineNum">     433 </span>            : </a>
<span class="lineNum">     434 </span>            : //______________________________________________________________________________
<span class="lineNum">     435 </span>            : void AliAODEvent::ResetStd(Int_t trkArrSize, 
<span class="lineNum">     436 </span>            :             Int_t vtxArrSize, 
<span class="lineNum">     437 </span>            :             Int_t v0ArrSize,
<span class="lineNum">     438 </span>            :             Int_t cascadeArrSize,
<span class="lineNum">     439 </span>            :             Int_t jetSize, 
<span class="lineNum">     440 </span>            :             Int_t caloClusSize, 
<span class="lineNum">     441 </span>            :             Int_t fmdClusSize, 
<span class="lineNum">     442 </span>            :             Int_t pmdClusSize,
<span class="lineNum">     443 </span>            :             Int_t hmpidRingsSize,
<span class="lineNum">     444 </span>            :             Int_t dimuonArrSize,
<span class="lineNum">     445 </span>            :             Int_t nTrdTracks
<span class="lineNum">     446 </span>            :                            )
<span class="lineNum">     447 </span>            : {
<span class="lineNum">     448 </span>            :   // deletes content of standard arrays and resets size 
<span class="lineNum">     449 </span><span class="lineCov">         32 :   fTracksConnected = kFALSE;</span>
<span class="lineNum">     450 </span><span class="lineCov">         16 :   if (fTracks) {</span>
<span class="lineNum">     451 </span><span class="lineCov">         16 :     fTracks-&gt;Delete();</span>
<span class="lineNum">     452 </span><span class="lineCov">         16 :     if (trkArrSize &gt; fTracks-&gt;GetSize()) </span>
<span class="lineNum">     453 </span><span class="lineCov">          2 :       fTracks-&gt;Expand(trkArrSize);</span>
<span class="lineNum">     454 </span>            :   }
<span class="lineNum">     455 </span><span class="lineCov">         16 :   if (fVertices) {</span>
<span class="lineNum">     456 </span><span class="lineCov">         16 :     fVertices-&gt;Delete();</span>
<span class="lineNum">     457 </span><span class="lineCov">         16 :     if (vtxArrSize &gt; fVertices-&gt;GetSize()) </span>
<span class="lineNum">     458 </span><span class="lineNoCov">          0 :       fVertices-&gt;Expand(vtxArrSize);</span>
<span class="lineNum">     459 </span>            :   }
<span class="lineNum">     460 </span><span class="lineCov">         16 :   if (fV0s) {</span>
<span class="lineNum">     461 </span><span class="lineCov">         16 :     fV0s-&gt;Delete();</span>
<span class="lineNum">     462 </span><span class="lineCov">         16 :     if (v0ArrSize &gt; fV0s-&gt;GetSize()) </span>
<span class="lineNum">     463 </span><span class="lineCov">          2 :       fV0s-&gt;Expand(v0ArrSize);</span>
<span class="lineNum">     464 </span>            :   }
<span class="lineNum">     465 </span><span class="lineCov">         16 :   if (fCascades) {</span>
<span class="lineNum">     466 </span><span class="lineCov">         16 :     fCascades-&gt;Delete();</span>
<span class="lineNum">     467 </span><span class="lineCov">         16 :     if (cascadeArrSize &gt; fCascades-&gt;GetSize()) </span>
<span class="lineNum">     468 </span><span class="lineNoCov">          0 :       fCascades-&gt;Expand(cascadeArrSize);</span>
<span class="lineNum">     469 </span>            :   }
<span class="lineNum">     470 </span><span class="lineCov">         16 :   if (fJets) {</span>
<span class="lineNum">     471 </span><span class="lineCov">         16 :     fJets-&gt;Delete();</span>
<span class="lineNum">     472 </span><span class="lineCov">         16 :     if (jetSize &gt; fJets-&gt;GetSize())</span>
<span class="lineNum">     473 </span><span class="lineNoCov">          0 :       fJets-&gt;Expand(jetSize);</span>
<span class="lineNum">     474 </span>            :   }
<span class="lineNum">     475 </span><span class="lineCov">         16 :   if (fCaloClusters) {</span>
<span class="lineNum">     476 </span><span class="lineCov">         16 :     fCaloClusters-&gt;Delete();</span>
<span class="lineNum">     477 </span><span class="lineCov">         16 :     if (caloClusSize &gt; fCaloClusters-&gt;GetSize()) </span>
<span class="lineNum">     478 </span><span class="lineCov">          1 :       fCaloClusters-&gt;Expand(caloClusSize);</span>
<span class="lineNum">     479 </span>            :   }
<span class="lineNum">     480 </span><span class="lineCov">         16 :   if (fFmdClusters) {</span>
<span class="lineNum">     481 </span><span class="lineCov">         16 :     fFmdClusters-&gt;Delete();</span>
<span class="lineNum">     482 </span><span class="lineCov">         16 :     if (fmdClusSize &gt; fFmdClusters-&gt;GetSize()) </span>
<span class="lineNum">     483 </span><span class="lineNoCov">          0 :       fFmdClusters-&gt;Expand(fmdClusSize);</span>
<span class="lineNum">     484 </span>            :   }
<span class="lineNum">     485 </span><span class="lineCov">         16 :   if (fPmdClusters) {</span>
<span class="lineNum">     486 </span><span class="lineCov">         16 :     fPmdClusters-&gt;Delete();</span>
<span class="lineNum">     487 </span><span class="lineCov">         16 :     if (pmdClusSize &gt; fPmdClusters-&gt;GetSize()) </span>
<span class="lineNum">     488 </span><span class="lineCov">          4 :       fPmdClusters-&gt;Expand(pmdClusSize);</span>
<span class="lineNum">     489 </span>            :   }
<span class="lineNum">     490 </span><span class="lineCov">         16 :   if (fHMPIDrings) {</span>
<span class="lineNum">     491 </span><span class="lineCov">         16 :      fHMPIDrings-&gt;Delete();</span>
<span class="lineNum">     492 </span><span class="lineCov">         16 :     if (hmpidRingsSize &gt; fHMPIDrings-&gt;GetSize()) </span>
<span class="lineNum">     493 </span><span class="lineNoCov">          0 :       fHMPIDrings-&gt;Expand(hmpidRingsSize);</span>
<span class="lineNum">     494 </span>            :   }
<span class="lineNum">     495 </span><span class="lineCov">         16 :   if (fDimuons) {</span>
<span class="lineNum">     496 </span><span class="lineCov">         16 :     fDimuons-&gt;Delete();</span>
<span class="lineNum">     497 </span><span class="lineCov">         16 :     if (dimuonArrSize &gt; fDimuons-&gt;GetSize()) </span>
<span class="lineNum">     498 </span><span class="lineNoCov">          0 :       fDimuons-&gt;Expand(dimuonArrSize);</span>
<span class="lineNum">     499 </span>            :   }
<span class="lineNum">     500 </span><span class="lineCov">         16 :   if (fTrdTracks) {</span>
<span class="lineNum">     501 </span>            :     // no pointers in there, so cheaper Clear suffices
<span class="lineNum">     502 </span>            : //    fTrdTracks-&gt;Clear(&quot;C&quot;);
<span class="lineNum">     503 </span>            :     // Not quite: AliAODTrdTrack has a clones array of tracklets inside
<span class="lineNum">     504 </span><span class="lineCov">         16 :     fTrdTracks-&gt;Delete();</span>
<span class="lineNum">     505 </span><span class="lineCov">         16 :     if (nTrdTracks &gt; fTrdTracks-&gt;GetSize())</span>
<span class="lineNum">     506 </span><span class="lineNoCov">          0 :       fTrdTracks-&gt;Expand(nTrdTracks);</span>
<span class="lineNum">     507 </span>            :   }
<span class="lineNum">     508 </span>            : 
<span class="lineNum">     509 </span><span class="lineCov">         16 :   if (fTracklets)</span>
<span class="lineNum">     510 </span><span class="lineCov">         16 :     fTracklets-&gt;DeleteContainer();</span>
<span class="lineNum">     511 </span><span class="lineCov">         16 :   if (fPhosCells)</span>
<span class="lineNum">     512 </span><span class="lineCov">         16 :     fPhosCells-&gt;DeleteContainer();  </span>
<span class="lineNum">     513 </span><span class="lineCov">         16 :   if (fEmcalCells)</span>
<span class="lineNum">     514 </span><span class="lineCov">         16 :     fEmcalCells-&gt;DeleteContainer();</span>
<span class="lineNum">     515 </span>            :   
<span class="lineNum">     516 </span><span class="lineCov">         16 :   if (fEMCALTrigger)</span>
<span class="lineNum">     517 </span><span class="lineCov">         16 :         fEMCALTrigger-&gt;DeAllocate();</span>
<span class="lineNum">     518 </span><span class="lineCov">         16 :   if (fPHOSTrigger)</span>
<span class="lineNum">     519 </span><span class="lineCov">         16 :         fPHOSTrigger-&gt;DeAllocate();</span>
<span class="lineNum">     520 </span>            : 
<span class="lineNum">     521 </span><span class="lineCov">         16 : }</span>
<a name="522"><span class="lineNum">     522 </span>            : </a>
<span class="lineNum">     523 </span>            : //______________________________________________________________________________
<span class="lineNum">     524 </span>            : void AliAODEvent::ClearStd()
<span class="lineNum">     525 </span>            : {
<span class="lineNum">     526 </span>            :   // clears the standard arrays
<span class="lineNum">     527 </span><span class="lineNoCov">          0 :   if (fHeader){</span>
<span class="lineNum">     528 </span>            :     // FIXME: this if-else patch was introduced by Michele Floris on 17/03/14 to test nano AOD. To be removed.
<span class="lineNum">     529 </span><span class="lineNoCov">          0 :     if(fHeader-&gt;InheritsFrom(&quot;AliAODHeader&quot;)){</span>
<span class="lineNum">     530 </span><span class="lineNoCov">          0 :       fHeader        -&gt;Clear();</span>
<span class="lineNum">     531 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     532 </span>            :     else {
<span class="lineNum">     533 </span>            :       AliVHeader * head = 0;
<span class="lineNum">     534 </span><span class="lineNoCov">          0 :       head = dynamic_cast&lt;AliVHeader*&gt;((TObject*)fHeader);</span>
<span class="lineNum">     535 </span><span class="lineNoCov">          0 :       if(head) head-&gt;Clear();</span>
<span class="lineNum">     536 </span>            :     }
<span class="lineNum">     537 </span>            :   }
<span class="lineNum">     538 </span><span class="lineNoCov">          0 :   fTracksConnected = kFALSE;</span>
<span class="lineNum">     539 </span><span class="lineNoCov">          0 :   if (fTracks)</span>
<span class="lineNum">     540 </span><span class="lineNoCov">          0 :     fTracks        -&gt;Delete();</span>
<span class="lineNum">     541 </span><span class="lineNoCov">          0 :   if (fVertices)</span>
<span class="lineNum">     542 </span><span class="lineNoCov">          0 :     fVertices      -&gt;Delete();</span>
<span class="lineNum">     543 </span><span class="lineNoCov">          0 :   if (fV0s)</span>
<span class="lineNum">     544 </span><span class="lineNoCov">          0 :     fV0s           -&gt;Delete();</span>
<span class="lineNum">     545 </span><span class="lineNoCov">          0 :   if (fCascades)</span>
<span class="lineNum">     546 </span><span class="lineNoCov">          0 :     fCascades      -&gt;Delete();</span>
<span class="lineNum">     547 </span><span class="lineNoCov">          0 :   if (fTracklets)</span>
<span class="lineNum">     548 </span><span class="lineNoCov">          0 :     fTracklets     -&gt;DeleteContainer();</span>
<span class="lineNum">     549 </span><span class="lineNoCov">          0 :   if (fJets)</span>
<span class="lineNum">     550 </span><span class="lineNoCov">          0 :     fJets          -&gt;Delete();</span>
<span class="lineNum">     551 </span><span class="lineNoCov">          0 :   if (fEmcalCells)</span>
<span class="lineNum">     552 </span><span class="lineNoCov">          0 :     fEmcalCells    -&gt;DeleteContainer();</span>
<span class="lineNum">     553 </span><span class="lineNoCov">          0 :   if (fPhosCells)</span>
<span class="lineNum">     554 </span><span class="lineNoCov">          0 :     fPhosCells     -&gt;DeleteContainer();</span>
<span class="lineNum">     555 </span><span class="lineNoCov">          0 :   if (fCaloClusters)</span>
<span class="lineNum">     556 </span><span class="lineNoCov">          0 :     fCaloClusters  -&gt;Delete();</span>
<span class="lineNum">     557 </span><span class="lineNoCov">          0 :   if (fFmdClusters)</span>
<span class="lineNum">     558 </span><span class="lineNoCov">          0 :     fFmdClusters   -&gt;Clear();</span>
<span class="lineNum">     559 </span><span class="lineNoCov">          0 :   if (fPmdClusters)</span>
<span class="lineNum">     560 </span><span class="lineNoCov">          0 :     fPmdClusters   -&gt;Clear();  </span>
<span class="lineNum">     561 </span><span class="lineNoCov">          0 :   if (fHMPIDrings) </span>
<span class="lineNum">     562 </span><span class="lineNoCov">          0 :      fHMPIDrings   -&gt;Clear();    </span>
<span class="lineNum">     563 </span><span class="lineNoCov">          0 :   if (fDimuons)</span>
<span class="lineNum">     564 </span><span class="lineNoCov">          0 :     fDimuons       -&gt;Clear(&quot;C&quot;);</span>
<span class="lineNum">     565 </span><span class="lineNoCov">          0 :   if (fTrdTracks)</span>
<span class="lineNum">     566 </span><span class="lineNoCov">          0 :     fTrdTracks     -&gt;Clear();</span>
<span class="lineNum">     567 </span>            :         
<span class="lineNum">     568 </span><span class="lineNoCov">          0 :   if (fEMCALTrigger)</span>
<span class="lineNum">     569 </span><span class="lineNoCov">          0 :         fEMCALTrigger-&gt;DeAllocate();</span>
<span class="lineNum">     570 </span><span class="lineNoCov">          0 :   if (fPHOSTrigger)</span>
<span class="lineNum">     571 </span><span class="lineNoCov">          0 :         fPHOSTrigger-&gt;DeAllocate();</span>
<span class="lineNum">     572 </span><span class="lineNoCov">          0 : }</span>
<a name="573"><span class="lineNum">     573 </span>            : </a>
<span class="lineNum">     574 </span>            : //_________________________________________________________________
<span class="lineNum">     575 </span>            : Int_t AliAODEvent::GetPHOSClusters(TRefArray *clusters) const
<span class="lineNum">     576 </span>            : {
<span class="lineNum">     577 </span>            :   // fills the provided TRefArray with all found phos clusters
<span class="lineNum">     578 </span>            :   
<span class="lineNum">     579 </span><span class="lineCov">         16 :   clusters-&gt;Clear();</span>
<span class="lineNum">     580 </span>            :   
<span class="lineNum">     581 </span>            :   AliAODCaloCluster *cl = 0;
<span class="lineNum">     582 </span>            :   Bool_t first = kTRUE;
<span class="lineNum">     583 </span><span class="lineCov">        102 :   for (Int_t i = 0; i &lt; GetNumberOfCaloClusters() ; i++) {</span>
<span class="lineNum">     584 </span><span class="lineCov">         43 :     if ( (cl = GetCaloCluster(i)) ) {</span>
<span class="lineNum">     585 </span><span class="lineCov">         43 :       if (cl-&gt;IsPHOS()){</span>
<span class="lineNum">     586 </span><span class="lineCov">         10 :         if(first) {</span>
<span class="lineNum">     587 </span><span class="lineCov">         16 :           new (clusters) TRefArray(TProcessID::GetProcessWithUID(cl)); </span>
<span class="lineNum">     588 </span>            :           first=kFALSE;
<span class="lineNum">     589 </span><span class="lineCov">          8 :         }</span>
<span class="lineNum">     590 </span><span class="lineCov">         10 :         clusters-&gt;Add(cl);</span>
<span class="lineNum">     591 </span>            :         //printf(&quot;IsPHOS cluster %d, E %2.3f Size: %d \n&quot;,i,cl-&gt;E(),clusters-&gt;GetEntriesFast());
<span class="lineNum">     592 </span><span class="lineCov">         10 :       }</span>
<span class="lineNum">     593 </span>            :     }
<span class="lineNum">     594 </span>            :   }
<span class="lineNum">     595 </span><span class="lineCov">          8 :   return clusters-&gt;GetEntriesFast();</span>
<span class="lineNum">     596 </span><span class="lineNoCov">          0 : }</span>
<a name="597"><span class="lineNum">     597 </span>            : </a>
<span class="lineNum">     598 </span>            : //_________________________________________________________________
<span class="lineNum">     599 </span>            : Int_t AliAODEvent::GetEMCALClusters(TRefArray *clusters) const
<span class="lineNum">     600 </span>            : {
<span class="lineNum">     601 </span>            :   // fills the provided TRefArray with all found emcal clusters
<span class="lineNum">     602 </span>            : 
<span class="lineNum">     603 </span><span class="lineCov">         16 :   clusters-&gt;Clear();</span>
<span class="lineNum">     604 </span>            :   AliAODCaloCluster *cl = 0;
<span class="lineNum">     605 </span>            :   Bool_t first = kTRUE;
<span class="lineNum">     606 </span><span class="lineCov">        102 :   for (Int_t i = 0; i &lt; GetNumberOfCaloClusters(); i++) {</span>
<span class="lineNum">     607 </span><span class="lineCov">         43 :     if ( (cl = GetCaloCluster(i)) ) {</span>
<span class="lineNum">     608 </span><span class="lineCov">         43 :       if (cl-&gt;IsEMCAL()){</span>
<span class="lineNum">     609 </span><span class="lineCov">         33 :         if(first) {</span>
<span class="lineNum">     610 </span><span class="lineCov">         16 :           new (clusters) TRefArray(TProcessID::GetProcessWithUID(cl)); </span>
<span class="lineNum">     611 </span>            :           first=kFALSE;
<span class="lineNum">     612 </span><span class="lineCov">          8 :         }</span>
<span class="lineNum">     613 </span><span class="lineCov">         33 :         clusters-&gt;Add(cl);</span>
<span class="lineNum">     614 </span>            :         //printf(&quot;IsEMCal cluster %d, E %2.3f Size: %d \n&quot;,i,cl-&gt;E(),clusters-&gt;GetEntriesFast());
<span class="lineNum">     615 </span><span class="lineCov">         33 :       }</span>
<span class="lineNum">     616 </span>            :     }
<span class="lineNum">     617 </span>            :   }
<span class="lineNum">     618 </span><span class="lineCov">          8 :   return clusters-&gt;GetEntriesFast();</span>
<span class="lineNum">     619 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     620 </span>            : 
<a name="621"><span class="lineNum">     621 </span>            : </a>
<span class="lineNum">     622 </span>            : //______________________________________________________________________________
<span class="lineNum">     623 </span>            : Int_t AliAODEvent::GetMuonTracks(TRefArray *muonTracks) const
<span class="lineNum">     624 </span>            : {
<span class="lineNum">     625 </span>            :   // fills the provided TRefArray with all found muon tracks
<span class="lineNum">     626 </span>            : 
<span class="lineNum">     627 </span><span class="lineNoCov">          0 :   muonTracks-&gt;Clear();</span>
<span class="lineNum">     628 </span>            : 
<span class="lineNum">     629 </span>            :   AliAODTrack *track = 0;
<span class="lineNum">     630 </span><span class="lineNoCov">          0 :   for (Int_t iTrack = 0; iTrack &lt; GetNumberOfTracks(); iTrack++) {</span>
<span class="lineNum">     631 </span><span class="lineNoCov">          0 :     track = dynamic_cast&lt;AliAODTrack*&gt;(GetTrack(iTrack));</span>
<span class="lineNum">     632 </span><span class="lineNoCov">          0 :     if(!track) AliFatal(&quot;Not a standard AOD&quot;);</span>
<span class="lineNum">     633 </span><span class="lineNoCov">          0 :     if (track-&gt;IsMuonTrack()) {</span>
<span class="lineNum">     634 </span><span class="lineNoCov">          0 :       muonTracks-&gt;Add(track);</span>
<span class="lineNum">     635 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     636 </span>            :   }
<span class="lineNum">     637 </span>            :   
<span class="lineNum">     638 </span><span class="lineNoCov">          0 :   return muonTracks-&gt;GetEntriesFast();</span>
<span class="lineNum">     639 </span>            : }
<span class="lineNum">     640 </span>            : 
<a name="641"><span class="lineNum">     641 </span>            : </a>
<span class="lineNum">     642 </span>            : //______________________________________________________________________________
<span class="lineNum">     643 </span>            : Int_t AliAODEvent::GetNumberOfMuonTracks() const
<span class="lineNum">     644 </span>            : {
<span class="lineNum">     645 </span>            :   // get number of muon tracks
<span class="lineNum">     646 </span><span class="lineNoCov">          0 :   int ntr = GetNumberOfTracks();</span>
<span class="lineNum">     647 </span><span class="lineNoCov">          0 :   if (!ntr) return 0;</span>
<span class="lineNum">     648 </span>            :   Int_t nMuonTracks=0;
<span class="lineNum">     649 </span><span class="lineNoCov">          0 :   if(!dynamic_cast&lt;AliAODTrack*&gt;(GetTrack(0))) {</span>
<span class="lineNum">     650 </span><span class="lineNoCov">          0 :     AliError(&quot;Not a standard AOD&quot;);</span>
<span class="lineNum">     651 </span><span class="lineNoCov">          0 :     return 0;</span>
<span class="lineNum">     652 </span>            :   }
<span class="lineNum">     653 </span>            : 
<span class="lineNum">     654 </span><span class="lineNoCov">          0 :   for (Int_t iTrack=ntr; iTrack--;) {</span>
<span class="lineNum">     655 </span><span class="lineNoCov">          0 :     if (((AliAODTrack*)GetTrack(iTrack))-&gt;IsMuonTrack()) {</span>
<span class="lineNum">     656 </span><span class="lineNoCov">          0 :        nMuonTracks++;</span>
<span class="lineNum">     657 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     658 </span>            :   }
<span class="lineNum">     659 </span>            :   
<span class="lineNum">     660 </span><span class="lineNoCov">          0 :   return nMuonTracks;</span>
<span class="lineNum">     661 </span><span class="lineNoCov">          0 : }</span>
<a name="662"><span class="lineNum">     662 </span>            : </a>
<span class="lineNum">     663 </span>            : //______________________________________________________________________________
<span class="lineNum">     664 </span>            : Int_t AliAODEvent::GetMuonGlobalTracks(TRefArray *muonGlobalTracks) const           // AU
<span class="lineNum">     665 </span>            : {
<span class="lineNum">     666 </span>            :   // fills the provided TRefArray with all found muon global tracks
<span class="lineNum">     667 </span>            : 
<span class="lineNum">     668 </span><span class="lineNoCov">          0 :   muonGlobalTracks-&gt;Clear();</span>
<span class="lineNum">     669 </span>            : 
<span class="lineNum">     670 </span>            :   AliAODTrack *track = 0;
<span class="lineNum">     671 </span><span class="lineNoCov">          0 :   for (Int_t iTrack = 0; iTrack &lt; GetNumberOfTracks(); iTrack++) {</span>
<span class="lineNum">     672 </span><span class="lineNoCov">          0 :     track = dynamic_cast&lt;AliAODTrack*&gt;(GetTrack(iTrack));</span>
<span class="lineNum">     673 </span><span class="lineNoCov">          0 :     if(!track) AliFatal(&quot;Not a standard AOD&quot;);</span>
<span class="lineNum">     674 </span><span class="lineNoCov">          0 :     if (track-&gt;IsMuonGlobalTrack()) {</span>
<span class="lineNum">     675 </span><span class="lineNoCov">          0 :       muonGlobalTracks-&gt;Add(track);</span>
<span class="lineNum">     676 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     677 </span>            :   }
<span class="lineNum">     678 </span>            :   
<span class="lineNum">     679 </span><span class="lineNoCov">          0 :   return muonGlobalTracks-&gt;GetEntriesFast();</span>
<span class="lineNum">     680 </span>            : }
<span class="lineNum">     681 </span>            : 
<a name="682"><span class="lineNum">     682 </span>            : </a>
<span class="lineNum">     683 </span>            : //______________________________________________________________________________
<span class="lineNum">     684 </span>            : Int_t AliAODEvent::GetNumberOfMuonGlobalTracks() const                                    // AU
<span class="lineNum">     685 </span>            : {
<span class="lineNum">     686 </span>            :   // get number of muon global tracks
<span class="lineNum">     687 </span><span class="lineNoCov">          0 :   int ntr = GetNumberOfTracks();</span>
<span class="lineNum">     688 </span><span class="lineNoCov">          0 :   if (!ntr) return 0;</span>
<span class="lineNum">     689 </span>            :   Int_t nMuonGlobalTracks=0;
<span class="lineNum">     690 </span><span class="lineNoCov">          0 :   if(!dynamic_cast&lt;AliAODTrack*&gt;(GetTrack(0))) {</span>
<span class="lineNum">     691 </span><span class="lineNoCov">          0 :     AliError(&quot;Not a standard AOD&quot;);</span>
<span class="lineNum">     692 </span><span class="lineNoCov">          0 :     return 0;</span>
<span class="lineNum">     693 </span>            :   }
<span class="lineNum">     694 </span><span class="lineNoCov">          0 :   for (Int_t iTrack=ntr; iTrack--;) {</span>
<span class="lineNum">     695 </span><span class="lineNoCov">          0 :     if (((AliAODTrack*)GetTrack(iTrack))-&gt;IsMuonGlobalTrack()) {</span>
<span class="lineNum">     696 </span><span class="lineNoCov">          0 :        nMuonGlobalTracks++;</span>
<span class="lineNum">     697 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     698 </span>            :   }
<span class="lineNum">     699 </span>            :   
<span class="lineNum">     700 </span><span class="lineNoCov">          0 :   return nMuonGlobalTracks;</span>
<span class="lineNum">     701 </span><span class="lineNoCov">          0 : }</span>
<a name="702"><span class="lineNum">     702 </span>            : </a>
<span class="lineNum">     703 </span>            : //______________________________________________________________________________
<span class="lineNum">     704 </span>            : void AliAODEvent::ReadFromTree(TTree *tree, Option_t* opt /*= &quot;&quot;*/)
<span class="lineNum">     705 </span>            : {
<span class="lineNum">     706 </span>            :     // Connects aod event to tree
<span class="lineNum">     707 </span>            :   
<span class="lineNum">     708 </span><span class="lineNoCov">          0 :   if(!tree){</span>
<span class="lineNum">     709 </span><span class="lineNoCov">          0 :     AliWarning(&quot;Zero Pointer to Tree \n&quot;);</span>
<span class="lineNum">     710 </span><span class="lineNoCov">          0 :     return;</span>
<span class="lineNum">     711 </span>            :   }
<span class="lineNum">     712 </span>            :     // load the TTree
<span class="lineNum">     713 </span><span class="lineNoCov">          0 :   if(!tree-&gt;GetTree())tree-&gt;LoadTree(0);</span>
<span class="lineNum">     714 </span>            :   
<span class="lineNum">     715 </span>            :     // Try to find AliAODEvent
<span class="lineNum">     716 </span>            :   AliAODEvent *aodEvent = 0;
<span class="lineNum">     717 </span><span class="lineNoCov">          0 :   aodEvent = (AliAODEvent*)tree-&gt;GetTree()-&gt;GetUserInfo()-&gt;FindObject(&quot;AliAODEvent&quot;);</span>
<span class="lineNum">     718 </span><span class="lineNoCov">          0 :   if(aodEvent){</span>
<span class="lineNum">     719 </span>            :     // This event is connected to the tree by definition, just say so
<span class="lineNum">     720 </span><span class="lineNoCov">          0 :     aodEvent-&gt;SetConnected();</span>
<span class="lineNum">     721 </span>            :       // Check if already connected to tree
<span class="lineNum">     722 </span><span class="lineNoCov">          0 :     TList* connectedList = (TList*) (tree-&gt;GetUserInfo()-&gt;FindObject(&quot;AODObjectsConnectedToTree&quot;));</span>
<span class="lineNum">     723 </span><span class="lineNoCov">          0 :     if (connectedList &amp;&amp; (!strcmp(opt, &quot;reconnect&quot;))) {</span>
<span class="lineNum">     724 </span>            :         // If connected use the connected list of objects
<span class="lineNum">     725 </span><span class="lineNoCov">          0 :         if (fAODObjects != connectedList) {</span>
<span class="lineNum">     726 </span><span class="lineNoCov">          0 :            delete fAODObjects;</span>
<span class="lineNum">     727 </span><span class="lineNoCov">          0 :            fAODObjects = connectedList;</span>
<span class="lineNum">     728 </span><span class="lineNoCov">          0 :         }   </span>
<span class="lineNum">     729 </span><span class="lineNoCov">          0 :         GetStdContent(); </span>
<span class="lineNum">     730 </span><span class="lineNoCov">          0 :         fConnected = kTRUE;</span>
<span class="lineNum">     731 </span><span class="lineNoCov">          0 :         return;</span>
<span class="lineNum">     732 </span>            :     } 
<span class="lineNum">     733 </span>            :       // Connect to tree
<span class="lineNum">     734 </span>            :       // prevent a memory leak when reading back the TList
<span class="lineNum">     735 </span>            : //      if (!(strcmp(opt, &quot;reconnect&quot;))) fAODObjects-&gt;Delete();
<span class="lineNum">     736 </span>            :     
<span class="lineNum">     737 </span>            :       // create a new TList from the UserInfo TList... 
<span class="lineNum">     738 </span>            :       // copy constructor does not work...
<span class="lineNum">     739 </span>            :     //    fAODObjects = (TList*)(aodEvent-&gt;GetList()-&gt;Clone());
<span class="lineNum">     740 </span><span class="lineNoCov">          0 :     fAODObjects = (TList*)aodEvent-&gt;GetList();</span>
<span class="lineNum">     741 </span><span class="lineNoCov">          0 :     fAODObjects-&gt;SetOwner(kTRUE);</span>
<span class="lineNum">     742 </span><span class="lineNoCov">          0 :     if(fAODObjects-&gt;GetEntries()&lt;kAODListN)</span>
<span class="lineNum">     743 </span>            :     {
<span class="lineNum">     744 </span><span class="lineNoCov">          0 :       AliWarning(Form(&quot;AliAODEvent::ReadFromTree() TList contains less than the standard contents %d &lt; %d&quot;</span>
<span class="lineNum">     745 </span>            :                       &quot; That might be fine though (at least for filtered AODs)&quot;,fAODObjects-&gt;GetEntries(),kAODListN));
<span class="lineNum">     746 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     747 </span>            :       //
<span class="lineNum">     748 </span>            :       // Let's find out whether we have friends
<span class="lineNum">     749 </span><span class="lineNoCov">          0 :     TList* friendL = tree-&gt;GetTree()-&gt;GetListOfFriends();</span>
<span class="lineNum">     750 </span><span class="lineNoCov">          0 :     if (friendL) </span>
<span class="lineNum">     751 </span>            :     {
<span class="lineNum">     752 </span><span class="lineNoCov">          0 :       TIter next(friendL);</span>
<span class="lineNum">     753 </span>            :       TFriendElement* fe;
<span class="lineNum">     754 </span><span class="lineNoCov">          0 :       while ((fe = (TFriendElement*)next())){</span>
<span class="lineNum">     755 </span><span class="lineNoCov">          0 :         aodEvent = (AliAODEvent*)(fe-&gt;GetTree()-&gt;GetUserInfo()-&gt;FindObject(&quot;AliAODEvent&quot;));</span>
<span class="lineNum">     756 </span><span class="lineNoCov">          0 :         if (!aodEvent) {</span>
<span class="lineNum">     757 </span><span class="lineNoCov">          0 :           printf(&quot;No UserInfo on tree \n&quot;);</span>
<span class="lineNum">     758 </span>            :         } else {
<span class="lineNum">     759 </span>            :           
<span class="lineNum">     760 </span>            :           //          TList* objL = (TList*)(aodEvent-&gt;GetList()-&gt;Clone());
<span class="lineNum">     761 </span><span class="lineNoCov">          0 :           TList* objL = (TList*)aodEvent-&gt;GetList();</span>
<span class="lineNum">     762 </span><span class="lineNoCov">          0 :           printf(&quot;Get list of object from tree %d !!\n&quot;, objL-&gt;GetEntries());</span>
<span class="lineNum">     763 </span><span class="lineNoCov">          0 :           TIter nextobject(objL);</span>
<span class="lineNum">     764 </span>            :           TObject* obj =  0;
<span class="lineNum">     765 </span><span class="lineNoCov">          0 :           while((obj = nextobject()))</span>
<span class="lineNum">     766 </span>            :           {
<span class="lineNum">     767 </span><span class="lineNoCov">          0 :             printf(&quot;Adding object from friend %s !\n&quot;, obj-&gt;GetName());</span>
<span class="lineNum">     768 </span><span class="lineNoCov">          0 :             fAODObjects-&gt;Add(obj);</span>
<span class="lineNum">     769 </span>            :           } // object &quot;branch&quot; loop
<span class="lineNum">     770 </span><span class="lineNoCov">          0 :         } // has userinfo  </span>
<span class="lineNum">     771 </span>            :       } // friend loop
<span class="lineNum">     772 </span><span class="lineNoCov">          0 :     } // has friends    </span>
<span class="lineNum">     773 </span>            :       // set the branch addresses
<span class="lineNum">     774 </span><span class="lineNoCov">          0 :     TIter next(fAODObjects);</span>
<span class="lineNum">     775 </span>            :     TNamed *el;
<span class="lineNum">     776 </span><span class="lineNoCov">          0 :     while((el=(TNamed*)next())){</span>
<span class="lineNum">     777 </span><span class="lineNoCov">          0 :       TString bname(el-&gt;GetName());</span>
<span class="lineNum">     778 </span>            :         // check if branch exists under this Name
<span class="lineNum">     779 </span><span class="lineNoCov">          0 :       TBranch *br = tree-&gt;GetTree()-&gt;GetBranch(bname.Data());</span>
<span class="lineNum">     780 </span><span class="lineNoCov">          0 :       if(br){</span>
<span class="lineNum">     781 </span><span class="lineNoCov">          0 :         tree-&gt;SetBranchAddress(bname.Data(),fAODObjects-&gt;GetObjectRef(el));</span>
<span class="lineNum">     782 </span>            :       } else {
<span class="lineNum">     783 </span><span class="lineNoCov">          0 :         br = tree-&gt;GetBranch(Form(&quot;%s.&quot;,bname.Data()));</span>
<span class="lineNum">     784 </span><span class="lineNoCov">          0 :         if(br){</span>
<span class="lineNum">     785 </span><span class="lineNoCov">          0 :           tree-&gt;SetBranchAddress(Form(&quot;%s.&quot;,bname.Data()),fAODObjects-&gt;GetObjectRef(el));</span>
<span class="lineNum">     786 </span>            :         }
<span class="lineNum">     787 </span>            :         else{
<span class="lineNum">     788 </span><span class="lineNoCov">          0 :           printf(&quot;%s %d AliAODEvent::ReadFromTree() No Branch found with Name %s. \n&quot;,</span>
<span class="lineNum">     789 </span><span class="lineNoCov">          0 :                  (char*)__FILE__,__LINE__,bname.Data());</span>
<span class="lineNum">     790 </span>            :         }       
<span class="lineNum">     791 </span>            :       }
<span class="lineNum">     792 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     793 </span><span class="lineNoCov">          0 :     GetStdContent();</span>
<span class="lineNum">     794 </span>            :       // when reading back we are not owner of the list 
<span class="lineNum">     795 </span>            :       // must not delete it
<span class="lineNum">     796 </span><span class="lineNoCov">          0 :     fAODObjects-&gt;SetOwner(kTRUE);</span>
<span class="lineNum">     797 </span><span class="lineNoCov">          0 :     fAODObjects-&gt;SetName(&quot;AODObjectsConnectedToTree&quot;);</span>
<span class="lineNum">     798 </span>            :       // we are not owner of the list objects 
<span class="lineNum">     799 </span>            :       // must not delete it
<span class="lineNum">     800 </span><span class="lineNoCov">          0 :     tree-&gt;GetUserInfo()-&gt;Add(fAODObjects);</span>
<span class="lineNum">     801 </span><span class="lineNoCov">          0 :     fConnected = kTRUE;</span>
<span class="lineNum">     802 </span><span class="lineNoCov">          0 :   }// no aodEvent</span>
<span class="lineNum">     803 </span>            :   else {
<span class="lineNum">     804 </span>            :       // we can't get the list from the user data, create standard content
<span class="lineNum">     805 </span>            :       // and set it by hand
<span class="lineNum">     806 </span><span class="lineNoCov">          0 :     CreateStdContent();</span>
<span class="lineNum">     807 </span><span class="lineNoCov">          0 :     TIter next(fAODObjects);</span>
<span class="lineNum">     808 </span>            :     TNamed *el;
<span class="lineNum">     809 </span><span class="lineNoCov">          0 :     while((el=(TNamed*)next())){</span>
<span class="lineNum">     810 </span><span class="lineNoCov">          0 :       TString bname(el-&gt;GetName());    </span>
<span class="lineNum">     811 </span><span class="lineNoCov">          0 :       tree-&gt;SetBranchAddress(bname.Data(),fAODObjects-&gt;GetObjectRef(el));</span>
<span class="lineNum">     812 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     813 </span><span class="lineNoCov">          0 :     GetStdContent();</span>
<span class="lineNum">     814 </span>            :       // when reading back we are not owner of the list 
<span class="lineNum">     815 </span>            :       // must not delete it
<span class="lineNum">     816 </span><span class="lineNoCov">          0 :     fAODObjects-&gt;SetOwner(kTRUE);</span>
<span class="lineNum">     817 </span><span class="lineNoCov">          0 :   }</span>
<a name="818"><span class="lineNum">     818 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     819 </span>            :   //______________________________________________________________________________
<span class="lineNum">     820 </span>            : Int_t  AliAODEvent::GetNumberOfPileupVerticesSPD() const{
<span class="lineNum">     821 </span>            :   // count number of SPD pileup vertices
<span class="lineNum">     822 </span><span class="lineNoCov">          0 :   Int_t nVertices=GetNumberOfVertices();</span>
<span class="lineNum">     823 </span>            :   Int_t nPileupVertices=0;
<span class="lineNum">     824 </span><span class="lineNoCov">          0 :   for(Int_t iVert=0; iVert&lt;nVertices; iVert++){</span>
<span class="lineNum">     825 </span><span class="lineNoCov">          0 :     AliAODVertex *v=GetVertex(iVert);</span>
<span class="lineNum">     826 </span><span class="lineNoCov">          0 :     if(v-&gt;GetType()==AliAODVertex::kPileupSPD) nPileupVertices++;</span>
<span class="lineNum">     827 </span>            :   }
<span class="lineNum">     828 </span><span class="lineNoCov">          0 :   return nPileupVertices;</span>
<a name="829"><span class="lineNum">     829 </span>            : }</a>
<span class="lineNum">     830 </span>            : //______________________________________________________________________________
<span class="lineNum">     831 </span>            : Int_t  AliAODEvent::GetNumberOfPileupVerticesTracks() const{
<span class="lineNum">     832 </span>            :   // count number of track pileup vertices
<span class="lineNum">     833 </span><span class="lineNoCov">          0 :   Int_t nVertices=GetNumberOfVertices();</span>
<span class="lineNum">     834 </span>            :   Int_t nPileupVertices=0;
<span class="lineNum">     835 </span><span class="lineNoCov">          0 :   for(Int_t iVert=0; iVert&lt;nVertices; iVert++){</span>
<span class="lineNum">     836 </span><span class="lineNoCov">          0 :     AliAODVertex *v=GetVertex(iVert);</span>
<span class="lineNum">     837 </span><span class="lineNoCov">          0 :     if(v-&gt;GetType()==AliAODVertex::kPileupTracks) nPileupVertices++;</span>
<span class="lineNum">     838 </span>            :   }
<span class="lineNum">     839 </span><span class="lineNoCov">          0 :   return nPileupVertices;</span>
<a name="840"><span class="lineNum">     840 </span>            : }</a>
<span class="lineNum">     841 </span>            : //______________________________________________________________________________
<span class="lineNum">     842 </span>            : AliAODVertex* AliAODEvent::GetPrimaryVertexSPD() const{
<span class="lineNum">     843 </span>            :   // Get SPD primary vertex
<span class="lineNum">     844 </span><span class="lineNoCov">          0 :   Int_t nVertices=GetNumberOfVertices();</span>
<span class="lineNum">     845 </span><span class="lineNoCov">          0 :   for(Int_t iVert=0; iVert&lt;nVertices; iVert++){</span>
<span class="lineNum">     846 </span><span class="lineNoCov">          0 :     AliAODVertex *v=GetVertex(iVert);</span>
<span class="lineNum">     847 </span><span class="lineNoCov">          0 :     if(v-&gt;GetType()==AliAODVertex::kMainSPD) return v;</span>
<span class="lineNum">     848 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     849 </span><span class="lineNoCov">          0 :   return 0;</span>
<a name="850"><span class="lineNum">     850 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     851 </span>            : //______________________________________________________________________________
<span class="lineNum">     852 </span>            : AliAODVertex* AliAODEvent::GetPrimaryVertexTPC() const{
<span class="lineNum">     853 </span>            :   // Get SPD primary vertex
<span class="lineNum">     854 </span><span class="lineNoCov">          0 :   Int_t nVertices=GetNumberOfVertices();</span>
<span class="lineNum">     855 </span><span class="lineNoCov">          0 :   for(Int_t iVert=0; iVert&lt;nVertices; iVert++){</span>
<span class="lineNum">     856 </span><span class="lineNoCov">          0 :     AliAODVertex *v=GetVertex(iVert);</span>
<span class="lineNum">     857 </span><span class="lineNoCov">          0 :     if(v-&gt;GetType()==AliAODVertex::kMainTPC) return v;</span>
<span class="lineNum">     858 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     859 </span><span class="lineNoCov">          0 :   return 0;</span>
<a name="860"><span class="lineNum">     860 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     861 </span>            : //______________________________________________________________________________
<span class="lineNum">     862 </span>            : AliAODVertex* AliAODEvent::GetPileupVertexSPD(Int_t iV) const{
<span class="lineNum">     863 </span>            :   // Get pile-up vertex iV
<span class="lineNum">     864 </span><span class="lineNoCov">          0 :   Int_t nVertices=GetNumberOfVertices();</span>
<span class="lineNum">     865 </span>            :   Int_t counter=0;
<span class="lineNum">     866 </span><span class="lineNoCov">          0 :   for(Int_t iVert=0; iVert&lt;nVertices; iVert++){</span>
<span class="lineNum">     867 </span><span class="lineNoCov">          0 :     AliAODVertex *v=GetVertex(iVert);</span>
<span class="lineNum">     868 </span><span class="lineNoCov">          0 :     if(v-&gt;GetType()==AliAODVertex::kPileupSPD){</span>
<span class="lineNum">     869 </span><span class="lineNoCov">          0 :       if(counter==iV) return v;</span>
<span class="lineNum">     870 </span><span class="lineNoCov">          0 :       ++counter;</span>
<span class="lineNum">     871 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     872 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     873 </span><span class="lineNoCov">          0 :   return 0;</span>
<a name="874"><span class="lineNum">     874 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     875 </span>            : //______________________________________________________________________________
<span class="lineNum">     876 </span>            : AliAODVertex* AliAODEvent::GetPileupVertexTracks(Int_t iV) const{
<span class="lineNum">     877 </span>            :   // Get pile-up vertex iV
<span class="lineNum">     878 </span><span class="lineNoCov">          0 :   Int_t nVertices=GetNumberOfVertices();</span>
<span class="lineNum">     879 </span>            :   Int_t counter=0;
<span class="lineNum">     880 </span><span class="lineNoCov">          0 :   for(Int_t iVert=0; iVert&lt;nVertices; iVert++){</span>
<span class="lineNum">     881 </span><span class="lineNoCov">          0 :     AliAODVertex *v=GetVertex(iVert);</span>
<span class="lineNum">     882 </span><span class="lineNoCov">          0 :     if(v-&gt;GetType()==AliAODVertex::kPileupTracks){</span>
<span class="lineNum">     883 </span><span class="lineNoCov">          0 :       if(counter==iV) return v;</span>
<span class="lineNum">     884 </span><span class="lineNoCov">          0 :       ++counter;</span>
<span class="lineNum">     885 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     886 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     887 </span><span class="lineNoCov">          0 :   return 0;</span>
<a name="888"><span class="lineNum">     888 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     889 </span>            : //______________________________________________________________________________
<span class="lineNum">     890 </span>            : Bool_t  AliAODEvent::IsPileupFromSPD(Int_t minContributors, 
<span class="lineNum">     891 </span>            :                                      Double_t minZdist, 
<span class="lineNum">     892 </span>            :                                      Double_t nSigmaZdist, 
<span class="lineNum">     893 </span>            :                                      Double_t nSigmaDiamXY, 
<span class="lineNum">     894 </span>            :                                      Double_t nSigmaDiamZ) const{
<span class="lineNum">     895 </span>            :   //
<span class="lineNum">     896 </span>            :   // This function checks if there was a pile up
<span class="lineNum">     897 </span>            :   // reconstructed with SPD
<span class="lineNum">     898 </span>            :   //
<span class="lineNum">     899 </span><span class="lineNoCov">          0 :   AliAODVertex *mainV=GetPrimaryVertexSPD();</span>
<span class="lineNum">     900 </span><span class="lineNoCov">          0 :   if(!mainV) return kFALSE;</span>
<span class="lineNum">     901 </span><span class="lineNoCov">          0 :   Int_t nc1=mainV-&gt;GetNContributors();</span>
<span class="lineNum">     902 </span><span class="lineNoCov">          0 :   if(nc1&lt;1) return kFALSE;</span>
<span class="lineNum">     903 </span><span class="lineNoCov">          0 :   Int_t nPileVert=GetNumberOfPileupVerticesSPD();</span>
<span class="lineNum">     904 </span><span class="lineNoCov">          0 :   if(nPileVert==0) return kFALSE;</span>
<span class="lineNum">     905 </span><span class="lineNoCov">          0 :   Int_t nVertices=GetNumberOfVertices();</span>
<span class="lineNum">     906 </span>            :   
<span class="lineNum">     907 </span><span class="lineNoCov">          0 :   for(Int_t iVert=0; iVert&lt;nVertices; iVert++){</span>
<span class="lineNum">     908 </span><span class="lineNoCov">          0 :     AliAODVertex *pv=GetVertex(iVert);</span>
<span class="lineNum">     909 </span><span class="lineNoCov">          0 :     if(pv-&gt;GetType()!=AliAODVertex::kPileupSPD) continue;</span>
<span class="lineNum">     910 </span><span class="lineNoCov">          0 :     Int_t nc2=pv-&gt;GetNContributors();</span>
<span class="lineNum">     911 </span><span class="lineNoCov">          0 :     if(nc2&gt;=minContributors){</span>
<span class="lineNum">     912 </span><span class="lineNoCov">          0 :       Double_t z1=mainV-&gt;GetZ();</span>
<span class="lineNum">     913 </span><span class="lineNoCov">          0 :       Double_t z2=pv-&gt;GetZ();</span>
<span class="lineNum">     914 </span><span class="lineNoCov">          0 :       Double_t distZ=TMath::Abs(z2-z1);</span>
<span class="lineNum">     915 </span><span class="lineNoCov">          0 :       Double_t distZdiam=TMath::Abs(z2-GetDiamondZ());</span>
<span class="lineNum">     916 </span><span class="lineNoCov">          0 :       Double_t cutZdiam=nSigmaDiamZ*TMath::Sqrt(GetSigma2DiamondZ());</span>
<span class="lineNum">     917 </span><span class="lineNoCov">          0 :       if(GetSigma2DiamondZ()&lt;0.0001)cutZdiam=99999.; //protection for missing z diamond information</span>
<span class="lineNum">     918 </span><span class="lineNoCov">          0 :       if(distZ&gt;minZdist &amp;&amp; distZdiam&lt;cutZdiam){</span>
<span class="lineNum">     919 </span><span class="lineNoCov">          0 :         Double_t x2=pv-&gt;GetX();</span>
<span class="lineNum">     920 </span><span class="lineNoCov">          0 :         Double_t y2=pv-&gt;GetY();</span>
<span class="lineNum">     921 </span><span class="lineNoCov">          0 :         Double_t distXdiam=TMath::Abs(x2-GetDiamondX());</span>
<span class="lineNum">     922 </span><span class="lineNoCov">          0 :         Double_t distYdiam=TMath::Abs(y2-GetDiamondY());</span>
<span class="lineNum">     923 </span><span class="lineNoCov">          0 :         Double_t cov1[6],cov2[6];       </span>
<span class="lineNum">     924 </span><span class="lineNoCov">          0 :         mainV-&gt;GetCovarianceMatrix(cov1);</span>
<span class="lineNum">     925 </span><span class="lineNoCov">          0 :         pv-&gt;GetCovarianceMatrix(cov2);</span>
<span class="lineNum">     926 </span><span class="lineNoCov">          0 :         Double_t errxDist=TMath::Sqrt(cov2[0]+GetSigma2DiamondX());</span>
<span class="lineNum">     927 </span><span class="lineNoCov">          0 :         Double_t erryDist=TMath::Sqrt(cov2[2]+GetSigma2DiamondY());</span>
<span class="lineNum">     928 </span><span class="lineNoCov">          0 :         Double_t errzDist=TMath::Sqrt(cov1[5]+cov2[5]);</span>
<span class="lineNum">     929 </span><span class="lineNoCov">          0 :         Double_t cutXdiam=nSigmaDiamXY*errxDist;</span>
<span class="lineNum">     930 </span><span class="lineNoCov">          0 :         if(GetSigma2DiamondX()&lt;0.0001)cutXdiam=99999.; //protection for missing diamond information</span>
<span class="lineNum">     931 </span><span class="lineNoCov">          0 :         Double_t cutYdiam=nSigmaDiamXY*erryDist;</span>
<span class="lineNum">     932 </span><span class="lineNoCov">          0 :         if(GetSigma2DiamondY()&lt;0.0001)cutYdiam=99999.; //protection for missing diamond information</span>
<span class="lineNum">     933 </span><span class="lineNoCov">          0 :         if( (distXdiam&lt;cutXdiam) &amp;&amp; (distYdiam&lt;cutYdiam) &amp;&amp; (distZ&gt;nSigmaZdist*errzDist) ){</span>
<span class="lineNum">     934 </span><span class="lineNoCov">          0 :           return kTRUE;</span>
<span class="lineNum">     935 </span>            :         }
<span class="lineNum">     936 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     937 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     938 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     939 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     940 </span><span class="lineNoCov">          0 : }</span>
<a name="941"><span class="lineNum">     941 </span>            : </a>
<span class="lineNum">     942 </span>            : //______________________________________________________________________________
<span class="lineNum">     943 </span>            : void AliAODEvent::Print(Option_t *) const
<span class="lineNum">     944 </span>            : {
<span class="lineNum">     945 </span>            :   // Print the names of the all branches
<span class="lineNum">     946 </span><span class="lineNoCov">          0 :   TIter next(fAODObjects);</span>
<span class="lineNum">     947 </span>            :   TNamed *el;
<span class="lineNum">     948 </span><span class="lineNoCov">          0 :   Printf(&quot;&gt;&gt;&gt;&gt;&gt;  AOD  Content &lt;&lt;&lt;&lt;&lt;&quot;);    </span>
<span class="lineNum">     949 </span><span class="lineNoCov">          0 :   while((el=(TNamed*)next())){</span>
<span class="lineNum">     950 </span><span class="lineNoCov">          0 :     Printf(&quot;&gt;&gt; %s &quot;,el-&gt;GetName());      </span>
<span class="lineNum">     951 </span>            :   }
<span class="lineNum">     952 </span><span class="lineNoCov">          0 :   Printf(&quot;&gt;&gt;&gt;&gt;&gt;                &lt;&lt;&lt;&lt;&lt;&quot;);    </span>
<span class="lineNum">     953 </span>            :   
<span class="lineNum">     954 </span>            :   return;
<span class="lineNum">     955 </span><span class="lineNoCov">          0 : }</span>
<a name="956"><span class="lineNum">     956 </span>            : </a>
<span class="lineNum">     957 </span>            : //______________________________________________________________________________
<span class="lineNum">     958 </span>            : void AliAODEvent::AssignIDtoCollection(const TCollection* col)
<span class="lineNum">     959 </span>            : {
<span class="lineNum">     960 </span>            :     // Static method which assigns a ID to each object in a collection
<span class="lineNum">     961 </span>            :     // In this way the objects are marked as referenced and written with 
<span class="lineNum">     962 </span>            :     // an ID. This has the advantage that TRefs to this objects can be 
<span class="lineNum">     963 </span>            :     // written by a subsequent process.
<span class="lineNum">     964 </span><span class="lineCov">        184 :     TIter next(col);</span>
<span class="lineNum">     965 </span>            :     TObject* obj;
<span class="lineNum">     966 </span><span class="lineCov">       6206 :     while ((obj = next()))</span>
<span class="lineNum">     967 </span><span class="lineCov">       2965 :         TProcessID::AssignID(obj);</span>
<span class="lineNum">     968 </span><span class="lineCov">         92 : }</span>
<a name="969"><span class="lineNum">     969 </span>            : </a>
<span class="lineNum">     970 </span>            : //______________________________________________________________________________
<span class="lineNum">     971 </span>            : Bool_t AliAODEvent::IsPileupFromSPDInMultBins() const {
<span class="lineNum">     972 </span><span class="lineNoCov">          0 :     Int_t nTracklets=GetTracklets()-&gt;GetNumberOfTracklets();</span>
<span class="lineNum">     973 </span><span class="lineNoCov">          0 :     if(nTracklets&lt;20) return IsPileupFromSPD(3,0.8);</span>
<span class="lineNum">     974 </span><span class="lineNoCov">          0 :     else if(nTracklets&lt;50) return IsPileupFromSPD(4,0.8);</span>
<span class="lineNum">     975 </span><span class="lineNoCov">          0 :     else return IsPileupFromSPD(5,0.8);</span>
<span class="lineNum">     976 </span><span class="lineNoCov">          0 : }</span>
<a name="977"><span class="lineNum">     977 </span>            : </a>
<span class="lineNum">     978 </span>            : //______________________________________________________________________________
<span class="lineNum">     979 </span>            : void AliAODEvent::Reset()
<span class="lineNum">     980 </span>            : {
<span class="lineNum">     981 </span>            :   // Handle the cases
<span class="lineNum">     982 </span>            :   // Std content + Non std content
<span class="lineNum">     983 </span>            : 
<span class="lineNum">     984 </span><span class="lineNoCov">          0 :   ClearStd();</span>
<span class="lineNum">     985 </span>            :   
<span class="lineNum">     986 </span><span class="lineNoCov">          0 :   if(fAODObjects-&gt;GetSize()&gt;kAODListN){</span>
<span class="lineNum">     987 </span>            :     // we have non std content
<span class="lineNum">     988 </span>            :     // this also covers aodfriends
<span class="lineNum">     989 </span><span class="lineNoCov">          0 :     for(int i = kAODListN;i &lt; fAODObjects-&gt;GetSize();++i){</span>
<span class="lineNum">     990 </span><span class="lineNoCov">          0 :       TObject *pObject = fAODObjects-&gt;At(i);</span>
<span class="lineNum">     991 </span>            :       // TClonesArrays
<span class="lineNum">     992 </span><span class="lineNoCov">          0 :       if(pObject-&gt;InheritsFrom(TClonesArray::Class())){</span>
<span class="lineNum">     993 </span><span class="lineNoCov">          0 :        ((TClonesArray*)pObject)-&gt;Delete();</span>
<span class="lineNum">     994 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     995 </span><span class="lineNoCov">          0 :       else if(!pObject-&gt;InheritsFrom(TCollection::Class())){</span>
<span class="lineNum">     996 </span><span class="lineNoCov">          0 :        TClass *pClass = TClass::GetClass(pObject-&gt;ClassName());</span>
<span class="lineNum">     997 </span><span class="lineNoCov">          0 :        if (pClass &amp;&amp; pClass-&gt;GetListOfMethods()-&gt;FindObject(&quot;Clear&quot;)) {</span>
<span class="lineNum">     998 </span><span class="lineNoCov">          0 :          AliDebug(1, Form(&quot;Clear for object %s class %s&quot;, pObject-&gt;GetName(), pObject-&gt;ClassName()));</span>
<span class="lineNum">     999 </span><span class="lineNoCov">          0 :          pObject-&gt;Clear();</span>
<span class="lineNum">    1000 </span><span class="lineNoCov">          0 :        }</span>
<span class="lineNum">    1001 </span>            :        else {
<span class="lineNum">    1002 </span><span class="lineNoCov">          0 :          AliDebug(1, Form(&quot;ResetWithPlacementNew for object %s class %s&quot;, pObject-&gt;GetName(), pObject-&gt;ClassName()));</span>
<span class="lineNum">    1003 </span><span class="lineNoCov">          0 :           Long_t dtoronly = TObject::GetDtorOnly();</span>
<span class="lineNum">    1004 </span><span class="lineNoCov">          0 :           TObject::SetDtorOnly(pObject);</span>
<span class="lineNum">    1005 </span><span class="lineNoCov">          0 :           delete pObject;</span>
<span class="lineNum">    1006 </span><span class="lineNoCov">          0 :           pClass-&gt;New(pObject);</span>
<span class="lineNum">    1007 </span><span class="lineNoCov">          0 :           TObject::SetDtorOnly((void*)dtoronly);</span>
<span class="lineNum">    1008 </span>            :        }
<span class="lineNum">    1009 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">    1010 </span>            :       else{
<span class="lineNum">    1011 </span><span class="lineNoCov">          0 :        AliWarning(Form(&quot;No reset for %s \n&quot;,</span>
<span class="lineNum">    1012 </span>            :                        pObject-&gt;ClassName()));
<span class="lineNum">    1013 </span>            :       }
<span class="lineNum">    1014 </span>            :     }
<span class="lineNum">    1015 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">    1016 </span><span class="lineNoCov">          0 : }</span>
<a name="1017"><span class="lineNum">    1017 </span>            : </a>
<span class="lineNum">    1018 </span>            : // FIXME: Why is this in event and not in header?
<span class="lineNum">    1019 </span>            : Float_t AliAODEvent::GetVZEROEqMultiplicity(Int_t i) const
<span class="lineNum">    1020 </span>            : {
<span class="lineNum">    1021 </span>            :   // Get VZERO Multiplicity for channel i
<span class="lineNum">    1022 </span>            :   // Themethod uses the equalization factors
<span class="lineNum">    1023 </span>            :   // stored in the ESD-run object in order to
<span class="lineNum">    1024 </span>            :   // get equal multiplicities within a VZERO rins (1/8 of VZERO)
<span class="lineNum">    1025 </span><span class="lineNoCov">          0 :   if (!fAODVZERO || !fHeader) return -1;</span>
<span class="lineNum">    1026 </span>            : 
<span class="lineNum">    1027 </span><span class="lineNoCov">          0 :   Int_t ring = i/8;</span>
<span class="lineNum">    1028 </span>            :   Float_t factorSum = 0;
<span class="lineNum">    1029 </span><span class="lineNoCov">          0 :   for(Int_t j = 8*ring; j &lt; (8*ring+8); ++j) {</span>
<span class="lineNum">    1030 </span><span class="lineNoCov">          0 :     factorSum += fHeader-&gt;GetVZEROEqFactors(j);</span>
<span class="lineNum">    1031 </span>            :   }
<span class="lineNum">    1032 </span><span class="lineNoCov">          0 :   Float_t factor = fHeader-&gt;GetVZEROEqFactors(i)*8./factorSum;</span>
<span class="lineNum">    1033 </span>            : 
<span class="lineNum">    1034 </span><span class="lineNoCov">          0 :   return (fAODVZERO-&gt;GetMultiplicity(i)/factor);</span>
<span class="lineNum">    1035 </span><span class="lineNoCov">          0 : }</span>
<a name="1036"><span class="lineNum">    1036 </span>            : </a>
<span class="lineNum">    1037 </span>            : //------------------------------------------------------------
<span class="lineNum">    1038 </span>            : void  AliAODEvent::SetTOFHeader(const AliTOFHeader *header)
<span class="lineNum">    1039 </span>            : {
<span class="lineNum">    1040 </span>            :   //
<span class="lineNum">    1041 </span>            :   // Set the TOF event_time
<span class="lineNum">    1042 </span>            :   //
<span class="lineNum">    1043 </span>            : 
<span class="lineNum">    1044 </span><span class="lineCov">         16 :   if (fTOFHeader) {</span>
<span class="lineNum">    1045 </span><span class="lineCov">          8 :     *fTOFHeader=*header;</span>
<span class="lineNum">    1046 </span>            :     //fTOFHeader-&gt;SetName(fgkESDListName[kTOFHeader]);
<span class="lineNum">    1047 </span><span class="lineCov">          8 :   }</span>
<span class="lineNum">    1048 </span>            :   else {
<span class="lineNum">    1049 </span>            :     // for analysis of reconstructed events
<span class="lineNum">    1050 </span>            :     // when this information is not avaliable
<span class="lineNum">    1051 </span><span class="lineNoCov">          0 :     fTOFHeader = new AliTOFHeader(*header);</span>
<span class="lineNum">    1052 </span>            :     //AddObject(fTOFHeader);
<span class="lineNum">    1053 </span>            :   }
<span class="lineNum">    1054 </span>            : 
<a name="1055"><span class="lineNum">    1055 </span><span class="lineCov">          8 : }</span></a>
<span class="lineNum">    1056 </span>            : //------------------------------------------------------------
<span class="lineNum">    1057 </span>            : AliAODHMPIDrings *AliAODEvent::GetHMPIDringForTrackID(Int_t trackID) const
<span class="lineNum">    1058 </span>            : {
<span class="lineNum">    1059 </span>            :   //
<span class="lineNum">    1060 </span>            :   // Returns the HMPID object if any for a given track ID
<span class="lineNum">    1061 </span>            :   //
<span class="lineNum">    1062 </span><span class="lineNoCov">          0 :   if(GetHMPIDrings())</span>
<span class="lineNum">    1063 </span>            :   {
<span class="lineNum">    1064 </span><span class="lineNoCov">          0 :     for(Int_t ien = 0 ; ien &lt; GetNHMPIDrings(); ien++)</span>
<span class="lineNum">    1065 </span>            :     {
<span class="lineNum">    1066 </span><span class="lineNoCov">          0 :       if( GetHMPIDring(ien)-&gt;GetHmpTrkID() == trackID ) return GetHMPIDring(ien);      </span>
<span class="lineNum">    1067 </span>            :     }//rings loop  
<span class="lineNum">    1068 </span>            :   }
<span class="lineNum">    1069 </span><span class="lineNoCov">          0 :   return 0;</span>
<a name="1070"><span class="lineNum">    1070 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1071 </span>            : //------------------------------------------------------------
<span class="lineNum">    1072 </span>            : Int_t AliAODEvent::GetNHMPIDrings() const   
<span class="lineNum">    1073 </span>            : { 
<span class="lineNum">    1074 </span>            :   //
<span class="lineNum">    1075 </span>            :   // If there is a list of HMPID rings in the given AOD event, return their number
<span class="lineNum">    1076 </span>            :   //
<span class="lineNum">    1077 </span><span class="lineNoCov">          0 :   if ( fHMPIDrings) return fHMPIDrings-&gt;GetEntriesFast(); </span>
<span class="lineNum">    1078 </span><span class="lineNoCov">          0 :   else return -1;</span>
<a name="1079"><span class="lineNum">    1079 </span><span class="lineNoCov">          0 : } </span></a>
<span class="lineNum">    1080 </span>            : //------------------------------------------------------------
<span class="lineNum">    1081 </span>            : AliAODHMPIDrings *AliAODEvent::GetHMPIDring(Int_t nRings) const
<span class="lineNum">    1082 </span>            : { 
<span class="lineNum">    1083 </span>            :   //
<span class="lineNum">    1084 </span>            :   // If there is a list of HMPID rings in the given AOD event, return corresponding ring
<span class="lineNum">    1085 </span>            :   //
<span class="lineNum">    1086 </span><span class="lineNoCov">          0 :   if(fHMPIDrings) {</span>
<span class="lineNum">    1087 </span><span class="lineNoCov">          0 :     if(   (AliAODHMPIDrings*)fHMPIDrings-&gt;UncheckedAt(nRings) ) {</span>
<span class="lineNum">    1088 </span><span class="lineNoCov">          0 :       return (AliAODHMPIDrings*)fHMPIDrings-&gt;UncheckedAt(nRings);</span>
<span class="lineNum">    1089 </span>            :     }
<span class="lineNum">    1090 </span><span class="lineNoCov">          0 :     else return 0x0;</span>
<span class="lineNum">    1091 </span>            :   }
<span class="lineNum">    1092 </span><span class="lineNoCov">          0 :   else return 0x0;  </span>
<a name="1093"><span class="lineNum">    1093 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">    1094 </span>            : //------------------------------------------------------------
<span class="lineNum">    1095 </span>            : AliAODTrdTrack&amp; AliAODEvent::AddTrdTrack(const AliVTrdTrack *track) {
<span class="lineNum">    1096 </span><span class="lineCov">       6957 :   return *(new ((*fTrdTracks)[fTrdTracks-&gt;GetEntriesFast()]) AliAODTrdTrack(*track));</span>
<span class="lineNum">    1097 </span><span class="lineNoCov">          0 : }</span>
<a name="1098"><span class="lineNum">    1098 </span>            : </a>
<span class="lineNum">    1099 </span>            : //______________________________________________________________________________
<span class="lineNum">    1100 </span>            : void AliAODEvent::ConnectTracks() {
<span class="lineNum">    1101 </span>            : // Connect tracks to this event
<span class="lineNum">    1102 </span><span class="lineCov">         32 :   if (fTracksConnected || !fTracks || !fTracks-&gt;GetEntriesFast()) return;</span>
<span class="lineNum">    1103 </span>            :   AliAODTrack *track = 0;
<span class="lineNum">    1104 </span><span class="lineCov">         24 :   track = dynamic_cast&lt;AliAODTrack*&gt;(GetTrack(0));</span>
<span class="lineNum">    1105 </span><span class="lineCov">          8 :   if(!track) {</span>
<span class="lineNum">    1106 </span><span class="lineNoCov">          0 :     AliWarning(&quot;Not an AliAODTrack, this is not a standard AOD&quot;); </span>
<span class="lineNum">    1107 </span><span class="lineNoCov">          0 :     return;</span>
<span class="lineNum">    1108 </span>            :   }
<span class="lineNum">    1109 </span>            : 
<span class="lineNum">    1110 </span><span class="lineCov">          8 :   TIter next(fTracks);</span>
<span class="lineNum">    1111 </span><span class="lineCov">        387 :   while ((track=(AliAODTrack*)next())) track-&gt;SetAODEvent(this);</span>
<span class="lineNum">    1112 </span><span class="lineCov">          8 :   fTracksConnected = kTRUE;</span>
<span class="lineNum">    1113 </span><span class="lineCov">         16 : }</span>
<a name="1114"><span class="lineNum">    1114 </span>            : </a>
<span class="lineNum">    1115 </span>            : //______________________________________________________________________________
<span class="lineNum">    1116 </span>            : Bool_t AliAODEvent::IsIncompleteDAQ() 
<span class="lineNum">    1117 </span>            : {
<span class="lineNum">    1118 </span>            :   // check if DAQ has set the incomplete event attributes
<span class="lineNum">    1119 </span><span class="lineNoCov">          0 :   UInt_t daqAttr = GetDAQAttributes();</span>
<span class="lineNum">    1120 </span><span class="lineNoCov">          0 :   return (daqAttr&amp;ATTR_2_B(ATTR_INCOMPLETE_EVENT))!=0 </span>
<span class="lineNum">    1121 </span><span class="lineNoCov">          0 :     ||   (daqAttr&amp;ATTR_2_B(ATTR_FLUSHED_EVENT))!=0;</span>
<span class="lineNum">    1122 </span>            :     
<a name="1123"><span class="lineNum">    1123 </span>            : }</a>
<span class="lineNum">    1124 </span>            : 
<span class="lineNum">    1125 </span><span class="lineNoCov">          0 : AliVEvent::EDataLayoutType AliAODEvent::GetDataLayoutType() const {return AliVEvent::kAOD;}</span>
<a name="1126"><span class="lineNum">    1126 </span>            : </a>
<span class="lineNum">    1127 </span>            : //______________________________________________________________________________
<span class="lineNum">    1128 </span>            : TClonesArray* AliAODEvent::GetDimuons() const
<span class="lineNum">    1129 </span>            : {
<span class="lineNum">    1130 </span><span class="lineNoCov">          0 :   return fDimuons;</span>
<span class="lineNum">    1131 </span>            : }
<a name="1132"><span class="lineNum">    1132 </span>            : </a>
<span class="lineNum">    1133 </span>            : //______________________________________________________________________________
<span class="lineNum">    1134 </span>            : Int_t AliAODEvent::GetNDimuons() const
<span class="lineNum">    1135 </span>            : {
<span class="lineNum">    1136 </span><span class="lineNoCov">          0 :   return fDimuons ? fDimuons-&gt;GetEntriesFast() : 0;</span>
<span class="lineNum">    1137 </span>            : }
<a name="1138"><span class="lineNum">    1138 </span>            : </a>
<span class="lineNum">    1139 </span>            : //______________________________________________________________________________
<span class="lineNum">    1140 </span>            : Int_t AliAODEvent::GetNumberOfDimuons() const
<span class="lineNum">    1141 </span>            : {
<span class="lineNum">    1142 </span><span class="lineNoCov">          0 :   return GetNDimuons();</span>
<span class="lineNum">    1143 </span>            : }
<a name="1144"><span class="lineNum">    1144 </span>            : </a>
<span class="lineNum">    1145 </span>            : //______________________________________________________________________________
<span class="lineNum">    1146 </span>            : AliAODDimuon* AliAODEvent::GetDimuon(Int_t nDimu) const
<span class="lineNum">    1147 </span>            : {
<span class="lineNum">    1148 </span><span class="lineNoCov">          0 :   if ( fDimuons )</span>
<span class="lineNum">    1149 </span>            :   {
<span class="lineNum">    1150 </span><span class="lineNoCov">          0 :     return (AliAODDimuon*)fDimuons-&gt;UncheckedAt(nDimu);</span>
<span class="lineNum">    1151 </span>            :   }
<span class="lineNum">    1152 </span><span class="lineNoCov">          0 :   return 0x0;</span>
<span class="lineNum">    1153 </span><span class="lineNoCov">          0 : }</span>
<a name="1154"><span class="lineNum">    1154 </span>            : </a>
<span class="lineNum">    1155 </span>            : //______________________________________________________________________________
<span class="lineNum">    1156 </span>            : Int_t AliAODEvent::AddDimuon(const AliAODDimuon* dimu)
<span class="lineNum">    1157 </span>            : {
<span class="lineNum">    1158 </span><span class="lineNoCov">          0 :   if ( fDimuons )</span>
<span class="lineNum">    1159 </span>            :   {
<span class="lineNum">    1160 </span><span class="lineNoCov">          0 :     new((*fDimuons)[fDimuons-&gt;GetEntriesFast()]) AliAODDimuon(*dimu);</span>
<span class="lineNum">    1161 </span><span class="lineNoCov">          0 :     return fDimuons-&gt;GetEntriesFast()-1;</span>
<span class="lineNum">    1162 </span>            :   }
<span class="lineNum">    1163 </span><span class="lineNoCov">          0 :   return -1;</span>
<span class="lineNum">    1164 </span><span class="lineNoCov">          0 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
