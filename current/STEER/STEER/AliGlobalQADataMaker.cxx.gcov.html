<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - STEER/STEER/AliGlobalQADataMaker.cxx</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">STEER/STEER</a> - AliGlobalQADataMaker.cxx<span style="font-size: 80%;"> (source / <a href="AliGlobalQADataMaker.cxx.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">237</td>
            <td class="headerCovTableEntryLo">0.4 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">8</td>
            <td class="headerCovTableEntryLo">12.5 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /*</a>
<span class="lineNum">       2 </span>            :  The class for calculating the global (not detector specific) quality assurance.
<span class="lineNum">       3 </span>            :  It reuses the following TLists from its base class 
<span class="lineNum">       4 </span>            :     AliQADataMaker::fRecPointsQAList (for keeping the track residuals)
<span class="lineNum">       5 </span>            :     AliQADataMaker::fESDsQAList      (for keeping global ESD QA data)
<span class="lineNum">       6 </span>            : */
<span class="lineNum">       7 </span>            : 
<span class="lineNum">       8 </span>            : #include &lt;TPDGCode.h&gt;
<span class="lineNum">       9 </span>            : #include &lt;TH1F.h&gt;
<span class="lineNum">      10 </span>            : #include &lt;TH2F.h&gt;
<span class="lineNum">      11 </span>            : 
<span class="lineNum">      12 </span>            : #include &quot;AliCDBPath.h&quot;
<span class="lineNum">      13 </span>            : #include &quot;AliCDBEntry.h&quot;
<span class="lineNum">      14 </span>            : #include &quot;AliCDBManager.h&quot;
<span class="lineNum">      15 </span>            : #include &quot;AliDetectorRecoParam.h&quot;
<span class="lineNum">      16 </span>            : #include &quot;AliQAChecker.h&quot;
<span class="lineNum">      17 </span>            : #include &quot;AliGlobalQADataMaker.h&quot;
<span class="lineNum">      18 </span>            : #include &quot;AliGeomManager.h&quot;
<span class="lineNum">      19 </span>            : #include &quot;AliESDEvent.h&quot;
<span class="lineNum">      20 </span>            : #include &quot;AliESDv0.h&quot;
<span class="lineNum">      21 </span>            : #include &quot;AliRawReader.h&quot;
<span class="lineNum">      22 </span>            : #include &quot;AliESDVZERO.h&quot;
<span class="lineNum">      23 </span>            : #include &quot;AliMultiplicity.h&quot; 
<a name="24"><span class="lineNum">      24 </span>            : #include &quot;AliPID.h&quot;</a>
<span class="lineNum">      25 </span>            : 
<span class="lineNum">      26 </span><span class="lineCov">        126 : ClassImp(AliGlobalQADataMaker)</span>
<a name="27"><span class="lineNum">      27 </span>            :  </a>
<span class="lineNum">      28 </span>            : //____________________________________________________________________________ 
<span class="lineNum">      29 </span>            : void AliGlobalQADataMaker::EndOfDetectorCycle(AliQAv1::TASKINDEX_t task, TObjArray ** list)
<span class="lineNum">      30 </span>            : {
<span class="lineNum">      31 </span>            :   //Detector specific actions at end of cycle
<span class="lineNum">      32 </span>            :   // do the QA checking
<span class="lineNum">      33 </span><span class="lineNoCov">          0 :   AliQAChecker::Instance()-&gt;Run(AliQAv1::kGLOBAL, task, list) ;  </span>
<span class="lineNum">      34 </span><span class="lineNoCov">          0 : }</span>
<a name="35"><span class="lineNum">      35 </span>            : </a>
<span class="lineNum">      36 </span>            : //____________________________________________________________________________ 
<span class="lineNum">      37 </span>            : void AliGlobalQADataMaker::InitRaws()
<span class="lineNum">      38 </span>            : {
<span class="lineNum">      39 </span>            :   // create Raws histograms in Raws subdir
<span class="lineNum">      40 </span><span class="lineNoCov">          0 :   ClonePerTrigClass(AliQAv1::kRAWS); // this should be the last line</span>
<span class="lineNum">      41 </span><span class="lineNoCov">          0 : }</span>
<a name="42"><span class="lineNum">      42 </span>            : </a>
<span class="lineNum">      43 </span>            : //____________________________________________________________________________
<span class="lineNum">      44 </span>            : void AliGlobalQADataMaker::InitRecoParams() 
<span class="lineNum">      45 </span>            : {
<span class="lineNum">      46 </span>            :   // Get the recoparam form the OCDB 
<span class="lineNum">      47 </span><span class="lineNoCov">          0 :   if (!fRecoParam) {</span>
<span class="lineNum">      48 </span><span class="lineNoCov">          0 :     TString name(&quot;GRP&quot;) ; </span>
<span class="lineNum">      49 </span><span class="lineNoCov">          0 :     AliDebug(AliQAv1::GetQADebugLevel(), Form(&quot;Loading reconstruction parameter objects for detector %s&quot;, name.Data()));</span>
<span class="lineNum">      50 </span><span class="lineNoCov">          0 :     AliCDBPath path(name.Data(),&quot;Calib&quot;,&quot;RecoParam&quot;);</span>
<span class="lineNum">      51 </span><span class="lineNoCov">          0 :     AliCDBEntry *entry=AliCDBManager::Instance()-&gt;Get(path.GetPath());</span>
<span class="lineNum">      52 </span><span class="lineNoCov">          0 :     if(!entry) {</span>
<span class="lineNum">      53 </span><span class="lineNoCov">          0 :       fRecoParam = NULL ; </span>
<span class="lineNum">      54 </span><span class="lineNoCov">          0 :       AliDebug(AliQAv1::GetQADebugLevel(), Form(&quot;Couldn't find RecoParam entry in OCDB for detector %s&quot;,name.Data()));</span>
<span class="lineNum">      55 </span>            :     }
<span class="lineNum">      56 </span>            :     else {
<span class="lineNum">      57 </span><span class="lineNoCov">          0 :       TObject * recoParamObj = entry-&gt;GetObject() ; </span>
<span class="lineNum">      58 </span><span class="lineNoCov">          0 :       if ( strcmp(recoParamObj-&gt;ClassName(), &quot;TObjArray&quot;) == 0 ) {</span>
<span class="lineNum">      59 </span>            :           // The detector has only one set of reco parameters
<span class="lineNum">      60 </span><span class="lineNoCov">          0 :         AliDebug(AliQAv1::GetQADebugLevel(), Form(&quot;Array of reconstruction parameters found for detector %s&quot;,name.Data()));</span>
<span class="lineNum">      61 </span><span class="lineNoCov">          0 :         TObjArray *recoParamArray = static_cast&lt;TObjArray*&gt;(recoParamObj) ;</span>
<span class="lineNum">      62 </span><span class="lineNoCov">          0 :         for (Int_t iRP=0; iRP&lt;recoParamArray-&gt;GetEntriesFast(); iRP++) {</span>
<span class="lineNum">      63 </span><span class="lineNoCov">          0 :           fRecoParam = static_cast&lt;AliDetectorRecoParam*&gt;(recoParamArray-&gt;At(iRP)) ;</span>
<span class="lineNum">      64 </span><span class="lineNoCov">          0 :           if (!fRecoParam) </span>
<span class="lineNum">      65 </span><span class="lineNoCov">          0 :             break ; </span>
<span class="lineNum">      66 </span><span class="lineNoCov">          0 :           else if (fRecoParam-&gt;IsDefault()) </span>
<span class="lineNum">      67 </span><span class="lineNoCov">          0 :             break ; </span>
<span class="lineNum">      68 </span>            :         }
<span class="lineNum">      69 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">      70 </span><span class="lineNoCov">          0 :       else if (recoParamObj-&gt;InheritsFrom(&quot;AliDetectorRecoParam&quot;)) {</span>
<span class="lineNum">      71 </span>            :           // The detector has only one set of reco parameters
<span class="lineNum">      72 </span>            :           // Registering it in AliRecoParam
<span class="lineNum">      73 </span><span class="lineNoCov">          0 :         AliDebug(AliQAv1::GetQADebugLevel(), Form(&quot;Single set of reconstruction parameters found for detector %s&quot;,name.Data()));</span>
<span class="lineNum">      74 </span><span class="lineNoCov">          0 :         fRecoParam = static_cast&lt;AliDetectorRecoParam*&gt;(recoParamObj) ;</span>
<span class="lineNum">      75 </span><span class="lineNoCov">          0 :         static_cast&lt;AliDetectorRecoParam*&gt;(recoParamObj)-&gt;SetAsDefault();</span>
<span class="lineNum">      76 </span><span class="lineNoCov">          0 :       } else { </span>
<span class="lineNum">      77 </span><span class="lineNoCov">          0 :         AliError(Form(&quot;No valid RecoParam object found in the OCDB for detector %s&quot;,name.Data()));</span>
<span class="lineNum">      78 </span>            :       }
<span class="lineNum">      79 </span>            :     }
<span class="lineNum">      80 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">      81 </span><span class="lineNoCov">          0 : }</span>
<a name="82"><span class="lineNum">      82 </span>            : </a>
<span class="lineNum">      83 </span>            : //____________________________________________________________________________ 
<span class="lineNum">      84 </span>            : void AliGlobalQADataMaker::InitRecPoints() {
<span class="lineNum">      85 </span>            :   //------------------------------------------------------
<span class="lineNum">      86 </span>            :   // This function books the histograms of *track*residuals*
<span class="lineNum">      87 </span>            :   // as a part of global QA
<span class="lineNum">      88 </span>            :   //------------------------------------------------------
<span class="lineNum">      89 </span>            :   static Bool_t first = kTRUE ; 
<span class="lineNum">      90 </span><span class="lineNoCov">          0 :   if ( ! first ) return; </span>
<span class="lineNum">      91 </span><span class="lineNoCov">          0 :   const Char_t *name[]={</span>
<span class="lineNum">      92 </span>            :     &quot;hGlobalSPD1ResidualsY&quot;,&quot;SPD1ResidualsZ&quot;,
<span class="lineNum">      93 </span>            :     &quot;hGlobalSPD2ResidualsY&quot;,&quot;SPD2ResidualsZ&quot;,
<span class="lineNum">      94 </span>            :     &quot;hGlobalSDD1ResidualsY&quot;,&quot;SDD1ResidualsZ&quot;,
<span class="lineNum">      95 </span>            :     &quot;hGlobalSDD2ResidualsY&quot;,&quot;SDD2ResidualsZ&quot;,
<span class="lineNum">      96 </span>            :     &quot;hGlobalSSD1ResidualsY&quot;,&quot;SSD1ResidualsZ&quot;,
<span class="lineNum">      97 </span>            :     &quot;hGlobalSSD2ResidualsY&quot;,&quot;SSD2ResidualsZ&quot;,
<span class="lineNum">      98 </span>            :     
<span class="lineNum">      99 </span>            :     &quot;hGlobalTPC1ResidualsY&quot;,&quot;TPC1ResidualsZ&quot;,
<span class="lineNum">     100 </span>            :     &quot;hGlobalTPC2ResidualsY&quot;,&quot;TPC2ResidualsZ&quot;,
<span class="lineNum">     101 </span>            :     
<span class="lineNum">     102 </span>            :     &quot;hGlobalTRD1ResidualsY&quot;,&quot;TRD1ResidualsZ&quot;,
<span class="lineNum">     103 </span>            :     &quot;hGlobalTRD2ResidualsY&quot;,&quot;TRD2ResidualsZ&quot;,
<span class="lineNum">     104 </span>            :     &quot;hGlobalTRD3ResidualsY&quot;,&quot;TRD3ResidualsZ&quot;,
<span class="lineNum">     105 </span>            :     &quot;hGlobalTRD4ResidualsY&quot;,&quot;TRD4ResidualsZ&quot;,
<span class="lineNum">     106 </span>            :     &quot;hGlobalTRD5ResidualsY&quot;,&quot;TRD5ResidualsZ&quot;,
<span class="lineNum">     107 </span>            :     &quot;hGlobalTRD6ResidualsY&quot;,&quot;TRD6ResidualsZ&quot;,
<span class="lineNum">     108 </span>            :     
<span class="lineNum">     109 </span>            :     &quot;hGlobalTOFResidualsY&quot;,&quot;TOFResidualsZ&quot;,
<span class="lineNum">     110 </span>            :     
<span class="lineNum">     111 </span>            :     &quot;hGlobalPHOS1ResidualsY&quot;,&quot;PHOS1ResidualsZ&quot;,
<span class="lineNum">     112 </span>            :     &quot;hGlobalPHOS2ResidualsY&quot;,&quot;PHOS2ResidualsZ&quot;,
<span class="lineNum">     113 </span>            :     
<span class="lineNum">     114 </span>            :     &quot;hGlobalHMPIDResidualsY&quot;,&quot;HMPIDResidualsZ&quot;,
<span class="lineNum">     115 </span>            :     
<span class="lineNum">     116 </span>            :     &quot;hGlobalMUONResidualsY&quot;,&quot;MUONResidualsZ&quot;,
<span class="lineNum">     117 </span>            :     
<span class="lineNum">     118 </span>            :     &quot;hGlobalEMCALResidualsY&quot;,&quot;EMCALResidualsZ&quot;
<span class="lineNum">     119 </span>            :   };
<span class="lineNum">     120 </span><span class="lineNoCov">          0 :   const Char_t *title[]={</span>
<span class="lineNum">     121 </span>            :     &quot;SPD1 residuals Y&quot;,&quot;SPD1 residuals Z&quot;,
<span class="lineNum">     122 </span>            :     &quot;SPD2 residuals Y&quot;,&quot;SPD2 residuals Z&quot;,
<span class="lineNum">     123 </span>            :     &quot;SDD1 residuals Y&quot;,&quot;SDD1 residuals Z&quot;,
<span class="lineNum">     124 </span>            :     &quot;SDD2 residuals Y&quot;,&quot;SDD2 residuals Z&quot;,
<span class="lineNum">     125 </span>            :     &quot;SSD1 residuals Y&quot;,&quot;SSD1 residuals Z&quot;,
<span class="lineNum">     126 </span>            :     &quot;SSD2 residuals Y&quot;,&quot;SSD2 residuals Z&quot;,
<span class="lineNum">     127 </span>            :     
<span class="lineNum">     128 </span>            :     &quot;TPC1 residuals Y&quot;,&quot;TPC1 residuals Z&quot;,
<span class="lineNum">     129 </span>            :     &quot;TPC2 residuals Y&quot;,&quot;TPC2 residuals Z&quot;,
<span class="lineNum">     130 </span>            :     
<span class="lineNum">     131 </span>            :     &quot;TRD1 residuals Y&quot;,&quot;TRD1 residuals Z&quot;,
<span class="lineNum">     132 </span>            :     &quot;TRD2 residuals Y&quot;,&quot;TRD2 residuals Z&quot;,
<span class="lineNum">     133 </span>            :     &quot;TRD3 residuals Y&quot;,&quot;TRD3 residuals Z&quot;,
<span class="lineNum">     134 </span>            :     &quot;TRD4 residuals Y&quot;,&quot;TRD4 residuals Z&quot;,
<span class="lineNum">     135 </span>            :     &quot;TRD5 residuals Y&quot;,&quot;TRD5 residuals Z&quot;,
<span class="lineNum">     136 </span>            :     &quot;TRD6 residuals Y&quot;,&quot;TRD6 residuals Z&quot;,
<span class="lineNum">     137 </span>            :     
<span class="lineNum">     138 </span>            :     &quot;TOF residuals Y&quot;,&quot;TOF residuals Z&quot;,
<span class="lineNum">     139 </span>            :     
<span class="lineNum">     140 </span>            :     &quot;PHOS1 residuals Y&quot;,&quot;PHOS1 residuals Z&quot;,
<span class="lineNum">     141 </span>            :     &quot;PHOS2 residuals Y&quot;,&quot;PHOS2 residuals Z&quot;,
<span class="lineNum">     142 </span>            :     
<span class="lineNum">     143 </span>            :     &quot;HMPID residuals Y&quot;,&quot;HMPID residuals Z&quot;,
<span class="lineNum">     144 </span>            :     
<span class="lineNum">     145 </span>            :     &quot;MUON residuals Y&quot;,&quot;MUON residuals Z&quot;,
<span class="lineNum">     146 </span>            :     
<span class="lineNum">     147 </span>            :     &quot;EMCAL residuals Y&quot;,&quot;EMCAL residuals Z&quot;
<span class="lineNum">     148 </span>            :   };
<span class="lineNum">     149 </span>            :   
<span class="lineNum">     150 </span><span class="lineNoCov">          0 :   for (Int_t m=1; m&lt;AliGeomManager::kLastLayer; m++) {</span>
<span class="lineNum">     151 </span><span class="lineNoCov">          0 :     Int_t i=2*m-2;</span>
<span class="lineNum">     152 </span><span class="lineNoCov">          0 :     TH1F *h=new TH1F(name[i],title[i],100,-5.,5.);</span>
<span class="lineNum">     153 </span><span class="lineNoCov">          0 :     Add2RecPointsList(h,i);    </span>
<span class="lineNum">     154 </span><span class="lineNoCov">          0 :     h=new TH1F(name[i+1],title[i+1],100,-5.,5.);</span>
<span class="lineNum">     155 </span><span class="lineNoCov">          0 :     Add2RecPointsList(h,i+1);    </span>
<span class="lineNum">     156 </span>            :   }
<span class="lineNum">     157 </span>            : 
<span class="lineNum">     158 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     159 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD1AbsoluteResidualsYNegZ&quot;,</span>
<span class="lineNum">     160 </span>            :            &quot;SSD1 Absolute Residuals Y Neg Z&quot;,100,-2.,2.),40);
<span class="lineNum">     161 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     162 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD1AbsoluteResidualsZNegZ&quot;,</span>
<span class="lineNum">     163 </span>            :            &quot;SSD1 Absolute Residuals Z Neg Z&quot;,100,-2.,2.),41);
<span class="lineNum">     164 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     165 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD1AbsoluteResidualsYPosZ&quot;,</span>
<span class="lineNum">     166 </span>            :            &quot;SSD1 Absolute Residuals Y Pos Z&quot;,100,-2.,2.),42);
<span class="lineNum">     167 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     168 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD1AbsoluteResidualsZPosZ&quot;,</span>
<span class="lineNum">     169 </span>            :            &quot;SSD1 Absolute Residuals Z Pos Z&quot;,100,-2.,2.),43);
<span class="lineNum">     170 </span>            : 
<span class="lineNum">     171 </span>            : 
<span class="lineNum">     172 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     173 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD2AbsoluteResidualsYNegZ&quot;,</span>
<span class="lineNum">     174 </span>            :            &quot;SSD2 Absolute Residuals Y Neg Z&quot;,100,-3.,3.),44);
<span class="lineNum">     175 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     176 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD2AbsoluteResidualsZNegZ&quot;,</span>
<span class="lineNum">     177 </span>            :            &quot;SSD2 Absolute Residuals Z Neg Z&quot;,100,-3.,3.),45);
<span class="lineNum">     178 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     179 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD2AbsoluteResidualsYPosZ&quot;,</span>
<span class="lineNum">     180 </span>            :            &quot;SSD2 Absolute Residuals Y Pos Z&quot;,100,-3.,3.),46);
<span class="lineNum">     181 </span><span class="lineNoCov">          0 :   Add2RecPointsList(</span>
<span class="lineNum">     182 </span><span class="lineNoCov">          0 :   new TH1F(&quot;hGlobalSSD2AbsoluteResidualsZPosZ&quot;,</span>
<span class="lineNum">     183 </span>            :            &quot;SSD2Absolute Residuals Z Pos Z&quot;,100,-3.,3.),47);
<span class="lineNum">     184 </span>            :   
<span class="lineNum">     185 </span><span class="lineNoCov">          0 :   first = kFALSE;</span>
<span class="lineNum">     186 </span>            :   //
<span class="lineNum">     187 </span><span class="lineNoCov">          0 :   ClonePerTrigClass(AliQAv1::kRECPOINTS); // this should be the last line </span>
<span class="lineNum">     188 </span><span class="lineNoCov">          0 : }</span>
<a name="189"><span class="lineNum">     189 </span>            : </a>
<span class="lineNum">     190 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     191 </span>            : void AliGlobalQADataMaker::InitESDs() {
<span class="lineNum">     192 </span>            :   //------------------------------------------------------
<span class="lineNum">     193 </span>            :   // This function books the ESD QA histograms
<span class="lineNum">     194 </span>            :   // as a part of global QA
<span class="lineNum">     195 </span>            :   //------------------------------------------------------
<span class="lineNum">     196 </span>            : 
<span class="lineNum">     197 </span>            :   const Bool_t expert   = kTRUE ; 
<span class="lineNum">     198 </span>            :   const Bool_t image    = kTRUE ;
<span class="lineNum">     199 </span>            : 
<span class="lineNum">     200 </span>            :   {// Event related QA
<span class="lineNum">     201 </span>            :     const Char_t *name[]={
<span class="lineNum">     202 </span>            :       &quot;hGlobalPrimaryVertex&quot;
<span class="lineNum">     203 </span>            :     };
<span class="lineNum">     204 </span>            :     const Char_t *title[]={
<span class="lineNum">     205 </span>            :       &quot;Z-distribution of the primary vertex&quot;
<span class="lineNum">     206 </span>            :     };
<span class="lineNum">     207 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[0],title[0],100,-20.,20.),kEvt0,!expert,image);</span>
<span class="lineNum">     208 </span>            :   }
<span class="lineNum">     209 </span>            :  
<span class="lineNum">     210 </span>            :   {// Cluster related QA
<span class="lineNum">     211 </span>            :     const Char_t *name[]={
<span class="lineNum">     212 </span>            :       &quot;hGlobalFractionAssignedClustersITS&quot;,
<span class="lineNum">     213 </span>            :       &quot;hGlobalFractionAssignedClustersTPC&quot;,
<span class="lineNum">     214 </span>            :       &quot;hGlobalFractionAssignedClustersTRD&quot;,
<span class="lineNum">     215 </span>            :       &quot;hGlobalClustersPerITSModule&quot;
<span class="lineNum">     216 </span>            :     };
<span class="lineNum">     217 </span>            :     const Char_t *title[]={
<span class="lineNum">     218 </span>            :       &quot;Fraction of the assigned clusters in ITS&quot;,
<span class="lineNum">     219 </span>            :       &quot;Fraction of the assigned clusters in TPC&quot;,
<span class="lineNum">     220 </span>            :       &quot;Fraction of the assigned clusters in TRD&quot;,
<span class="lineNum">     221 </span>            :       &quot;Number of clusters per an ITS module&quot;
<span class="lineNum">     222 </span>            :     };
<span class="lineNum">     223 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[0],title[0],100,0.,2.),kClr0, !expert, image);</span>
<span class="lineNum">     224 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[1],title[1],100,0.,2.),kClr1, !expert, image);</span>
<span class="lineNum">     225 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[2],title[2],100,0.,2.),kClr2, !expert, image);</span>
<span class="lineNum">     226 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[3],title[3],2201,-0.5,2200.5),kClr3, !expert, image);</span>
<span class="lineNum">     227 </span>            :   }
<span class="lineNum">     228 </span>            : 
<span class="lineNum">     229 </span>            :   {// Track related QA
<span class="lineNum">     230 </span>            :     const Char_t *name[]={
<span class="lineNum">     231 </span>            :       &quot;hGlobalTrackAzimuthe&quot;,                               // kTrk0
<span class="lineNum">     232 </span>            :       &quot;hGlobalTrackEta&quot;,                                    // kTrk1
<span class="lineNum">     233 </span>            :       &quot;hGlobalTPCTrackpT&quot;,                                  // kTrk2
<span class="lineNum">     234 </span>            :       &quot;hGlobalTPCITSMatchedpT&quot;,                             // kTrk3
<span class="lineNum">     235 </span>            :       &quot;hGlobalTPCTOFMatchedpT&quot;,                             // kTrk4
<span class="lineNum">     236 </span>            :       &quot;hGlobalTPCITSMatchingProbability&quot;,                   // kTrk5
<span class="lineNum">     237 </span>            :       &quot;hGlobalTPCTOFMatchingProbability&quot;,                   // kTrk6
<span class="lineNum">     238 </span>            :       &quot;hGlobalTPCsideAposDCA&quot;,                              // kTrk7
<span class="lineNum">     239 </span>            :       &quot;hGlobalTPCsideAnegDCA&quot;,                              // kTrk8
<span class="lineNum">     240 </span>            :       &quot;hGlobalTPCsideCposDCA&quot;,                              // kTrk9
<span class="lineNum">     241 </span>            :       &quot;hGlobalTPCsideCnegDCA&quot;                               // kTrk10
<span class="lineNum">     242 </span>            :   };
<span class="lineNum">     243 </span>            :     const Char_t *title[]={
<span class="lineNum">     244 </span>            :       &quot;Track azimuthal distribution (rad)&quot;,                   // kTrk0
<span class="lineNum">     245 </span>            :       &quot;Track pseudo-rapidity distribution&quot;,                   // kTrk1
<span class="lineNum">     246 </span>            :       &quot;TPC: track momentum distribution (GeV)&quot;,               // kTrk2
<span class="lineNum">     247 </span>            :       &quot;TPC-ITS matched: track momentum distribution (GeV)&quot;,   // kTrk3
<span class="lineNum">     248 </span>            :       &quot;TPC-TOF matched: track momentum distribution (GeV)&quot;,   // kTrk4
<span class="lineNum">     249 </span>            :       &quot;TPC-ITS track-matching probability&quot;,                   // kTrk5
<span class="lineNum">     250 </span>            :       &quot;TPC-TOF track-matching probability&quot;,                   // kTrk6
<span class="lineNum">     251 </span>            :       &quot;TPC side A: DCA for the positive tracks (mm)&quot;,         // kTrk7
<span class="lineNum">     252 </span>            :       &quot;TPC side A: DCA for the negative tracks (mm)&quot;,         // kTrk8
<span class="lineNum">     253 </span>            :       &quot;TPC side C: DCA for the positive tracks (mm)&quot;,         // kTrk9
<span class="lineNum">     254 </span>            :       &quot;TPC side C: DCA for the negative tracks (mm)&quot;          // kTrk10
<span class="lineNum">     255 </span>            :     };
<span class="lineNum">     256 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[0],title[0],100, 0.,TMath::TwoPi()),kTrk0, !expert, image);</span>
<span class="lineNum">     257 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[1],title[1],100,-2.00,2.00),kTrk1, !expert, image);</span>
<span class="lineNum">     258 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[2],title[2],50,  0.20,5.00),kTrk2, !expert, image);</span>
<span class="lineNum">     259 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[3],title[3],50,  0.20,5.00),kTrk3, !expert, image);</span>
<span class="lineNum">     260 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[4],title[4],50,  0.20,5.00),kTrk4, !expert, image);</span>
<span class="lineNum">     261 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[5],title[5],50,  0.20,5.00),kTrk5, !expert, image);</span>
<span class="lineNum">     262 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[6],title[6],50,  0.20,5.00),kTrk6, !expert, image);</span>
<span class="lineNum">     263 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[7],title[7],50, -25.0,25.0),kTrk7, !expert, image);</span>
<span class="lineNum">     264 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[8],title[8],50, -25.0,25.0),kTrk8, !expert, image);</span>
<span class="lineNum">     265 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[9],title[9],50, -25.0,25.0),kTrk9, !expert, image);</span>
<span class="lineNum">     266 </span><span class="lineNoCov">          0 :   Add2ESDsList(new TH1F(name[10],title[10],50, -25.0,25.0),kTrk10, !expert, image);</span>
<span class="lineNum">     267 </span>            :   }
<span class="lineNum">     268 </span>            : 
<span class="lineNum">     269 </span>            :   {// V0 related QA
<span class="lineNum">     270 </span>            :     const Char_t *name[]={
<span class="lineNum">     271 </span>            :       &quot;hGlobalPromptK0sMass&quot;,
<span class="lineNum">     272 </span>            :       &quot;hGlobalOfflineK0sMass&quot;,
<span class="lineNum">     273 </span>            :       &quot;hGlobalPromptLambda0Lambda0BarMass&quot;,
<span class="lineNum">     274 </span>            :       &quot;hGlobalOfflineLambda0Lambda0BarMass&quot;
<span class="lineNum">     275 </span>            :     };
<span class="lineNum">     276 </span>            :     const Char_t *title[]={
<span class="lineNum">     277 </span>            :       &quot;On-the-fly K0s mass (GeV)&quot;,
<span class="lineNum">     278 </span>            :       &quot;Offline K0s mass (GeV)&quot;,
<span class="lineNum">     279 </span>            :       &quot;On-the-fly Lambda0 + Lambda0Bar mass (GeV)&quot;,
<span class="lineNum">     280 </span>            :       &quot;Offline Lambda0 + Lambda0Bar mass (GeV)&quot;
<span class="lineNum">     281 </span>            :     };
<span class="lineNum">     282 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[0],title[0],50,  0.4477,0.5477),kK0on, !expert, image);</span>
<span class="lineNum">     283 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[1],title[1],50,  0.4477,0.5477),kK0off, !expert, image);</span>
<span class="lineNum">     284 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[2],title[2],50,  1.0657,1.1657),kL0on, !expert, image);</span>
<span class="lineNum">     285 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[3],title[3],50,  1.0657,1.1657),kL0off, !expert, image);</span>
<span class="lineNum">     286 </span>            :   }
<span class="lineNum">     287 </span>            : 
<span class="lineNum">     288 </span>            :   {// PID related QA
<span class="lineNum">     289 </span>            :   const Char_t *name[]={
<span class="lineNum">     290 </span>            :     &quot;hGlobalITSdEdx&quot;,
<span class="lineNum">     291 </span>            :     &quot;hGlobalTPCdEdx&quot;,
<span class="lineNum">     292 </span>            :     &quot;hGlobalTOFTrackingvsMeasured&quot;,
<span class="lineNum">     293 </span>            :     &quot;hGlobalTPCdEdxvsMomentum&quot;
<span class="lineNum">     294 </span>            :    };
<span class="lineNum">     295 </span>            :     const Char_t *title[]={
<span class="lineNum">     296 </span>            :       &quot;ITS: dEdx (ADC) for particles with momentum 0.4 - 0.5 (GeV)&quot;,
<span class="lineNum">     297 </span>            :       &quot;TPC: dEdx (ADC) for particles with momentum 0.4 - 0.5 (GeV)&quot;,
<span class="lineNum">     298 </span>            :       &quot;TOF: tracking - measured (ps)&quot;,
<span class="lineNum">     299 </span>            :       &quot;TPC: dEdx (A.U.) vs momentum (GeV)&quot;
<span class="lineNum">     300 </span>            :      };
<span class="lineNum">     301 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[0],title[0],50,0.00,200.),kPid0, !expert, image);</span>
<span class="lineNum">     302 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[1],title[1],50,0.00,100.),kPid1, !expert, image);</span>
<span class="lineNum">     303 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH1F(name[2],title[2],50,-3500.,3500.),kPid2, !expert, image);</span>
<span class="lineNum">     304 </span><span class="lineNoCov">          0 :     Add2ESDsList(new TH2F(name[3],title[3],1500,0.05,15.,700,0.,700.),kPid3,!expert,image);</span>
<span class="lineNum">     305 </span>            :    }
<span class="lineNum">     306 </span>            :   {// Multiplicity related QA
<span class="lineNum">     307 </span>            :     const Char_t *name[]={
<span class="lineNum">     308 </span>            :       &quot;hGlobalV0AvsITS&quot;,
<span class="lineNum">     309 </span>            :       &quot;hGlobalV0CvsITS&quot;
<span class="lineNum">     310 </span>            :     };
<span class="lineNum">     311 </span>            :     const Char_t *title[]={
<span class="lineNum">     312 </span>            :       &quot;Multiplicity: V0A vs ITS&quot;,
<span class="lineNum">     313 </span>            :       &quot;Multiplicity: V0C vs ITS&quot;
<span class="lineNum">     314 </span>            :     };
<span class="lineNum">     315 </span><span class="lineNoCov">          0 :     TH2F *h0=new TH2F(name[0],title[0],41,-0.5,40.5, 33,-0.5,32.5);</span>
<span class="lineNum">     316 </span><span class="lineNoCov">          0 :     Add2ESDsList(h0,kMlt0, !expert, image);</span>
<span class="lineNum">     317 </span><span class="lineNoCov">          0 :     TH2F *h1=new TH2F(name[1],title[1],41,-0.5,40.5, 33,-0.5,32.5);</span>
<span class="lineNum">     318 </span><span class="lineNoCov">          0 :     Add2ESDsList(h1,kMlt1, !expert, image);</span>
<span class="lineNum">     319 </span>            :   }
<span class="lineNum">     320 </span>            :   //
<span class="lineNum">     321 </span><span class="lineNoCov">          0 :   ClonePerTrigClass(AliQAv1::kESDS); // this should be the last line</span>
<span class="lineNum">     322 </span><span class="lineNoCov">          0 : }</span>
<a name="323"><span class="lineNum">     323 </span>            : </a>
<span class="lineNum">     324 </span>            : //____________________________________________________________________________
<span class="lineNum">     325 </span>            : void AliGlobalQADataMaker::MakeRaws(AliRawReader* rawReader)
<span class="lineNum">     326 </span>            : {
<span class="lineNum">     327 </span>            :   //Fill prepared histograms with Raw digit properties
<span class="lineNum">     328 </span><span class="lineNoCov">          0 :   rawReader-&gt;Reset() ;</span>
<span class="lineNum">     329 </span><span class="lineNoCov">          0 :   IncEvCountCycleRaws();</span>
<span class="lineNum">     330 </span><span class="lineNoCov">          0 :   IncEvCountTotalRaws();</span>
<span class="lineNum">     331 </span>            :   //
<span class="lineNum">     332 </span><span class="lineNoCov">          0 : }</span>
<a name="333"><span class="lineNum">     333 </span>            : </a>
<span class="lineNum">     334 </span>            : //____________________________________________________________________________ 
<span class="lineNum">     335 </span>            : void AliGlobalQADataMaker::MakeESDs(AliESDEvent * event) {
<span class="lineNum">     336 </span>            :   //-----------------------------------------------------------
<span class="lineNum">     337 </span>            :   // This function fills the ESD QA histograms
<span class="lineNum">     338 </span>            :   // as a part of global QA
<span class="lineNum">     339 </span>            :   //-----------------------------------------------------------
<span class="lineNum">     340 </span>            : 
<span class="lineNum">     341 </span>            :   const AliESDEvent *esd=event;
<span class="lineNum">     342 </span>            : 
<span class="lineNum">     343 </span>            :   // Event related QA
<span class="lineNum">     344 </span><span class="lineNoCov">          0 :   const AliESDVertex *vtx=esd-&gt;GetPrimaryVertex();</span>
<span class="lineNum">     345 </span><span class="lineNoCov">          0 :   if (!vtx-&gt;GetStatus()) return;</span>
<span class="lineNum">     346 </span>            : 
<span class="lineNum">     347 </span><span class="lineNoCov">          0 :   Double_t xv=vtx-&gt;GetX();</span>
<span class="lineNum">     348 </span><span class="lineNoCov">          0 :   Double_t yv=vtx-&gt;GetY();</span>
<span class="lineNum">     349 </span><span class="lineNoCov">          0 :   Double_t zv=vtx-&gt;GetZ();</span>
<span class="lineNum">     350 </span><span class="lineNoCov">          0 :   FillESDsData(kEvt0,zv);</span>
<span class="lineNum">     351 </span>            : 
<span class="lineNum">     352 </span>            : 
<span class="lineNum">     353 </span><span class="lineNoCov">          0 :   Int_t ntrk=esd-&gt;GetNumberOfTracks() ; </span>
<span class="lineNum">     354 </span><span class="lineNoCov">          0 :   for (Int_t i=0; i&lt;ntrk; i++) {</span>
<span class="lineNum">     355 </span><span class="lineNoCov">          0 :     const AliESDtrack *track=esd-&gt;GetTrack(i);</span>
<span class="lineNum">     356 </span>            : 
<span class="lineNum">     357 </span>            :     // Cluster related QA
<span class="lineNum">     358 </span><span class="lineNoCov">          0 :     if (track-&gt;IsOn(AliESDtrack::kITSrefit)) {</span>
<span class="lineNum">     359 </span><span class="lineNoCov">          0 :       Int_t n=track-&gt;GetITSclusters(0);</span>
<span class="lineNum">     360 </span><span class="lineNoCov">          0 :       FillESDsData(kClr0,Float_t(n)/6.); //6 is the number of ITS layers</span>
<span class="lineNum">     361 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     362 </span>            : 
<span class="lineNum">     363 </span><span class="lineNoCov">          0 :     for (Int_t j=0; j&lt;6; ++j) {</span>
<span class="lineNum">     364 </span><span class="lineNoCov">          0 :       Int_t idet=0, sts=0;</span>
<span class="lineNum">     365 </span><span class="lineNoCov">          0 :       Float_t xloc,zloc;</span>
<span class="lineNum">     366 </span><span class="lineNoCov">          0 :       if (!track-&gt;GetITSModuleIndexInfo(j,idet,sts,xloc,zloc)) continue;</span>
<span class="lineNum">     367 </span><span class="lineNoCov">          0 :       if (j&gt;=2) idet+=240;</span>
<span class="lineNum">     368 </span><span class="lineNoCov">          0 :       if (j&gt;=4) idet+=260;</span>
<span class="lineNum">     369 </span><span class="lineNoCov">          0 :       if ((sts==1)||(sts==2)||(sts==4)) FillESDsData(kClr3,idet);  </span>
<span class="lineNum">     370 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     371 </span>            : 
<span class="lineNum">     372 </span><span class="lineNoCov">          0 :     if (track-&gt;IsOn(AliESDtrack::kTPCrefit)) {</span>
<span class="lineNum">     373 </span><span class="lineNoCov">          0 :       Int_t n =track-&gt;GetTPCNcls();</span>
<span class="lineNum">     374 </span><span class="lineNoCov">          0 :       Int_t nf=track-&gt;GetTPCNclsF();      // number of crossed TPC pad rows</span>
<span class="lineNum">     375 </span><span class="lineNoCov">          0 :       if (nf&gt;0) {</span>
<span class="lineNum">     376 </span><span class="lineNoCov">          0 :         Double_t val = n*1.0/nf; </span>
<span class="lineNum">     377 </span><span class="lineNoCov">          0 :         FillESDsData(kClr1,val); </span>
<span class="lineNum">     378 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     379 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     380 </span>            : 
<span class="lineNum">     381 </span><span class="lineNoCov">          0 :     if (track-&gt;IsOn(AliESDtrack::kTRDrefit)) {</span>
<span class="lineNum">     382 </span><span class="lineNoCov">          0 :       Int_t n=track-&gt;GetTRDclusters(0);</span>
<span class="lineNum">     383 </span><span class="lineNoCov">          0 :       FillESDsData(kClr2,Float_t(n)/(6*24));//(6*24) is the number of TRD time bins</span>
<span class="lineNum">     384 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     385 </span>            : 
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :     Double_t p=track-&gt;GetP();</span>
<span class="lineNum">     387 </span>            : 
<span class="lineNum">     388 </span>            :     // Track related QA
<span class="lineNum">     389 </span><span class="lineNoCov">          0 :     if (track-&gt;IsOn(AliESDtrack::kTPCrefit)) {</span>
<span class="lineNum">     390 </span><span class="lineNoCov">          0 :       Float_t dz[2]; </span>
<span class="lineNum">     391 </span><span class="lineNoCov">          0 :       track-&gt;GetDZ(xv,yv,zv,esd-&gt;GetMagneticField(),dz); </span>
<span class="lineNum">     392 </span><span class="lineNoCov">          0 :       if ((TMath::Abs(dz[0])&lt;3.) &amp;&amp; (TMath::Abs(dz[1])&lt;3.)) { // beam pipe</span>
<span class="lineNum">     393 </span><span class="lineNoCov">          0 :         Double_t phi=track-&gt;Phi();</span>
<span class="lineNum">     394 </span><span class="lineNoCov">          0 :         FillESDsData(kTrk0,phi);</span>
<span class="lineNum">     395 </span><span class="lineNoCov">          0 :         Double_t y=track-&gt;Eta();</span>
<span class="lineNum">     396 </span><span class="lineNoCov">          0 :         FillESDsData(kTrk1,y);</span>
<span class="lineNum">     397 </span>            : 
<span class="lineNum">     398 </span><span class="lineNoCov">          0 :         if (TMath::Abs(y)&lt;0.9) {</span>
<span class="lineNum">     399 </span><span class="lineNoCov">          0 :           FillESDsData(kTrk2,p);</span>
<span class="lineNum">     400 </span><span class="lineNoCov">          0 :           if (track-&gt;IsOn(AliESDtrack::kITSrefit)) FillESDsData(kTrk3,p);</span>
<span class="lineNum">     401 </span>            :           //if (track-&gt;IsOn(AliESDtrack::kTOFout)) FillESDsData(kTrk4,p);
<span class="lineNum">     402 </span><span class="lineNoCov">          0 :           if (track-&gt;GetTOFsignal()&gt;0) FillESDsData(kTrk4,p);</span>
<span class="lineNum">     403 </span>            :         }
<span class="lineNum">     404 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     405 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     406 </span><span class="lineNoCov">          0 :     const AliExternalTrackParam *tpcTrack=track-&gt;GetTPCInnerParam();</span>
<span class="lineNum">     407 </span><span class="lineNoCov">          0 :     const AliExternalTrackParam *innTrack=track-&gt;GetInnerParam();</span>
<span class="lineNum">     408 </span><span class="lineNoCov">          0 :     if (tpcTrack)</span>
<span class="lineNum">     409 </span><span class="lineNoCov">          0 :     if (innTrack) {</span>
<span class="lineNum">     410 </span><span class="lineNoCov">          0 :        Float_t dz[2];</span>
<span class="lineNum">     411 </span><span class="lineNoCov">          0 :        tpcTrack-&gt;GetDZ(xv,yv,zv,esd-&gt;GetMagneticField(),dz);</span>
<span class="lineNum">     412 </span><span class="lineNoCov">          0 :        dz[0]*=10.; // in mm</span>
<span class="lineNum">     413 </span><span class="lineNoCov">          0 :        if (innTrack-&gt;GetZ()  &gt; 0)</span>
<span class="lineNum">     414 </span><span class="lineNoCov">          0 :        if (innTrack-&gt;GetTgl()&gt; 0) { // TPC side A</span>
<span class="lineNum">     415 </span><span class="lineNoCov">          0 :          if (tpcTrack-&gt;GetSign() &gt; 0) FillESDsData(kTrk7,dz[0]);</span>
<span class="lineNum">     416 </span><span class="lineNoCov">          0 :          else                         FillESDsData(kTrk8,dz[0]);</span>
<span class="lineNum">     417 </span>            :        }
<span class="lineNum">     418 </span><span class="lineNoCov">          0 :        if (innTrack-&gt;GetZ()  &lt; 0)</span>
<span class="lineNum">     419 </span><span class="lineNoCov">          0 :        if (innTrack-&gt;GetTgl()&lt; 0) { // TPC side C</span>
<span class="lineNum">     420 </span><span class="lineNoCov">          0 :          if (tpcTrack-&gt;GetSign() &gt; 0) FillESDsData(kTrk9,dz[0]);</span>
<span class="lineNum">     421 </span><span class="lineNoCov">          0 :          else                         FillESDsData(kTrk10,dz[0]);</span>
<span class="lineNum">     422 </span>            :        }
<span class="lineNum">     423 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     424 </span>            : 
<span class="lineNum">     425 </span>            :     // PID related QA
<span class="lineNum">     426 </span><span class="lineNoCov">          0 :     if ((p&gt;0.4) &amp;&amp; (p&lt;0.5)) {</span>
<span class="lineNum">     427 </span><span class="lineNoCov">          0 :       if (track-&gt;IsOn(AliESDtrack::kITSpid)) {</span>
<span class="lineNum">     428 </span><span class="lineNoCov">          0 :         Double_t dedx=track-&gt;GetITSsignal();</span>
<span class="lineNum">     429 </span><span class="lineNoCov">          0 :         FillESDsData(kPid0,dedx);</span>
<span class="lineNum">     430 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     431 </span><span class="lineNoCov">          0 :       if (track-&gt;IsOn(AliESDtrack::kTPCpid)) {</span>
<span class="lineNum">     432 </span><span class="lineNoCov">          0 :         Double_t dedx=track-&gt;GetTPCsignal();</span>
<span class="lineNum">     433 </span><span class="lineNoCov">          0 :         FillESDsData(kPid1,dedx);</span>
<span class="lineNum">     434 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     435 </span>            :     }
<span class="lineNum">     436 </span><span class="lineNoCov">          0 :     if (p&gt;1.0) {</span>
<span class="lineNum">     437 </span><span class="lineNoCov">          0 :       if (track-&gt;IsOn(AliESDtrack::kITSrefit))</span>
<span class="lineNum">     438 </span><span class="lineNoCov">          0 :       if (track-&gt;IsOn(AliESDtrack::kTPCrefit))</span>
<span class="lineNum">     439 </span><span class="lineNoCov">          0 :       if (track-&gt;IsOn(AliESDtrack::kTOFout)) {</span>
<span class="lineNum">     440 </span><span class="lineNoCov">          0 :          Float_t dz[2];</span>
<span class="lineNum">     441 </span><span class="lineNoCov">          0 :          track-&gt;GetDZ(xv,yv,zv,esd-&gt;GetMagneticField(),dz);</span>
<span class="lineNum">     442 </span><span class="lineNoCov">          0 :          if (dz[1]&lt;3.) {</span>
<span class="lineNum">     443 </span><span class="lineNoCov">          0 :            Double_t times[AliPID::kSPECIESC];</span>
<span class="lineNum">     444 </span><span class="lineNoCov">          0 :            track-&gt;GetIntegratedTimes(times, AliPID::kSPECIESC);</span>
<span class="lineNum">     445 </span><span class="lineNoCov">          0 :            Double_t tof=track-&gt;GetTOFsignal()/*-847055 -1771207*/;</span>
<span class="lineNum">     446 </span><span class="lineNoCov">          0 :            FillESDsData(kPid2,times[AliPID::kPion]-tof);</span>
<span class="lineNum">     447 </span><span class="lineNoCov">          0 :          }</span>
<span class="lineNum">     448 </span><span class="lineNoCov">          0 :       }</span>
<span class="lineNum">     449 </span>            :     }
<span class="lineNum">     450 </span><span class="lineNoCov">          0 :     const AliExternalTrackParam *par=track-&gt;GetInnerParam();</span>
<span class="lineNum">     451 </span><span class="lineNoCov">          0 :     if (par) {</span>
<span class="lineNum">     452 </span><span class="lineNoCov">          0 :       Double_t pp=par-&gt;GetP();</span>
<span class="lineNum">     453 </span><span class="lineNoCov">          0 :       Double_t dedx=track-&gt;GetTPCsignal();</span>
<span class="lineNum">     454 </span><span class="lineNoCov">          0 :       FillESDsData(kPid3,pp,dedx);</span>
<span class="lineNum">     455 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     456 </span>            :  
<span class="lineNum">     457 </span>            :   }
<span class="lineNum">     458 </span>            : 
<span class="lineNum">     459 </span>            :   // Multiplicity related QA
<span class="lineNum">     460 </span><span class="lineNoCov">          0 :   AliESDVZERO     *mltV0 =esd-&gt;GetVZEROData();</span>
<span class="lineNum">     461 </span><span class="lineNoCov">          0 :   const AliMultiplicity *mltITS=esd-&gt;GetMultiplicity();</span>
<span class="lineNum">     462 </span><span class="lineNoCov">          0 :   if (mltV0)</span>
<span class="lineNum">     463 </span><span class="lineNoCov">          0 :     if (mltITS) {</span>
<span class="lineNum">     464 </span><span class="lineNoCov">          0 :        Short_t nv0a=mltV0-&gt;GetNbPMV0A();</span>
<span class="lineNum">     465 </span><span class="lineNoCov">          0 :        Short_t nv0c=mltV0-&gt;GetNbPMV0C();</span>
<span class="lineNum">     466 </span><span class="lineNoCov">          0 :        Int_t   nits=mltITS-&gt;GetNumberOfTracklets();</span>
<span class="lineNum">     467 </span><span class="lineNoCov">          0 :        FillESDsData(kMlt0,nits,nv0a);</span>
<span class="lineNum">     468 </span><span class="lineNoCov">          0 :        FillESDsData(kMlt1,nits,nv0c);</span>
<span class="lineNum">     469 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     470 </span>            : 
<span class="lineNum">     471 </span>            :   // RS
<span class="lineNum">     472 </span><span class="lineNoCov">          0 :   for (int itr = -1; itr&lt;GetNEventTrigClasses(); itr++) {</span>
<span class="lineNum">     473 </span><span class="lineNoCov">          0 :     TH1 *tpc = GetMatchingESDsHisto(kTrk2,itr);</span>
<span class="lineNum">     474 </span><span class="lineNoCov">          0 :     TH1 *its = GetMatchingESDsHisto(kTrk3,itr);</span>
<span class="lineNum">     475 </span><span class="lineNoCov">          0 :     TH1 *tof = GetMatchingESDsHisto(kTrk4,itr);</span>
<span class="lineNum">     476 </span><span class="lineNoCov">          0 :     TH1* h5 =  GetMatchingESDsHisto(kTrk5,itr);</span>
<span class="lineNum">     477 </span><span class="lineNoCov">          0 :     TH1* h6 =  GetMatchingESDsHisto(kTrk6,itr);</span>
<span class="lineNum">     478 </span><span class="lineNoCov">          0 :     if (h5 &amp;&amp; h6 &amp;&amp; tpc &amp;&amp; its &amp;&amp; tof) {</span>
<span class="lineNum">     479 </span><span class="lineNoCov">          0 :       tpc-&gt;Sumw2();</span>
<span class="lineNum">     480 </span><span class="lineNoCov">          0 :       its-&gt;Sumw2();</span>
<span class="lineNum">     481 </span><span class="lineNoCov">          0 :       tof-&gt;Sumw2();</span>
<span class="lineNum">     482 </span><span class="lineNoCov">          0 :       h5-&gt;Divide(its,tpc,1,1.,&quot;b&quot;);</span>
<span class="lineNum">     483 </span><span class="lineNoCov">          0 :       h6-&gt;Divide(tof,tpc,1,1.,&quot;b&quot;);</span>
<span class="lineNum">     484 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     485 </span>            :   }
<span class="lineNum">     486 </span>            : 
<span class="lineNum">     487 </span>            :   // V0 related QA
<span class="lineNum">     488 </span><span class="lineNoCov">          0 :   Int_t nV0=esd-&gt;GetNumberOfV0s();</span>
<span class="lineNum">     489 </span><span class="lineNoCov">          0 :   for (Int_t i=0; i&lt;nV0; i++) {</span>
<span class="lineNum">     490 </span>            :     Double_t mass;
<span class="lineNum">     491 </span><span class="lineNoCov">          0 :     AliESDv0 v0(*esd-&gt;GetV0(i));</span>
<span class="lineNum">     492 </span>            : 
<span class="lineNum">     493 </span><span class="lineNoCov">          0 :     Int_t nidx=TMath::Abs(v0.GetNindex());</span>
<span class="lineNum">     494 </span><span class="lineNoCov">          0 :     AliESDtrack *ntrack1=esd-&gt;GetTrack(nidx);</span>
<span class="lineNum">     495 </span><span class="lineNoCov">          0 :     if (!ntrack1-&gt;IsOn(AliESDtrack::kTPCrefit)) continue;</span>
<span class="lineNum">     496 </span>            : 
<span class="lineNum">     497 </span><span class="lineNoCov">          0 :     Int_t pidx=TMath::Abs(v0.GetPindex());</span>
<span class="lineNum">     498 </span><span class="lineNoCov">          0 :     AliESDtrack *ptrack1=esd-&gt;GetTrack(pidx);</span>
<span class="lineNum">     499 </span><span class="lineNoCov">          0 :     if (!ptrack1-&gt;IsOn(AliESDtrack::kTPCrefit)) continue;</span>
<span class="lineNum">     500 </span>            : 
<span class="lineNum">     501 </span><span class="lineNoCov">          0 :     v0.ChangeMassHypothesis(kK0Short);</span>
<span class="lineNum">     502 </span><span class="lineNoCov">          0 :     mass=v0.GetEffMass();</span>
<span class="lineNum">     503 </span><span class="lineNoCov">          0 :     if (v0.GetOnFlyStatus())</span>
<span class="lineNum">     504 </span><span class="lineNoCov">          0 :       FillESDsData(kK0on,mass);</span>
<span class="lineNum">     505 </span>            :     else
<span class="lineNum">     506 </span><span class="lineNoCov">          0 :       FillESDsData(kK0off,mass);</span>
<span class="lineNum">     507 </span>            : 
<span class="lineNum">     508 </span><span class="lineNoCov">          0 :     v0.ChangeMassHypothesis(kLambda0);</span>
<span class="lineNum">     509 </span><span class="lineNoCov">          0 :     mass=v0.GetEffMass();</span>
<span class="lineNum">     510 </span><span class="lineNoCov">          0 :     if (v0.GetOnFlyStatus())</span>
<span class="lineNum">     511 </span><span class="lineNoCov">          0 :       FillESDsData(kL0on,mass);</span>
<span class="lineNum">     512 </span>            :     else
<span class="lineNum">     513 </span><span class="lineNoCov">          0 :       FillESDsData(kL0off,mass);</span>
<span class="lineNum">     514 </span>            : 
<span class="lineNum">     515 </span><span class="lineNoCov">          0 :     v0.ChangeMassHypothesis(kLambda0Bar);</span>
<span class="lineNum">     516 </span><span class="lineNoCov">          0 :     mass=v0.GetEffMass();</span>
<span class="lineNum">     517 </span><span class="lineNoCov">          0 :     if (v0.GetOnFlyStatus())</span>
<span class="lineNum">     518 </span><span class="lineNoCov">          0 :       FillESDsData(kL0on,mass);</span>
<span class="lineNum">     519 </span>            :     else
<span class="lineNum">     520 </span><span class="lineNoCov">          0 :       FillESDsData(kL0off,mass);</span>
<span class="lineNum">     521 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     522 </span>            :   //
<span class="lineNum">     523 </span><span class="lineNoCov">          0 :   IncEvCountCycleESDs();</span>
<span class="lineNum">     524 </span><span class="lineNoCov">          0 :   IncEvCountTotalESDs();</span>
<span class="lineNum">     525 </span>            :   //
<span class="lineNum">     526 </span><span class="lineNoCov">          0 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
