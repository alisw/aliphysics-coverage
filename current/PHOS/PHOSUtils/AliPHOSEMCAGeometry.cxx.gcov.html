<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - PHOS/PHOSUtils/AliPHOSEMCAGeometry.cxx</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">PHOS/PHOSUtils</a> - AliPHOSEMCAGeometry.cxx<span style="font-size: 80%;"> (source / <a href="AliPHOSEMCAGeometry.cxx.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">217</td>
            <td class="headerCovTableEntry">217</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">3</td>
            <td class="headerCovTableEntry">3</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /**************************************************************************</a>
<span class="lineNum">       2 </span>            :  * Copyright(c) 1998-1999, ALICE Experiment at CERN, All rights reserved. *
<span class="lineNum">       3 </span>            :  *                                                                        *
<span class="lineNum">       4 </span>            :  * Author: The ALICE Off-line Project.                                    *
<span class="lineNum">       5 </span>            :  * Contributors are mentioned in the code where appropriate.              *
<span class="lineNum">       6 </span>            :  *                                                                        *
<span class="lineNum">       7 </span>            :  * Permission to use, copy, modify and distribute this software and its   *
<span class="lineNum">       8 </span>            :  * documentation strictly for non-commercial purposes is hereby granted   *
<span class="lineNum">       9 </span>            :  * without fee, provided that the above copyright notice appears in all   *
<span class="lineNum">      10 </span>            :  * copies and that both the copyright notice and this permission notice   *
<span class="lineNum">      11 </span>            :  * appear in the supporting documentation. The authors make no claims     *
<span class="lineNum">      12 </span>            :  * about the suitability of this software for any purpose. It is          *
<span class="lineNum">      13 </span>            :  * provided &quot;as is&quot; without express or implied warranty.                  *
<span class="lineNum">      14 </span>            :  **************************************************************************/
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            : /* $Id$ */
<span class="lineNum">      17 </span>            : 
<span class="lineNum">      18 </span>            : //_________________________________________________________________________
<span class="lineNum">      19 </span>            : // Geometry class  for PHOS : EMCA (Electromagnetic Calorimeter)  
<span class="lineNum">      20 </span>            : // Its data members provide geometry parametrization of EMCA
<span class="lineNum">      21 </span>            : // which can be changed in the constructor only.
<span class="lineNum">      22 </span>            : // Author   : Yves Schutz (SUBATECH)
<span class="lineNum">      23 </span>            : // Modified : Yuri Kharlov (IHEP, Protvino)
<span class="lineNum">      24 </span>            : // 13 September 2000
<span class="lineNum">      25 </span>            : // Modified : Dmitri Peressounko (RRC &quot;Kurchatov Institute&quot;)
<span class="lineNum">      26 </span>            : // 6 August 2001
<span class="lineNum">      27 </span>            : 
<span class="lineNum">      28 </span>            : // --- AliRoot header files ---
<span class="lineNum">      29 </span>            : 
<a name="30"><span class="lineNum">      30 </span>            : #include &quot;AliPHOSEMCAGeometry.h&quot;</a>
<span class="lineNum">      31 </span>            : 
<span class="lineNum">      32 </span><span class="lineCov">         46 : ClassImp(AliPHOSEMCAGeometry)</span>
<a name="33"><span class="lineNum">      33 </span>            : </a>
<span class="lineNum">      34 </span>            : //____________________________________________________________________________
<span class="lineNum">      35 </span><span class="lineCov">          3 : AliPHOSEMCAGeometry::AliPHOSEMCAGeometry():</span>
<span class="lineNum">      36 </span><span class="lineCov">          3 :                      fAirGapLed(0.f),</span>
<span class="lineNum">      37 </span><span class="lineCov">          3 :                      fStripWallWidthOut(0.f),</span>
<span class="lineNum">      38 </span><span class="lineCov">          3 :                      fStripWallWidthIn(0.f),</span>
<span class="lineNum">      39 </span><span class="lineCov">          3 :                      fTyvecThickness(0.f),</span>
<span class="lineNum">      40 </span><span class="lineCov">          3 :                      fInnerThermoWidthX(0.f),</span>
<span class="lineNum">      41 </span><span class="lineCov">          3 :                      fInnerThermoWidthY(0.f),</span>
<span class="lineNum">      42 </span><span class="lineCov">          3 :                      fInnerThermoWidthZ(0.f),</span>
<span class="lineNum">      43 </span><span class="lineCov">          3 :                      fAirGapWidthX(0.f),</span>
<span class="lineNum">      44 </span><span class="lineCov">          3 :                      fAirGapWidthY(0.f),</span>
<span class="lineNum">      45 </span><span class="lineCov">          3 :                      fAirGapWidthZ(0.f),</span>
<span class="lineNum">      46 </span><span class="lineCov">          3 :                      fCoolerWidthX(0.f),</span>
<span class="lineNum">      47 </span><span class="lineCov">          3 :                      fCoolerWidthY(0.f),</span>
<span class="lineNum">      48 </span><span class="lineCov">          3 :                      fCoolerWidthZ(0.f),</span>
<span class="lineNum">      49 </span><span class="lineCov">          3 :                      fAlCoverThickness(0.f),</span>
<span class="lineNum">      50 </span><span class="lineCov">          3 :                      fOuterThermoWidthXUp(0.f),</span>
<span class="lineNum">      51 </span><span class="lineCov">          3 :                      fOuterThermoWidthXLow(0.f),</span>
<span class="lineNum">      52 </span><span class="lineCov">          3 :                      fOuterThermoWidthY(0.f),</span>
<span class="lineNum">      53 </span><span class="lineCov">          3 :                      fOuterThermoWidthZ(0.f),</span>
<span class="lineNum">      54 </span><span class="lineCov">          3 :                      fAlFrontCoverX(0.f),</span>
<span class="lineNum">      55 </span><span class="lineCov">          3 :                      fAlFrontCoverZ(0.f),</span>
<span class="lineNum">      56 </span><span class="lineCov">          3 :                      fFiberGlassSup2X(0.f),</span>
<span class="lineNum">      57 </span><span class="lineCov">          3 :                      fFiberGlassSup1X(0.f),</span>
<span class="lineNum">      58 </span><span class="lineCov">          3 :                      fFrameHeight(0.f),</span>
<span class="lineNum">      59 </span><span class="lineCov">          3 :                      fFrameThickness(0.f),</span>
<span class="lineNum">      60 </span><span class="lineCov">          3 :                      fAirSpaceFeeX(0.f),</span>
<span class="lineNum">      61 </span><span class="lineCov">          3 :                      fAirSpaceFeeZ(0.f),</span>
<span class="lineNum">      62 </span><span class="lineCov">          3 :                      fAirSpaceFeeY(0.f),</span>
<span class="lineNum">      63 </span><span class="lineCov">          3 :                      fWarmUpperThickness(0.f),</span>
<span class="lineNum">      64 </span><span class="lineCov">          3 :                      fWarmBottomThickness(0.f),</span>
<span class="lineNum">      65 </span><span class="lineCov">          3 :                      fWarmAlCoverWidthX(0.f),</span>
<span class="lineNum">      66 </span><span class="lineCov">          3 :                      fWarmAlCoverWidthY(0.f),</span>
<span class="lineNum">      67 </span><span class="lineCov">          3 :                      fWarmAlCoverWidthZ(0.f),</span>
<span class="lineNum">      68 </span><span class="lineCov">          3 :                      fFiberGlassSup1Y(0.f),</span>
<span class="lineNum">      69 </span><span class="lineCov">          3 :                      fFiberGlassSup2Y(0.f),</span>
<span class="lineNum">      70 </span><span class="lineCov">          3 :                      fTSupportDist(0.f),</span>
<span class="lineNum">      71 </span><span class="lineCov">          3 :                      fTSupport1Thickness(0.f),</span>
<span class="lineNum">      72 </span><span class="lineCov">          3 :                      fTSupport2Thickness(0.f),</span>
<span class="lineNum">      73 </span><span class="lineCov">          3 :                      fTSupport1Width(0.f),</span>
<span class="lineNum">      74 </span><span class="lineCov">          3 :                      fTSupport2Width(0.f),</span>
<span class="lineNum">      75 </span><span class="lineCov">          3 :                      fIPtoOuterCoverDistance(0.f),</span>
<span class="lineNum">      76 </span><span class="lineCov">          3 :                      fIPtoCrystalSurface(0.f),</span>
<span class="lineNum">      77 </span><span class="lineCov">          3 :                      fSupportPlateThickness(0.f),</span>
<span class="lineNum">      78 </span><span class="lineCov">          3 :                      fNCellsXInStrip(0),</span>
<span class="lineNum">      79 </span><span class="lineCov">          3 :                      fNCellsZInStrip(0),</span>
<span class="lineNum">      80 </span><span class="lineCov">          3 :                      fNStripX(0),</span>
<span class="lineNum">      81 </span><span class="lineCov">          3 :                      fNStripZ(0),</span>
<span class="lineNum">      82 </span><span class="lineCov">          3 :                      fNTSupports(0),</span>
<span class="lineNum">      83 </span><span class="lineCov">          3 :                      fNPhi(0),</span>
<span class="lineNum">      84 </span><span class="lineCov">          3 :                      fNZ(0)</span>
<span class="lineNum">      85 </span><span class="lineCov">         15 : {</span>
<span class="lineNum">      86 </span>            : 
<span class="lineNum">      87 </span>            : 
<span class="lineNum">      88 </span>            :   // Initializes the EMC parameters
<span class="lineNum">      89 </span>            :   // Coordinate system chosen: x across beam, z along beam, y out of beam.
<span class="lineNum">      90 </span>            :   // Reference point for all volumes incide module is 
<span class="lineNum">      91 </span>            :   // center of module in x,z on the upper surface of support beam
<span class="lineNum">      92 </span>            : 
<span class="lineNum">      93 </span>            :   //Distance from IP to surface of the crystals
<span class="lineNum">      94 </span><span class="lineCov">          3 :   fIPtoCrystalSurface     = 460.0 ;    </span>
<span class="lineNum">      95 </span>            : 
<span class="lineNum">      96 </span>            : 
<span class="lineNum">      97 </span>            :   //CRYSTAL
<span class="lineNum">      98 </span>            : 
<span class="lineNum">      99 </span><span class="lineCov">          3 :   fCrystalHalfSize[0] =  2.2 /2 ;  //Half-Sizes of crystall</span>
<span class="lineNum">     100 </span><span class="lineCov">          3 :   fCrystalHalfSize[1] = 18.0 /2 ;</span>
<span class="lineNum">     101 </span><span class="lineCov">          3 :   fCrystalHalfSize[2] =  2.2 /2 ;</span>
<span class="lineNum">     102 </span>            : 
<span class="lineNum">     103 </span>            :   //APD + preamplifier
<span class="lineNum">     104 </span>            : 
<span class="lineNum">     105 </span>            :   //fPinDiodeSize[0] = 1.71 ;   //Values of ame PIN diode  
<span class="lineNum">     106 </span>            :   //fPinDiodeSize[1] = 0.0280 ; // OHO 0.0280 is the depth of active layer
<span class="lineNum">     107 </span>            :   //fPinDiodeSize[2] = 1.61 ;    
<span class="lineNum">     108 </span>            :  
<span class="lineNum">     109 </span><span class="lineCov">          3 :   fPinDiodeHalfSize[0] = 0.5000 /2 ;    // APD 5 mm side</span>
<span class="lineNum">     110 </span><span class="lineCov">          3 :   fPinDiodeHalfSize[1] = 0.0100 /2 ;    // APD bulk thickness</span>
<span class="lineNum">     111 </span><span class="lineCov">          3 :   fPinDiodeHalfSize[2] = 0.5000 /2 ;    // APD 5 mm side </span>
<span class="lineNum">     112 </span>            : 
<span class="lineNum">     113 </span><span class="lineCov">          3 :   fPreampHalfSize[0] = 1.5 / 2 ;       // Preamplifier</span>
<span class="lineNum">     114 </span><span class="lineCov">          3 :   fPreampHalfSize[1] = 0.5 / 2 ;</span>
<span class="lineNum">     115 </span><span class="lineCov">          3 :   fPreampHalfSize[2] = 1.5 / 2 ;</span>
<span class="lineNum">     116 </span>            : 
<span class="lineNum">     117 </span>            :   //Strip unit (8x2 crystals)
<span class="lineNum">     118 </span>            : 
<span class="lineNum">     119 </span><span class="lineCov">          3 :   fNCellsXInStrip =  8 ;       //Number of crystals in strip unit along x-axis</span>
<span class="lineNum">     120 </span><span class="lineCov">          3 :   fNCellsZInStrip =  2 ;       //Number of crystals in strip unit along z-axis</span>
<span class="lineNum">     121 </span><span class="lineCov">          3 :   fNStripX        =  8 ;       //Number of strip units across along x-axis</span>
<span class="lineNum">     122 </span><span class="lineCov">          3 :   fNStripZ        = 28 ;       //Number of strips along z-axis</span>
<span class="lineNum">     123 </span>            : 
<span class="lineNum">     124 </span><span class="lineCov">          3 :   fStripWallWidthOut = 0.01 ;  // Side to another strip  </span>
<span class="lineNum">     125 </span><span class="lineCov">          3 :   fStripWallWidthIn  = 0.02 ;  // Side betveen crystals in one strip</span>
<span class="lineNum">     126 </span>            : 
<span class="lineNum">     127 </span><span class="lineCov">          3 :   fTyvecThickness = 0.0175 ;     //Thickness of the tyvec</span>
<span class="lineNum">     128 </span>            : 
<span class="lineNum">     129 </span><span class="lineCov">          3 :   fAirGapLed = 1.5 - 2 * fPreampHalfSize[1] - 2 * fPinDiodeHalfSize[1] ; // Air gap before crystalls for LED system</span>
<span class="lineNum">     130 </span>            :                                            // Note, that Cell in Strip 1.5 longer then crystall
<span class="lineNum">     131 </span>            : 
<span class="lineNum">     132 </span>            :   //---Now calculate thechnical sizes for GEANT implementation
<span class="lineNum">     133 </span>            : 
<span class="lineNum">     134 </span><span class="lineCov">          3 :   fWrappedHalfSize[0] = (2*fTyvecThickness + 2*fCrystalHalfSize[0])/2 ;   //This will be size of crystall</span>
<span class="lineNum">     135 </span><span class="lineCov">          3 :   fWrappedHalfSize[1] = fCrystalHalfSize[1] ;                             //wrapped into tyvec</span>
<span class="lineNum">     136 </span><span class="lineCov">          3 :   fWrappedHalfSize[2] = (2*fTyvecThickness + 2*fCrystalHalfSize[2])/2 ;   //</span>
<span class="lineNum">     137 </span>            : 
<span class="lineNum">     138 </span><span class="lineCov">          3 :   fAirCellHalfSize[0] = fWrappedHalfSize[0] + 0.01;</span>
<span class="lineNum">     139 </span><span class="lineCov">          9 :   fAirCellHalfSize[1] = (fAirGapLed + 2*fPreampHalfSize[1] + </span>
<span class="lineNum">     140 </span><span class="lineCov">          6 :                        2*fPinDiodeHalfSize[1] + 2*fWrappedHalfSize[1])/2 ;  //in strip</span>
<span class="lineNum">     141 </span><span class="lineCov">          3 :   fAirCellHalfSize[2] = fWrappedHalfSize[2] + 0.01;</span>
<span class="lineNum">     142 </span>            : 
<span class="lineNum">     143 </span>            :   //  fSupportPlateHalfSize[0] = ( (fNCellsXInStrip-1)*fStripWallWidthIn + 2*fStripWallWidthOut + 
<span class="lineNum">     144 </span>            :   //                           fNCellsXInStrip * (2*fTyvecThickness + 2*fCrystalHalfSize[0]) )/2 ;
<span class="lineNum">     145 </span><span class="lineCov">          3 :   fSupportPlateHalfSize[0] = 18.04  /2 ;</span>
<span class="lineNum">     146 </span><span class="lineCov">          3 :   fSupportPlateHalfSize[1] =   6.0  /2 ;</span>
<span class="lineNum">     147 </span>            : //  fSupportPlateHalfSize[2] = ( (fNCellsZInStrip-1)*fStripWallWidthIn + 2*fStripWallWidthOut +
<span class="lineNum">     148 </span>            : //                             fNCellsZInStrip * (2*fTyvecThickness + 2*fCrystalHalfSize[2]) )/2;
<span class="lineNum">     149 </span><span class="lineCov">          3 :   fSupportPlateHalfSize[2] =  4.51  /2 ;</span>
<span class="lineNum">     150 </span><span class="lineCov">          3 :   fSupportPlateThickness = 0.3 ;  </span>
<span class="lineNum">     151 </span><span class="lineCov">          3 :   fSupportPlateInHalfSize[0] = fSupportPlateHalfSize[0] ;                         //Half-sizes of the air</span>
<span class="lineNum">     152 </span><span class="lineCov">          3 :   fSupportPlateInHalfSize[1] = fSupportPlateHalfSize[1]-fSupportPlateThickness ;  //box in the support plate</span>
<span class="lineNum">     153 </span><span class="lineCov">          3 :   fSupportPlateInHalfSize[2] = fSupportPlateHalfSize[2]-fSupportPlateThickness/2 ;</span>
<span class="lineNum">     154 </span>            : 
<span class="lineNum">     155 </span><span class="lineCov">          3 :   fStripHalfSize[0]= fSupportPlateHalfSize[0] ;  </span>
<span class="lineNum">     156 </span><span class="lineCov">          3 :   fStripHalfSize[1]= ( 2*fSupportPlateHalfSize[1] + 2*fAirCellHalfSize[1] )/2;      </span>
<span class="lineNum">     157 </span><span class="lineCov">          3 :   fStripHalfSize[2]= fSupportPlateHalfSize[2] ;</span>
<span class="lineNum">     158 </span>            : 
<span class="lineNum">     159 </span>            :   // ------- Inner hermoinsulation ---------------
<span class="lineNum">     160 </span><span class="lineCov">          3 :   fInnerThermoWidthX = 2.0 ;         // Width of the innerthermoinsulation across the beam</span>
<span class="lineNum">     161 </span><span class="lineCov">          3 :   fInnerThermoWidthY = 2.0 ;         // Width of the upper cover of innerthermoinsulation </span>
<span class="lineNum">     162 </span><span class="lineCov">          3 :   fInnerThermoWidthZ = 2.0 ;         // Width of the innerthermoinsulation along the beam</span>
<span class="lineNum">     163 </span>            : 
<span class="lineNum">     164 </span><span class="lineCov">          3 :   fInnerThermoHalfSize[0] = (2 * fStripHalfSize[0] * fNStripX + 2 * fInnerThermoWidthX ) /2 ;</span>
<span class="lineNum">     165 </span><span class="lineCov">          3 :   fInnerThermoHalfSize[1] = (2 * fStripHalfSize[1] + fInnerThermoWidthY ) /2 ; </span>
<span class="lineNum">     166 </span><span class="lineCov">          3 :   fInnerThermoHalfSize[2] = (2 * fStripHalfSize[2] * fNStripZ + 2 * fInnerThermoWidthZ ) /2 ;</span>
<span class="lineNum">     167 </span>            : 
<span class="lineNum">     168 </span>            :   // ------- Air gap between inner thermoinsulation and passive coller ---------
<span class="lineNum">     169 </span>            : 
<span class="lineNum">     170 </span><span class="lineCov">          3 :   fAirGapWidthX = 0.2 ;         // Width of the air gap across the beam</span>
<span class="lineNum">     171 </span><span class="lineCov">          3 :   fAirGapWidthY = 0.2 ;         // Width of the upper air gap</span>
<span class="lineNum">     172 </span><span class="lineCov">          3 :   fAirGapWidthZ = 0.2 ;         // Width of the air gap along the beam</span>
<span class="lineNum">     173 </span>            : 
<span class="lineNum">     174 </span><span class="lineCov">          3 :   fAirGapHalfSize[0] = (2 * fInnerThermoHalfSize[0] + 2 * fAirGapWidthX ) /2 ;</span>
<span class="lineNum">     175 </span><span class="lineCov">          3 :   fAirGapHalfSize[1] = (2 * fInnerThermoHalfSize[1] +     fAirGapWidthY ) /2 ; </span>
<span class="lineNum">     176 </span><span class="lineCov">          3 :   fAirGapHalfSize[2] = (2 * fInnerThermoHalfSize[2] + 2 * fAirGapWidthZ ) /2 ;</span>
<span class="lineNum">     177 </span>            :   
<span class="lineNum">     178 </span>            :   // ------- Passive Cooler ------------------------
<span class="lineNum">     179 </span>            : 
<span class="lineNum">     180 </span><span class="lineCov">          3 :   fCoolerWidthX = 2.0 ;         // Width of the passive coller across the beam </span>
<span class="lineNum">     181 </span><span class="lineCov">          3 :   fCoolerWidthY = 0.3 ;         // Width of the upper cover of cooler</span>
<span class="lineNum">     182 </span><span class="lineCov">          3 :   fCoolerWidthZ = 2.0 ;         // Width of the passive cooler along the beam</span>
<span class="lineNum">     183 </span>            : 
<span class="lineNum">     184 </span><span class="lineCov">          3 :   fCoolerHalfSize[0] = (2 * fAirGapHalfSize[0] + 2 * fCoolerWidthX ) /2 ; </span>
<span class="lineNum">     185 </span><span class="lineCov">          3 :   fCoolerHalfSize[1] = (2 * fAirGapHalfSize[1] +     fCoolerWidthY ) /2 ; </span>
<span class="lineNum">     186 </span><span class="lineCov">          3 :   fCoolerHalfSize[2] = (2 * fAirGapHalfSize[2] + 2 * fCoolerWidthZ ) /2 ; </span>
<span class="lineNum">     187 </span>            : 
<span class="lineNum">     188 </span>            :   // ------- Outer thermoinsulation and Al cover -------------------------------
<span class="lineNum">     189 </span>            :   
<span class="lineNum">     190 </span><span class="lineCov">          3 :   fAlCoverThickness = 0.1 ;   //Thickness of the Al cover of the module  </span>
<span class="lineNum">     191 </span>            : 
<span class="lineNum">     192 </span><span class="lineCov">          3 :   fOuterThermoWidthXUp  = 156.0 - fAlCoverThickness ; </span>
<span class="lineNum">     193 </span>            :                                   //width of the upper surface of the PHOS module accross the beam 
<span class="lineNum">     194 </span><span class="lineCov">          3 :   fOuterThermoWidthY    = 6.0 ;   // with of the upper cover of outer thermoinsulation</span>
<span class="lineNum">     195 </span><span class="lineCov">          3 :   fOuterThermoWidthZ    = 6.0 ;   //width of the thermoinsulation along the beam </span>
<span class="lineNum">     196 </span>            : 
<span class="lineNum">     197 </span><span class="lineCov">          3 :   fAlFrontCoverX = 6.0 ;   //Width of Al strip around fiberglass window: across</span>
<span class="lineNum">     198 </span><span class="lineCov">          3 :   fAlFrontCoverZ = 6.0 ;   //and along the beam</span>
<span class="lineNum">     199 </span>            : 
<span class="lineNum">     200 </span>            : 
<span class="lineNum">     201 </span>            :   // Calculate distance from IP to upper cover
<span class="lineNum">     202 </span><span class="lineCov">          9 :   fIPtoOuterCoverDistance = fIPtoCrystalSurface - fAirGapLed - fInnerThermoWidthY - fAirGapWidthY - </span>
<span class="lineNum">     203 </span><span class="lineCov">          6 :                             fCoolerWidthY - fOuterThermoWidthY - fAlCoverThickness ; </span>
<span class="lineNum">     204 </span>            : 
<span class="lineNum">     205 </span><span class="lineCov">          3 :   Float_t tanA = fOuterThermoWidthXUp / (2.*fIPtoOuterCoverDistance) ; </span>
<span class="lineNum">     206 </span>            :                   // tan(a) where A = angle between IP to center and IP to side across beam
<span class="lineNum">     207 </span>            : 
<span class="lineNum">     208 </span><span class="lineCov">          6 :   fOuterThermoWidthXLow = fOuterThermoWidthXUp + </span>
<span class="lineNum">     209 </span><span class="lineCov">          3 :                           2 * (2* fCoolerHalfSize[1] + fOuterThermoWidthY) * tanA  </span>
<span class="lineNum">     210 </span><span class="lineCov">          3 :                           - fAlCoverThickness ; </span>
<span class="lineNum">     211 </span>            :                           //width of the lower surface of the COOL section accross the beam 
<span class="lineNum">     212 </span>            : 
<span class="lineNum">     213 </span>            : 
<span class="lineNum">     214 </span><span class="lineCov">          3 :   fOuterThermoParams[0] = fOuterThermoWidthXUp / 2 ;   // half-length along x at the z surface positioned at -DZ; </span>
<span class="lineNum">     215 </span><span class="lineCov">          3 :   fOuterThermoParams[1] = fOuterThermoWidthXLow/ 2 ;   // half-length along x at the z surface positioned at +DZ; </span>
<span class="lineNum">     216 </span><span class="lineCov">          3 :   fOuterThermoParams[2] = ( 2 * fCoolerHalfSize[2] + 2 * fOuterThermoWidthZ ) / 2 ;</span>
<span class="lineNum">     217 </span>            :                                                        // `half-length along the y-axis' in out case this is z axis 
<span class="lineNum">     218 </span><span class="lineCov">          3 :   fOuterThermoParams[3] = ( 2* fCoolerHalfSize[1] + fOuterThermoWidthY) /2 ;    </span>
<span class="lineNum">     219 </span>            :                                                        // `half-length along the z-axis' in our case this is y axis 
<span class="lineNum">     220 </span>            : 
<span class="lineNum">     221 </span><span class="lineCov">          3 :   fAlCoverParams[0] = fOuterThermoParams[0] + fAlCoverThickness ;</span>
<span class="lineNum">     222 </span><span class="lineCov">          3 :   fAlCoverParams[1] = fOuterThermoParams[1] + fAlCoverThickness ;</span>
<span class="lineNum">     223 </span><span class="lineCov">          3 :   fAlCoverParams[2] = fOuterThermoParams[2] + fAlCoverThickness ;</span>
<span class="lineNum">     224 </span><span class="lineCov">          3 :   fAlCoverParams[3] = fOuterThermoParams[3] + fAlCoverThickness /2 ;</span>
<span class="lineNum">     225 </span>            : 
<span class="lineNum">     226 </span>            : 
<span class="lineNum">     227 </span><span class="lineCov">          3 :   fFiberGlassHalfSize[0] = fAlCoverParams[0] - fAlFrontCoverX  ;</span>
<span class="lineNum">     228 </span><span class="lineCov">          3 :   fFiberGlassHalfSize[1] = fAlCoverParams[2] - fAlFrontCoverZ  ; //Note, here other ref. system</span>
<span class="lineNum">     229 </span><span class="lineCov">          3 :   fFiberGlassHalfSize[2] = fAlCoverThickness / 2 ;</span>
<span class="lineNum">     230 </span>            : 
<span class="lineNum">     231 </span>            : 
<span class="lineNum">     232 </span>            :   //============Now warm section======================
<span class="lineNum">     233 </span>            :   //Al Cover 
<span class="lineNum">     234 </span><span class="lineCov">          3 :   fWarmAlCoverWidthX = 2 * fAlCoverParams[1] ;  //Across beam</span>
<span class="lineNum">     235 </span><span class="lineCov">          3 :   fWarmAlCoverWidthY = 159.0 ;                  //along beam</span>
<span class="lineNum">     236 </span>            : 
<span class="lineNum">     237 </span>            :   //T-support
<span class="lineNum">     238 </span><span class="lineCov">          3 :   fTSupport1Thickness = 3.5 ; </span>
<span class="lineNum">     239 </span><span class="lineCov">          3 :   fTSupport2Thickness = 5.0 ; </span>
<span class="lineNum">     240 </span><span class="lineCov">          3 :   fTSupport1Width =  10.6 ;</span>
<span class="lineNum">     241 </span><span class="lineCov">          3 :   fTSupport2Width = 3.1 ;</span>
<span class="lineNum">     242 </span><span class="lineCov">          3 :   fNTSupports = fNStripX + 1 ;</span>
<span class="lineNum">     243 </span><span class="lineCov">          3 :   fTSupportDist = 7.48 ;</span>
<span class="lineNum">     244 </span>            : 
<span class="lineNum">     245 </span>            :   //Air space for FEE
<span class="lineNum">     246 </span><span class="lineCov">          3 :   fAirSpaceFeeX = 148.6 ;   //Across beam</span>
<span class="lineNum">     247 </span><span class="lineCov">          3 :   fAirSpaceFeeY = 135.0 ;   //along beam</span>
<span class="lineNum">     248 </span><span class="lineCov">          3 :   fAirSpaceFeeZ =  19.0 ;   //out of beam</span>
<span class="lineNum">     249 </span>            : 
<span class="lineNum">     250 </span>            :   //thermoinsulation
<span class="lineNum">     251 </span><span class="lineCov">          3 :   fWarmBottomThickness = 4.0 ;</span>
<span class="lineNum">     252 </span><span class="lineCov">          3 :   fWarmUpperThickness  = 4.0 ;</span>
<span class="lineNum">     253 </span>            : 
<span class="lineNum">     254 </span>            :   //Frame 
<span class="lineNum">     255 </span><span class="lineCov">          3 :   fFrameThickness = 5.0 ;</span>
<span class="lineNum">     256 </span><span class="lineCov">          3 :   fFrameHeight    = 15.0 ;</span>
<span class="lineNum">     257 </span>            : 
<span class="lineNum">     258 </span>            :   //Fiberglass support
<span class="lineNum">     259 </span><span class="lineCov">          3 :   fFiberGlassSup1X = 6.0 ;</span>
<span class="lineNum">     260 </span><span class="lineCov">          3 :   fFiberGlassSup1Y = 3.9 + fWarmUpperThickness ; </span>
<span class="lineNum">     261 </span>            : 
<span class="lineNum">     262 </span><span class="lineCov">          3 :   fFiberGlassSup2X = 3.0 ;</span>
<span class="lineNum">     263 </span><span class="lineCov">          3 :   fFiberGlassSup2Y = fFrameHeight ;</span>
<span class="lineNum">     264 </span>            : 
<span class="lineNum">     265 </span>            :   //Now calculate Half-sizes
<span class="lineNum">     266 </span>            : 
<span class="lineNum">     267 </span><span class="lineCov">          9 :   fWarmAlCoverWidthZ = fAirSpaceFeeZ + fWarmBottomThickness + fWarmUpperThickness +  </span>
<span class="lineNum">     268 </span><span class="lineCov">          6 :                        fTSupport1Thickness + fTSupport2Thickness ;</span>
<span class="lineNum">     269 </span>            : 
<span class="lineNum">     270 </span>            : 
<span class="lineNum">     271 </span><span class="lineCov">          3 :   fWarmAlCoverHalfSize[0] = fWarmAlCoverWidthX / 2 ;</span>
<span class="lineNum">     272 </span><span class="lineCov">          3 :   fWarmAlCoverHalfSize[1] = fWarmAlCoverWidthY / 2 ;</span>
<span class="lineNum">     273 </span><span class="lineCov">          3 :   fWarmAlCoverHalfSize[2] = fWarmAlCoverWidthZ / 2 ;</span>
<span class="lineNum">     274 </span>            : 
<span class="lineNum">     275 </span>            :   
<span class="lineNum">     276 </span><span class="lineCov">          3 :   fWarmThermoHalfSize[0] = fWarmAlCoverHalfSize[0] - fAlCoverThickness ; </span>
<span class="lineNum">     277 </span><span class="lineCov">          3 :   fWarmThermoHalfSize[1] = fWarmAlCoverHalfSize[1] - fAlCoverThickness ; </span>
<span class="lineNum">     278 </span><span class="lineCov">          3 :   fWarmThermoHalfSize[2] = fWarmAlCoverHalfSize[2] - fAlCoverThickness /2 ; </span>
<span class="lineNum">     279 </span>            : 
<span class="lineNum">     280 </span>            : 
<span class="lineNum">     281 </span>            :   //T-support
<span class="lineNum">     282 </span><span class="lineCov">          3 :   fTSupport1HalfSize[0] =  fTSupport1Width /2 ;   //Across beam</span>
<span class="lineNum">     283 </span><span class="lineCov">          3 :   fTSupport1HalfSize[1] =  (fAirSpaceFeeY + 2*fFiberGlassSup1X) /2 ;    //along beam</span>
<span class="lineNum">     284 </span><span class="lineCov">          3 :   fTSupport1HalfSize[2] =  fTSupport1Thickness  /2;    //out of beam</span>
<span class="lineNum">     285 </span>            : 
<span class="lineNum">     286 </span><span class="lineCov">          3 :   fTSupport2HalfSize[0] = fTSupport2Width /2;               //Across beam  </span>
<span class="lineNum">     287 </span><span class="lineCov">          3 :   fTSupport2HalfSize[1] = fTSupport1HalfSize[1] ; //along beam</span>
<span class="lineNum">     288 </span><span class="lineCov">          3 :   fTSupport2HalfSize[2] = fTSupport2Thickness /2; //out of beam</span>
<span class="lineNum">     289 </span>            : 
<span class="lineNum">     290 </span>            :   //cables
<span class="lineNum">     291 </span><span class="lineCov">          3 :   fTCables1HalfSize[0] = (2*fTSupport1HalfSize[0]*fNTSupports + (fNTSupports-1)* fTSupportDist) / 2 ; //Across beam</span>
<span class="lineNum">     292 </span><span class="lineCov">          3 :   fTCables1HalfSize[1] = fTSupport1HalfSize[1] ;    //along beam</span>
<span class="lineNum">     293 </span><span class="lineCov">          3 :   fTCables1HalfSize[2] = fTSupport1HalfSize[2] ;    //out of beam</span>
<span class="lineNum">     294 </span>            : 
<span class="lineNum">     295 </span><span class="lineCov">          3 :   fTCables2HalfSize[0] = fTCables1HalfSize[0]  ; //Across beam</span>
<span class="lineNum">     296 </span><span class="lineCov">          3 :   fTCables2HalfSize[1] = fTSupport2HalfSize[1] ; //along beam</span>
<span class="lineNum">     297 </span><span class="lineCov">          3 :   fTCables2HalfSize[2] = fTSupport2HalfSize[2] ; //out of beam</span>
<span class="lineNum">     298 </span>            : 
<span class="lineNum">     299 </span>            :   //frame: we define two frames along beam ...Z and across beam ...X
<span class="lineNum">     300 </span><span class="lineCov">          3 :   fFrameXHalfSize[0] = (fAirSpaceFeeX + 2 * fFiberGlassSup2X + 2* fFrameThickness) /2 ;</span>
<span class="lineNum">     301 </span><span class="lineCov">          3 :   fFrameXHalfSize[1] = fFrameThickness /2 ;</span>
<span class="lineNum">     302 </span><span class="lineCov">          3 :   fFrameXHalfSize[2] = fFrameHeight    /2 ;</span>
<span class="lineNum">     303 </span>            : 
<span class="lineNum">     304 </span><span class="lineCov">          3 :   fFrameXPosition[0] = 0 ;</span>
<span class="lineNum">     305 </span><span class="lineCov">          3 :   fFrameXPosition[1] = fAirSpaceFeeY /2 + fFiberGlassSup2X + fFrameXHalfSize[1] ;</span>
<span class="lineNum">     306 </span><span class="lineCov">          3 :   fFrameXPosition[2] = fWarmThermoHalfSize[2] - fFrameHeight/ 2 - fWarmBottomThickness ;</span>
<span class="lineNum">     307 </span>            :     
<span class="lineNum">     308 </span><span class="lineCov">          3 :   fFrameZHalfSize[0] = fFrameThickness /2 ;</span>
<span class="lineNum">     309 </span><span class="lineCov">          3 :   fFrameZHalfSize[1] = (fAirSpaceFeeY + 2 * fFiberGlassSup2X) /2 ;</span>
<span class="lineNum">     310 </span><span class="lineCov">          3 :   fFrameZHalfSize[2] = fFrameHeight    /2 ;</span>
<span class="lineNum">     311 </span>            : 
<span class="lineNum">     312 </span><span class="lineCov">          3 :   fFrameZPosition[0] = fAirSpaceFeeX /2 + fFiberGlassSup2X + fFrameZHalfSize[0] ;</span>
<span class="lineNum">     313 </span><span class="lineCov">          3 :   fFrameZPosition[1] = 0 ;</span>
<span class="lineNum">     314 </span><span class="lineCov">          3 :   fFrameZPosition[2] = fWarmThermoHalfSize[2] - fFrameHeight/ 2 - fWarmBottomThickness ;</span>
<span class="lineNum">     315 </span>            : 
<span class="lineNum">     316 </span>            :   //Fiberglass support define 4 fiber glass supports 2 along Z  and 2 along X
<span class="lineNum">     317 </span>            :   
<span class="lineNum">     318 </span><span class="lineCov">          3 :   fFGupXHalfSize[0] = fFrameXHalfSize[0] ;</span>
<span class="lineNum">     319 </span><span class="lineCov">          3 :   fFGupXHalfSize[1] = fFiberGlassSup1X /2 ;</span>
<span class="lineNum">     320 </span><span class="lineCov">          3 :   fFGupXHalfSize[2] = fFiberGlassSup1Y /2;</span>
<span class="lineNum">     321 </span>            : 
<span class="lineNum">     322 </span><span class="lineCov">          3 :   fFGupXPosition[0] = 0 ;</span>
<span class="lineNum">     323 </span><span class="lineCov">          3 :   fFGupXPosition[1] = fAirSpaceFeeY /2 + fFGupXHalfSize[1] ;</span>
<span class="lineNum">     324 </span><span class="lineCov">          3 :   fFGupXPosition[2] = fWarmThermoHalfSize[2] - fFrameHeight - fWarmBottomThickness - fFGupXHalfSize[2] ; </span>
<span class="lineNum">     325 </span>            : 
<span class="lineNum">     326 </span><span class="lineCov">          3 :   fFGupZHalfSize[0] = fFiberGlassSup1X /2 ;</span>
<span class="lineNum">     327 </span><span class="lineCov">          3 :   fFGupZHalfSize[1] = fAirSpaceFeeY /2 ;</span>
<span class="lineNum">     328 </span><span class="lineCov">          3 :   fFGupZHalfSize[2] = fFiberGlassSup1Y /2;</span>
<span class="lineNum">     329 </span>            : 
<span class="lineNum">     330 </span><span class="lineCov">          3 :   fFGupZPosition[0] = fAirSpaceFeeX /2 + fFGupZHalfSize[0] ;</span>
<span class="lineNum">     331 </span><span class="lineCov">          3 :   fFGupZPosition[1] = 0 ;</span>
<span class="lineNum">     332 </span><span class="lineCov">          3 :   fFGupZPosition[2] = fWarmThermoHalfSize[2] - fFrameHeight - fWarmBottomThickness - fFGupXHalfSize[2] ; </span>
<span class="lineNum">     333 </span>            : 
<span class="lineNum">     334 </span><span class="lineCov">          3 :   fFGlowXHalfSize[0] = fFrameXHalfSize[0] - 2*fFrameZHalfSize[0] ;</span>
<span class="lineNum">     335 </span><span class="lineCov">          3 :   fFGlowXHalfSize[1] = fFiberGlassSup2X /2 ;</span>
<span class="lineNum">     336 </span><span class="lineCov">          3 :   fFGlowXHalfSize[2] = fFrameXHalfSize[2] ;</span>
<span class="lineNum">     337 </span>            : 
<span class="lineNum">     338 </span><span class="lineCov">          3 :   fFGlowXPosition[0] = 0 ;</span>
<span class="lineNum">     339 </span><span class="lineCov">          3 :   fFGlowXPosition[1] = fAirSpaceFeeY /2 + fFGlowXHalfSize[1] ;</span>
<span class="lineNum">     340 </span><span class="lineCov">          3 :   fFGlowXPosition[2] = fWarmThermoHalfSize[2] - fWarmBottomThickness - fFGlowXHalfSize[2] ; </span>
<span class="lineNum">     341 </span>            : 
<span class="lineNum">     342 </span><span class="lineCov">          3 :   fFGlowZHalfSize[0] = fFiberGlassSup2X /2 ;</span>
<span class="lineNum">     343 </span><span class="lineCov">          3 :   fFGlowZHalfSize[1] = fAirSpaceFeeY /2 ;</span>
<span class="lineNum">     344 </span><span class="lineCov">          3 :   fFGlowZHalfSize[2] = fFrameZHalfSize[2] ;</span>
<span class="lineNum">     345 </span>            : 
<span class="lineNum">     346 </span><span class="lineCov">          3 :   fFGlowZPosition[0] = fAirSpaceFeeX /2 + fFGlowZHalfSize[0] ;</span>
<span class="lineNum">     347 </span><span class="lineCov">          3 :   fFGlowZPosition[1] = 0 ;</span>
<span class="lineNum">     348 </span><span class="lineCov">          3 :   fFGlowZPosition[2] = fWarmThermoHalfSize[2] - fWarmBottomThickness - fFGlowXHalfSize[2] ; </span>
<span class="lineNum">     349 </span>            : 
<span class="lineNum">     350 </span>            : 
<span class="lineNum">     351 </span>            :   // --- Air Gap for FEE ----
<span class="lineNum">     352 </span>            : 
<span class="lineNum">     353 </span><span class="lineCov">          3 :   fFEEAirHalfSize[0] =  fAirSpaceFeeX /2 ;</span>
<span class="lineNum">     354 </span><span class="lineCov">          3 :   fFEEAirHalfSize[1] =  fAirSpaceFeeY /2;</span>
<span class="lineNum">     355 </span><span class="lineCov">          3 :   fFEEAirHalfSize[2] =  fAirSpaceFeeZ /2;</span>
<span class="lineNum">     356 </span>            : 
<span class="lineNum">     357 </span><span class="lineCov">          3 :   fFEEAirPosition[0] = 0 ;</span>
<span class="lineNum">     358 </span><span class="lineCov">          3 :   fFEEAirPosition[1] = 0 ;</span>
<span class="lineNum">     359 </span><span class="lineCov">          3 :   fFEEAirPosition[2] = fWarmThermoHalfSize[2] - fWarmBottomThickness - fFEEAirHalfSize[2] ;</span>
<span class="lineNum">     360 </span>            : 
<span class="lineNum">     361 </span>            :   // --- Calculate the oveol dimentions of the EMC module
<span class="lineNum">     362 </span>            :   
<span class="lineNum">     363 </span><span class="lineCov">          3 :   fEMCParams[3] = fAlCoverParams[3] + fWarmAlCoverHalfSize[2] ; //Size out of beam</span>
<span class="lineNum">     364 </span><span class="lineCov">          3 :   fEMCParams[0] = fAlCoverParams[0] ; //Upper size across the beam</span>
<span class="lineNum">     365 </span><span class="lineCov">          6 :   fEMCParams[1] = (fAlCoverParams[1] - fAlCoverParams[0])*fEMCParams[3]/fAlCoverParams[3] </span>
<span class="lineNum">     366 </span><span class="lineCov">          3 :                  + fAlCoverParams[0]  ; //Lower size across the beam</span>
<span class="lineNum">     367 </span><span class="lineCov">          3 :   fEMCParams[2] = fWarmAlCoverHalfSize[1] ;                     // Size along the beam</span>
<span class="lineNum">     368 </span>            : 
<span class="lineNum">     369 </span><span class="lineCov">          3 :   fNPhi = fNStripX * fNCellsXInStrip ;    //number of crystals across the beam</span>
<span class="lineNum">     370 </span><span class="lineCov">          3 :   fNZ   = fNStripZ * fNCellsZInStrip ;    //number of crystals along the beam</span>
<span class="lineNum">     371 </span><span class="lineCov">          6 : }</span>
<span class="lineNum">     372 </span>            : 
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
