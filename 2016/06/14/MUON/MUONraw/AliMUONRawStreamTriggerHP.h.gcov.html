<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - MUON/MUONraw/AliMUONRawStreamTriggerHP.h</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">MUON/MUONraw</a> - AliMUONRawStreamTriggerHP.h<span style="font-size: 80%;"> (source / <a href="AliMUONRawStreamTriggerHP.h.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">98</td>
            <td class="headerCovTableEntry">231</td>
            <td class="headerCovTableEntryLo">42.4 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">66</td>
            <td class="headerCovTableEntry">178</td>
            <td class="headerCovTableEntryLo">37.1 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : #ifndef ALIMUONRAWSTREAMTRIGGERHP_H</a>
<span class="lineNum">       2 </span>            : #define ALIMUONRAWSTREAMTRIGGERHP_H
<span class="lineNum">       3 </span>            : /* This file is property of and copyright by the ALICE HLT Project        *
<span class="lineNum">       4 </span>            :  * ALICE Experiment at CERN, All rights reserved.                         *
<span class="lineNum">       5 </span>            :  * See cxx source for full Copyright notice                               */
<span class="lineNum">       6 </span>            : 
<span class="lineNum">       7 </span>            : /* $Id$ */
<span class="lineNum">       8 </span>            : 
<span class="lineNum">       9 </span>            : /// \ingroup raw
<span class="lineNum">      10 </span>            : /// \class AliMUONRawStreamTriggerHP
<span class="lineNum">      11 </span>            : /// \brief Higher performance decoder stream class for reading MUON raw trigger data.
<span class="lineNum">      12 </span>            : ///
<span class="lineNum">      13 </span>            : //  This provides a streamer interface to the high performance decoder which
<span class="lineNum">      14 </span>            : //  is required for AliRoot.
<span class="lineNum">      15 </span>            : //
<span class="lineNum">      16 </span>            : //  Author Artur Szostak &lt;artursz@iafrica.com&gt;
<span class="lineNum">      17 </span>            : 
<span class="lineNum">      18 </span>            : #include &quot;AliMUONVRawStreamTrigger.h&quot;
<span class="lineNum">      19 </span>            : #include &quot;AliMUONTriggerDDLDecoder.h&quot;
<span class="lineNum">      20 </span>            : #include &quot;TArrayS.h&quot;
<span class="lineNum">      21 </span>            : 
<span class="lineNum">      22 </span>            : class AliMUONDDLTrigger;
<span class="lineNum">      23 </span>            : 
<span class="lineNum">      24 </span>            : 
<span class="lineNum">      25 </span>            : class AliMUONRawStreamTriggerHP : public AliMUONVRawStreamTrigger
<span class="lineNum">      26 </span>            : {
<span class="lineNum">      27 </span>            : public:
<span class="lineNum">      28 </span>            :         class AliLocalStruct;
<span class="lineNum">      29 </span>            : 
<span class="lineNum">      30 </span>            :         AliMUONRawStreamTriggerHP();
<span class="lineNum">      31 </span>            :         AliMUONRawStreamTriggerHP(AliRawReader* rawReader);
<span class="lineNum">      32 </span>            :         virtual ~AliMUONRawStreamTriggerHP();
<span class="lineNum">      33 </span>            :         
<span class="lineNum">      34 </span>            :         /// Initialize iterator
<span class="lineNum">      35 </span>            :         virtual void First();
<span class="lineNum">      36 </span>            :         
<span class="lineNum">      37 </span>            :         /// DDL iterator 
<span class="lineNum">      38 </span>            :         virtual Bool_t NextDDL();
<span class="lineNum">      39 </span>            :         
<span class="lineNum">      40 </span>            :         /// Whether the iteration is finished or not
<span class="lineNum">      41 </span>            :         virtual Bool_t IsDone() const;
<span class="lineNum">      42 </span>            :         
<a name="43"><span class="lineNum">      43 </span>            :         /// Nothing is actually done in the AddErrorMessage method because we log</a>
<span class="lineNum">      44 </span>            :         /// the error messages as we find them in AliDecoderEventHandler::OnError().
<span class="lineNum">      45 </span><span class="lineNoCov">          0 :         virtual void AddErrorMessage() { };</span>
<span class="lineNum">      46 </span>            :         
<span class="lineNum">      47 </span>            :         /// Advance one step in the iteration. Returns false if finished.
<span class="lineNum">      48 </span>            :         virtual Bool_t Next(UChar_t&amp; id,   UChar_t&amp; dec,     Bool_t&amp; trigY,
<span class="lineNum">      49 </span>            :                             UChar_t&amp; yPos, UChar_t&amp; sXDev,   UChar_t&amp; xDev,
<span class="lineNum">      50 </span>            :                             UChar_t&amp; xPos, Bool_t&amp; triggerY, Bool_t&amp; triggerX,
<span class="lineNum">      51 </span>            :                             TArrayS&amp; xPattern, TArrayS&amp; yPattern);
<span class="lineNum">      52 </span>            :         
<span class="lineNum">      53 </span>            :         /// Construct and return a pointer to the DDL payload object.
<span class="lineNum">      54 </span>            :         virtual AliMUONDDLTrigger* GetDDLTrigger() const;
<span class="lineNum">      55 </span>            :         
<span class="lineNum">      56 </span>            :         /// Returns the next local trigger structure.
<span class="lineNum">      57 </span>            :         const AliLocalStruct* Next();
<a name="58"><span class="lineNum">      58 </span>            :         </a>
<span class="lineNum">      59 </span>            :         /// Return maximum number of DDLs.
<span class="lineNum">      60 </span><span class="lineCov">         48 :         virtual Int_t GetMaxDDL() const { return fgkMaxDDL; }</span>
<a name="61"><span class="lineNum">      61 </span>            :         </a>
<span class="lineNum">      62 </span>            :         /// Return maximum number of regional cards in the DDL.
<span class="lineNum">      63 </span><span class="lineNoCov">          0 :         virtual Int_t GetMaxReg() const { return (Int_t) fDecoder.MaxRegionals(); }</span>
<span class="lineNum">      64 </span>            :         
<span class="lineNum">      65 </span>            :         /// Set the maximum number of regional cards in the DDL.
<span class="lineNum">      66 </span>            :         virtual void SetMaxReg(Int_t reg);
<a name="67"><span class="lineNum">      67 </span>            :         </a>
<span class="lineNum">      68 </span>            :         /// Return maximum number of local cards in the DDL.
<span class="lineNum">      69 </span><span class="lineCov">       1936 :         virtual Int_t GetMaxLoc() const { return (Int_t) fDecoder.MaxLocals(); }</span>
<span class="lineNum">      70 </span>            :         
<span class="lineNum">      71 </span>            :         /// Sets the maximum number of local cards in the DDL.
<span class="lineNum">      72 </span>            :         virtual void SetMaxLoc(Int_t loc);
<a name="73"><span class="lineNum">      73 </span>            :         </a>
<span class="lineNum">      74 </span>            :         /// Return number of the current DDL being handled in the range [0..1] and -1 if no DDL set.
<span class="lineNum">      75 </span><span class="lineCov">        128 :         virtual Int_t GetDDL() const { return fDDL - 1; }</span>
<a name="76"><span class="lineNum">      76 </span>            :         </a>
<span class="lineNum">      77 </span>            :         /// check error/Warning presence
<span class="lineNum">      78 </span><span class="lineNoCov">          0 :         virtual Bool_t IsErrorMessage() const { return fHadError; }</span>
<a name="79"><span class="lineNum">      79 </span>            :         </a>
<span class="lineNum">      80 </span>            :         /// Set warnings flag to disable warnings on data errors.
<a name="81"><span class="lineNum">      81 </span><span class="lineNoCov">          0 :         virtual void DisableWarnings() { fDecoder.GetHandler().Warnings(kFALSE); }</span></a>
<span class="lineNum">      82 </span>            :         /// Set warnings flag to enable warnings on data errors.
<span class="lineNum">      83 </span><span class="lineNoCov">          0 :         virtual void EnableWarnings() { fDecoder.GetHandler().Warnings(kTRUE); }</span>
<a name="84"><span class="lineNum">      84 </span>            :         </a>
<span class="lineNum">      85 </span>            :         /// Get number of end of DARC word errors in the DDL last decoded.
<span class="lineNum">      86 </span><span class="lineNoCov">          0 :         UInt_t GetDarcEoWErrors() const {return fDecoder.GetHandler().GetDarcEoWErrors();}</span>
<a name="87"><span class="lineNum">      87 </span>            :         </a>
<span class="lineNum">      88 </span>            :         /// Get number of end of Global word errors in the DDL last decoded.
<span class="lineNum">      89 </span><span class="lineNoCov">          0 :         UInt_t GetGlobalEoWErrors() const {return fDecoder.GetHandler().GetGlobalEoWErrors();}</span>
<a name="90"><span class="lineNum">      90 </span>            :         </a>
<span class="lineNum">      91 </span>            :         /// Get number of end of regional word errors in the DDL last decoded.
<span class="lineNum">      92 </span><span class="lineNoCov">          0 :         UInt_t GetRegEoWErrors() const {return fDecoder.GetHandler().GetRegEoWErrors();}</span>
<a name="93"><span class="lineNum">      93 </span>            :         </a>
<span class="lineNum">      94 </span>            :         /// Get number of end of local word errors in the DDL last decoded.
<span class="lineNum">      95 </span><span class="lineNoCov">          0 :         UInt_t GetLocalEoWErrors() const {return fDecoder.GetHandler().GetLocalEoWErrors();}</span>
<a name="96"><span class="lineNum">      96 </span>            :         </a>
<span class="lineNum">      97 </span>            :         /// Number of end of DARC word errors since First() was called.
<span class="lineNum">      98 </span><span class="lineNoCov">          0 :         UInt_t NumberOfDarcEoWErrors() const { return fTotalNumberOfDarcEoWErrors; }</span>
<a name="99"><span class="lineNum">      99 </span>            :         </a>
<span class="lineNum">     100 </span>            :         /// Number of end of global word errors since First() was called.
<span class="lineNum">     101 </span><span class="lineNoCov">          0 :         UInt_t NumberOfGlobalEoWErrors() const { return fTotalNumberOfGlobalEoWErrors; }</span>
<a name="102"><span class="lineNum">     102 </span>            :         </a>
<span class="lineNum">     103 </span>            :         /// Number of end of regional word errors since First() was called.
<span class="lineNum">     104 </span><span class="lineNoCov">          0 :         UInt_t NumberOfRegEoWErrors() const { return fTotalNumberOfRegEoWErrors; }</span>
<a name="105"><span class="lineNum">     105 </span>            :         </a>
<span class="lineNum">     106 </span>            :         /// Number of end of local word errors since First() was called.
<span class="lineNum">     107 </span><span class="lineNoCov">          0 :         UInt_t NumberOfLocalEoWErrors() const { return fTotalNumberOfLocalEoWErrors; }</span>
<a name="108"><span class="lineNum">     108 </span>            :         </a>
<span class="lineNum">     109 </span>            :         /// Whether we got any end of DARC word errors or not since calling First().
<span class="lineNum">     110 </span><span class="lineNoCov">          0 :         Bool_t HasDarcEoWError() const { return NumberOfDarcEoWErrors() &gt; 0; }</span>
<a name="111"><span class="lineNum">     111 </span>            :         </a>
<span class="lineNum">     112 </span>            :         /// Whether we got any end of global word errors or not since calling First().
<span class="lineNum">     113 </span><span class="lineNoCov">          0 :         Bool_t HasGlobalEoWError() const { return NumberOfGlobalEoWErrors() &gt; 0; }</span>
<a name="114"><span class="lineNum">     114 </span>            :         </a>
<span class="lineNum">     115 </span>            :         /// Whether we got any end of regional word errors or not since calling First().
<span class="lineNum">     116 </span><span class="lineNoCov">          0 :         Bool_t HasRegEoWError() const { return NumberOfRegEoWErrors() &gt; 0; }</span>
<a name="117"><span class="lineNum">     117 </span>            :         </a>
<span class="lineNum">     118 </span>            :         /// Whether we got any end of local word errors or not since calling First().
<span class="lineNum">     119 </span><span class="lineNoCov">          0 :         Bool_t HasLocalEoWError() const { return NumberOfLocalEoWErrors() &gt; 0; }</span>
<a name="120"><span class="lineNum">     120 </span>            :         </a>
<span class="lineNum">     121 </span>            :         /// Returns the &quot;try to recover from errors&quot; flag.
<span class="lineNum">     122 </span><span class="lineNoCov">          0 :         Bool_t TryRecover() const { return Bool_t(fDecoder.TryRecover()); }</span>
<span class="lineNum">     123 </span>            :         
<span class="lineNum">     124 </span>            :         /// Sets the &quot;try to recover from errors&quot; flag.
<a name="125"><span class="lineNum">     125 </span>            :         /// i.e. should the decoder try to recover from errors found in the</a>
<span class="lineNum">     126 </span>            :         /// payload headers.
<span class="lineNum">     127 </span><span class="lineNoCov">          0 :         void TryRecover(Bool_t value) { fDecoder.TryRecover(bool(value)); }</span>
<span class="lineNum">     128 </span>            :         
<span class="lineNum">     129 </span>            :         /// Light weight interface class to the DARC and global header data.
<span class="lineNum">     130 </span>            :         class AliHeader
<span class="lineNum">     131 </span>            :         {
<a name="132"><span class="lineNum">     132 </span>            :         public:</a>
<span class="lineNum">     133 </span>            :                 /// Default constructor.
<span class="lineNum">     134 </span>            :                 AliHeader(
<span class="lineNum">     135 </span>            :                                 UInt_t darcHeader = 0,
<span class="lineNum">     136 </span>            :                                 const AliMUONDarcScalarsStruct* darcScalars = NULL,
<span class="lineNum">     137 </span>            :                                 const AliMUONGlobalHeaderStruct* globalHeader = NULL,
<span class="lineNum">     138 </span>            :                                 const AliMUONGlobalScalarsStruct* globalScalars = NULL
<span class="lineNum">     139 </span>            :                         ) :
<span class="lineNum">     140 </span><span class="lineCov">         34 :                         fDarcHeader(darcHeader), fDarcScalars(darcScalars),</span>
<span class="lineNum">     141 </span><span class="lineCov">         17 :                         fGlobalHeader(globalHeader), fGlobalScalars(globalScalars)</span>
<span class="lineNum">     142 </span><span class="lineCov">         34 :                 {</span>
<span class="lineNum">     143 </span><span class="lineCov">         34 :                 }</span>
<a name="144"><span class="lineNum">     144 </span>            :                 </a>
<span class="lineNum">     145 </span>            :                 /// Implement shallow copying in the copy constructor.
<span class="lineNum">     146 </span>            :                 AliHeader(const AliHeader&amp; o) :
<span class="lineNum">     147 </span><span class="lineNoCov">          0 :                         fDarcHeader(o.fDarcHeader), fDarcScalars(o.fDarcScalars),</span>
<span class="lineNum">     148 </span><span class="lineNoCov">          0 :                         fGlobalHeader(o.fGlobalHeader), fGlobalScalars(o.fGlobalScalars)</span>
<span class="lineNum">     149 </span><span class="lineNoCov">          0 :                 {</span>
<span class="lineNum">     150 </span><span class="lineNoCov">          0 :                 }</span>
<a name="151"><span class="lineNum">     151 </span>            :                 </a>
<span class="lineNum">     152 </span>            :                 /// Implement shallow copying in the assignment operator.
<span class="lineNum">     153 </span>            :                 AliHeader&amp; operator = (const AliHeader&amp; object)
<span class="lineNum">     154 </span>            :                 {
<span class="lineNum">     155 </span><span class="lineCov">         16 :                         memcpy(this, &amp;object, sizeof(AliHeader));</span>
<span class="lineNum">     156 </span><span class="lineCov">          8 :                         return *this;</span>
<span class="lineNum">     157 </span>            :                 }
<a name="158"><span class="lineNum">     158 </span>            :         </a>
<span class="lineNum">     159 </span>            :                 /// Default destructor.
<span class="lineNum">     160 </span><span class="lineCov">         52 :                 ~AliHeader() {};</span>
<a name="161"><span class="lineNum">     161 </span>            :                 </a>
<span class="lineNum">     162 </span>            :                 /// Return first word
<a name="163"><span class="lineNum">     163 </span><span class="lineNoCov">          0 :                 UInt_t   GetWord()               const {return GetDarcHeader();}</span></a>
<span class="lineNum">     164 </span>            :                 /// Return global input
<a name="165"><span class="lineNum">     165 </span><span class="lineNoCov">          0 :                 UInt_t   GetGlobalInput(Int_t n) const {return fGlobalHeader-&gt;fInput[n];}</span></a>
<span class="lineNum">     166 </span>            :                 /// Return global output
<a name="167"><span class="lineNum">     167 </span><span class="lineCov">          8 :                 UChar_t  GetGlobalOutput() const {return AliMUONTriggerDDLDecoderEventHandler::GetGlobalOutput(fGlobalHeader);}</span></a>
<span class="lineNum">     168 </span>            :                 /// Return global config
<span class="lineNum">     169 </span><span class="lineNoCov">          0 :                 UShort_t GetGlobalConfig() const {return AliMUONTriggerDDLDecoderEventHandler::GetGlobalConfig(fGlobalHeader);}</span>
<a name="170"><span class="lineNum">     170 </span>            : </a>
<span class="lineNum">     171 </span>            :                 /// Return event type
<a name="172"><span class="lineNum">     172 </span><span class="lineNoCov">          0 :                 UChar_t GetEventType()  const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcEventType(GetDarcHeader());}</span></a>
<span class="lineNum">     173 </span>            :                 /// Returns true if this was a physics event.
<a name="174"><span class="lineNum">     174 </span><span class="lineNoCov">          0 :                 Bool_t IsPhysicsEvent() const {return GetEventType() == 0x1;}</span></a>
<span class="lineNum">     175 </span>            :                 /// Return Darc type
<a name="176"><span class="lineNum">     176 </span><span class="lineNoCov">          0 :                 UChar_t GetDarcType()   const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcType(GetDarcHeader());}</span></a>
<span class="lineNum">     177 </span>            :                 /// Return serial number
<a name="178"><span class="lineNum">     178 </span><span class="lineNoCov">          0 :                 UChar_t GetSerialNb()   const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcSerialNb(GetDarcHeader());}</span></a>
<span class="lineNum">     179 </span>            :                 /// Return version
<a name="180"><span class="lineNum">     180 </span><span class="lineNoCov">          0 :                 UChar_t GetVersion()    const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcVersion(GetDarcHeader());}</span></a>
<span class="lineNum">     181 </span>            :                 /// Return VME trig
<a name="182"><span class="lineNum">     182 </span><span class="lineNoCov">          0 :                 Bool_t  GetVMETrig()    const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcVMETrig(GetDarcHeader());}</span></a>
<span class="lineNum">     183 </span>            :                 /// Return global flag
<a name="184"><span class="lineNum">     184 </span><span class="lineCov">         16 :                 Bool_t  GetGlobalFlag() const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcGlobalFlag(GetDarcHeader());}</span></a>
<span class="lineNum">     185 </span>            :                 /// Return CPT trigger
<a name="186"><span class="lineNum">     186 </span><span class="lineNoCov">          0 :                 Bool_t  GetCTPTrig()    const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcCTPTrig(GetDarcHeader());}</span></a>
<span class="lineNum">     187 </span>            :                 /// Return DAQ flag
<a name="188"><span class="lineNum">     188 </span><span class="lineNoCov">          0 :                 Bool_t  GetDAQFlag()    const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcDAQFlag(GetDarcHeader());}</span></a>
<span class="lineNum">     189 </span>            :                 /// Return reg pattern
<span class="lineNum">     190 </span><span class="lineNoCov">          0 :                 UChar_t GetRegPattern() const {return AliMUONTriggerDDLDecoderEventHandler::GetDarcRegPattern(GetDarcHeader());}</span>
<span class="lineNum">     191 </span>            :         
<a name="192"><span class="lineNum">     192 </span>            :                 // DARC get methods</a>
<span class="lineNum">     193 </span>            :                 /// Return DARC L0 received and used
<a name="194"><span class="lineNum">     194 </span><span class="lineNoCov">          0 :                 UInt_t  GetDarcL0R()   const {return (fDarcScalars != NULL) ? fDarcScalars-&gt;fL0R : 0;}</span></a>
<span class="lineNum">     195 </span>            :                 /// Return DARC L1 physics
<a name="196"><span class="lineNum">     196 </span><span class="lineNoCov">          0 :                 UInt_t  GetDarcL1P()   const {return (fDarcScalars != NULL) ? fDarcScalars-&gt;fL1P : 0;}</span></a>
<span class="lineNum">     197 </span>            :                 /// Return DARC L1 software
<a name="198"><span class="lineNum">     198 </span><span class="lineNoCov">          0 :                 UInt_t  GetDarcL1S()   const {return (fDarcScalars != NULL) ? fDarcScalars-&gt;fL1S : 0;}</span></a>
<span class="lineNum">     199 </span>            :                 /// Return DARC L2 accept
<a name="200"><span class="lineNum">     200 </span><span class="lineNoCov">          0 :                 UInt_t  GetDarcL2A()   const {return (fDarcScalars != NULL) ? fDarcScalars-&gt;fL2A : 0;}</span></a>
<span class="lineNum">     201 </span>            :                 /// Return DARC L2 reject
<a name="202"><span class="lineNum">     202 </span><span class="lineNoCov">          0 :                 UInt_t  GetDarcL2R()   const {return (fDarcScalars != NULL) ? fDarcScalars-&gt;fL2R : 0;}</span></a>
<span class="lineNum">     203 </span>            :                 /// Return DARC clock
<a name="204"><span class="lineNum">     204 </span><span class="lineNoCov">          0 :                 UInt_t  GetDarcClock() const {return (fDarcScalars != NULL) ? fDarcScalars-&gt;fClk : 0;}</span></a>
<span class="lineNum">     205 </span>            :                 /// Return DARC hold (dead time)
<span class="lineNum">     206 </span><span class="lineNoCov">          0 :                 UInt_t  GetDarcHold()  const {return (fDarcScalars != NULL) ? fDarcScalars-&gt;fHold : 0;}</span>
<span class="lineNum">     207 </span>            :                 
<a name="208"><span class="lineNum">     208 </span>            :                 // global get methods</a>
<span class="lineNum">     209 </span>            :                 /// Return global L0
<a name="210"><span class="lineNum">     210 </span><span class="lineNoCov">          0 :                 UInt_t  GetGlobalL0()    const {return (fGlobalScalars != NULL) ? fGlobalScalars-&gt;fL0 : 0;}</span></a>
<span class="lineNum">     211 </span>            :                 /// Return global clock
<a name="212"><span class="lineNum">     212 </span><span class="lineNoCov">          0 :                 UInt_t  GetGlobalClock() const {return (fGlobalScalars != NULL) ? fGlobalScalars-&gt;fClk : 0;}</span></a>
<span class="lineNum">     213 </span>            :                 /// Return global scalars or NULL if none exist.
<a name="214"><span class="lineNum">     214 </span><span class="lineNoCov">          0 :                 const UInt_t* GetGlobalScaler()  const {return (fGlobalScalars != NULL) ? &amp;fGlobalScalars-&gt;fScaler[0] : NULL;}</span></a>
<span class="lineNum">     215 </span>            :                 /// Return global hold (dead time)
<a name="216"><span class="lineNum">     216 </span><span class="lineNoCov">          0 :                 UInt_t  GetGlobalHold()  const {return (fGlobalScalars != NULL) ? fGlobalScalars-&gt;fHold : 0;}</span></a>
<span class="lineNum">     217 </span>            :                 /// Return global spare
<span class="lineNum">     218 </span><span class="lineNoCov">          0 :                 UInt_t  GetGlobalSpare() const {return (fGlobalScalars != NULL) ? fGlobalScalars-&gt;fSpare : 0;}</span>
<a name="219"><span class="lineNum">     219 </span>            :                 </a>
<span class="lineNum">     220 </span>            :                 /// Return true if type for DARC is default.
<a name="221"><span class="lineNum">     221 </span><span class="lineNoCov">          0 :                 Bool_t DarcIsDefaultType() const {return GetDarcType() == AliMUONTriggerDDLDecoder&lt;AliMUONTriggerDDLDecoderEventHandler&gt;::DarcDefaultType();}</span></a>
<span class="lineNum">     222 </span>            :                 /// Return true if type for DARC is Vadorh.
<span class="lineNum">     223 </span><span class="lineNoCov">          0 :                 Bool_t DarcIsVadohrType()  const {return GetDarcType() == AliMUONTriggerDDLDecoder&lt;AliMUONTriggerDDLDecoderEventHandler&gt;::DarcVadorhType();}</span>
<a name="224"><span class="lineNum">     224 </span>            :                 </a>
<span class="lineNum">     225 </span>            :                 /// Return the DARC header's raw data.
<span class="lineNum">     226 </span><span class="lineCov">         16 :                 UInt_t GetDarcHeader() const {return fDarcHeader;}</span>
<a name="227"><span class="lineNum">     227 </span>            :                 </a>
<span class="lineNum">     228 </span>            :                 /// Return the DARC scalars raw data or NULL if none exist.
<span class="lineNum">     229 </span><span class="lineNoCov">          0 :                 const AliMUONDarcScalarsStruct* GetDarcScalars() const {return fDarcScalars;}</span>
<a name="230"><span class="lineNum">     230 </span>            :                 </a>
<span class="lineNum">     231 </span>            :                 /// Return the global header's raw data.
<span class="lineNum">     232 </span><span class="lineCov">          8 :                 const AliMUONGlobalHeaderStruct* GetGlobalHeader() const {return fGlobalHeader;}</span>
<a name="233"><span class="lineNum">     233 </span>            :                 </a>
<span class="lineNum">     234 </span>            :                 /// Return the global scalars raw data or NULL if none exist.
<span class="lineNum">     235 </span><span class="lineNoCov">          0 :                 const AliMUONGlobalScalarsStruct* GetGlobalScalars() const {return fGlobalScalars;}</span>
<span class="lineNum">     236 </span>            :                 
<span class="lineNum">     237 </span>            :                 /// Print the contents of the headers to screen.
<span class="lineNum">     238 </span>            :                 void Print() const;
<span class="lineNum">     239 </span>            :         
<span class="lineNum">     240 </span>            :         private:
<span class="lineNum">     241 </span>            :         
<span class="lineNum">     242 </span>            :                 UInt_t fDarcHeader;  ///&lt; Pointer to DARC header in DDL payload.
<span class="lineNum">     243 </span>            :                 const AliMUONDarcScalarsStruct* fDarcScalars;  ///&lt; Pointer to DARC scalars in DDL payload.
<span class="lineNum">     244 </span>            :                 const AliMUONGlobalHeaderStruct* fGlobalHeader;  ///&lt; Pointer to global header in DDL payload.
<span class="lineNum">     245 </span>            :                 const AliMUONGlobalScalarsStruct* fGlobalScalars;  ///&lt; Pointer to global scalars in DDL payload.
<span class="lineNum">     246 </span>            :         };
<span class="lineNum">     247 </span>            :         
<span class="lineNum">     248 </span>            :         /// Light weight interface class to the regional card header data.
<span class="lineNum">     249 </span>            :         class AliRegionalHeader
<span class="lineNum">     250 </span>            :         {
<a name="251"><span class="lineNum">     251 </span>            :         public:</a>
<span class="lineNum">     252 </span>            :                 /// Default constructor.
<span class="lineNum">     253 </span>            :                 AliRegionalHeader(
<span class="lineNum">     254 </span>            :                                 const AliLocalStruct* localsArray = NULL,
<span class="lineNum">     255 </span>            :                                 const AliMUONRegionalHeaderStruct* header = NULL,
<span class="lineNum">     256 </span>            :                                 const AliMUONRegionalScalarsStruct* scalars = NULL
<span class="lineNum">     257 </span>            :                         ) :
<span class="lineNum">     258 </span><span class="lineCov">        400 :                         fNext(NULL), fLocalsCount(0), fFirstLocal(localsArray),</span>
<span class="lineNum">     259 </span><span class="lineCov">        200 :                         fHeader(header), fScalars(scalars)</span>
<span class="lineNum">     260 </span><span class="lineCov">        400 :                 {</span>
<span class="lineNum">     261 </span><span class="lineCov">        400 :                 }</span>
<a name="262"><span class="lineNum">     262 </span>            :                 </a>
<span class="lineNum">     263 </span>            :                 /// Implement shallow copying in the copy constructor.
<span class="lineNum">     264 </span>            :                 AliRegionalHeader(const AliRegionalHeader&amp; o) :
<span class="lineNum">     265 </span><span class="lineNoCov">          0 :                         fNext(o.fNext), fLocalsCount(o.fLocalsCount),</span>
<span class="lineNum">     266 </span><span class="lineNoCov">          0 :                         fFirstLocal(o.fFirstLocal), fHeader(o.fHeader),</span>
<span class="lineNum">     267 </span><span class="lineNoCov">          0 :                         fScalars(o.fScalars)</span>
<span class="lineNum">     268 </span><span class="lineNoCov">          0 :                 {</span>
<span class="lineNum">     269 </span><span class="lineNoCov">          0 :                 }</span>
<a name="270"><span class="lineNum">     270 </span>            :                 </a>
<span class="lineNum">     271 </span>            :                 /// Implement shallow copying in the assignment operator.
<span class="lineNum">     272 </span>            :                 AliRegionalHeader&amp; operator = (const AliRegionalHeader&amp; object)
<span class="lineNum">     273 </span>            :                 {
<span class="lineNum">     274 </span><span class="lineCov">        256 :                         memcpy(this, &amp;object, sizeof(AliRegionalHeader));</span>
<span class="lineNum">     275 </span><span class="lineCov">        128 :                         return *this;</span>
<span class="lineNum">     276 </span>            :                 }
<a name="277"><span class="lineNum">     277 </span>            :                 </a>
<span class="lineNum">     278 </span>            :                 /// Default destructor.
<span class="lineNum">     279 </span><span class="lineCov">        672 :                 ~AliRegionalHeader() {};</span>
<a name="280"><span class="lineNum">     280 </span>            :                 </a>
<span class="lineNum">     281 </span>            :                 /// Return darc word
<a name="282"><span class="lineNum">     282 </span><span class="lineNoCov">          0 :                 UInt_t   GetDarcWord()     const {return fHeader-&gt;fDarcWord;}</span></a>
<span class="lineNum">     283 </span>            :                 /// Return first reg word
<a name="284"><span class="lineNum">     284 </span><span class="lineNoCov">          0 :                 UInt_t   GetWord()         const {return fHeader-&gt;fWord;}</span></a>
<span class="lineNum">     285 </span>            :                 /// Return regional input
<a name="286"><span class="lineNum">     286 </span><span class="lineNoCov">          0 :                 UInt_t   GetInput(Int_t n) const {assert(n &lt; 2); return fHeader-&gt;fInput[n];}</span></a>
<span class="lineNum">     287 </span>            :                 /// Return L0
<a name="288"><span class="lineNum">     288 </span><span class="lineNoCov">          0 :                 UShort_t GetL0()           const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalL0(fHeader);}</span></a>
<span class="lineNum">     289 </span>            :                 /// Return mask
<span class="lineNum">     290 </span><span class="lineNoCov">          0 :                 UShort_t GetMask()         const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalMask(fHeader);}</span>
<span class="lineNum">     291 </span>            :                 
<span class="lineNum">     292 </span>            :                 //word: phys type:1, reset: 6, serialNb:5, Id:4, version: 8, regional output:8
<a name="293"><span class="lineNum">     293 </span>            :                 //true for phys, false for soft</a>
<span class="lineNum">     294 </span>            :                 /// Return RegPhysFlag
<a name="295"><span class="lineNum">     295 </span><span class="lineNoCov">          0 :                 Bool_t    GetRegPhysFlag() const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalPhysFlag(fHeader);}</span></a>
<span class="lineNum">     296 </span>            :                 /// Return ResetNb
<a name="297"><span class="lineNum">     297 </span><span class="lineNoCov">          0 :                 UChar_t   GetResetNb()     const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalResetNb(fHeader);}</span></a>
<span class="lineNum">     298 </span>            :                 /// Return SerialNb
<a name="299"><span class="lineNum">     299 </span><span class="lineNoCov">          0 :                 UChar_t   GetSerialNb()    const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalSerialNb(fHeader);}</span></a>
<span class="lineNum">     300 </span>            :                 /// Return Id
<a name="301"><span class="lineNum">     301 </span><span class="lineNoCov">          0 :                 UChar_t   GetId()          const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalId(fHeader);}</span></a>
<span class="lineNum">     302 </span>            :                 /// Return Version
<a name="303"><span class="lineNum">     303 </span><span class="lineNoCov">          0 :                 UChar_t   GetVersion()     const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalVersion(fHeader);}</span></a>
<span class="lineNum">     304 </span>            :                 /// Return Output
<span class="lineNum">     305 </span><span class="lineNoCov">          0 :                 UChar_t   GetOutput()      const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalOutput(fHeader);}</span>
<span class="lineNum">     306 </span>            :                 
<span class="lineNum">     307 </span>            :                 //Darc Status: error:10, #fpag:3, MBZ:3, phys type:1, present:1, not_full:1
<a name="308"><span class="lineNum">     308 </span>            :                 // not_empty:1, L2Rej:1, L2Acc:1, L1:1, L0:1, #evt:4, busy:4</a>
<span class="lineNum">     309 </span>            :                 /// Return ErrorBits
<a name="310"><span class="lineNum">     310 </span><span class="lineNoCov">          0 :                 UShort_t GetErrorBits()       const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalErrorBits(fHeader);}</span></a>
<span class="lineNum">     311 </span>            :                 /// Return FPGANumber
<a name="312"><span class="lineNum">     312 </span><span class="lineNoCov">          0 :                 UChar_t  GetFPGANumber()      const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalFPGANumber(fHeader);}</span></a>
<span class="lineNum">     313 </span>            :                 /// Return DarcPhysFlag
<a name="314"><span class="lineNum">     314 </span><span class="lineNoCov">          0 :                 Bool_t   GetDarcPhysFlag()    const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalDarcPhysFlag(fHeader);}</span></a>
<span class="lineNum">     315 </span>            :                 /// Return PresentFlag
<a name="316"><span class="lineNum">     316 </span><span class="lineNoCov">          0 :                 Bool_t   GetPresentFlag()     const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalPresentFlag(fHeader);}</span></a>
<span class="lineNum">     317 </span>            :                 /// Return RamNotFullFlag
<a name="318"><span class="lineNum">     318 </span><span class="lineNoCov">          0 :                 Bool_t   GetRamNotFullFlag()  const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalRamNotFullFlag(fHeader);}</span></a>
<span class="lineNum">     319 </span>            :                 /// Return RamNotEmptyFlag
<a name="320"><span class="lineNum">     320 </span><span class="lineNoCov">          0 :                 Bool_t   GetRamNotEmptyFlag() const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalRamNotEmptyFlag(fHeader);}</span></a>
<span class="lineNum">     321 </span>            :                 /// Return L2RejStatus
<a name="322"><span class="lineNum">     322 </span><span class="lineNoCov">          0 :                 Bool_t   GetL2RejStatus()     const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalL2RejStatus(fHeader);}</span></a>
<span class="lineNum">     323 </span>            :                 /// Return L2AccStatus
<a name="324"><span class="lineNum">     324 </span><span class="lineNoCov">          0 :                 Bool_t   GetL2AccStatus()     const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalL2AccStatus(fHeader);}</span></a>
<span class="lineNum">     325 </span>            :                 /// Return L1Status
<a name="326"><span class="lineNum">     326 </span><span class="lineNoCov">          0 :                 Bool_t   GetL1Status()        const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalL1Status(fHeader);}</span></a>
<span class="lineNum">     327 </span>            :                 /// Return L0Status
<a name="328"><span class="lineNum">     328 </span><span class="lineNoCov">          0 :                 Bool_t   GetL0Status()        const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalL0Status(fHeader);}</span></a>
<span class="lineNum">     329 </span>            :                 /// Return EventInRam
<a name="330"><span class="lineNum">     330 </span><span class="lineNoCov">          0 :                 UChar_t  GetEventInRam()      const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalEventInRam(fHeader);}</span></a>
<span class="lineNum">     331 </span>            :                 /// Return Busy
<span class="lineNum">     332 </span><span class="lineNoCov">          0 :                 UChar_t  GetBusy()            const {return AliMUONTriggerDDLDecoderEventHandler::GetRegionalBusy(fHeader);}</span>
<span class="lineNum">     333 </span>            :                 
<a name="334"><span class="lineNum">     334 </span>            :                 // scalar methods</a>
<span class="lineNum">     335 </span>            :                 /// Return regional clock
<a name="336"><span class="lineNum">     336 </span><span class="lineNoCov">          0 :                 UInt_t  GetClock()        const {return (fScalars != NULL) ? fScalars-&gt;fClk : 0;}</span></a>
<span class="lineNum">     337 </span>            :                 /// Return regional ouput
<a name="338"><span class="lineNum">     338 </span><span class="lineNoCov">          0 :                 const UInt_t* GetScaler() const {return (fScalars != NULL) ? &amp;fScalars-&gt;fScaler[0] : NULL;}</span></a>
<span class="lineNum">     339 </span>            :                 /// Return regional hold (dead time)
<span class="lineNum">     340 </span><span class="lineNoCov">          0 :                 UInt_t  GetHold()         const {return (fScalars != NULL) ? fScalars-&gt;fHold : 0;}</span>
<a name="341"><span class="lineNum">     341 </span>            :                 </a>
<span class="lineNum">     342 </span>            :                 /// Return raw data of regional header.
<span class="lineNum">     343 </span><span class="lineNoCov">          0 :                 const AliMUONRegionalHeaderStruct* GetHeader() const { return fHeader; }</span>
<a name="344"><span class="lineNum">     344 </span>            :                 </a>
<span class="lineNum">     345 </span>            :                 /// Return the raw data of the regional scalars or NULL if none exist.
<span class="lineNum">     346 </span><span class="lineNoCov">          0 :                 const AliMUONRegionalScalarsStruct* GetScalars() const { return fScalars; }</span>
<a name="347"><span class="lineNum">     347 </span>            :                 </a>
<span class="lineNum">     348 </span>            :                 /// Return the next regional structure header.
<span class="lineNum">     349 </span><span class="lineNoCov">          0 :                 const AliRegionalHeader* Next() const { return fNext; }</span>
<a name="350"><span class="lineNum">     350 </span>            :                 </a>
<span class="lineNum">     351 </span>            :                 /// Returns the first AliLocalStruct class in this regional structure.
<span class="lineNum">     352 </span><span class="lineCov">       1936 :                 const AliLocalStruct* GetFirstLocalStruct() const { return fFirstLocal; }</span>
<a name="353"><span class="lineNum">     353 </span>            :                 </a>
<span class="lineNum">     354 </span>            :                 /// Returns the number of local trigger structures within this regional structure.
<span class="lineNum">     355 </span><span class="lineCov">       4000 :                 UInt_t GetLocalStructCount() const { return fLocalsCount; }</span>
<a name="356"><span class="lineNum">     356 </span>            :         </a>
<span class="lineNum">     357 </span>            :                 /// Return the i'th local trigger structure in this regional structure.
<span class="lineNum">     358 </span>            :                 const AliLocalStruct* GetLocalStruct(UInt_t i) const
<span class="lineNum">     359 </span>            :                 {
<span class="lineNum">     360 </span><span class="lineCov">       3872 :                         return i &lt; fLocalsCount ? GetFirstLocalStruct() + i : NULL;</span>
<span class="lineNum">     361 </span>            :                 }
<a name="362"><span class="lineNum">     362 </span>            :         </a>
<span class="lineNum">     363 </span>            :                 /// Sets the next regional structure header.
<span class="lineNum">     364 </span><span class="lineCov">        224 :                 void SetNext(const AliRegionalHeader* next) { fNext = next; }</span>
<a name="365"><span class="lineNum">     365 </span>            : </a>
<span class="lineNum">     366 </span>            :                 /// Increments the local trigger structure count.
<span class="lineNum">     367 </span><span class="lineCov">       1936 :                 void IncLocalStructCount() { fLocalsCount++; };</span>
<span class="lineNum">     368 </span>            :                 
<span class="lineNum">     369 </span>            :                 /// Print the contents of the regional header and scalars to screen.
<span class="lineNum">     370 </span>            :                 void Print() const;
<span class="lineNum">     371 </span>            :         
<span class="lineNum">     372 </span>            :         private:
<span class="lineNum">     373 </span>            :         
<span class="lineNum">     374 </span>            :                 const AliRegionalHeader* fNext;  ///&lt; Pointer to next regional header.
<span class="lineNum">     375 </span>            :                 UInt_t fLocalsCount;  ///&lt; The number of AliLocalStruct objects found in the array pointed to by fFirstLocal.
<span class="lineNum">     376 </span>            :                 const AliLocalStruct* fFirstLocal;  ///&lt; The first local trigger structure of this regional structure.
<span class="lineNum">     377 </span>            :                 const AliMUONRegionalHeaderStruct* fHeader;  ///&lt; Pointer to the regional header in the DDL payload.
<span class="lineNum">     378 </span>            :                 const AliMUONRegionalScalarsStruct* fScalars;  ///&lt; Pointer to the regional scalars in the DDL payload.
<span class="lineNum">     379 </span>            :         };
<span class="lineNum">     380 </span>            :         
<span class="lineNum">     381 </span>            :         /// Light weight interface class to the local trigger card data.
<span class="lineNum">     382 </span>            :         class AliLocalStruct
<span class="lineNum">     383 </span>            :         {
<a name="384"><span class="lineNum">     384 </span>            :         public:</a>
<span class="lineNum">     385 </span>            :                 /// Default constructor.
<span class="lineNum">     386 </span>            :                 AliLocalStruct(
<span class="lineNum">     387 </span>            :                                 const AliRegionalHeader* regionalHeader = NULL,
<span class="lineNum">     388 </span>            :                                 const AliMUONLocalInfoStruct* localStruct = NULL,
<span class="lineNum">     389 </span>            :                                 const AliMUONLocalScalarsStruct* scalars = NULL
<span class="lineNum">     390 </span>            :                         ) :
<span class="lineNum">     391 </span><span class="lineCov">       4240 :                         fRegional(regionalHeader), fNext(NULL),</span>
<span class="lineNum">     392 </span><span class="lineCov">       2120 :                         fLocalStruct(localStruct), fScalars(scalars),</span>
<span class="lineNum">     393 </span><span class="lineCov">       2120 :                         fCalculatedId(0)</span>
<span class="lineNum">     394 </span><span class="lineCov">       4240 :                 {</span>
<span class="lineNum">     395 </span><span class="lineCov">       4240 :                 }</span>
<a name="396"><span class="lineNum">     396 </span>            :                 </a>
<span class="lineNum">     397 </span>            :                 /// Implement shallow copying in the copy constructor.
<span class="lineNum">     398 </span>            :                 AliLocalStruct(const AliLocalStruct&amp; o) :
<span class="lineNum">     399 </span><span class="lineNoCov">          0 :                         fRegional(o.fRegional), fNext(o.fNext),</span>
<span class="lineNum">     400 </span><span class="lineNoCov">          0 :                         fLocalStruct(o.fLocalStruct), fScalars(o.fScalars),</span>
<span class="lineNum">     401 </span><span class="lineNoCov">          0 :                         fCalculatedId(o.fCalculatedId)</span>
<span class="lineNum">     402 </span><span class="lineNoCov">          0 :                 {</span>
<span class="lineNum">     403 </span><span class="lineNoCov">          0 :                 }</span>
<a name="404"><span class="lineNum">     404 </span>            :                 </a>
<span class="lineNum">     405 </span>            :                 /// Implement shallow copying in the assignment operator.
<span class="lineNum">     406 </span>            :                 AliLocalStruct&amp; operator = (const AliLocalStruct&amp; object)
<span class="lineNum">     407 </span>            :                 {
<span class="lineNum">     408 </span><span class="lineCov">       1936 :                         memcpy(this, &amp;object, sizeof(AliLocalStruct));</span>
<span class="lineNum">     409 </span><span class="lineCov">        968 :                         return *this;</span>
<span class="lineNum">     410 </span>            :                 }
<a name="411"><span class="lineNum">     411 </span>            :         </a>
<span class="lineNum">     412 </span>            :                 /// Default destructor.
<span class="lineNum">     413 </span><span class="lineCov">       6432 :                 ~AliLocalStruct() {};</span>
<a name="414"><span class="lineNum">     414 </span>            :                 </a>
<span class="lineNum">     415 </span>            :                 /// Return local data
<span class="lineNum">     416 </span>            :                 UInt_t GetData(Int_t n) const
<span class="lineNum">     417 </span>            :                 {
<span class="lineNum">     418 </span><span class="lineNoCov">          0 :                         assert(n &lt; 5);</span>
<span class="lineNum">     419 </span><span class="lineNoCov">          0 :                         return (reinterpret_cast&lt;const UInt_t*&gt;(fLocalStruct))[n];</span>
<span class="lineNum">     420 </span>            :                 }
<a name="421"><span class="lineNum">     421 </span>            :         </a>
<span class="lineNum">     422 </span>            :                 /// Return X2
<a name="423"><span class="lineNum">     423 </span><span class="lineCov">       3872 :                 UShort_t GetX2() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalX2(fLocalStruct);}</span></a>
<span class="lineNum">     424 </span>            :                 /// Return X1
<a name="425"><span class="lineNum">     425 </span><span class="lineCov">       3872 :                 UShort_t GetX1() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalX1(fLocalStruct);}</span></a>
<span class="lineNum">     426 </span>            :                 /// Return X4
<a name="427"><span class="lineNum">     427 </span><span class="lineCov">       3872 :                 UShort_t GetX4() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalX4(fLocalStruct);}</span></a>
<span class="lineNum">     428 </span>            :                 /// Return X3
<span class="lineNum">     429 </span><span class="lineCov">       3872 :                 UShort_t GetX3() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalX3(fLocalStruct);}</span>
<a name="430"><span class="lineNum">     430 </span>            :         </a>
<span class="lineNum">     431 </span>            :                 /// Return Y2
<a name="432"><span class="lineNum">     432 </span><span class="lineCov">       3872 :                 UShort_t GetY2() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalY2(fLocalStruct);}</span></a>
<span class="lineNum">     433 </span>            :                 /// Return Y1
<a name="434"><span class="lineNum">     434 </span><span class="lineCov">       3872 :                 UShort_t GetY1() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalY1(fLocalStruct);}</span></a>
<span class="lineNum">     435 </span>            :                 /// Return Y4
<a name="436"><span class="lineNum">     436 </span><span class="lineCov">       3872 :                 UShort_t GetY4() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalY4(fLocalStruct);}</span></a>
<span class="lineNum">     437 </span>            :                 /// Return Y3
<span class="lineNum">     438 </span><span class="lineCov">       3872 :                 UShort_t GetY3() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalY3(fLocalStruct);}</span>
<a name="439"><span class="lineNum">     439 </span>            :                 </a>
<span class="lineNum">     440 </span>            :                 /// return X pattern array
<span class="lineNum">     441 </span>            :                 void GetXPattern(TArrayS&amp; array) const
<span class="lineNum">     442 </span>            :                 {
<span class="lineNum">     443 </span><span class="lineCov">       1936 :                         Short_t vec[4] = {static_cast&lt;Short_t&gt;(GetX1()), static_cast&lt;Short_t&gt;(GetX2()), static_cast&lt;Short_t&gt;(GetX3()), static_cast&lt;Short_t&gt;(GetX4())};</span>
<span class="lineNum">     444 </span><span class="lineCov">        968 :                         array.Set(4, vec);</span>
<span class="lineNum">     445 </span><span class="lineCov">        968 :                 }</span>
<a name="446"><span class="lineNum">     446 </span>            :         </a>
<span class="lineNum">     447 </span>            :                 /// return Y pattern array
<span class="lineNum">     448 </span>            :                 void GetYPattern(TArrayS&amp; array) const
<span class="lineNum">     449 </span>            :                 {
<span class="lineNum">     450 </span><span class="lineCov">       1936 :                         Short_t vec[4] = {static_cast&lt;Short_t&gt;(GetY1()), static_cast&lt;Short_t&gt;(GetY2()), static_cast&lt;Short_t&gt;(GetY3()), static_cast&lt;Short_t&gt;(GetY4())};</span>
<span class="lineNum">     451 </span><span class="lineCov">        968 :                         array.Set(4, vec);</span>
<span class="lineNum">     452 </span><span class="lineCov">        968 :                 }</span>
<a name="453"><span class="lineNum">     453 </span>            :         </a>
<span class="lineNum">     454 </span>            :                 /// Return Id
<a name="455"><span class="lineNum">     455 </span><span class="lineCov">       3872 :                 UChar_t GetId() const {return fgOverrideId ? fCalculatedId : AliMUONTriggerDDLDecoderEventHandler::GetLocalId(fLocalStruct);}</span></a>
<span class="lineNum">     456 </span>            :                 /// Return Dec
<a name="457"><span class="lineNum">     457 </span><span class="lineNoCov">          0 :                 UChar_t GetDec() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalDec(fLocalStruct);}</span></a>
<span class="lineNum">     458 </span>            :                 /// Return TrigY
<a name="459"><span class="lineNum">     459 </span><span class="lineCov">       1936 :                 Bool_t GetTrigY() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalTrigY(fLocalStruct);}</span></a>
<span class="lineNum">     460 </span>            :                 /// Return TriggerY
<a name="461"><span class="lineNum">     461 </span><span class="lineNoCov">          0 :                 Bool_t GetTriggerY() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalTriggerY(fLocalStruct);}</span></a>
<span class="lineNum">     462 </span>            :                 /// Return Upos
<a name="463"><span class="lineNum">     463 </span><span class="lineCov">       1936 :                 UChar_t GetYPos() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalYPos(fLocalStruct);}</span></a>
<span class="lineNum">     464 </span>            :                 /// Get Sign of X deviation 
<a name="465"><span class="lineNum">     465 </span><span class="lineCov">       1936 :                 Bool_t GetSXDev() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalSXDev(fLocalStruct);}</span></a>
<span class="lineNum">     466 </span>            :                 /// Get X deviation 
<a name="467"><span class="lineNum">     467 </span><span class="lineCov">       1936 :                 UChar_t GetXDev() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalXDev(fLocalStruct);}</span></a>
<span class="lineNum">     468 </span>            :                 /// Return TriggerX
<a name="469"><span class="lineNum">     469 </span><span class="lineNoCov">          0 :                 Bool_t GetTriggerX() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalTriggerX(fLocalStruct);}</span></a>
<span class="lineNum">     470 </span>            :                 /// Return Xpos
<a name="471"><span class="lineNum">     471 </span><span class="lineCov">       1936 :                 UChar_t GetXPos() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalXPos(fLocalStruct);}</span></a>
<span class="lineNum">     472 </span>            :                 /// Return LPT
<a name="473"><span class="lineNum">     473 </span><span class="lineCov">       1936 :                 UChar_t GetLpt() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalLpt(fLocalStruct);}</span></a>
<span class="lineNum">     474 </span>            :                 /// Return HPT
<span class="lineNum">     475 </span><span class="lineCov">       1936 :                 UChar_t GetHpt() const {return AliMUONTriggerDDLDecoderEventHandler::GetLocalHpt(fLocalStruct);}</span>
<span class="lineNum">     476 </span>            :                 
<a name="477"><span class="lineNum">     477 </span>            :                 // Scaler methods</a>
<span class="lineNum">     478 </span>            :                 /// Return local L0
<a name="479"><span class="lineNum">     479 </span><span class="lineNoCov">          0 :                 UInt_t  GetL0()      const {return (fScalars != NULL) ? fScalars-&gt;fL0 : 0;}</span></a>
<span class="lineNum">     480 </span>            :                 /// Return local hold (dead time)
<a name="481"><span class="lineNum">     481 </span><span class="lineNoCov">          0 :                 UInt_t  GetHold()    const {return (fScalars != NULL) ? fScalars-&gt;fHold : 0;}</span></a>
<span class="lineNum">     482 </span>            :                 /// Return local clock
<span class="lineNum">     483 </span><span class="lineNoCov">          0 :                 UInt_t  GetClock()   const {return (fScalars != NULL) ? fScalars-&gt;fClk : 0;}</span>
<a name="484"><span class="lineNum">     484 </span>            :                 </a>
<span class="lineNum">     485 </span>            :                 /// Return switch
<span class="lineNum">     486 </span>            :                 UShort_t GetSwitch() const
<span class="lineNum">     487 </span>            :                 {
<span class="lineNum">     488 </span><span class="lineNoCov">          0 :                         return (fScalars != NULL) ?</span>
<span class="lineNum">     489 </span><span class="lineNoCov">          0 :                                 AliMUONTriggerDDLDecoderEventHandler::GetLocalSwitch(fScalars) : 0;</span>
<span class="lineNum">     490 </span>            :                 }
<a name="491"><span class="lineNum">     491 </span>            :                 </a>
<span class="lineNum">     492 </span>            :                 /// Return ComptXY
<span class="lineNum">     493 </span>            :                 UChar_t GetComptXY() const
<span class="lineNum">     494 </span>            :                 {
<span class="lineNum">     495 </span><span class="lineNoCov">          0 :                         return (fScalars != NULL) ?</span>
<span class="lineNum">     496 </span><span class="lineNoCov">          0 :                                 AliMUONTriggerDDLDecoderEventHandler::GetLocalComptXY(fScalars) : 0;</span>
<span class="lineNum">     497 </span>            :                 }
<a name="498"><span class="lineNum">     498 </span>            :         </a>
<span class="lineNum">     499 </span>            :                 /// Return XY1
<span class="lineNum">     500 </span>            :                 UShort_t GetXY1(Int_t n) const
<span class="lineNum">     501 </span>            :                 {
<span class="lineNum">     502 </span><span class="lineNoCov">          0 :                         return (fScalars != NULL) ?</span>
<span class="lineNum">     503 </span><span class="lineNoCov">          0 :                                 AliMUONTriggerDDLDecoderEventHandler::GetLocalXY1(fScalars, n) : 0;</span>
<span class="lineNum">     504 </span>            :                 }
<a name="505"><span class="lineNum">     505 </span>            :         </a>
<span class="lineNum">     506 </span>            :                 /// Return XY2
<span class="lineNum">     507 </span>            :                 UShort_t GetXY2(Int_t n) const
<span class="lineNum">     508 </span>            :                 {
<span class="lineNum">     509 </span><span class="lineNoCov">          0 :                         return (fScalars != NULL) ?</span>
<span class="lineNum">     510 </span><span class="lineNoCov">          0 :                                 AliMUONTriggerDDLDecoderEventHandler::GetLocalXY2(fScalars, n) : 0;</span>
<span class="lineNum">     511 </span>            :                 }
<a name="512"><span class="lineNum">     512 </span>            :         </a>
<span class="lineNum">     513 </span>            :                 /// Return XY3
<span class="lineNum">     514 </span>            :                 UShort_t GetXY3(Int_t n) const
<span class="lineNum">     515 </span>            :                 {
<span class="lineNum">     516 </span><span class="lineNoCov">          0 :                         return (fScalars != NULL) ?</span>
<span class="lineNum">     517 </span><span class="lineNoCov">          0 :                                 AliMUONTriggerDDLDecoderEventHandler::GetLocalXY3(fScalars, n) : 0;</span>
<span class="lineNum">     518 </span>            :                 }
<a name="519"><span class="lineNum">     519 </span>            :         </a>
<span class="lineNum">     520 </span>            :                 /// Return XY4
<span class="lineNum">     521 </span>            :                 UShort_t GetXY4(Int_t n) const
<span class="lineNum">     522 </span>            :                 {
<span class="lineNum">     523 </span><span class="lineNoCov">          0 :                         return (fScalars != NULL) ?</span>
<span class="lineNum">     524 </span><span class="lineNoCov">          0 :                                 AliMUONTriggerDDLDecoderEventHandler::GetLocalXY4(fScalars, n) : 0;</span>
<span class="lineNum">     525 </span>            :                 }
<a name="526"><span class="lineNum">     526 </span>            : </a>
<span class="lineNum">     527 </span>            :                 /// Return raw data of the local trigger structure.
<span class="lineNum">     528 </span><span class="lineNoCov">          0 :                 const AliMUONLocalInfoStruct* GetData() const {return fLocalStruct;}</span>
<span class="lineNum">     529 </span>            :                 
<a name="530"><span class="lineNum">     530 </span>            :                 /// Return raw data of the local trigger scalars.</a>
<span class="lineNum">     531 </span>            :                 /// Could be NULL if no scalars present.
<span class="lineNum">     532 </span><span class="lineNoCov">          0 :                 const AliMUONLocalScalarsStruct* GetScalars() const {return fScalars;}</span>
<a name="533"><span class="lineNum">     533 </span>            :                 </a>
<span class="lineNum">     534 </span>            :                 /// Return the parent regional header.
<span class="lineNum">     535 </span><span class="lineNoCov">          0 :                 const AliRegionalHeader* GetRegionalHeader() const { return fRegional; }</span>
<a name="536"><span class="lineNum">     536 </span>            :                 </a>
<span class="lineNum">     537 </span>            :                 /// Return the next local trigger structure.
<span class="lineNum">     538 </span><span class="lineNoCov">          0 :                 const AliLocalStruct* Next() const { return fNext; }</span>
<a name="539"><span class="lineNum">     539 </span>            :                 </a>
<span class="lineNum">     540 </span>            :                 /// Sets the next local trigger structure.
<span class="lineNum">     541 </span><span class="lineCov">       1808 :                 void SetNext(const AliLocalStruct* next) { fNext = next; }</span>
<a name="542"><span class="lineNum">     542 </span>            :         </a>
<span class="lineNum">     543 </span>            :                 /// Sets the calculated ID value to be returned by GetId if fgOverrideId is true.
<span class="lineNum">     544 </span><span class="lineCov">       1936 :                 void SetCalculatedId(UChar_t id) { fCalculatedId = id; }</span>
<span class="lineNum">     545 </span>            :                 
<span class="lineNum">     546 </span>            :                 /// Print the contents of the local trigger structure and contents to screen.
<span class="lineNum">     547 </span>            :                 void Print() const;
<a name="548"><span class="lineNum">     548 </span>            :                 </a>
<span class="lineNum">     549 </span>            :                 /// Returns the override flag indicating if the GetId method should return the calculated Id value or not.
<span class="lineNum">     550 </span><span class="lineNoCov">          0 :                 static bool GetOverrideIdFlag() { return fgOverrideId; }</span>
<a name="551"><span class="lineNum">     551 </span>            :                 </a>
<span class="lineNum">     552 </span>            :                 /// Sets the override flag to control what value the GetId method returns.
<span class="lineNum">     553 </span><span class="lineNoCov">          0 :                 static void SetOverrideIdFlag(bool value) { fgOverrideId = value; }</span>
<span class="lineNum">     554 </span>            :         
<span class="lineNum">     555 </span>            :         private:
<span class="lineNum">     556 </span>            :         
<span class="lineNum">     557 </span>            :                 const AliRegionalHeader* fRegional;  ///&lt; The regional structure this local trigger structure belongs to.
<span class="lineNum">     558 </span>            :                 const AliLocalStruct* fNext;  ///&lt; Next local structure object in the regional structure.
<span class="lineNum">     559 </span>            :                 const AliMUONLocalInfoStruct* fLocalStruct;  ///&lt; Pointer to the local trigger structure data in the DDL payload.
<span class="lineNum">     560 </span>            :                 const AliMUONLocalScalarsStruct* fScalars;  ///&lt; Pointer to the local trigger scalars data in the DDL payload.
<span class="lineNum">     561 </span>            :                 UChar_t fCalculatedId;  ///&lt; Calculated ID value returned by GetId() if fgOverrideId == true.
<span class="lineNum">     562 </span>            :                 static bool fgOverrideId; //!&lt;! Flag indicating if we should return a calculated number in the GetId method.
<span class="lineNum">     563 </span>            :         };
<a name="564"><span class="lineNum">     564 </span>            :         </a>
<span class="lineNum">     565 </span>            :         /// Returns the DARC and global headers plus scalars if they exist.
<span class="lineNum">     566 </span><span class="lineCov">         16 :         const AliHeader* GetHeaders() const { return fDecoder.GetHandler().GetHeaders(); }</span>
<a name="567"><span class="lineNum">     567 </span>            :         </a>
<span class="lineNum">     568 </span>            :         /// Return the number of regional structures in the DDL payload.
<span class="lineNum">     569 </span>            :         UInt_t GetRegionalHeaderCount() const
<span class="lineNum">     570 </span>            :         {
<span class="lineNum">     571 </span><span class="lineCov">         16 :                 return fDecoder.GetHandler().RegionalHeaderCount();</span>
<span class="lineNum">     572 </span>            :         }
<a name="573"><span class="lineNum">     573 </span>            :         </a>
<span class="lineNum">     574 </span>            :         /// Return the first regional structure header.
<span class="lineNum">     575 </span>            :         const AliRegionalHeader* GetFirstRegionalHeader() const
<span class="lineNum">     576 </span>            :         {
<span class="lineNum">     577 </span><span class="lineNoCov">          0 :                 return fDecoder.GetHandler().RegionalHeader(0);</span>
<span class="lineNum">     578 </span>            :         }
<a name="579"><span class="lineNum">     579 </span>            :         </a>
<span class="lineNum">     580 </span>            :         /// Return the i'th regional header or NULL if not found.
<span class="lineNum">     581 </span>            :         const AliRegionalHeader* GetRegionalHeader(UInt_t i) const
<span class="lineNum">     582 </span>            :         {
<span class="lineNum">     583 </span><span class="lineCov">        128 :                 return fDecoder.GetHandler().RegionalHeader(i);</span>
<span class="lineNum">     584 </span>            :         }
<span class="lineNum">     585 </span>            :         
<a name="586"><span class="lineNum">     586 </span>            :         /// Returns the number of local trigger structures for the given</a>
<span class="lineNum">     587 </span>            :         /// regional structure number.
<span class="lineNum">     588 </span>            :         UInt_t GetLocalStructCount(UInt_t reg) const
<span class="lineNum">     589 </span>            :         {
<span class="lineNum">     590 </span><span class="lineNoCov">          0 :                 const AliRegionalHeader* r = GetRegionalHeader(reg);</span>
<span class="lineNum">     591 </span><span class="lineNoCov">          0 :                 return r != NULL ? r-&gt;GetLocalStructCount() : 0;</span>
<span class="lineNum">     592 </span>            :         }
<span class="lineNum">     593 </span>            :         
<a name="594"><span class="lineNum">     594 </span>            :         /// Returns the i'th local trigger structure for the given regional</a>
<span class="lineNum">     595 </span>            :         /// structure number or NULL if not found.
<span class="lineNum">     596 </span>            :         const AliLocalStruct* GetLocalStruct(UInt_t reg, UInt_t i) const
<span class="lineNum">     597 </span>            :         {
<span class="lineNum">     598 </span><span class="lineNoCov">          0 :                 const AliRegionalHeader* r = GetRegionalHeader(reg);</span>
<span class="lineNum">     599 </span><span class="lineNoCov">          0 :                 return r != NULL ? r-&gt;GetLocalStruct(i) : NULL;</span>
<span class="lineNum">     600 </span>            :         }
<a name="601"><span class="lineNum">     601 </span>            : </a>
<span class="lineNum">     602 </span>            :         /// Returns the current local struct being decoded or NULL if none found.
<span class="lineNum">     603 </span>            :         const AliLocalStruct* CurrentLocalStruct() const
<span class="lineNum">     604 </span>            :         {
<span class="lineNum">     605 </span><span class="lineNoCov">          0 :                 return (fkCurrentLocalStruct != fDecoder.GetHandler().EndOfLocalStructs()) ?</span>
<span class="lineNum">     606 </span><span class="lineNoCov">          0 :                         fkCurrentLocalStruct : NULL;</span>
<span class="lineNum">     607 </span>            :         }
<span class="lineNum">     608 </span>            : 
<a name="609"><span class="lineNum">     609 </span>            :         /// Returns the current regional structure being decoded</a>
<span class="lineNum">     610 </span>            :         /// or NULL if none found.
<span class="lineNum">     611 </span>            :         const AliRegionalHeader* CurrentRegionalHeader() const
<span class="lineNum">     612 </span>            :         {
<span class="lineNum">     613 </span><span class="lineNoCov">          0 :                 const AliLocalStruct* local = CurrentLocalStruct();</span>
<span class="lineNum">     614 </span><span class="lineNoCov">          0 :                 return (local != NULL) ? local-&gt;GetRegionalHeader() : NULL;</span>
<span class="lineNum">     615 </span>            :         }
<span class="lineNum">     616 </span>            :         
<span class="lineNum">     617 </span>            : private:
<span class="lineNum">     618 </span>            :         /// Not implemented
<span class="lineNum">     619 </span>            :         AliMUONRawStreamTriggerHP(const AliMUONRawStreamTriggerHP&amp; stream);
<span class="lineNum">     620 </span>            :         /// Not implemented
<span class="lineNum">     621 </span>            :         AliMUONRawStreamTriggerHP&amp; operator = (const AliMUONRawStreamTriggerHP&amp; stream);
<span class="lineNum">     622 </span>            :         
<span class="lineNum">     623 </span>            :         
<span class="lineNum">     624 </span>            :         /// This is the custom event handler (callback interface) class which
<span class="lineNum">     625 </span>            :         /// unpacks raw data words and fills an internal buffer with decoded digits
<span class="lineNum">     626 </span>            :         /// as they are decoded by the high performance decoder.
<span class="lineNum">     627 </span>            :         /// Any errors are logged to the parent AliMUONVRawStreamTrigger, so one
<span class="lineNum">     628 </span>            :         /// must set this pointer appropriately before decoding and DDL payload.
<span class="lineNum">     629 </span>            :         class AliDecoderEventHandler : public AliMUONTriggerDDLDecoderEventHandler
<span class="lineNum">     630 </span>            :         {
<span class="lineNum">     631 </span>            :         public:
<span class="lineNum">     632 </span>            :         
<span class="lineNum">     633 </span>            :                 /// Default constructor.
<span class="lineNum">     634 </span>            :                 AliDecoderEventHandler();
<span class="lineNum">     635 </span>            :                 /// Default destructor.
<span class="lineNum">     636 </span>            :                 virtual ~AliDecoderEventHandler();
<span class="lineNum">     637 </span>            :                 
<span class="lineNum">     638 </span>            :                 /// Sets the internal arrays based on the maximum number of structures allowed.
<span class="lineNum">     639 </span>            :                 void SetMaxStructs(UInt_t maxRegionals, UInt_t maxLocals);
<a name="640"><span class="lineNum">     640 </span>            :                 </a>
<span class="lineNum">     641 </span>            :                 /// Sets the raw stream object which should be the parent of this class.
<span class="lineNum">     642 </span><span class="lineCov">         18 :                 void SetRawStream(AliMUONVRawStreamTrigger* rawStream) { fRawStream = rawStream; }</span>
<a name="643"><span class="lineNum">     643 </span>            :                 </a>
<span class="lineNum">     644 </span>            :                 /// Returns the decoded DARC and global headers (and scalars if they exist).
<span class="lineNum">     645 </span><span class="lineCov">         16 :                 const AliHeader* GetHeaders() const { return &amp;fHeaders; }</span>
<a name="646"><span class="lineNum">     646 </span>            :                 </a>
<span class="lineNum">     647 </span>            :                 /// Returns the number of regional headers.
<span class="lineNum">     648 </span><span class="lineCov">         16 :                 UInt_t RegionalHeaderCount() const { return fRegionalsCount; }</span>
<a name="649"><span class="lineNum">     649 </span>            :                 </a>
<span class="lineNum">     650 </span>            :                 /// Return the i'th regional structure header.
<span class="lineNum">     651 </span>            :                 const AliRegionalHeader* RegionalHeader(UInt_t i) const
<span class="lineNum">     652 </span>            :                 {
<span class="lineNum">     653 </span><span class="lineCov">        256 :                         return i &lt; fRegionalsCount ? &amp;fRegionals[i] : NULL;</span>
<span class="lineNum">     654 </span>            :                 }
<a name="655"><span class="lineNum">     655 </span>            :                 </a>
<span class="lineNum">     656 </span>            :                 /// Return the first local structure decoded.
<span class="lineNum">     657 </span><span class="lineCov">         16 :                 const AliLocalStruct* FirstLocalStruct() const { return fLocals; }</span>
<span class="lineNum">     658 </span>            :                 
<a name="659"><span class="lineNum">     659 </span>            :                 /// Returns the marker to the end of local structures.</a>
<span class="lineNum">     660 </span>            :                 /// i.e. one position past the last local structure in fLocals.
<span class="lineNum">     661 </span><span class="lineNoCov">          0 :                 const AliLocalStruct* EndOfLocalStructs() const { return fEndOfLocals; }</span>
<a name="662"><span class="lineNum">     662 </span>            :                 </a>
<span class="lineNum">     663 </span>            :                 /// Get number of end of DARC word errors.
<span class="lineNum">     664 </span><span class="lineCov">         16 :                 UInt_t GetDarcEoWErrors() const {return fDarcEoWErrors;}</span>
<a name="665"><span class="lineNum">     665 </span>            :                 </a>
<span class="lineNum">     666 </span>            :                 /// Get number of end of Global word errors.
<span class="lineNum">     667 </span><span class="lineCov">         16 :                 UInt_t GetGlobalEoWErrors() const {return fGlobalEoWErrors;}</span>
<a name="668"><span class="lineNum">     668 </span>            :                 </a>
<span class="lineNum">     669 </span>            :                 /// Get number of end of regional word errors.
<span class="lineNum">     670 </span><span class="lineCov">         16 :                 UInt_t GetRegEoWErrors() const {return fRegEoWErrors;}</span>
<a name="671"><span class="lineNum">     671 </span>            :                 </a>
<span class="lineNum">     672 </span>            :                 /// Get number of end of local word errors.
<span class="lineNum">     673 </span><span class="lineCov">         16 :                 UInt_t GetLocalEoWErrors() const {return fLocalEoWErrors;}</span>
<span class="lineNum">     674 </span>            : 
<span class="lineNum">     675 </span>            :                 /// Returns the warnings flag.
<a name="676"><span class="lineNum">     676 </span>            :                 Bool_t Warnings() const { return fWarnings; }</a>
<span class="lineNum">     677 </span>            :                 /// Sets the warnings flag.
<span class="lineNum">     678 </span><span class="lineNoCov">          0 :                 void Warnings(Bool_t value) { fWarnings = value; }</span>
<span class="lineNum">     679 </span>            :                 
<span class="lineNum">     680 </span>            :                 // The following methods are inherited from AliMUONTriggerDDLDecoderEventHandler:
<span class="lineNum">     681 </span>            :                 
<span class="lineNum">     682 </span>            :                 /// New buffer handler.
<span class="lineNum">     683 </span>            :                 void OnNewBuffer(const void* buffer, UInt_t bufferSize);
<a name="684"><span class="lineNum">     684 </span>            : </a>
<span class="lineNum">     685 </span>            :                 /// End of buffer handler marks the end of local trigger structures.
<span class="lineNum">     686 </span>            :                 void OnEndOfBuffer(const void* /*buffer*/, UInt_t /*bufferSize*/)
<span class="lineNum">     687 </span>            :                 {
<span class="lineNum">     688 </span><span class="lineCov">         16 :                         fEndOfLocals = fCurrentLocal+1;</span>
<span class="lineNum">     689 </span><span class="lineCov">          8 :                 }</span>
<a name="690"><span class="lineNum">     690 </span>            :                 </a>
<span class="lineNum">     691 </span>            :                 /// Handler for the DARC header which just remembers the pointers for later.
<span class="lineNum">     692 </span>            :                 void OnDarcHeader(UInt_t header,
<span class="lineNum">     693 </span>            :                                   const AliMUONDarcScalarsStruct* scalars,
<span class="lineNum">     694 </span>            :                                   const void* /*data*/)
<span class="lineNum">     695 </span>            :                 {
<span class="lineNum">     696 </span><span class="lineCov">         16 :                         fDarcHeader = header;</span>
<span class="lineNum">     697 </span><span class="lineCov">          8 :                         fDarcScalars = scalars;</span>
<span class="lineNum">     698 </span><span class="lineCov">          8 :                 }</span>
<a name="699"><span class="lineNum">     699 </span>            :                 </a>
<span class="lineNum">     700 </span>            :                 /// Handler for the global header which stores the pointer to the headers.
<span class="lineNum">     701 </span>            :                 void OnGlobalHeader(const AliMUONGlobalHeaderStruct* header,
<span class="lineNum">     702 </span>            :                                     const AliMUONGlobalScalarsStruct* scalars,
<span class="lineNum">     703 </span>            :                                     const void* /*data*/)
<span class="lineNum">     704 </span>            :                 {
<span class="lineNum">     705 </span><span class="lineCov">         16 :                         fHeaders = AliHeader(fDarcHeader, fDarcScalars, header, scalars);</span>
<span class="lineNum">     706 </span><span class="lineCov">          8 :                 }</span>
<span class="lineNum">     707 </span>            :                 
<span class="lineNum">     708 </span>            :                 /// Handler for new regional card structures.
<span class="lineNum">     709 </span>            :                 void OnNewRegionalStructV2(UInt_t iReg,
<span class="lineNum">     710 </span>            :                                            const AliMUONRegionalHeaderStruct* header,
<span class="lineNum">     711 </span>            :                                            const AliMUONRegionalScalarsStruct* scalars,
<span class="lineNum">     712 </span>            :                                            const void* data);
<span class="lineNum">     713 </span>            :                 
<span class="lineNum">     714 </span>            :                 /// Handler for new local card structures.
<span class="lineNum">     715 </span>            :                 void OnLocalStructV2(UInt_t iLoc,
<span class="lineNum">     716 </span>            :                                      const AliMUONLocalInfoStruct* localStruct,
<span class="lineNum">     717 </span>            :                                      const AliMUONLocalScalarsStruct* scalars);
<span class="lineNum">     718 </span>            :                 
<span class="lineNum">     719 </span>            :                 /// Error handler.
<span class="lineNum">     720 </span>            :                 void OnError(ErrorCode error, const void* location);
<span class="lineNum">     721 </span>            :         
<span class="lineNum">     722 </span>            :         private:
<span class="lineNum">     723 </span>            :         
<span class="lineNum">     724 </span>            :                 // Do not allow copying of this class.
<span class="lineNum">     725 </span>            :                 /// Not implemented
<span class="lineNum">     726 </span>            :                 AliDecoderEventHandler(const AliDecoderEventHandler&amp; /*obj*/);
<span class="lineNum">     727 </span>            :                 /// Not implemented
<span class="lineNum">     728 </span>            :                 AliDecoderEventHandler&amp; operator = (const AliDecoderEventHandler&amp; /*obj*/);
<span class="lineNum">     729 </span>            : 
<span class="lineNum">     730 </span>            :                 AliMUONVRawStreamTrigger* fRawStream; //!&lt;! Pointer to the parent raw stream object.
<span class="lineNum">     731 </span>            :                 const void* fBufferStart;   //!&lt;! Pointer to the start of the current DDL payload buffer.
<span class="lineNum">     732 </span>            :                 UInt_t fDarcHeader; //!&lt;! Currently decoded DARC header.
<span class="lineNum">     733 </span>            :                 const AliMUONDarcScalarsStruct* fDarcScalars; //!&lt;! Currently decoded DARC scalars.
<span class="lineNum">     734 </span>            :                 AliHeader fHeaders;  //!&lt;! Headers of the DDL payload.
<span class="lineNum">     735 </span>            :                 UInt_t fRegionalsCount; //!&lt;! Number of regional headers filled in fRegionals.
<span class="lineNum">     736 </span>            :                 AliRegionalHeader* fRegionals;  //!&lt;! Array of regional headers. [0..fMaxRegionals-1]
<span class="lineNum">     737 </span>            :                 AliLocalStruct* fLocals; //!&lt;! Array of decoded local structured. [0..fMaxRegionals*fMaxLocals-1]
<span class="lineNum">     738 </span>            :                 AliLocalStruct* fEndOfLocals; //!&lt;! Marker indicating the position just passed the last filled element in fLocals.
<span class="lineNum">     739 </span>            :                 AliRegionalHeader* fCurrentRegional; //!&lt;! Current regional header position.
<span class="lineNum">     740 </span>            :                 AliLocalStruct* fCurrentLocal; //!&lt;! Current local trigger structure.
<span class="lineNum">     741 </span>            :                 UInt_t fDarcEoWErrors;    //!&lt;! Number of end of DARC word errors.
<span class="lineNum">     742 </span>            :                 UInt_t fGlobalEoWErrors;  //!&lt;! Number of end of global word errors.
<span class="lineNum">     743 </span>            :                 UInt_t fRegEoWErrors;     //!&lt;! Number of end of regional word errors.
<span class="lineNum">     744 </span>            :                 UInt_t fLocalEoWErrors;   //!&lt;! Number of end of local word errors.
<span class="lineNum">     745 </span>            :                 Bool_t fWarnings;       //!&lt;! Flag indicating if we should generate a warning for errors.
<span class="lineNum">     746 </span>            :                 
<span class="lineNum">     747 </span>            :                 static const AliMUONRegionalHeaderStruct fgkEmptyHeader;  //!&lt;! Empty header for skipped regional structures.
<span class="lineNum">     748 </span>            :         };
<span class="lineNum">     749 </span>            :         
<span class="lineNum">     750 </span>            :         AliMUONTriggerDDLDecoder&lt;AliDecoderEventHandler&gt; fDecoder;  //!&lt;! The decoder for the DDL payload.
<span class="lineNum">     751 </span>            :         Int_t fDDL;         //!&lt;! The current DDL number being handled.
<span class="lineNum">     752 </span>            :         Int_t fBufferSize;  //!&lt;! This is the buffer size in bytes of fBuffer.
<span class="lineNum">     753 </span>            :         UChar_t* fBuffer;   //!&lt;! This is the buffer in which we store the DDL payload read from AliRawReader.
<span class="lineNum">     754 </span>            :         const AliLocalStruct* fkCurrentLocalStruct;  //!&lt;! The current local trigger structure being handled by Next().
<span class="lineNum">     755 </span>            :         Bool_t fHadError;   //!&lt;! Flag indicating if there was a decoding error or not.
<span class="lineNum">     756 </span>            :         Bool_t fDone;       //!&lt;! Flag indicating if the iteration is done or not.
<span class="lineNum">     757 </span>            :         mutable AliMUONDDLTrigger* fDDLObject; //!&lt;! Temporary DDL object used by GetDDLTrigger() for caching.
<span class="lineNum">     758 </span>            :         UInt_t fTotalNumberOfDarcEoWErrors; //!&lt;! The total number of end of DARC word errors since the last call to First().
<span class="lineNum">     759 </span>            :         UInt_t fTotalNumberOfGlobalEoWErrors; //!&lt;! The total number of end of global word errors since the last call to First().
<span class="lineNum">     760 </span>            :         UInt_t fTotalNumberOfRegEoWErrors; //!&lt;! The total number of end of regional word errors since the last call to First().
<span class="lineNum">     761 </span>            :         UInt_t fTotalNumberOfLocalEoWErrors; //!&lt;! The total number of end of local word errors since the last call to First().
<span class="lineNum">     762 </span>            :         
<a name="763"><span class="lineNum">     763 </span>            :         static const Int_t  fgkMaxDDL;     //!&lt;! Maximum number of DDLs</a>
<span class="lineNum">     764 </span>            :         
<span class="lineNum">     765 </span><span class="lineCov">         34 :         ClassDef(AliMUONRawStreamTriggerHP, 0)  // Higher performance decoder class for MUON trigger rawdata.</span>
<span class="lineNum">     766 </span>            : };
<span class="lineNum">     767 </span>            : 
<a name="768"><span class="lineNum">     768 </span>            : ////////////////////////////////////////////////////////////////////////////////</a>
<span class="lineNum">     769 </span>            : 
<span class="lineNum">     770 </span>            : inline const AliMUONRawStreamTriggerHP::AliLocalStruct* AliMUONRawStreamTriggerHP::Next()
<span class="lineNum">     771 </span>            : {
<span class="lineNum">     772 </span>            :         /// Iterates through all the local trigger structures for the event.
<span class="lineNum">     773 </span>            :         /// When no more local triggers are found then NULL is returned.
<span class="lineNum">     774 </span>            : 
<span class="lineNum">     775 </span><span class="lineNoCov">          0 :         do {</span>
<span class="lineNum">     776 </span><span class="lineNoCov">          0 :                 if (fkCurrentLocalStruct != fDecoder.GetHandler().EndOfLocalStructs())</span>
<span class="lineNum">     777 </span><span class="lineNoCov">          0 :                         return fkCurrentLocalStruct++;</span>
<span class="lineNum">     778 </span><span class="lineNoCov">          0 :         } while (NextDDL());</span>
<span class="lineNum">     779 </span><span class="lineNoCov">          0 :         return NULL;</span>
<span class="lineNum">     780 </span><span class="lineNoCov">          0 : }</span>
<a name="781"><span class="lineNum">     781 </span>            : </a>
<span class="lineNum">     782 </span>            : 
<span class="lineNum">     783 </span>            : inline void AliMUONRawStreamTriggerHP::AliDecoderEventHandler::OnNewRegionalStructV2(
<span class="lineNum">     784 </span>            :                 UInt_t iReg,
<span class="lineNum">     785 </span>            :                 const AliMUONRegionalHeaderStruct* header,
<span class="lineNum">     786 </span>            :                 const AliMUONRegionalScalarsStruct* scalars,
<span class="lineNum">     787 </span>            :                 const void* /*data*/
<span class="lineNum">     788 </span>            :         )
<span class="lineNum">     789 </span>            : {
<span class="lineNum">     790 </span>            :         /// New regional structure handler is called by the decoder whenever a
<span class="lineNum">     791 </span>            :         /// new regional header is found. We just mark the header and increment
<span class="lineNum">     792 </span>            :         /// the appropriate counters.
<span class="lineNum">     793 </span>            :         
<span class="lineNum">     794 </span><span class="lineCov">        128 :         assert( header != NULL );</span>
<span class="lineNum">     795 </span><span class="lineCov">         64 :         assert( iReg &lt; fRegionalsCount );</span>
<span class="lineNum">     796 </span>            :         
<span class="lineNum">     797 </span><span class="lineCov">         64 :         fCurrentRegional = fRegionals+iReg;</span>
<span class="lineNum">     798 </span><span class="lineCov">         64 :         *fCurrentRegional = AliRegionalHeader(fCurrentLocal+1, header, scalars);</span>
<span class="lineNum">     799 </span>            :         
<span class="lineNum">     800 </span>            :         // Link to the next regional structure unless this is the last one.
<span class="lineNum">     801 </span><span class="lineCov">         64 :         if (iReg+1 &lt; fRegionalsCount)</span>
<span class="lineNum">     802 </span>            :         {
<span class="lineNum">     803 </span><span class="lineCov">         56 :                 fCurrentRegional-&gt;SetNext(fCurrentRegional+1);</span>
<span class="lineNum">     804 </span><span class="lineCov">         56 :         }</span>
<span class="lineNum">     805 </span><span class="lineCov">         64 : }</span>
<a name="806"><span class="lineNum">     806 </span>            : </a>
<span class="lineNum">     807 </span>            : 
<span class="lineNum">     808 </span>            : inline void AliMUONRawStreamTriggerHP::AliDecoderEventHandler::OnLocalStructV2(
<span class="lineNum">     809 </span>            :                 UInt_t iLoc,
<span class="lineNum">     810 </span>            :                 const AliMUONLocalInfoStruct* localStruct,
<span class="lineNum">     811 </span>            :                 const AliMUONLocalScalarsStruct* scalars
<span class="lineNum">     812 </span>            :         )
<span class="lineNum">     813 </span>            : {
<span class="lineNum">     814 </span>            :         /// New local trigger structure handler.
<span class="lineNum">     815 </span>            :         /// This is called by the high performance decoder when a new local trigger
<span class="lineNum">     816 </span>            :         /// structure is found within the DDL payload.
<span class="lineNum">     817 </span>            :         /// We mark the location of the structure in the DDL paytload and increment
<span class="lineNum">     818 </span>            :         /// appropriate counters.
<span class="lineNum">     819 </span>            : 
<span class="lineNum">     820 </span><span class="lineCov">       1936 :         assert( localStruct != NULL );</span>
<span class="lineNum">     821 </span><span class="lineCov">        968 :         assert( fCurrentLocal != NULL );</span>
<span class="lineNum">     822 </span><span class="lineCov">        968 :         assert( fCurrentRegional != NULL );</span>
<span class="lineNum">     823 </span><span class="lineCov">        968 :         assert( fCurrentRegional-&gt;GetLocalStructCount() &lt; (UInt_t)fRawStream-&gt;GetMaxLoc() );</span>
<span class="lineNum">     824 </span>            :         
<span class="lineNum">     825 </span>            :         // Link the previous local structure unless it is the first one. 
<span class="lineNum">     826 </span><span class="lineCov">        968 :         if (fCurrentRegional-&gt;GetLocalStructCount() &gt; 0)</span>
<span class="lineNum">     827 </span>            :         {
<span class="lineNum">     828 </span><span class="lineCov">        904 :                 fCurrentLocal-&gt;SetNext(fCurrentLocal+1);</span>
<span class="lineNum">     829 </span><span class="lineCov">        904 :         }</span>
<span class="lineNum">     830 </span>            :         
<span class="lineNum">     831 </span><span class="lineCov">        968 :         fCurrentLocal++;</span>
<span class="lineNum">     832 </span><span class="lineCov">        968 :         *fCurrentLocal = AliLocalStruct(fCurrentRegional, localStruct, scalars);</span>
<span class="lineNum">     833 </span><span class="lineCov">        968 :         fCurrentLocal-&gt;SetCalculatedId(iLoc);</span>
<span class="lineNum">     834 </span><span class="lineCov">        968 :         fCurrentRegional-&gt;IncLocalStructCount();</span>
<span class="lineNum">     835 </span><span class="lineCov">        968 : }</span>
<span class="lineNum">     836 </span>            : 
<span class="lineNum">     837 </span>            : #endif // ALIMUONRAWSTREAMTRIGGERHP_H
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
