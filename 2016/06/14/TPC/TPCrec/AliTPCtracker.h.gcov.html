<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - TPC/TPCrec/AliTPCtracker.h</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">TPC/TPCrec</a> - AliTPCtracker.h<span style="font-size: 80%;"> (source / <a href="AliTPCtracker.h.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">10</td>
            <td class="headerCovTableEntry">20</td>
            <td class="headerCovTableEntryLo">50.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">9</td>
            <td class="headerCovTableEntry">19</td>
            <td class="headerCovTableEntryLo">47.4 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : </a>
<span class="lineNum">       2 </span>            : #ifndef ALITPCTRACKER_H
<span class="lineNum">       3 </span>            : #define ALITPCTRACKER_H
<span class="lineNum">       4 </span>            : /* Copyright(c) 1998-1999, ALICE Experiment at CERN, All rights reserved. *
<span class="lineNum">       5 </span>            :  * See cxx source for full Copyright notice                               */
<span class="lineNum">       6 </span>            : 
<span class="lineNum">       7 </span>            : 
<span class="lineNum">       8 </span>            : /* $Id$ */
<span class="lineNum">       9 </span>            : 
<span class="lineNum">      10 </span>            : //-------------------------------------------------------
<span class="lineNum">      11 </span>            : //                       TPC tracker
<span class="lineNum">      12 </span>            : //   Parallel tracker 
<span class="lineNum">      13 </span>            : //
<span class="lineNum">      14 </span>            : //   Origin: 
<span class="lineNum">      15 </span>            : //-------------------------------------------------------
<span class="lineNum">      16 </span>            : 
<span class="lineNum">      17 </span>            : #include &lt;TArrayI.h&gt;
<span class="lineNum">      18 </span>            : #include &lt;TMatrixD.h&gt;
<span class="lineNum">      19 </span>            : #include &quot;AliTracker.h&quot;
<span class="lineNum">      20 </span>            : #include &quot;AliTPCreco.h&quot;
<span class="lineNum">      21 </span>            : #include &quot;AliTPCclusterMI.h&quot;
<span class="lineNum">      22 </span>            : #include &quot;AliTPCtrackerSector.h&quot;
<span class="lineNum">      23 </span>            : #include &quot;AliESDfriend.h&quot;
<span class="lineNum">      24 </span>            : #include &quot;AliTPCseed.h&quot;
<span class="lineNum">      25 </span>            : 
<span class="lineNum">      26 </span>            : 
<span class="lineNum">      27 </span>            : class TFile;
<span class="lineNum">      28 </span>            : class AliTPCParam;
<span class="lineNum">      29 </span>            : class AliTPCseed;
<span class="lineNum">      30 </span>            : class AliESDEvent;
<span class="lineNum">      31 </span>            : class AliESDtrack;
<span class="lineNum">      32 </span>            : class TTree;
<span class="lineNum">      33 </span>            : class AliESDkink;
<span class="lineNum">      34 </span>            : class TTreeSRedirector;
<span class="lineNum">      35 </span>            : class AliTrackPoint;
<span class="lineNum">      36 </span>            : class AliDCSSensorArray;
<span class="lineNum">      37 </span>            : class AliDCSSensor;
<span class="lineNum">      38 </span>            : class TGraphErrors;
<span class="lineNum">      39 </span>            : 
<span class="lineNum">      40 </span>            : 
<span class="lineNum">      41 </span>            : class AliTPCtracker : public AliTracker {
<span class="lineNum">      42 </span>            : public:
<span class="lineNum">      43 </span>            :   enum EStreamFlags{ // flags to store addition data/code debugging infomation which is not stored in ESD but in specaial TPCdebug.root file
<span class="lineNum">      44 </span>            :     kStreamTransform          =0x00001,    // flag:stream cluster transformation 
<span class="lineNum">      45 </span>            :     kStreamErrParam           =0x00002,    // flag:stream in debug mode cluster and track extrapolation at given row together with error nad shape estimate
<span class="lineNum">      46 </span>            :     kStreamFilterClusterInfo  =0x00004,    // flag:stream TPC data ouliers filtering information
<span class="lineNum">      47 </span>            :     kStreamClDump             =0x00008,    // flag:stream clusters at the end of process (signed with useage flags)
<span class="lineNum">      48 </span>            :     kStreamRemoveUsed         =0x00010,    // flag:stream information about TPC tracks which were descarded (double track removal)
<span class="lineNum">      49 </span>            :     kStreamRemoveShort        =0x00020,    // flag:stream information about TPC tracks which were discarded (short track removal) 
<span class="lineNum">      50 </span>            :     kStreamSplitted2          =0x00040,    // flag:stream information about discarded TPC tracks pair algorithm 
<span class="lineNum">      51 </span>            :     kStreamFillESD            =0x00080,    // flag: stream track information in FillESD function (after track Iteration 0)
<span class="lineNum">      52 </span>            :     kStreamCPropagateBack     =0x00100,    // flag: stream track information in PropagateBack function (after tracking Iteration 1)
<span class="lineNum">      53 </span>            :     kStreamRecoverBack        =0x00200,    // flag: stream track information for track  failing PropagateBack function and recovered back
<span class="lineNum">      54 </span>            :     kStreamRefitInward        =0x00400,    // flag: stream track information in RefitInward function (after tracking Iteration 2)
<span class="lineNum">      55 </span>            :     kStreamRecoverIn          =0x00800,    // flag: stream track information for track  failing in RefitInward function and recovered back
<span class="lineNum">      56 </span>            :     kStreamUpdateTrack        =0x01000,    // flag: stream track/cluster infroamtion in track update method
<span class="lineNum">      57 </span>            :     //
<span class="lineNum">      58 </span>            :     kStreamCrosstalkMatrix    =0x02000,    // flag: stream crosstalk matrix as used in the reconstruction at given region of TPC
<span class="lineNum">      59 </span>            :     kStreamXtalk              =0x04000,    // flag: stream crosstalk correction as applied to cluster
<span class="lineNum">      60 </span>            :     kStreamIonTail            =0x08000,    // flag: stream ion tail correction  as applied to cluster
<span class="lineNum">      61 </span>            :     kStreamFindMultiMC        =0x10000,    // flag: stream MC infomation about the multiple find track (ONLY for MC data)
<span class="lineNum">      62 </span>            :     kStreamFindCurling        =0x20000,    // flag: stream track infroamtion in the FindCurling tracks method
<span class="lineNum">      63 </span>            :     kStreamFindKinks          =0x40000,    // flag: stream track infroamtion in the FindKinks method
<span class="lineNum">      64 </span>            :     kStreamSeeddEdx           =0x80000     // flag: stream TPC dEdx intermediate information  AliTPCseed::CookdEdxNorm (to check and validate methods used in calibration)
<span class="lineNum">      65 </span>            :   };
<span class="lineNum">      66 </span>            :   enum {kMaxFriendTracks=2000};
<span class="lineNum">      67 </span>            : 
<span class="lineNum">      68 </span>            :   AliTPCtracker();
<span class="lineNum">      69 </span>            :   AliTPCtracker(const AliTPCParam *par); 
<a name="70"><span class="lineNum">      70 </span>            :   virtual ~AliTPCtracker();</a>
<span class="lineNum">      71 </span>            :   //
<span class="lineNum">      72 </span><span class="lineNoCov">          0 :   void SetIteration(Int_t iteration){fIteration = iteration;}</span>
<span class="lineNum">      73 </span>            :   virtual Int_t Clusters2TracksHLT(AliESDEvent *const esd, const AliESDEvent *hltEvent);
<span class="lineNum">      74 </span>            :   virtual Int_t Clusters2Tracks (AliESDEvent *const esd);
<span class="lineNum">      75 </span>            :   virtual Int_t RefitInward (AliESDEvent *esd);
<span class="lineNum">      76 </span>            :   virtual Int_t LoadClusters (TTree * const tree);
<span class="lineNum">      77 </span>            :   virtual Int_t LoadClusters (const TObjArray * arr); // another input
<span class="lineNum">      78 </span>            :   virtual Int_t LoadClusters (const TClonesArray * arr); // another input
<span class="lineNum">      79 </span>            :   void    FilterOutlierClusters();   // filter outlier clusters  
<span class="lineNum">      80 </span>            :   virtual Int_t PostProcess(AliESDEvent *esd); 
<span class="lineNum">      81 </span>            :   Int_t  LoadClusters();
<span class="lineNum">      82 </span>            :   void   UnloadClusters();
<span class="lineNum">      83 </span>            :   Int_t LoadInnerSectors();
<span class="lineNum">      84 </span>            :   Int_t LoadOuterSectors();
<span class="lineNum">      85 </span>            :   virtual void FillClusterArray(TObjArray* array) const;
<span class="lineNum">      86 </span>            :   void Transform(AliTPCclusterMI * cluster);
<span class="lineNum">      87 </span>            :   void ApplyTailCancellation();
<span class="lineNum">      88 </span>            :   void ApplyXtalkCorrection();
<span class="lineNum">      89 </span>            :   void CalculateXtalkCorrection();
<span class="lineNum">      90 </span>            :   void GetTailValue(Float_t ampfactor,Double_t &amp;ionTailMax,Double_t &amp;ionTailTotal,TGraphErrors **graphRes,Float_t *indexAmpGraphs,AliTPCclusterMI *cl0,AliTPCclusterMI *cl1);
<span class="lineNum">      91 </span>            :   //
<a name="92"><span class="lineNum">      92 </span>            :   void FillESD(const TObjArray* arr);</a>
<span class="lineNum">      93 </span>            :   void DeleteSeeds();
<span class="lineNum">      94 </span><span class="lineNoCov">          0 :   void SetDebug(Int_t debug){ fDebug = debug;}</span>
<span class="lineNum">      95 </span>            :   void FindKinks(TObjArray * array, AliESDEvent * esd);
<span class="lineNum">      96 </span>            :   //
<span class="lineNum">      97 </span>            :   void FindCurling(const TObjArray * array, AliESDEvent * esd, Int_t iter);     
<span class="lineNum">      98 </span>            :   void FindSplitted(TObjArray * array, AliESDEvent * esd, Int_t iter);       
<span class="lineNum">      99 </span>            :   void FindMultiMC(const TObjArray * array, AliESDEvent * esd, Int_t iter);     
<span class="lineNum">     100 </span>            :   //
<span class="lineNum">     101 </span>            :   void UpdateKinkQualityM(AliTPCseed * seed);
<span class="lineNum">     102 </span>            :   void UpdateKinkQualityD(AliTPCseed * seed);
<span class="lineNum">     103 </span>            :   Int_t CheckKinkPoint(AliTPCseed*seed, AliTPCseed &amp;mother, AliTPCseed &amp;daughter, const AliESDkink &amp;kink);
<a name="104"><span class="lineNum">     104 </span>            :   Int_t RefitKink(AliTPCseed &amp;mother, AliTPCseed &amp;daughter, const AliESDkink &amp;kink);</a>
<a name="105"><span class="lineNum">     105 </span>            :    Int_t ReadSeeds(const TFile *in);</a>
<span class="lineNum">     106 </span><span class="lineNoCov">          0 :    TObjArray * GetSeeds() const {return fSeeds;}</span>
<a name="107"><span class="lineNum">     107 </span><span class="lineNoCov">          0 :    void SetSeeds(TObjArray * seeds) { fSeeds = seeds;}</span></a>
<span class="lineNum">     108 </span>            :    //   
<span class="lineNum">     109 </span><span class="lineNoCov">          0 :    AliCluster * GetCluster(Int_t index) const {return (AliCluster*)GetClusterMI(index);}</span>
<span class="lineNum">     110 </span>            :    AliTPCclusterMI *GetClusterMI(Int_t index) const;
<span class="lineNum">     111 </span>            :    Int_t Clusters2Tracks();
<span class="lineNum">     112 </span>            :    virtual void  CookLabel(AliKalmanTrack *tk,Float_t wrong) const; 
<span class="lineNum">     113 </span>            :    virtual Int_t   CookLabel(AliTPCseed *const t,Float_t wrong, Int_t first,Int_t last ) const; 
<span class="lineNum">     114 </span>            :    
<span class="lineNum">     115 </span>            :    void RotateToLocal(AliTPCseed *seed);
<span class="lineNum">     116 </span>            :    
<span class="lineNum">     117 </span>            :    Int_t FollowProlongation(AliTPCseed&amp; t, Int_t rf=0, Int_t step=1, Bool_t fromSeeds=0);
<span class="lineNum">     118 </span>            :    Bool_t GetTrackPoint(Int_t index, AliTrackPoint &amp;p ) const; 
<span class="lineNum">     119 </span>            : 
<span class="lineNum">     120 </span>            :    Int_t FollowBackProlongation(AliTPCseed&amp; t, Int_t rf, Bool_t fromSeeds=0);
<span class="lineNum">     121 </span>            :    Int_t FollowToNext(AliTPCseed&amp; t, Int_t nr);
<span class="lineNum">     122 </span>            :    Int_t UpdateClusters(AliTPCseed&amp; t,  Int_t nr);
<span class="lineNum">     123 </span>            :    Int_t FollowToNextCluster( AliTPCseed&amp; t, Int_t nr);
<span class="lineNum">     124 </span>            : 
<span class="lineNum">     125 </span>            :    Int_t PropagateBack(const TObjArray *const arr);
<span class="lineNum">     126 </span>            :    Int_t PropagateBack(AliESDEvent * event);
<span class="lineNum">     127 </span>            :    Int_t PropagateBack(AliTPCseed *const pt, Int_t row0, Int_t row1);   
<span class="lineNum">     128 </span>            :    Int_t PropagateForward();
<span class="lineNum">     129 </span>            :    Int_t PropagateForward2(const TObjArray *const arr);
<span class="lineNum">     130 </span>            : 
<span class="lineNum">     131 </span>            :    void SortTracks(TObjArray * arr, Int_t mode) const;
<span class="lineNum">     132 </span>            :   
<span class="lineNum">     133 </span>            :    void    ErrY2Z2(AliTPCseed* seed, const AliTPCclusterMI *cl, double &amp;erry2, double &amp;errz2);
<span class="lineNum">     134 </span>            :    virtual Double_t ErrY2(AliTPCseed* seed, const AliTPCclusterMI * cl);
<span class="lineNum">     135 </span>            :    virtual Double_t ErrZ2(AliTPCseed* seed, const AliTPCclusterMI * cl);   
<span class="lineNum">     136 </span>            : 
<span class="lineNum">     137 </span>            :    Double_t F1(Double_t x1,Double_t y1, Double_t x2,Double_t y2, Double_t x3,Double_t y3) const; 
<span class="lineNum">     138 </span>            :    Double_t F1old(Double_t x1,Double_t y1, Double_t x2,Double_t y2, Double_t x3,Double_t y3) const; 
<span class="lineNum">     139 </span>            :    Double_t F2(Double_t x1,Double_t y1, Double_t x2,Double_t y2, Double_t x3,Double_t y3) const; 
<span class="lineNum">     140 </span>            :    Double_t F2old(Double_t x1,Double_t y1, Double_t x2,Double_t y2, Double_t x3,Double_t y3) const; 
<span class="lineNum">     141 </span>            : 
<span class="lineNum">     142 </span>            :    Double_t F3(Double_t x1,Double_t y1, Double_t x2,Double_t y2, Double_t z1,Double_t z2) const; 
<span class="lineNum">     143 </span>            :    Double_t F3n(Double_t x1,Double_t y1, Double_t x2,Double_t y2, Double_t z1,Double_t z2, 
<span class="lineNum">     144 </span>            :                 Double_t c) const; 
<span class="lineNum">     145 </span>            :    Bool_t GetProlongation(Double_t x1, Double_t x2, Double_t x[5], Double_t &amp;y, Double_t &amp;z) const;
<span class="lineNum">     146 </span>            :    Bool_t GetProlongationLine(Double_t x1, Double_t x2, Double_t x[5], Double_t &amp;y, Double_t &amp;z) const;
<span class="lineNum">     147 </span>            :    //
<span class="lineNum">     148 </span>            :    void ResetSeedsPool();
<span class="lineNum">     149 </span>            :    void MarkSeedFree( TObject* seed );
<span class="lineNum">     150 </span>            :    TObject *&amp;NextFreeSeed();
<span class="lineNum">     151 </span>            :    //
<span class="lineNum">     152 </span>            :    void FillSeedClusterStatCache(const AliTPCseed* seed);
<span class="lineNum">     153 </span>            :    void GetCachedSeedClusterStatistic(Int_t first, Int_t last, Int_t &amp;found, Int_t &amp;foundable, Int_t &amp;shared, Bool_t plus2) const;
<span class="lineNum">     154 </span>            :    void GetSeedClusterStatistic(const AliTPCseed* seed, Int_t first, Int_t last, Int_t &amp;found, Int_t &amp;foundable, Int_t &amp;shared, Bool_t plus2) const;
<a name="155"><span class="lineNum">     155 </span>            :    //</a>
<span class="lineNum">     156 </span>            :  public:
<span class="lineNum">     157 </span><span class="lineCov">          4 :    void SetUseHLTClusters(Int_t useHLTClusters) {fUseHLTClusters = useHLTClusters;} // set usage from HLT clusters from rec.C options</span>
<span class="lineNum">     158 </span>            : 
<span class="lineNum">     159 </span>            :    inline void SetTPCtrackerSectors(AliTPCtrackerSector *innerSec, AliTPCtrackerSector *outerSec); // set the AliTPCtrackerSector arrays from outside (toy MC)
<span class="lineNum">     160 </span>            : 
<span class="lineNum">     161 </span>            :    Float_t OverlapFactor(AliTPCseed * s1, AliTPCseed * s2, Int_t &amp;sum1, Int_t &amp;sum2);
<span class="lineNum">     162 </span>            :    void  SignShared(AliTPCseed * s1, AliTPCseed * s2);
<span class="lineNum">     163 </span>            :    void  SignShared(TObjArray * arr);
<span class="lineNum">     164 </span>            : 
<span class="lineNum">     165 </span>            :    void  RemoveUsed2(TObjArray * arr, Float_t factor1, Float_t factor2, Int_t minimal);
<span class="lineNum">     166 </span>            : 
<span class="lineNum">     167 </span>            :    Int_t AcceptCluster(AliTPCseed * seed, AliTPCclusterMI * cluster);
<span class="lineNum">     168 </span>            : 
<span class="lineNum">     169 </span>            :    Bool_t IsTPCHVDipEvent(AliESDEvent const *esdEvent);
<span class="lineNum">     170 </span>            : 
<span class="lineNum">     171 </span>            :    // public for ToyMC usage
<span class="lineNum">     172 </span>            :    void MakeSeeds2(TObjArray * arr, Int_t sec, Int_t i1, Int_t i2, Float_t cuts[4], Float_t deltay = -1, Bool_t bconstrain=kTRUE); 
<span class="lineNum">     173 </span>            :    void MakeSeeds2Dist(TObjArray * arr, Int_t sec, Int_t i1, Int_t i2, Float_t cuts[4], Float_t deltay = -1, Bool_t bconstrain=kTRUE); 
<span class="lineNum">     174 </span>            :    void MakeSeeds3(TObjArray * arr, Int_t sec, Int_t i1, Int_t i2, Float_t cuts[4], Float_t deltay = -1, Int_t ddsec=0); 
<span class="lineNum">     175 </span>            :    void MakeSeeds3Dist(TObjArray * arr, Int_t sec, Int_t i1, Int_t i2, Float_t cuts[4], Float_t deltay = -1, Int_t ddsec=0); 
<span class="lineNum">     176 </span>            :    void SumTracks(TObjArray *arr1,TObjArray *&amp;arr2);
<span class="lineNum">     177 </span>            :    void SignClusters(const TObjArray * arr, Float_t fnumber=3., Float_t fdensity=2.);  
<span class="lineNum">     178 </span>            :    //
<a name="179"><span class="lineNum">     179 </span>            :    Bool_t DistortX(const AliTPCseed* seed, double&amp; x, int row);</a>
<span class="lineNum">     180 </span>            :    //
<span class="lineNum">     181 </span><span class="lineCov">         24 :    virtual Bool_t OwnsESDObjects() const {return kTRUE;} //RS TPC owns the seeds stored in the friends</span>
<span class="lineNum">     182 </span>            :    virtual void   CleanESDFriendsObjects(AliESDEvent* esd);
<span class="lineNum">     183 </span>            :    virtual void   CleanESDTracksObjects(TObjArray* trcList);
<span class="lineNum">     184 </span>            :    //
<span class="lineNum">     185 </span>            :    Double_t GetDistortionX(double x, double y, double z, int sec, int row);
<span class="lineNum">     186 </span>            :    Double_t GetYSectEdgeDist(int sec, int row, double ymax, double z);
<span class="lineNum">     187 </span>            :    static Int_t GetTrackSector(double alpha);
<span class="lineNum">     188 </span>            : 
<span class="lineNum">     189 </span>            : private:
<span class="lineNum">     190 </span>            :   Bool_t IsFindable(AliTPCseed &amp; t);
<span class="lineNum">     191 </span>            :   AliTPCtracker(const AliTPCtracker&amp; r);           //dummy copy constructor
<span class="lineNum">     192 </span>            :   AliTPCtracker &amp;operator=(const AliTPCtracker&amp; r);//dummy assignment operator
<span class="lineNum">     193 </span>            :   void AddCovariance(AliTPCseed * seed);               // add covariance
<span class="lineNum">     194 </span>            :   void AddCovarianceAdd(AliTPCseed * seed);               // add covariance
<span class="lineNum">     195 </span>            : 
<span class="lineNum">     196 </span>            :    inline AliTPCtrackerRow &amp;GetRow(Int_t sec, Int_t row);
<span class="lineNum">     197 </span>            :    inline Bool_t     IsActive(Int_t sec, Int_t row);
<span class="lineNum">     198 </span>            :    inline Double_t  GetXrow(Int_t row) const;
<span class="lineNum">     199 </span>            :    inline Double_t  GetMaxY(Int_t row) const;
<span class="lineNum">     200 </span>            :    inline Int_t GetRowNumber(Double_t x) const;
<span class="lineNum">     201 </span>            :    inline Int_t GetRowNumber(const AliTPCseed* seed) const;
<span class="lineNum">     202 </span>            :    Int_t GetRowNumber(Double_t x[3]) const;
<span class="lineNum">     203 </span>            :    inline Double_t GetPadPitchLength(Double_t x) const;
<span class="lineNum">     204 </span>            :    inline Double_t GetPadPitchLength(Int_t row) const;
<span class="lineNum">     205 </span>            : 
<span class="lineNum">     206 </span>            :     void GetShape(AliTPCseed * seed, Int_t row);
<span class="lineNum">     207 </span>            :  
<span class="lineNum">     208 </span>            :    void ReadSeeds(const AliESDEvent *const event, Int_t direction);  //read seeds from the event
<span class="lineNum">     209 </span>            : 
<span class="lineNum">     210 </span>            :    void MakeSeeds5(TObjArray * arr, Int_t sec, Int_t i1, Int_t i2, Float_t cuts[4], Float_t deltay = -1);
<span class="lineNum">     211 </span>            :    void MakeSeeds5Dist(TObjArray * arr, Int_t sec, Int_t i1, Int_t i2, Float_t cuts[4], Float_t deltay = -1);
<span class="lineNum">     212 </span>            :   
<span class="lineNum">     213 </span>            : 
<span class="lineNum">     214 </span>            :    AliTPCseed *MakeSeed(AliTPCseed *const track, Float_t r0, Float_t r1, Float_t r2); //reseed
<span class="lineNum">     215 </span>            :    AliTPCseed *ReSeed(const AliTPCseed *t, Float_t r0, Float_t r1, Float_t r2); //reseed
<span class="lineNum">     216 </span>            :    AliTPCseed *ReSeed(AliTPCseed *t, Int_t r0, Bool_t forward); //reseed
<span class="lineNum">     217 </span>            : 
<span class="lineNum">     218 </span>            : 
<span class="lineNum">     219 </span>            :   
<span class="lineNum">     220 </span>            :    AliTPCseed * ReSeed(AliTPCseed *t);
<span class="lineNum">     221 </span>            :    //Int_t LoadInnerSectors();
<span class="lineNum">     222 </span>            :    //Int_t LoadOuterSectors();
<span class="lineNum">     223 </span>            :    void DumpClusters(Int_t iter, TObjArray *trackArray);
<span class="lineNum">     224 </span>            :    void UnsignClusters();
<span class="lineNum">     225 </span>            : 
<span class="lineNum">     226 </span>            :    void FillClusterOccupancyInfo();
<span class="lineNum">     227 </span>            : 
<span class="lineNum">     228 </span>            :    void ParallelTracking(TObjArray *const arr, Int_t rfirst, Int_t rlast);
<span class="lineNum">     229 </span>            :    void Tracking(TObjArray * arr);
<span class="lineNum">     230 </span>            :    TObjArray * Tracking(Int_t seedtype, Int_t i1, Int_t i2, Float_t cuts[4], Float_t dy=-1, Int_t dsec=0);
<span class="lineNum">     231 </span>            :    TObjArray * Tracking();
<span class="lineNum">     232 </span>            :    TObjArray * TrackingSpecial();
<span class="lineNum">     233 </span>            :    void PrepareForBackProlongation(const TObjArray *const arr, Float_t fac) const;
<span class="lineNum">     234 </span>            :    void PrepareForProlongation(TObjArray *const arr, Float_t fac) const;
<span class="lineNum">     235 </span>            : 
<span class="lineNum">     236 </span>            :    Int_t UpdateTrack(AliTPCseed *t, Int_t accept); //update trackinfo
<span class="lineNum">     237 </span>            : 
<span class="lineNum">     238 </span>            :    void MakeESDBitmaps(AliTPCseed *t, AliESDtrack *esd);
<span class="lineNum">     239 </span>            : 
<span class="lineNum">     240 </span>            :    Int_t PropagateToRowHLT(AliTPCseed *pt, int nrow);
<span class="lineNum">     241 </span>            :    void TrackFollowingHLT(TObjArray *const arr);
<span class="lineNum">     242 </span>            :    TObjArray * MakeSeedsHLT(const AliESDEvent *hltEvent);
<span class="lineNum">     243 </span>            : 
<span class="lineNum">     244 </span>            :    const Int_t fkNIS;        //number of inner sectors
<span class="lineNum">     245 </span>            :    AliTPCtrackerSector *fInnerSec;  //array of inner sectors;
<span class="lineNum">     246 </span>            :    const Int_t fkNOS;        //number of outer sectors
<span class="lineNum">     247 </span>            :    AliTPCtrackerSector *fOuterSec;  //array of outer sectors;
<span class="lineNum">     248 </span>            : 
<span class="lineNum">     249 </span>            :    Int_t fN;               //number of loaded sectors
<span class="lineNum">     250 </span>            :    AliTPCtrackerSector *fSectors; //pointer to loaded sectors;
<span class="lineNum">     251 </span>            :    //
<span class="lineNum">     252 </span>            :    TTree * fInput;       // input tree with clusters
<span class="lineNum">     253 </span>            :    TTree * fOutput;      // output tree with tracks
<span class="lineNum">     254 </span>            :    TTree * fSeedTree;    // output tree with seeds - filled in debug mode 1
<span class="lineNum">     255 </span>            :    TTree * fTreeDebug;   // output with a debug information about track
<span class="lineNum">     256 </span>            :    AliESDEvent * fEvent;      // output with esd tracks
<span class="lineNum">     257 </span>            :    const AliESDEvent * fEventHLT;      // input with HLT tracks
<span class="lineNum">     258 </span>            :    Int_t    fDebug;      // debug option        
<span class="lineNum">     259 </span>            :    Bool_t   fNewIO;      // indicated if we have data using New IO 
<span class="lineNum">     260 </span>            :    Int_t fNtracks;                     //current number of tracks
<span class="lineNum">     261 </span>            :    TObjArray *fSeeds;                  //array of track seeds
<span class="lineNum">     262 </span>            :    Int_t fIteration;                   // indicate iteration - 0 - froward -1 back - 2forward - back-&gt;forward
<span class="lineNum">     263 </span>            :    //   TObjArray * fTrackPointPool;        // ! pool with track points
<span class="lineNum">     264 </span>            :    Double_t fXRow[200];                // radius of the pad row
<span class="lineNum">     265 </span>            :    Double_t fYMax[200];                // max y for given pad row
<span class="lineNum">     266 </span>            :    Double_t fPadLength[200];                // max y for given pad row
<span class="lineNum">     267 </span>            :    const AliTPCParam *fkParam;          //pointer to the parameters
<span class="lineNum">     268 </span>            :    TTreeSRedirector *fDebugStreamer;     //!debug streamer
<span class="lineNum">     269 </span>            :    Int_t  fUseHLTClusters;              // use HLT clusters instead of offline clusters
<span class="lineNum">     270 </span>            :    //
<span class="lineNum">     271 </span>            :    Double_t fClExtraRoadY;              //! extra additiom to Y road for FindCluster
<span class="lineNum">     272 </span>            :    Double_t fClExtraRoadZ;              //! extra addition Z road for FindCluster
<span class="lineNum">     273 </span>            :    Double_t fExtraClErrYZ2;             //! extra cl.error Y^2+Z^2
<span class="lineNum">     274 </span>            :    Double_t fExtraClErrY2;              //! extra cl.error Y^2
<span class="lineNum">     275 </span>            :    Double_t fExtraClErrZ2;              //! extra cl.error Z^2
<span class="lineNum">     276 </span>            :    Double_t fPrimaryDCAZCut;            //! special cut on DCAz for primaries tracking only, disables secondaries seeding
<span class="lineNum">     277 </span>            :    Double_t fPrimaryDCAYCut;            //! special cut on DCAy for primaries tracking only, disables secondaries seeding
<span class="lineNum">     278 </span>            :    Bool_t   fDisableSecondaries;        //! special flag to disable secondaries seeding
<span class="lineNum">     279 </span>            :    TObjArray * fCrossTalkSignalArray;  // for 36 sectors 
<span class="lineNum">     280 </span>            :    AliTPCclusterMI** fClPointersPool;  //! pool of cluster pointers for seeds stored in friends
<span class="lineNum">     281 </span>            :    AliTPCclusterMI** fClPointersPoolPtr; //! pointer on the current free slot in the pool
<span class="lineNum">     282 </span>            :    Int_t fClPointersPoolSize; // number of seeds holding the cluster arrays
<span class="lineNum">     283 </span>            :    TClonesArray* fSeedsPool;            //! pool of seeds
<span class="lineNum">     284 </span>            :    TClonesArray* fHelixPool;            //! pool of helises
<span class="lineNum">     285 </span>            :    TClonesArray* fETPPool;              //! pool of helises
<span class="lineNum">     286 </span>            :    TArrayI fFreeSeedsID;                //! array of ID's of freed seeds
<span class="lineNum">     287 </span>            :    Int_t fNFreeSeeds;                   //! number of seeds freed in the pool
<span class="lineNum">     288 </span>            :    Int_t fLastSeedID;                   //! id of the pool seed on which is returned by the NextFreeSeed method
<span class="lineNum">     289 </span>            :    //
<span class="lineNum">     290 </span>            :    Bool_t fClStatFoundable[kMaxRow];    //! cached info on foundable clusters of the seed
<span class="lineNum">     291 </span>            :    Bool_t fClStatFound[kMaxRow];        //! cached info on found clusters of the seed   
<span class="lineNum">     292 </span>            :    Bool_t fClStatShared[kMaxRow];       //! cached info on shared clusters of the seed   
<span class="lineNum">     293 </span>            :    //
<a name="294"><span class="lineNum">     294 </span>            :    Int_t fAccountDistortions;           //! flag to account for distortions. RS: to set!</a>
<span class="lineNum">     295 </span>            :    //
<span class="lineNum">     296 </span><span class="lineCov">        460 :    ClassDef(AliTPCtracker,5) </span>
<span class="lineNum">     297 </span>            : };
<a name="298"><span class="lineNum">     298 </span>            : </a>
<span class="lineNum">     299 </span>            : 
<span class="lineNum">     300 </span>            : AliTPCtrackerRow &amp; AliTPCtracker::GetRow(Int_t sec, Int_t row)
<span class="lineNum">     301 </span>            : {
<span class="lineNum">     302 </span>            :   //
<span class="lineNum">     303 </span><span class="lineCov">     620272 :   return (row&gt;=fInnerSec-&gt;GetNRows()) ? fOuterSec[sec][row-fInnerSec-&gt;GetNRows()]:fInnerSec[sec][row];</span>
<a name="304"><span class="lineNum">     304 </span>            : }</a>
<span class="lineNum">     305 </span>            : 
<span class="lineNum">     306 </span>            : Bool_t   AliTPCtracker::IsActive(Int_t sec, Int_t row)
<span class="lineNum">     307 </span>            : {
<span class="lineNum">     308 </span>            :   //
<span class="lineNum">     309 </span>            :   // check if the given sector row is active 
<span class="lineNum">     310 </span>            :   //
<span class="lineNum">     311 </span><span class="lineCov">     524768 :   return (row&gt;=fInnerSec-&gt;GetNRows()) ? fOuterSec[sec][row-fInnerSec-&gt;GetNRows()].GetN()&gt;0:fInnerSec[sec][row].GetN()&gt;0;</span>
<span class="lineNum">     312 </span>            : }
<a name="313"><span class="lineNum">     313 </span>            : </a>
<span class="lineNum">     314 </span>            : 
<span class="lineNum">     315 </span>            : Double_t  AliTPCtracker::GetXrow(Int_t row) const {
<span class="lineNum">     316 </span>            :   //  return (row&gt;=fInnerSec-&gt;GetNRows()) ? fOuterSec-&gt;GetX(row-fInnerSec-&gt;GetNRows()):fInnerSec-&gt;GetX(row);
<span class="lineNum">     317 </span><span class="lineCov">     373280 :   return fXRow[row];</span>
<a name="318"><span class="lineNum">     318 </span>            : }</a>
<span class="lineNum">     319 </span>            : 
<span class="lineNum">     320 </span>            : Double_t  AliTPCtracker::GetMaxY(Int_t row) const {
<span class="lineNum">     321 </span>            :   //return (row&gt;=fInnerSec-&gt;GetNRows()) ? fOuterSec-&gt;GetMaxY(row-fInnerSec-&gt;GetNRows()):fInnerSec-&gt;GetMaxY(row);
<span class="lineNum">     322 </span><span class="lineCov">     304308 :   return fYMax[row];</span>
<a name="323"><span class="lineNum">     323 </span>            : }</a>
<span class="lineNum">     324 </span>            : 
<span class="lineNum">     325 </span>            : Int_t AliTPCtracker::GetRowNumber(Double_t x) const
<span class="lineNum">     326 </span>            : {
<span class="lineNum">     327 </span>            :   //
<span class="lineNum">     328 </span><span class="lineCov">     121984 :   if (x&lt;133.) return TMath::Max(fInnerSec-&gt;GetRowNumber(x),0);</span>
<span class="lineNum">     329 </span><span class="lineCov">      26936 :   return TMath::Min(fOuterSec-&gt;GetRowNumber(x)+fInnerSec-&gt;GetNRows(),158);</span>
<a name="330"><span class="lineNum">     330 </span><span class="lineCov">      49640 : }</span></a>
<span class="lineNum">     331 </span>            : 
<span class="lineNum">     332 </span>            : Int_t AliTPCtracker::GetRowNumber(const AliTPCseed* t) const
<span class="lineNum">     333 </span>            : {
<span class="lineNum">     334 </span>            :   // last row of the seed or row corresponding to x
<span class="lineNum">     335 </span><span class="lineNoCov">          0 :   int row = t-&gt;GetRow();</span>
<span class="lineNum">     336 </span>            :   /*
<span class="lineNum">     337 </span>            :   int rowX = GetRowNumber(t-&gt;GetX());
<span class="lineNum">     338 </span>            :   if (TMath::Abs(row-rowX)&gt;1 &amp;&amp; row&gt;-1) {
<span class="lineNum">     339 </span>            :     printf(&quot;MISMATCH Seed %d\n&quot;,t-&gt;GetPoolID());
<span class="lineNum">     340 </span>            :     printf(&quot;GetROW: %d %d %f %s\n&quot;,row,rowX,t-&gt;GetX(),row==rowX ? &quot;&quot;:&quot;!!!!!!!!!**********!!!!!!!!!!!************!!!!!!!!!!!&quot;);
<span class="lineNum">     341 </span>            :   }
<span class="lineNum">     342 </span>            :   */
<span class="lineNum">     343 </span><span class="lineNoCov">          0 :   return (row&gt;-1&amp;&amp;row&lt;159) ? row : GetRowNumber(t-&gt;GetX());</span>
<span class="lineNum">     344 </span>            : }
<span class="lineNum">     345 </span>            : 
<span class="lineNum">     346 </span>            : Double_t  AliTPCtracker::GetPadPitchLength(Double_t x) const
<span class="lineNum">     347 </span>            : {
<span class="lineNum">     348 </span>            :   //
<span class="lineNum">     349 </span>            :   return (x&gt;133.) ? fOuterSec-&gt;GetPadPitchLength(x):fInnerSec-&gt;GetPadPitchLength(x);
<span class="lineNum">     350 </span>            :   //return fPadLength[row];
<span class="lineNum">     351 </span>            : }
<span class="lineNum">     352 </span>            : 
<span class="lineNum">     353 </span>            : Double_t  AliTPCtracker::GetPadPitchLength(Int_t row) const
<span class="lineNum">     354 </span>            : {
<span class="lineNum">     355 </span>            :   //
<span class="lineNum">     356 </span>            :   return fPadLength[row];
<a name="357"><span class="lineNum">     357 </span>            : }</a>
<span class="lineNum">     358 </span>            : 
<span class="lineNum">     359 </span>            : void  AliTPCtracker::SetTPCtrackerSectors(AliTPCtrackerSector *innerSec, AliTPCtrackerSector *outerSec)
<span class="lineNum">     360 </span>            : {
<span class="lineNum">     361 </span>            :   //
<span class="lineNum">     362 </span><span class="lineNoCov">          0 :   fInnerSec = innerSec;</span>
<span class="lineNum">     363 </span><span class="lineNoCov">          0 :   fOuterSec = outerSec;</span>
<span class="lineNum">     364 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     365 </span>            : 
<span class="lineNum">     366 </span>            : #endif
<span class="lineNum">     367 </span>            : 
<span class="lineNum">     368 </span>            : 
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
