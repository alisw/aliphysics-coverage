<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - STEER/ESD/AliTriggerConfiguration.cxx</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">STEER/ESD</a> - AliTriggerConfiguration.cxx<span style="font-size: 80%;"> (source / <a href="AliTriggerConfiguration.cxx.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">223</td>
            <td class="headerCovTableEntry">550</td>
            <td class="headerCovTableEntryLo">40.5 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">25</td>
            <td class="headerCovTableEntry">40</td>
            <td class="headerCovTableEntryLo">62.5 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /**************************************************************************</a>
<span class="lineNum">       2 </span>            :  * Copyright(c) 1998-1999, ALICE Experiment at CERN, All rights reserved. *
<span class="lineNum">       3 </span>            :  *                                                                        *
<span class="lineNum">       4 </span>            :  * Author: The ALICE Off-line Project.                                    *
<span class="lineNum">       5 </span>            :  * Contributors are mentioned in the code where appropriate.              *
<span class="lineNum">       6 </span>            :  *                                                                        *
<span class="lineNum">       7 </span>            :  * Permission to use, copy, modify and distribute this software and its   *
<span class="lineNum">       8 </span>            :  * documentation strictly for non-commercial purposes is hereby granted   *
<span class="lineNum">       9 </span>            :  * without fee, provided that the above copyright notice appears in all   *
<span class="lineNum">      10 </span>            :  * copies and that both the copyright notice and this permission notice   *
<span class="lineNum">      11 </span>            :  * appear in the supporting documentation. The authors make no claims     *
<span class="lineNum">      12 </span>            :  * about the suitability of this software for any purpose. It is          *
<span class="lineNum">      13 </span>            :  * provided &quot;as is&quot; without express or implied warranty.                  *
<span class="lineNum">      14 </span>            :  **************************************************************************/
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            : ///////////////////////////////////////////////////////////////////////////////
<span class="lineNum">      17 </span>            : //
<span class="lineNum">      18 </span>            : // This class which defines defines the Trigger Configuration 
<span class="lineNum">      19 </span>            : //
<span class="lineNum">      20 </span>            : // Trigger Configuration defines the trigger setup for a particular run
<span class="lineNum">      21 </span>            : // We have default configurations for each running mode (Pb-Pb, p-p, p-A, Calibration, etc).
<span class="lineNum">      22 </span>            : // It keep:
<span class="lineNum">      23 </span>            : //   All the information conained in the CTP configuration file used
<span class="lineNum">      24 </span>            : //   online during the data taking
<span class="lineNum">      25 </span>            : //
<span class="lineNum">      26 </span>            : // Configurations could be created and stored in local file.
<span class="lineNum">      27 </span>            : // By default the configuration is loaded from the corresponding GRP entry
<span class="lineNum">      28 </span>            : // inside the OCDB. There one can have one and only one configuration per run.
<span class="lineNum">      29 </span>            : //
<span class="lineNum">      30 </span>            : //   Example how to create a Trigger Configuration:
<span class="lineNum">      31 </span>            : //
<span class="lineNum">      32 </span>            : //   AliTriggerConfiguration config( &quot;TEST&quot;, &quot;Test Configuration&quot; );
<span class="lineNum">      33 </span>            : //
<span class="lineNum">      34 </span>            : //   // Define a Cluster Detector
<span class="lineNum">      35 </span>            : //   config.AddDetectorCluster( &quot;VZERO ZDC MUON&quot; );
<span class="lineNum">      36 </span>            : //
<span class="lineNum">      37 </span>            : //   // Define the trigger conditions (see AliTriggerCondition.cxx)
<span class="lineNum">      38 </span>            : //   config.AddCondition( &quot;VZERO_TEST1_L0 &amp; MUON_SPlus_LPt_L0 &amp; ZDC_TEST2_L0&quot;, // condition
<span class="lineNum">      39 </span>            : //                         &quot;VO1_M1_ZDC2&quot;,      // short name
<span class="lineNum">      40 </span>            : //                         &quot;Dummy&quot;,            // short description
<span class="lineNum">      41 </span>            : //                          0x0100 );          // class mask (set one bit)
<span class="lineNum">      42 </span>            : //
<span class="lineNum">      43 </span>            : //   config.AddCondition( &quot;VZERO_TEST2_L0 &amp; MUON_SMinus_HPt_L0 &amp; ZDC_TEST1_L0&quot;,
<span class="lineNum">      44 </span>            : //                         &quot;VO2_M3_ZDC1&quot;,
<span class="lineNum">      45 </span>            : //                         &quot;Dummy&quot;,
<span class="lineNum">      46 </span>            : //                          0x0200 );
<span class="lineNum">      47 </span>            : //
<span class="lineNum">      48 </span>            : //   config.AddCondition( &quot;VZERO_TEST3_L0 | MUON_Unlike_LPt_L0 | ZDC_TEST3_L0&quot;,
<span class="lineNum">      49 </span>            : //                         &quot;VO3_M1_ZDC3&quot;,
<span class="lineNum">      50 </span>            : //                         &quot;Dummy&quot;,
<span class="lineNum">      51 </span>            : //                          0x0400 );
<span class="lineNum">      52 </span>            : //   config.CheckInputsConditions(&quot;Config.C&quot;);
<span class="lineNum">      53 </span>            : //   config.Print();
<span class="lineNum">      54 </span>            : //
<span class="lineNum">      55 </span>            : //   // save the configuration to file 
<span class="lineNum">      56 </span>            : //   // (default file name $ALICE_ROOT/data/triggerConfigurations.root)
<span class="lineNum">      57 </span>            : //   config.WriteConfiguration(); or config.WriteConfiguration( filename );
<span class="lineNum">      58 </span>            : //
<span class="lineNum">      59 </span>            : ///////////////////////////////////////////////////////////////////////////////
<span class="lineNum">      60 </span>            : #include &lt;Riostream.h&gt;
<span class="lineNum">      61 </span>            : 
<span class="lineNum">      62 </span>            : #include &lt;TFile.h&gt;
<span class="lineNum">      63 </span>            : #include &lt;TKey.h&gt;
<span class="lineNum">      64 </span>            : #include &lt;TObjArray.h&gt;
<span class="lineNum">      65 </span>            : #include &lt;TObjString.h&gt;
<span class="lineNum">      66 </span>            : #include &lt;TObject.h&gt;
<span class="lineNum">      67 </span>            : #include &lt;TROOT.h&gt;
<span class="lineNum">      68 </span>            : #include &lt;TString.h&gt;
<span class="lineNum">      69 </span>            : #include &lt;TSystem.h&gt;
<span class="lineNum">      70 </span>            : #include &lt;TMath.h&gt;
<span class="lineNum">      71 </span>            : 
<span class="lineNum">      72 </span>            : #include &quot;AliLog.h&quot;
<span class="lineNum">      73 </span>            : #include &quot;AliTriggerBCMask.h&quot;
<span class="lineNum">      74 </span>            : #include &quot;AliTriggerClass.h&quot;
<span class="lineNum">      75 </span>            : #include &quot;AliTriggerCluster.h&quot;
<span class="lineNum">      76 </span>            : #include &quot;AliTriggerConfiguration.h&quot;
<span class="lineNum">      77 </span>            : #include &quot;AliTriggerDescriptor.h&quot;
<span class="lineNum">      78 </span>            : #include &quot;AliTriggerInput.h&quot;
<span class="lineNum">      79 </span>            : #include &quot;AliTriggerInteraction.h&quot;
<span class="lineNum">      80 </span>            : #include &quot;AliTriggerPFProtection.h&quot;
<span class="lineNum">      81 </span>            : 
<span class="lineNum">      82 </span>            : using std::endl;
<a name="83"><span class="lineNum">      83 </span>            : using std::cout;</a>
<span class="lineNum">      84 </span>            : using std::ifstream;
<a name="85"><span class="lineNum">      85 </span><span class="lineCov">        172 : ClassImp(AliTriggerConfiguration)</span></a>
<span class="lineNum">      86 </span>            : 
<span class="lineNum">      87 </span><span class="lineCov">        172 : const TString AliTriggerConfiguration::fgkConfigurationFileName(&quot;/data/triggerConfigurations.root&quot;);</span>
<a name="88"><span class="lineNum">      88 </span>            : </a>
<span class="lineNum">      89 </span>            : //_____________________________________________________________________________
<span class="lineNum">      90 </span>            : AliTriggerConfiguration::AliTriggerConfiguration():
<span class="lineNum">      91 </span><span class="lineCov">          8 :   TNamed(),</span>
<span class="lineNum">      92 </span><span class="lineCov">          8 :   fInputs(),</span>
<span class="lineNum">      93 </span><span class="lineCov">          8 :   fInteractions(),</span>
<span class="lineNum">      94 </span><span class="lineCov">          8 :   fFunctions(),</span>
<span class="lineNum">      95 </span><span class="lineCov">          8 :   fPFProtections(),</span>
<span class="lineNum">      96 </span><span class="lineCov">          8 :   fMasks(),</span>
<span class="lineNum">      97 </span><span class="lineCov">          8 :   fDescriptors(),</span>
<span class="lineNum">      98 </span><span class="lineCov">          8 :   fClusters(),</span>
<span class="lineNum">      99 </span><span class="lineCov">          8 :   fClasses(),</span>
<span class="lineNum">     100 </span><span class="lineCov">          8 :   fVersion(0)</span>
<span class="lineNum">     101 </span><span class="lineCov">         40 : {</span>
<span class="lineNum">     102 </span>            :   // Default constructor
<span class="lineNum">     103 </span><span class="lineCov">         16 : }</span>
<a name="104"><span class="lineNum">     104 </span>            : </a>
<span class="lineNum">     105 </span>            : //_____________________________________________________________________________
<span class="lineNum">     106 </span>            : AliTriggerConfiguration::AliTriggerConfiguration( TString &amp; name, TString &amp; description ):
<span class="lineNum">     107 </span><span class="lineNoCov">          0 :   TNamed( name, description ),</span>
<span class="lineNum">     108 </span><span class="lineNoCov">          0 :   fInputs(),</span>
<span class="lineNum">     109 </span><span class="lineNoCov">          0 :   fInteractions(),</span>
<span class="lineNum">     110 </span><span class="lineNoCov">          0 :   fFunctions(),</span>
<span class="lineNum">     111 </span><span class="lineNoCov">          0 :   fPFProtections(),</span>
<span class="lineNum">     112 </span><span class="lineNoCov">          0 :   fMasks(),</span>
<span class="lineNum">     113 </span><span class="lineNoCov">          0 :   fDescriptors(),</span>
<span class="lineNum">     114 </span><span class="lineNoCov">          0 :   fClusters(),</span>
<span class="lineNum">     115 </span><span class="lineNoCov">          0 :   fClasses(),</span>
<span class="lineNum">     116 </span><span class="lineNoCov">          0 :   fVersion(0)</span>
<span class="lineNum">     117 </span><span class="lineNoCov">          0 : {</span>
<span class="lineNum">     118 </span>            :   // Constructor
<span class="lineNum">     119 </span><span class="lineNoCov">          0 : }</span>
<a name="120"><span class="lineNum">     120 </span>            : </a>
<span class="lineNum">     121 </span>            : //_____________________________________________________________________________
<span class="lineNum">     122 </span>            : AliTriggerConfiguration::~AliTriggerConfiguration() 
<span class="lineNum">     123 </span><span class="lineCov">         36 : { </span>
<span class="lineNum">     124 </span>            :   // Destructor
<span class="lineNum">     125 </span><span class="lineCov">          6 :   fInputs.SetOwner();</span>
<span class="lineNum">     126 </span><span class="lineCov">          6 :   fInputs.Delete();</span>
<span class="lineNum">     127 </span><span class="lineCov">          6 :   fInteractions.SetOwner();</span>
<span class="lineNum">     128 </span><span class="lineCov">          6 :   fInteractions.Delete();</span>
<span class="lineNum">     129 </span><span class="lineCov">          6 :   fFunctions.SetOwner();</span>
<span class="lineNum">     130 </span><span class="lineCov">          6 :   fFunctions.Delete();</span>
<span class="lineNum">     131 </span><span class="lineCov">          6 :   fPFProtections.SetOwner();</span>
<span class="lineNum">     132 </span><span class="lineCov">          6 :   fPFProtections.Delete();</span>
<span class="lineNum">     133 </span><span class="lineCov">          6 :   fMasks.SetOwner();</span>
<span class="lineNum">     134 </span><span class="lineCov">          6 :   fMasks.Delete();</span>
<span class="lineNum">     135 </span><span class="lineCov">          6 :   fDescriptors.SetOwner();</span>
<span class="lineNum">     136 </span><span class="lineCov">          6 :   fDescriptors.Delete();</span>
<span class="lineNum">     137 </span><span class="lineCov">          6 :   fClusters.SetOwner(); </span>
<span class="lineNum">     138 </span><span class="lineCov">          6 :   fClusters.Delete(); </span>
<span class="lineNum">     139 </span><span class="lineCov">          6 :   fClasses.SetOwner(); </span>
<span class="lineNum">     140 </span><span class="lineCov">          6 :   fClasses.Delete(); </span>
<span class="lineNum">     141 </span><span class="lineCov">         18 : }</span>
<a name="142"><span class="lineNum">     142 </span>            : </a>
<span class="lineNum">     143 </span>            : //_____________________________________________________________________________
<span class="lineNum">     144 </span>            : Bool_t AliTriggerConfiguration::AddInput( AliTriggerInput* input )
<span class="lineNum">     145 </span>            : {
<span class="lineNum">     146 </span>            :   // Add a trigger input to
<span class="lineNum">     147 </span>            :   // the list of the trigger inputs
<span class="lineNum">     148 </span><span class="lineCov">         44 :   if (fInputs.GetEntries() &lt; kNMaxInputs) {</span>
<span class="lineNum">     149 </span><span class="lineCov">         22 :     fInputs.AddLast( input );</span>
<span class="lineNum">     150 </span><span class="lineCov">         22 :     return kTRUE;</span>
<span class="lineNum">     151 </span>            :   }
<span class="lineNum">     152 </span>            :   else {
<span class="lineNum">     153 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 64 inputs ! Impossible to add the required input !&quot;);</span>
<span class="lineNum">     154 </span><span class="lineNoCov">          0 :     return kFALSE;</span>
<span class="lineNum">     155 </span>            :   }
<span class="lineNum">     156 </span><span class="lineCov">         22 : }</span>
<a name="157"><span class="lineNum">     157 </span>            : </a>
<span class="lineNum">     158 </span>            : //_____________________________________________________________________________
<span class="lineNum">     159 </span>            : AliTriggerInput* AliTriggerConfiguration::AddInput( TString &amp;name, TString &amp;det,
<span class="lineNum">     160 </span>            :                                                     UChar_t level, UInt_t signature,
<span class="lineNum">     161 </span>            :                                                     UChar_t number )
<span class="lineNum">     162 </span>            : {
<span class="lineNum">     163 </span>            :   // Add a trigger input to
<span class="lineNum">     164 </span>            :   // the list of the trigger inputs
<span class="lineNum">     165 </span><span class="lineCov">        110 :   AliTriggerInput *input = new AliTriggerInput(name,det,level,signature,number);</span>
<span class="lineNum">     166 </span><span class="lineCov">         22 :   if (!AddInput(input)) {</span>
<span class="lineNum">     167 </span><span class="lineNoCov">          0 :     delete input;</span>
<span class="lineNum">     168 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     169 </span>            :   }
<span class="lineNum">     170 </span>            :   else
<span class="lineNum">     171 </span><span class="lineCov">         22 :     return input;</span>
<a name="172"><span class="lineNum">     172 </span><span class="lineCov">         22 : }</span></a>
<span class="lineNum">     173 </span>            : //_____________________________________________________________________________
<span class="lineNum">     174 </span>            : AliTriggerInput* AliTriggerConfiguration::AddInput( TString &amp;name, TString &amp;det,
<span class="lineNum">     175 </span>            :                                                     UChar_t level, UInt_t signature,
<span class="lineNum">     176 </span>            :                                                     UInt_t indexCTP, UInt_t indexSwitch )
<span class="lineNum">     177 </span>            : {
<span class="lineNum">     178 </span>            :   // Add a trigger input to
<span class="lineNum">     179 </span>            :   // the list of the trigger inputs
<span class="lineNum">     180 </span><span class="lineNoCov">          0 :   AliTriggerInput *input = new AliTriggerInput(name,det,level,signature,indexCTP,indexSwitch);</span>
<span class="lineNum">     181 </span><span class="lineNoCov">          0 :   if (!AddInput(input)) {</span>
<span class="lineNum">     182 </span><span class="lineNoCov">          0 :     delete input;</span>
<span class="lineNum">     183 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     184 </span>            :   }
<span class="lineNum">     185 </span>            :   else
<span class="lineNum">     186 </span><span class="lineNoCov">          0 :     return input;</span>
<span class="lineNum">     187 </span><span class="lineNoCov">          0 : }</span>
<a name="188"><span class="lineNum">     188 </span>            : </a>
<span class="lineNum">     189 </span>            : //_____________________________________________________________________________
<span class="lineNum">     190 </span>            : AliTriggerInteraction* AliTriggerConfiguration::AddInteraction(TString &amp;name, TString &amp;logic)
<span class="lineNum">     191 </span>            : {
<span class="lineNum">     192 </span>            :   // Add a trigger interaction object to
<span class="lineNum">     193 </span>            :   // the list of the trigger interactions
<span class="lineNum">     194 </span><span class="lineCov">          4 :   AliTriggerInteraction *interact = new AliTriggerInteraction(name,logic);</span>
<span class="lineNum">     195 </span><span class="lineCov">          2 :   if (!AddInteraction(interact)) {</span>
<span class="lineNum">     196 </span><span class="lineNoCov">          0 :     delete interact;</span>
<span class="lineNum">     197 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     198 </span>            :   }
<span class="lineNum">     199 </span>            :   else
<span class="lineNum">     200 </span><span class="lineCov">          2 :     return interact;</span>
<span class="lineNum">     201 </span><span class="lineCov">          2 : }</span>
<a name="202"><span class="lineNum">     202 </span>            : </a>
<span class="lineNum">     203 </span>            : //_____________________________________________________________________________
<span class="lineNum">     204 </span>            : Bool_t  AliTriggerConfiguration::AddInteraction(AliTriggerInteraction *interact)
<span class="lineNum">     205 </span>            : {
<span class="lineNum">     206 </span>            :   // Add a trigger interaction object to
<span class="lineNum">     207 </span>            :   // the list of the trigger interactions
<span class="lineNum">     208 </span><span class="lineCov">          4 :   if (fInteractions.GetEntries() &lt; kNMaxInteractions) {</span>
<span class="lineNum">     209 </span><span class="lineCov">          2 :     if (interact-&gt;CheckInputs(fInputs)) {</span>
<span class="lineNum">     210 </span><span class="lineCov">          2 :       fInteractions.AddLast( interact );</span>
<span class="lineNum">     211 </span><span class="lineCov">          2 :       return kTRUE;</span>
<span class="lineNum">     212 </span>            :     }
<span class="lineNum">     213 </span>            :     else
<span class="lineNum">     214 </span><span class="lineNoCov">          0 :       AliError(&quot;Invalid interaction ! Impossible to add it !&quot;);</span>
<span class="lineNum">     215 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     216 </span>            :   else
<span class="lineNum">     217 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 2 interactions ! Impossible to add the required interaction !&quot;);</span>
<span class="lineNum">     218 </span>            : 
<span class="lineNum">     219 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     220 </span><span class="lineCov">          2 : }</span>
<a name="221"><span class="lineNum">     221 </span>            : </a>
<span class="lineNum">     222 </span>            : //_____________________________________________________________________________
<span class="lineNum">     223 </span>            : AliTriggerInteraction* AliTriggerConfiguration::AddFunction(TString &amp;name, TString &amp;logic)
<span class="lineNum">     224 </span>            : {
<span class="lineNum">     225 </span>            :   // Add a trigger function object to
<span class="lineNum">     226 </span>            :   // the list of the trigger functions
<span class="lineNum">     227 </span><span class="lineCov">          4 :   AliTriggerInteraction *func = new AliTriggerInteraction(name,logic);</span>
<span class="lineNum">     228 </span><span class="lineCov">          2 :   if (!AddFunction(func)) {</span>
<span class="lineNum">     229 </span><span class="lineNoCov">          0 :     delete func;</span>
<span class="lineNum">     230 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     231 </span>            :   }
<span class="lineNum">     232 </span>            :   else
<span class="lineNum">     233 </span><span class="lineCov">          2 :     return func;</span>
<span class="lineNum">     234 </span><span class="lineCov">          2 : }</span>
<a name="235"><span class="lineNum">     235 </span>            : </a>
<span class="lineNum">     236 </span>            : //_____________________________________________________________________________
<span class="lineNum">     237 </span>            : Bool_t  AliTriggerConfiguration::AddFunction(AliTriggerInteraction *func)
<span class="lineNum">     238 </span>            : {
<span class="lineNum">     239 </span>            :   // Add a trigger function object to
<span class="lineNum">     240 </span>            :   // the list of the trigger functions
<span class="lineNum">     241 </span><span class="lineCov">          4 :   if (fFunctions.GetEntries() &lt; kNMaxFunctions) {</span>
<span class="lineNum">     242 </span><span class="lineCov">          2 :     if (func-&gt;CheckInputs(fInputs)) {</span>
<span class="lineNum">     243 </span><span class="lineCov">          2 :       fFunctions.AddLast( func );</span>
<span class="lineNum">     244 </span><span class="lineCov">          2 :       return kTRUE;</span>
<span class="lineNum">     245 </span>            :     }
<span class="lineNum">     246 </span>            :     else
<span class="lineNum">     247 </span><span class="lineNoCov">          0 :       AliError(&quot;Invalid logical function ! Impossible to add it !&quot;);</span>
<span class="lineNum">     248 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     249 </span>            :   else
<span class="lineNum">     250 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 4 logical functions ! Impossible to add the required interaction !&quot;);</span>
<span class="lineNum">     251 </span>            : 
<span class="lineNum">     252 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     253 </span><span class="lineCov">          2 : }</span>
<a name="254"><span class="lineNum">     254 </span>            : </a>
<span class="lineNum">     255 </span>            : //_____________________________________________________________________________
<span class="lineNum">     256 </span>            : Bool_t AliTriggerConfiguration::AddPFProtection( AliTriggerPFProtection* pfp )
<span class="lineNum">     257 </span>            : {
<span class="lineNum">     258 </span>            :   // Add a trigger past-future protection object to
<span class="lineNum">     259 </span>            :   // the list of the trigger past-future protections
<span class="lineNum">     260 </span><span class="lineCov">          6 :   if (fPFProtections.GetEntries() &lt; kNMaxPFProtections) {</span>
<span class="lineNum">     261 </span>            :     //if (pfp-&gt;CheckInteractions(fInteractions)) {
<span class="lineNum">     262 </span>            :     if (1) {
<span class="lineNum">     263 </span><span class="lineCov">          3 :       fPFProtections.AddLast( pfp );</span>
<span class="lineNum">     264 </span><span class="lineCov">          3 :       return kTRUE;</span>
<span class="lineNum">     265 </span>            :     }
<span class="lineNum">     266 </span>            :     else
<span class="lineNum">     267 </span>            :       AliError(&quot;Invalid past-future protection ! Impossible to add it !&quot;);
<span class="lineNum">     268 </span>            :   }
<span class="lineNum">     269 </span>            :   else
<span class="lineNum">     270 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 4 past-future protections ! Impossible to add the required protection !&quot;);</span>
<span class="lineNum">     271 </span>            : 
<span class="lineNum">     272 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     273 </span><span class="lineCov">          3 : }</span>
<a name="274"><span class="lineNum">     274 </span>            : </a>
<span class="lineNum">     275 </span>            : //_____________________________________________________________________________
<span class="lineNum">     276 </span>            : AliTriggerBCMask* AliTriggerConfiguration::AddMask( TString &amp;name, TString &amp;mask )
<span class="lineNum">     277 </span>            : {
<span class="lineNum">     278 </span>            :   // Add a trigger bunch-crossing mask object to
<span class="lineNum">     279 </span>            :   // the list of the trigger bunch-crossing masks
<span class="lineNum">     280 </span><span class="lineCov">          6 :   AliTriggerBCMask *bcmask = new AliTriggerBCMask(name,mask);</span>
<span class="lineNum">     281 </span><span class="lineCov">          3 :   if (!AddMask(bcmask)) {</span>
<span class="lineNum">     282 </span><span class="lineNoCov">          0 :     delete bcmask;</span>
<span class="lineNum">     283 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     284 </span>            :   }
<span class="lineNum">     285 </span>            :   else
<span class="lineNum">     286 </span><span class="lineCov">          3 :     return bcmask;</span>
<span class="lineNum">     287 </span><span class="lineCov">          3 : }</span>
<a name="288"><span class="lineNum">     288 </span>            : </a>
<span class="lineNum">     289 </span>            : //_____________________________________________________________________________
<span class="lineNum">     290 </span>            : Bool_t AliTriggerConfiguration::AddMask( AliTriggerBCMask* mask )
<span class="lineNum">     291 </span>            : {
<span class="lineNum">     292 </span>            :   // Add a trigger bunch-crossing mask object to
<span class="lineNum">     293 </span>            :   // the list of the trigger bunch-crossing masks
<span class="lineNum">     294 </span><span class="lineCov">          6 :   if (fMasks.GetEntries() &lt; (kNMaxMasks)) {  </span>
<span class="lineNum">     295 </span><span class="lineCov">          3 :       fMasks.AddLast( mask );</span>
<span class="lineNum">     296 </span><span class="lineCov">          3 :       return kTRUE;</span>
<span class="lineNum">     297 </span>            :   }
<span class="lineNum">     298 </span>            :   else
<span class="lineNum">     299 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 12 bunch-crossing masks ! Impossible to add the required mask !&quot;);</span>
<span class="lineNum">     300 </span>            : 
<span class="lineNum">     301 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     302 </span><span class="lineCov">          3 : }</span>
<a name="303"><span class="lineNum">     303 </span>            : </a>
<span class="lineNum">     304 </span>            : //_____________________________________________________________________________
<span class="lineNum">     305 </span>            : AliTriggerCluster* AliTriggerConfiguration::AddCluster( TString &amp;name, UChar_t index, TString &amp;detectors)
<span class="lineNum">     306 </span>            : {
<span class="lineNum">     307 </span>            :   // Add a trigger detector readout cluster to
<span class="lineNum">     308 </span>            :   // the list of the trigger clusters
<span class="lineNum">     309 </span><span class="lineCov">          4 :   AliTriggerCluster *clust = new AliTriggerCluster(name,index,detectors);</span>
<span class="lineNum">     310 </span><span class="lineCov">          2 :   if (!AddCluster(clust)) {</span>
<span class="lineNum">     311 </span><span class="lineNoCov">          0 :     delete clust;</span>
<span class="lineNum">     312 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     313 </span>            :   }
<span class="lineNum">     314 </span>            :   else
<span class="lineNum">     315 </span><span class="lineCov">          2 :     return clust;</span>
<span class="lineNum">     316 </span>            : 
<span class="lineNum">     317 </span><span class="lineCov">          2 : }</span>
<a name="318"><span class="lineNum">     318 </span>            : </a>
<span class="lineNum">     319 </span>            : //_____________________________________________________________________________
<span class="lineNum">     320 </span>            : Bool_t AliTriggerConfiguration::AddCluster( AliTriggerCluster* cluster )
<span class="lineNum">     321 </span>            : {
<span class="lineNum">     322 </span>            :   // Add a trigger detector readout cluster to
<span class="lineNum">     323 </span>            :   // the list of the trigger clusters
<span class="lineNum">     324 </span><span class="lineCov">          4 :   if (fClusters.GetEntries() &lt; kNMaxClusters) {</span>
<span class="lineNum">     325 </span><span class="lineCov">          2 :     TString dets(cluster-&gt;GetDetectorsInCluster());</span>
<span class="lineNum">     326 </span><span class="lineCov">          4 :     if (!(dets.IsNull())) {</span>
<span class="lineNum">     327 </span><span class="lineCov">          2 :       fClusters.AddLast( cluster );</span>
<span class="lineNum">     328 </span><span class="lineCov">          2 :       return kTRUE;</span>
<span class="lineNum">     329 </span>            :     }
<span class="lineNum">     330 </span>            :     else
<span class="lineNum">     331 </span><span class="lineNoCov">          0 :       AliError(&quot;Empty trigger cluster ! Impossible to add it !&quot;);</span>
<span class="lineNum">     332 </span><span class="lineCov">          2 :   }</span>
<span class="lineNum">     333 </span>            :   else
<span class="lineNum">     334 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 6 different detector clusters ! Impossible to add the required cluster !&quot;);</span>
<span class="lineNum">     335 </span>            : 
<span class="lineNum">     336 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     337 </span><span class="lineCov">          2 : }</span>
<a name="338"><span class="lineNum">     338 </span>            : </a>
<span class="lineNum">     339 </span>            : //_____________________________________________________________________________
<span class="lineNum">     340 </span>            : TString AliTriggerConfiguration::GetActiveDetectors() const
<span class="lineNum">     341 </span>            : {
<span class="lineNum">     342 </span>            :   // Return an string with all active detector
<span class="lineNum">     343 </span>            :   // from each cluster
<span class="lineNum">     344 </span>            : 
<span class="lineNum">     345 </span><span class="lineNoCov">          0 :    TString activeDet = &quot;&quot;;</span>
<span class="lineNum">     346 </span>            : 
<span class="lineNum">     347 </span><span class="lineNoCov">          0 :    Int_t nclus = fClusters.GetEntriesFast();</span>
<span class="lineNum">     348 </span><span class="lineNoCov">          0 :    if( !nclus ) return activeDet;</span>
<span class="lineNum">     349 </span>            :    
<span class="lineNum">     350 </span><span class="lineNoCov">          0 :    for( Int_t j=0; j&lt;nclus; ++j ) {</span>
<span class="lineNum">     351 </span><span class="lineNoCov">          0 :       TString detStr = ((AliTriggerCluster*)fClusters.At(j))-&gt;GetDetectorsInCluster();</span>
<span class="lineNum">     352 </span><span class="lineNoCov">          0 :       TObjArray* det = detStr.Tokenize(&quot; &quot;);</span>
<span class="lineNum">     353 </span><span class="lineNoCov">          0 :       Int_t ndet = det-&gt;GetEntriesFast();</span>
<span class="lineNum">     354 </span><span class="lineNoCov">          0 :       for( Int_t k=0; k&lt;ndet; ++k ) {</span>
<span class="lineNum">     355 </span><span class="lineNoCov">          0 :          if( activeDet.Contains( ((TObjString*)det-&gt;At(k))-&gt;String() ) )continue;</span>
<span class="lineNum">     356 </span><span class="lineNoCov">          0 :          activeDet.Append( &quot; &quot; );</span>
<span class="lineNum">     357 </span><span class="lineNoCov">          0 :          activeDet.Append( ((TObjString*)det-&gt;At(k))-&gt;String() );</span>
<span class="lineNum">     358 </span>            :       }
<span class="lineNum">     359 </span><span class="lineNoCov">          0 :       delete det;</span>
<span class="lineNum">     360 </span><span class="lineNoCov">          0 :    }</span>
<span class="lineNum">     361 </span><span class="lineNoCov">          0 :    return activeDet;</span>
<span class="lineNum">     362 </span><span class="lineNoCov">          0 : }</span>
<a name="363"><span class="lineNum">     363 </span>            : </a>
<span class="lineNum">     364 </span>            : //_____________________________________________________________________________
<span class="lineNum">     365 </span>            : TString AliTriggerConfiguration::GetTriggeringDetectors() const
<span class="lineNum">     366 </span>            : {
<span class="lineNum">     367 </span>            :   // Return an string with all detectors
<span class="lineNum">     368 </span>            :   // used for triggering
<span class="lineNum">     369 </span>            : 
<span class="lineNum">     370 </span><span class="lineNoCov">          0 :    TString trDet = &quot;&quot;;</span>
<span class="lineNum">     371 </span>            : 
<span class="lineNum">     372 </span><span class="lineNoCov">          0 :    Int_t ninputs = fInputs.GetEntriesFast();</span>
<span class="lineNum">     373 </span><span class="lineNoCov">          0 :    if( !ninputs ) return trDet;</span>
<span class="lineNum">     374 </span>            :    
<span class="lineNum">     375 </span><span class="lineNoCov">          0 :    for( Int_t j=0; j&lt;ninputs; j++ ) {</span>
<span class="lineNum">     376 </span><span class="lineNoCov">          0 :       TString detStr = ((AliTriggerInput*)fInputs.At(j))-&gt;GetDetector();</span>
<span class="lineNum">     377 </span><span class="lineNoCov">          0 :       if( trDet.Contains( detStr ) ) continue;</span>
<span class="lineNum">     378 </span><span class="lineNoCov">          0 :       trDet.Append( &quot; &quot; );</span>
<span class="lineNum">     379 </span><span class="lineNoCov">          0 :       trDet.Append( detStr );</span>
<span class="lineNum">     380 </span><span class="lineNoCov">          0 :    }</span>
<span class="lineNum">     381 </span><span class="lineNoCov">          0 :    return trDet;</span>
<span class="lineNum">     382 </span><span class="lineNoCov">          0 : }</span>
<a name="383"><span class="lineNum">     383 </span>            : </a>
<span class="lineNum">     384 </span>            : //_____________________________________________________________________________
<span class="lineNum">     385 </span>            : TString AliTriggerConfiguration::GetTriggeringModules() const
<span class="lineNum">     386 </span>            : {
<span class="lineNum">     387 </span>            :    // Return an string with all detectors (modules in the AliRoot
<span class="lineNum">     388 </span>            :   // simulation sense) used for triggering
<span class="lineNum">     389 </span>            : 
<span class="lineNum">     390 </span><span class="lineCov">         10 :    TString trDet = &quot;&quot;;</span>
<span class="lineNum">     391 </span>            : 
<span class="lineNum">     392 </span><span class="lineCov">          5 :    Int_t ninputs = fInputs.GetEntriesFast();</span>
<span class="lineNum">     393 </span><span class="lineCov">          5 :    if( !ninputs ) return trDet;</span>
<span class="lineNum">     394 </span>            :    
<span class="lineNum">     395 </span><span class="lineCov">        230 :    for( Int_t j=0; j&lt;ninputs; j++ ) {</span>
<span class="lineNum">     396 </span><span class="lineCov">        220 :       TString detStr = ((AliTriggerInput*)fInputs.At(j))-&gt;GetModule();</span>
<span class="lineNum">     397 </span><span class="lineCov">        300 :       if( trDet.Contains( detStr ) ) continue;</span>
<span class="lineNum">     398 </span><span class="lineCov">         30 :       trDet.Append( &quot; &quot; );</span>
<span class="lineNum">     399 </span><span class="lineCov">         30 :       trDet.Append( detStr );</span>
<span class="lineNum">     400 </span><span class="lineCov">        140 :    }</span>
<span class="lineNum">     401 </span><span class="lineCov">          5 :    return trDet;</span>
<span class="lineNum">     402 </span><span class="lineCov">         10 : }</span>
<a name="403"><span class="lineNum">     403 </span>            : </a>
<span class="lineNum">     404 </span>            : //_____________________________________________________________________________
<span class="lineNum">     405 </span>            : AliTriggerDescriptor* AliTriggerConfiguration::AddDescriptor( TString &amp;name, TString &amp;cond )
<span class="lineNum">     406 </span>            : {
<span class="lineNum">     407 </span>            :   // Add a trigger descriptor to
<span class="lineNum">     408 </span>            :   // the list of the trigger descriptors
<span class="lineNum">     409 </span><span class="lineCov">         36 :   AliTriggerDescriptor *desc = new AliTriggerDescriptor(name,cond);</span>
<span class="lineNum">     410 </span><span class="lineCov">         18 :   if (!AddDescriptor(desc)) {</span>
<span class="lineNum">     411 </span><span class="lineNoCov">          0 :     delete desc;</span>
<span class="lineNum">     412 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     413 </span>            :   }
<span class="lineNum">     414 </span>            :   else
<span class="lineNum">     415 </span><span class="lineCov">         18 :     return desc;</span>
<span class="lineNum">     416 </span><span class="lineCov">         18 : }</span>
<a name="417"><span class="lineNum">     417 </span>            : </a>
<span class="lineNum">     418 </span>            : //_____________________________________________________________________________
<span class="lineNum">     419 </span>            : Bool_t AliTriggerConfiguration::AddDescriptor( AliTriggerDescriptor *desc )
<span class="lineNum">     420 </span>            : {
<span class="lineNum">     421 </span>            :   // Add a trigger descriptor to
<span class="lineNum">     422 </span>            :   // the list of the trigger descriptors
<span class="lineNum">     423 </span><span class="lineCov">         36 :   if (fDescriptors.GetEntries() &lt; kNMaxClasses) {</span>
<span class="lineNum">     424 </span><span class="lineCov">         18 :     if (desc-&gt;CheckInputsAndFunctions(fInputs,fFunctions)) {</span>
<span class="lineNum">     425 </span><span class="lineCov">         18 :       fDescriptors.AddLast( desc );</span>
<span class="lineNum">     426 </span><span class="lineCov">         18 :       return kTRUE;</span>
<span class="lineNum">     427 </span>            :     }
<span class="lineNum">     428 </span>            :     else
<span class="lineNum">     429 </span><span class="lineNoCov">          0 :       AliError(&quot;Invalid trigger desciptor ! Impossible to add it !&quot;);</span>
<span class="lineNum">     430 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     431 </span>            :   else
<span class="lineNum">     432 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 50 different descriptors ! Impossible to add the required descriptor !&quot;);</span>
<span class="lineNum">     433 </span>            : 
<span class="lineNum">     434 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     435 </span><span class="lineCov">         18 : }</span>
<a name="436"><span class="lineNum">     436 </span>            : </a>
<span class="lineNum">     437 </span>            : //_____________________________________________________________________________
<span class="lineNum">     438 </span>            : Bool_t AliTriggerConfiguration::AddClass( AliTriggerClass *trclass )
<span class="lineNum">     439 </span>            : {
<span class="lineNum">     440 </span>            :   // Add a trigger class to
<span class="lineNum">     441 </span>            :   // the list of the trigger classes
<span class="lineNum">     442 </span><span class="lineCov">         36 :   if (fClasses.GetEntries() &lt; kNMaxClasses) {</span>
<span class="lineNum">     443 </span><span class="lineCov">         18 :     if (trclass-&gt;CheckClass(this)) {</span>
<span class="lineNum">     444 </span><span class="lineCov">         18 :       fClasses.AddLast( trclass );</span>
<span class="lineNum">     445 </span><span class="lineCov">         18 :       return kTRUE;</span>
<span class="lineNum">     446 </span>            :     }
<span class="lineNum">     447 </span>            :     else
<span class="lineNum">     448 </span><span class="lineNoCov">          0 :       AliError(&quot;Invalid trigger class ! Impossible to add it !&quot;);</span>
<span class="lineNum">     449 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     450 </span>            :   else
<span class="lineNum">     451 </span><span class="lineNoCov">          0 :     AliError(&quot;CTP can handle up to 50 different classes ! Impossible to add the required class !&quot;);</span>
<span class="lineNum">     452 </span>            : 
<span class="lineNum">     453 </span><span class="lineNoCov">          0 :   return kFALSE;</span>
<span class="lineNum">     454 </span><span class="lineCov">         18 : }</span>
<a name="455"><span class="lineNum">     455 </span>            : </a>
<span class="lineNum">     456 </span>            : //_____________________________________________________________________________
<span class="lineNum">     457 </span>            : AliTriggerClass *AliTriggerConfiguration::AddClass( TString &amp;name, UChar_t index,
<span class="lineNum">     458 </span>            :                                                     AliTriggerDescriptor *desc, AliTriggerCluster *clus,
<span class="lineNum">     459 </span>            :                                                     AliTriggerPFProtection *pfp, AliTriggerBCMask *mask,
<span class="lineNum">     460 </span>            :                                                     UInt_t prescaler, Bool_t allrare)
<span class="lineNum">     461 </span>            : {
<span class="lineNum">     462 </span>            :   // Add a trigger class to
<span class="lineNum">     463 </span>            :   // the list of the trigger classes
<span class="lineNum">     464 </span><span class="lineNoCov">          0 :   if (!fDescriptors.FindObject(desc)) {</span>
<span class="lineNum">     465 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid descriptor ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     466 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     467 </span>            :   }
<span class="lineNum">     468 </span><span class="lineNoCov">          0 :   if (!fClusters.FindObject(clus)) {</span>
<span class="lineNum">     469 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid cluster ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     470 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     471 </span>            :   }
<span class="lineNum">     472 </span><span class="lineNoCov">          0 :   if (!fPFProtections.FindObject(pfp)) {</span>
<span class="lineNum">     473 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid past-future protection ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     474 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     475 </span>            :   }
<span class="lineNum">     476 </span><span class="lineNoCov">          0 :   if (!fMasks.FindObject(mask)) {</span>
<span class="lineNum">     477 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid bunch-crossing mask ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     478 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     479 </span>            :   }
<span class="lineNum">     480 </span><span class="lineNoCov">          0 :   AliTriggerClass* trclass = new AliTriggerClass( name,index,desc,clus,pfp,mask,prescaler,allrare );</span>
<span class="lineNum">     481 </span><span class="lineNoCov">          0 :   if (!AddClass(trclass)) {</span>
<span class="lineNum">     482 </span><span class="lineNoCov">          0 :     delete trclass;</span>
<span class="lineNum">     483 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     484 </span>            :   }
<span class="lineNum">     485 </span>            :   else
<span class="lineNum">     486 </span><span class="lineNoCov">          0 :     return trclass;</span>
<span class="lineNum">     487 </span><span class="lineNoCov">          0 : }</span>
<a name="488"><span class="lineNum">     488 </span>            : </a>
<span class="lineNum">     489 </span>            : //_____________________________________________________________________________
<span class="lineNum">     490 </span>            : AliTriggerClass *AliTriggerConfiguration::AddClass( TString &amp;name, UChar_t index,
<span class="lineNum">     491 </span>            :                                                     TString &amp;desc, TString &amp;clus,
<span class="lineNum">     492 </span>            :                                                     TString &amp;pfp, TString &amp;mask,
<span class="lineNum">     493 </span>            :                                                     UInt_t prescaler, Bool_t allrare)
<span class="lineNum">     494 </span>            : {
<span class="lineNum">     495 </span>            :    // Add a new trigger class
<span class="lineNum">     496 </span><span class="lineNoCov">          0 :   if (!fDescriptors.FindObject(desc)) {</span>
<span class="lineNum">     497 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid descriptor ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     498 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     499 </span>            :   }
<span class="lineNum">     500 </span><span class="lineNoCov">          0 :   if (!fClusters.FindObject(clus)) {</span>
<span class="lineNum">     501 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid cluster ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     502 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     503 </span>            :   }
<span class="lineNum">     504 </span><span class="lineNoCov">          0 :   if (!fPFProtections.FindObject(pfp)) {</span>
<span class="lineNum">     505 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid past-future protection ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     506 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     507 </span>            :   }
<span class="lineNum">     508 </span><span class="lineNoCov">          0 :   if (!fMasks.FindObject(mask)) {</span>
<span class="lineNum">     509 </span><span class="lineNoCov">          0 :     AliError(&quot;Invalid bunch-crossing mask ! Impossible to add the class !&quot;);</span>
<span class="lineNum">     510 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     511 </span>            :   }
<span class="lineNum">     512 </span><span class="lineNoCov">          0 :   AliTriggerClass* trclass = new AliTriggerClass( this, name,index,desc,clus,pfp,mask,prescaler,allrare );</span>
<span class="lineNum">     513 </span><span class="lineNoCov">          0 :   if (!AddClass(trclass)) {</span>
<span class="lineNum">     514 </span><span class="lineNoCov">          0 :     delete trclass;</span>
<span class="lineNum">     515 </span><span class="lineNoCov">          0 :     return NULL;</span>
<span class="lineNum">     516 </span>            :   }
<span class="lineNum">     517 </span>            :   else
<span class="lineNum">     518 </span><span class="lineNoCov">          0 :     return trclass;</span>
<span class="lineNum">     519 </span><span class="lineNoCov">          0 : }</span>
<a name="520"><span class="lineNum">     520 </span>            : </a>
<span class="lineNum">     521 </span>            : //_____________________________________________________________________________
<span class="lineNum">     522 </span>            : Bool_t AliTriggerConfiguration::ProcessConfigurationLine(const char* line, Int_t&amp; level)
<span class="lineNum">     523 </span>            : {
<span class="lineNum">     524 </span>            :     // processes one line of configuration
<span class="lineNum">     525 </span>            : 
<span class="lineNum">     526 </span><span class="lineCov">        178 :      TString strLine(line);</span>
<span class="lineNum">     527 </span>            : 
<span class="lineNum">     528 </span><span class="lineCov">        190 :      if (strLine.BeginsWith(&quot;#&quot;)) return kTRUE;</span>
<span class="lineNum">     529 </span><span class="lineCov">        154 :      if (strLine.BeginsWith(&quot;PARTITION:&quot;)) {</span>
<span class="lineNum">     530 </span><span class="lineNoCov">          0 :        strLine.ReplaceAll(&quot;PARTITION:&quot;,&quot;&quot;);</span>
<span class="lineNum">     531 </span><span class="lineNoCov">          0 :        SetName(strLine.Data());</span>
<span class="lineNum">     532 </span><span class="lineNoCov">          0 :        return kTRUE;</span>
<span class="lineNum">     533 </span>            :      }
<span class="lineNum">     534 </span><span class="lineCov">        154 :      if (strLine.BeginsWith(&quot;VERSION:&quot;)) {</span>
<span class="lineNum">     535 </span><span class="lineNoCov">          0 :        strLine.ReplaceAll(&quot;VERSION:&quot;,&quot;&quot;);</span>
<span class="lineNum">     536 </span><span class="lineNoCov">          0 :        fVersion = strLine.Atoi();</span>
<span class="lineNum">     537 </span><span class="lineNoCov">          0 :        return kTRUE;</span>
<span class="lineNum">     538 </span>            :      }
<span class="lineNum">     539 </span><span class="lineCov">        154 :      if (strLine.BeginsWith(&quot;INPUTS:&quot;)) {</span>
<span class="lineNum">     540 </span><span class="lineCov">          1 :        level = 1;</span>
<span class="lineNum">     541 </span><span class="lineCov">          1 :        return kTRUE;</span>
<span class="lineNum">     542 </span>            :      }
<span class="lineNum">     543 </span><span class="lineCov">        152 :      if (strLine.BeginsWith(&quot;INTERACTIONS:&quot;)) {</span>
<span class="lineNum">     544 </span><span class="lineCov">          1 :        level = 2;</span>
<span class="lineNum">     545 </span><span class="lineCov">          1 :        return kTRUE;</span>
<span class="lineNum">     546 </span>            :      }
<span class="lineNum">     547 </span><span class="lineCov">        150 :      if (strLine.BeginsWith(&quot;DESCRIPTORS:&quot;)) {</span>
<span class="lineNum">     548 </span><span class="lineCov">          1 :        level = 3;</span>
<span class="lineNum">     549 </span><span class="lineCov">          1 :        return kTRUE;</span>
<span class="lineNum">     550 </span>            :      }
<span class="lineNum">     551 </span><span class="lineCov">        148 :      if (strLine.BeginsWith(&quot;CLUSTERS:&quot;)) {</span>
<span class="lineNum">     552 </span><span class="lineCov">          1 :        level = 4;</span>
<span class="lineNum">     553 </span><span class="lineCov">          1 :        return kTRUE;</span>
<span class="lineNum">     554 </span>            :      }
<span class="lineNum">     555 </span><span class="lineCov">        146 :      if (strLine.BeginsWith(&quot;PFS:&quot;)) {</span>
<span class="lineNum">     556 </span><span class="lineCov">          1 :        level = 5;</span>
<span class="lineNum">     557 </span><span class="lineCov">          1 :        return kTRUE;</span>
<span class="lineNum">     558 </span>            :      }
<span class="lineNum">     559 </span><span class="lineCov">        144 :      if (strLine.BeginsWith(&quot;BCMASKS:&quot;)) {</span>
<span class="lineNum">     560 </span><span class="lineCov">          1 :        level = 6;</span>
<span class="lineNum">     561 </span><span class="lineCov">          1 :        return kTRUE;</span>
<span class="lineNum">     562 </span>            :      }
<span class="lineNum">     563 </span><span class="lineCov">        142 :      if (strLine.BeginsWith(&quot;CLASSES:&quot;)) {</span>
<span class="lineNum">     564 </span><span class="lineCov">          1 :        level = 7;</span>
<span class="lineNum">     565 </span><span class="lineCov">          1 :        return kTRUE;</span>
<span class="lineNum">     566 </span>            :      }
<span class="lineNum">     567 </span>            : 
<span class="lineNum">     568 </span><span class="lineCov">        210 :      strLine.ReplaceAll(&quot;*&quot;,'!');</span>
<span class="lineNum">     569 </span><span class="lineCov">        210 :      strLine.ReplaceAll(&quot;~&quot;,'!');</span>
<span class="lineNum">     570 </span><span class="lineCov">        210 :      TObjArray *tokens = strLine.Tokenize(&quot; \t&quot;);</span>
<span class="lineNum">     571 </span><span class="lineCov">         70 :      Int_t ntokens = tokens-&gt;GetEntriesFast();</span>
<span class="lineNum">     572 </span><span class="lineCov">         70 :      if (ntokens == 0)</span>
<span class="lineNum">     573 </span>            :      {
<span class="lineNum">     574 </span><span class="lineNoCov">          0 :        delete tokens;</span>
<span class="lineNum">     575 </span><span class="lineNoCov">          0 :        return kTRUE;</span>
<span class="lineNum">     576 </span>            :      }
<span class="lineNum">     577 </span><span class="lineCov">         70 :      switch (level) {</span>
<span class="lineNum">     578 </span>            :      case 1:
<span class="lineNum">     579 </span>            :        // Read inputs
<span class="lineNum">     580 </span><span class="lineCov">         22 :        if ((ntokens != 5) &amp;&amp; (ntokens !=6)) {</span>
<span class="lineNum">     581 </span><span class="lineNoCov">          0 :          AliError(Form(&quot;Invalid trigger input syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     582 </span><span class="lineNoCov">          0 :          delete tokens;</span>
<span class="lineNum">     583 </span><span class="lineNoCov">          0 :          return kFALSE;</span>
<span class="lineNum">     584 </span>            :        }
<span class="lineNum">     585 </span><span class="lineCov">         44 :        if(ntokens==5){</span>
<span class="lineNum">     586 </span><span class="lineCov">         88 :          AddInput(((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     587 </span><span class="lineCov">         44 :                      ((TObjString*)tokens-&gt;At(1))-&gt;String(),</span>
<span class="lineNum">     588 </span><span class="lineCov">         66 :                      ((TObjString*)tokens-&gt;At(2))-&gt;String().Atoi(),</span>
<span class="lineNum">     589 </span><span class="lineCov">         44 :                      ((TObjString*)tokens-&gt;At(3))-&gt;String().Atoi(),</span>
<span class="lineNum">     590 </span><span class="lineCov">         66 :                      ((TObjString*)tokens-&gt;At(4))-&gt;String().Atoi());</span>
<span class="lineNum">     591 </span>            :        }else{                
<span class="lineNum">     592 </span><span class="lineNoCov">          0 :          AddInput(((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     593 </span><span class="lineNoCov">          0 :                      ((TObjString*)tokens-&gt;At(1))-&gt;String(),</span>
<span class="lineNum">     594 </span><span class="lineNoCov">          0 :                      ((TObjString*)tokens-&gt;At(2))-&gt;String().Atoi(),</span>
<span class="lineNum">     595 </span><span class="lineNoCov">          0 :                      ((TObjString*)tokens-&gt;At(3))-&gt;String().Atoi(),</span>
<span class="lineNum">     596 </span><span class="lineNoCov">          0 :                      ((TObjString*)tokens-&gt;At(4))-&gt;String().Atoi(),</span>
<span class="lineNum">     597 </span><span class="lineNoCov">          0 :                      ((TObjString*)tokens-&gt;At(5))-&gt;String().Atoi());</span>
<span class="lineNum">     598 </span>            :        }                     
<span class="lineNum">     599 </span>            :        break;
<span class="lineNum">     600 </span>            :      case 2:
<span class="lineNum">     601 </span>            :        // Read interaction
<span class="lineNum">     602 </span>            :        {
<span class="lineNum">     603 </span><span class="lineCov">          2 :         TString inter;</span>
<span class="lineNum">     604 </span><span class="lineCov">          2 :         if (ntokens &lt; 2) {</span>
<span class="lineNum">     605 </span><span class="lineNoCov">          0 :          AliError(Form(&quot;Invalid trigger interaction syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     606 </span><span class="lineNoCov">          0 :          delete tokens;</span>
<span class="lineNum">     607 </span><span class="lineNoCov">          0 :          return kFALSE;</span>
<span class="lineNum">     608 </span><span class="lineCov">          2 :         } else if (ntokens == 2) {</span>
<span class="lineNum">     609 </span><span class="lineCov">          4 :          inter=((TObjString*)tokens-&gt;At(1))-&gt;String();</span>
<span class="lineNum">     610 </span>            :         } else {
<span class="lineNum">     611 </span><span class="lineNoCov">          0 :          AliWarning(Form(&quot;Trigger interaction syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     612 </span><span class="lineNoCov">          0 :          for(Int_t i=1;i&lt;ntokens;i++){</span>
<span class="lineNum">     613 </span><span class="lineNoCov">          0 :             inter=inter+((TObjString*)tokens-&gt;At(i))-&gt;String();</span>
<span class="lineNum">     614 </span>            :          }
<span class="lineNum">     615 </span>            :         }
<span class="lineNum">     616 </span><span class="lineCov">          4 :         AddInteraction(((TObjString*)tokens-&gt;At(0))-&gt;String(),inter);</span>
<span class="lineNum">     617 </span><span class="lineCov">          2 :         break;</span>
<span class="lineNum">     618 </span><span class="lineCov">          2 :        }</span>
<span class="lineNum">     619 </span>            :      case 3:
<span class="lineNum">     620 </span>            :        // Read logical functions and descriptors
<span class="lineNum">     621 </span><span class="lineCov">         40 :        if (ntokens &lt; 2) {</span>
<span class="lineNum">     622 </span><span class="lineCov">         20 :          if ((((TObjString*)tokens-&gt;At(0))-&gt;String().CompareTo(&quot;EMPTY&quot;) == 0) ||</span>
<span class="lineNum">     623 </span><span class="lineNoCov">          0 :              (((TObjString*)tokens-&gt;At(0))-&gt;String().CompareTo(&quot;DTRUE&quot;) == 0) ||</span>
<span class="lineNum">     624 </span><span class="lineNoCov">          0 :              (((TObjString*)tokens-&gt;At(0))-&gt;String().CompareTo(&quot;DEMPTY&quot;) == 0)) {</span>
<span class="lineNum">     625 </span><span class="lineNoCov">          0 :            AddDescriptor(((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     626 </span><span class="lineNoCov">          0 :                          strLine.ReplaceAll(((TObjString*)tokens-&gt;At(0))-&gt;String(),&quot;&quot;));</span>
<span class="lineNum">     627 </span>            :            break;
<span class="lineNum">     628 </span>            :          }
<span class="lineNum">     629 </span>            :          else {
<span class="lineNum">     630 </span><span class="lineNoCov">          0 :            AliError(Form(&quot;Invalid trigger descriptor syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     631 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     632 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     633 </span>            :          }
<span class="lineNum">     634 </span>            :        }
<span class="lineNum">     635 </span><span class="lineCov">         60 :        if (((TObjString*)tokens-&gt;At(0))-&gt;String().BeginsWith(&quot;l0f&quot;)) {</span>
<span class="lineNum">     636 </span>            :          // function
<span class="lineNum">     637 </span><span class="lineCov">         28 :          if(!AddFunction(((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     638 </span><span class="lineCov">          4 :                          strLine.ReplaceAll(((TObjString*)tokens-&gt;At(0))-&gt;String(),&quot;&quot;))) {</span>
<span class="lineNum">     639 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     640 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     641 </span>            :          }
<span class="lineNum">     642 </span>            :        }
<span class="lineNum">     643 </span>            :        else {
<span class="lineNum">     644 </span><span class="lineCov">         72 :          if(!AddDescriptor(((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     645 </span><span class="lineCov">         36 :                            strLine.ReplaceAll(((TObjString*)tokens-&gt;At(0))-&gt;String(),&quot;&quot;))) {</span>
<span class="lineNum">     646 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     647 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     648 </span>            :          }
<span class="lineNum">     649 </span>            :        }
<span class="lineNum">     650 </span>            :        break;
<span class="lineNum">     651 </span>            :      case 4:
<span class="lineNum">     652 </span>            :        {
<span class="lineNum">     653 </span><span class="lineCov">          2 :          if (ntokens &lt; 2) {</span>
<span class="lineNum">     654 </span><span class="lineNoCov">          0 :            AliError(Form(&quot;Invalid trigger cluster syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     655 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     656 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     657 </span>            :          }
<span class="lineNum">     658 </span><span class="lineCov">          6 :          if (((TObjString*)tokens-&gt;At(1))-&gt;String().Atoi() &lt;= 0) {</span>
<span class="lineNum">     659 </span><span class="lineNoCov">          0 :            AliError(Form(&quot;Invalid trigger cluster syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     660 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     661 </span>            :          }
<span class="lineNum">     662 </span><span class="lineCov">          2 :          TString strTemp;</span>
<span class="lineNum">     663 </span><span class="lineCov">         56 :          for(Int_t i = 2; i &lt; ntokens; i++) {</span>
<span class="lineNum">     664 </span><span class="lineCov">         52 :            strTemp += ((TObjString*)tokens-&gt;At(i))-&gt;String();</span>
<span class="lineNum">     665 </span><span class="lineCov">         26 :            strTemp += &quot; &quot;;</span>
<span class="lineNum">     666 </span>            :          }
<span class="lineNum">     667 </span><span class="lineCov">          6 :          AddCluster(((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     668 </span><span class="lineCov">          6 :                          ((TObjString*)tokens-&gt;At(1))-&gt;String().Atoi(),</span>
<span class="lineNum">     669 </span>            :                          strTemp);
<span class="lineNum">     670 </span><span class="lineCov">          2 :        }</span>
<span class="lineNum">     671 </span><span class="lineCov">          2 :        break;</span>
<span class="lineNum">     672 </span>            :      case 5:
<span class="lineNum">     673 </span>            :        {
<span class="lineNum">     674 </span>            :          AliTriggerPFProtection *pfp = NULL;
<span class="lineNum">     675 </span><span class="lineCov">         12 :          if ((((TObjString*)tokens-&gt;At(0))-&gt;String().CompareTo(&quot;NONE&quot;) == 0) ||</span>
<span class="lineNum">     676 </span><span class="lineCov">          9 :              (((TObjString*)tokens-&gt;At(0))-&gt;String().CompareTo(&quot;NOPF&quot;) == 0)) {</span>
<span class="lineNum">     677 </span><span class="lineCov">          3 :            pfp = new AliTriggerPFProtection(((TObjString*)tokens-&gt;At(0))-&gt;String());</span>
<span class="lineNum">     678 </span><span class="lineCov">          1 :          }</span>
<span class="lineNum">     679 </span>            :          else {
<span class="lineNum">     680 </span><span class="lineCov">          4 :            if ((ntokens == 10) &amp;&amp; (fVersion&lt;=7)){ </span>
<span class="lineNum">     681 </span><span class="lineCov">          8 :             pfp = new AliTriggerPFProtection(((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     682 </span><span class="lineCov">          4 :                                             ((TObjString*)tokens-&gt;At(1))-&gt;String(),</span>
<span class="lineNum">     683 </span><span class="lineCov">          4 :                                             ((TObjString*)tokens-&gt;At(2))-&gt;String(),</span>
<span class="lineNum">     684 </span><span class="lineCov">          4 :                                             ((TObjString*)tokens-&gt;At(3))-&gt;String());</span>
<span class="lineNum">     685 </span><span class="lineCov">          6 :             pfp-&gt;SetNa1(((TObjString*)tokens-&gt;At(4))-&gt;String().Atoi());</span>
<span class="lineNum">     686 </span><span class="lineCov">          6 :             pfp-&gt;SetNa2(((TObjString*)tokens-&gt;At(5))-&gt;String().Atoi());</span>
<span class="lineNum">     687 </span><span class="lineCov">          6 :             pfp-&gt;SetNb1(((TObjString*)tokens-&gt;At(6))-&gt;String().Atoi());</span>
<span class="lineNum">     688 </span><span class="lineCov">          6 :             pfp-&gt;SetNb2(((TObjString*)tokens-&gt;At(7))-&gt;String().Atoi());</span>
<span class="lineNum">     689 </span><span class="lineCov">          6 :             pfp-&gt;SetTa(((TObjString*)tokens-&gt;At(8))-&gt;String().Atoi());</span>
<span class="lineNum">     690 </span><span class="lineCov">          6 :             pfp-&gt;SetTb(((TObjString*)tokens-&gt;At(9))-&gt;String().Atoi());</span>
<span class="lineNum">     691 </span><span class="lineCov">          2 :           }else if((ntokens == 13) &amp;&amp; (fVersion&lt;=7)){</span>
<span class="lineNum">     692 </span><span class="lineNoCov">          0 :             UInt_t pfdef[12];</span>
<span class="lineNum">     693 </span><span class="lineNoCov">          0 :             for(Int_t i=0;i&lt;12;i++){</span>
<span class="lineNum">     694 </span><span class="lineNoCov">          0 :                TString ss(((TObjString*)tokens-&gt;At(i+1))-&gt;String());</span>
<span class="lineNum">     695 </span><span class="lineNoCov">          0 :                ss.Remove(0,2);</span>
<span class="lineNum">     696 </span>            :                UInt_t num=0;
<span class="lineNum">     697 </span><span class="lineNoCov">          0 :                for(Int_t j=ss.Length()-1;j&gt;=0;j--){</span>
<span class="lineNum">     698 </span><span class="lineNoCov">          0 :                 UInt_t nn=ss[j];</span>
<span class="lineNum">     699 </span><span class="lineNoCov">          0 :                 if(nn &gt;= (UInt_t)'0' &amp;&amp; nn &lt;= (UInt_t)'9')nn=nn-(UInt_t)'0'; else </span>
<span class="lineNum">     700 </span><span class="lineNoCov">          0 :                 if(nn &gt;= (UInt_t)'A' &amp;&amp; nn &lt;= (UInt_t)'F')nn=10+nn-(UInt_t)'A'; else</span>
<span class="lineNum">     701 </span><span class="lineNoCov">          0 :                 if(nn &gt;= (UInt_t)'a' &amp;&amp; nn &lt;= (UInt_t)'f')nn=10+nn-(UInt_t)'a'; else{</span>
<span class="lineNum">     702 </span><span class="lineNoCov">          0 :                         AliError(Form(&quot;Invalid trigger pfs syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     703 </span>            :                         //return kFALSE;
<span class="lineNum">     704 </span>            :                 }
<span class="lineNum">     705 </span><span class="lineNoCov">          0 :                 num=num+(1&lt;&lt;(ss.Length()-1-j)*4)*nn;</span>
<span class="lineNum">     706 </span>            :                 //cout &lt;&lt; ss[j] &lt;&lt; &quot; 2 &quot; &lt;&lt; nn &lt;&lt; &quot; &quot;  &lt;&lt; num &lt;&lt; endl;
<span class="lineNum">     707 </span>            :                }
<span class="lineNum">     708 </span><span class="lineNoCov">          0 :                pfdef[i]=num;</span>
<span class="lineNum">     709 </span><span class="lineNoCov">          0 :             }   </span>
<span class="lineNum">     710 </span><span class="lineNoCov">          0 :             pfp = new AliTriggerPFProtection(((TObjString*)tokens-&gt;At(0))-&gt;String(),pfdef);</span>
<span class="lineNum">     711 </span><span class="lineNoCov">          0 :           }else if((ntokens==9) &amp;&amp; (fVersion&gt;7)){</span>
<span class="lineNum">     712 </span>            :             // new LML0 PF
<span class="lineNum">     713 </span><span class="lineNoCov">          0 :             pfp = new AliTriggerPFProtection(</span>
<span class="lineNum">     714 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(0))-&gt;String(),</span>
<span class="lineNum">     715 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(1))-&gt;String(),</span>
<span class="lineNum">     716 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(2))-&gt;String(),</span>
<span class="lineNum">     717 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(3))-&gt;String().Atoi(),</span>
<span class="lineNum">     718 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(4))-&gt;String().Atoi(),</span>
<span class="lineNum">     719 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(5))-&gt;String().Atoi(),</span>
<span class="lineNum">     720 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(6))-&gt;String().Atoi(),</span>
<span class="lineNum">     721 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(7))-&gt;String().Atoi(),</span>
<span class="lineNum">     722 </span><span class="lineNoCov">          0 :             ((TObjString*)tokens-&gt;At(8))-&gt;String().Atoi()</span>
<span class="lineNum">     723 </span>            :             );
<span class="lineNum">     724 </span><span class="lineNoCov">          0 :           }else{</span>
<span class="lineNum">     725 </span><span class="lineNoCov">          0 :              AliError(Form(&quot;Invalid trigger pfs syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     726 </span>            :              //return kFALSE;
<span class="lineNum">     727 </span>            :           }
<span class="lineNum">     728 </span>            :          }
<span class="lineNum">     729 </span><span class="lineCov">          3 :          AddPFProtection(pfp);</span>
<span class="lineNum">     730 </span>            :        }
<span class="lineNum">     731 </span><span class="lineCov">          3 :        break;</span>
<span class="lineNum">     732 </span>            :      case 6:
<span class="lineNum">     733 </span><span class="lineCov">          3 :          if (ntokens &gt; 2) {</span>
<span class="lineNum">     734 </span><span class="lineNoCov">          0 :            AliError(Form(&quot;Invalid trigger bcmasks syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     735 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     736 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     737 </span>            :          }
<span class="lineNum">     738 </span><span class="lineCov">          9 :        if (((TObjString*)tokens-&gt;At(0))-&gt;String().CompareTo(&quot;NONE&quot;) == 0)</span>
<span class="lineNum">     739 </span>            :        {         
<span class="lineNum">     740 </span><span class="lineNoCov">          0 :          if(!AddMask(new AliTriggerBCMask(((TObjString*)tokens-&gt;At(0))-&gt;String()))) {</span>
<span class="lineNum">     741 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     742 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     743 </span>            :          }
<span class="lineNum">     744 </span>            :        }
<span class="lineNum">     745 </span>            :        else {
<span class="lineNum">     746 </span><span class="lineCov">         12 :          if(!AddMask(((TObjString*)tokens-&gt;At(0))-&gt;String(),((TObjString*)tokens-&gt;At(1))-&gt;String())) {</span>
<span class="lineNum">     747 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     748 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     749 </span>            :          }
<span class="lineNum">     750 </span>            :        }
<span class="lineNum">     751 </span>            :        break;
<span class="lineNum">     752 </span>            :      case 7:
<span class="lineNum">     753 </span>            :        {
<span class="lineNum">     754 </span><span class="lineCov">         18 :          if ((ntokens !=8) &amp;&amp; (ntokens != 10) &amp;&amp; (ntokens != 11)) {</span>
<span class="lineNum">     755 </span><span class="lineNoCov">          0 :            AliError(Form(&quot;Invalid trigger class syntax (%s)!&quot;,strLine.Data()));</span>
<span class="lineNum">     756 </span><span class="lineNoCov">          0 :            delete tokens;</span>
<span class="lineNum">     757 </span><span class="lineNoCov">          0 :            return kFALSE;</span>
<span class="lineNum">     758 </span>            :          }
<span class="lineNum">     759 </span>            :          AliTriggerClass *trclass=0;
<span class="lineNum">     760 </span><span class="lineCov">         90 :          if(ntokens == 8)trclass = new AliTriggerClass(this,</span>
<span class="lineNum">     761 </span><span class="lineCov">         72 :                         ((TObjString*)tokens-&gt;At(0))-&gt;String(),((TObjString*)tokens-&gt;At(1))-&gt;String().Atoi(),</span>
<span class="lineNum">     762 </span><span class="lineCov">         54 :                         ((TObjString*)tokens-&gt;At(2))-&gt;String(),((TObjString*)tokens-&gt;At(3))-&gt;String(),</span>
<span class="lineNum">     763 </span><span class="lineCov">         54 :                         ((TObjString*)tokens-&gt;At(4))-&gt;String(),((TObjString*)tokens-&gt;At(5))-&gt;String(),</span>
<span class="lineNum">     764 </span><span class="lineCov">         90 :                         ((TObjString*)tokens-&gt;At(6))-&gt;String().Atoi(),(Bool_t)(((TObjString*)tokens-&gt;At(7))-&gt;String().Atoi()));</span>
<span class="lineNum">     765 </span><span class="lineNoCov">          0 :          else{ trclass = new AliTriggerClass(this,</span>
<span class="lineNum">     766 </span><span class="lineNoCov">          0 :                         ((TObjString*)tokens-&gt;At(0))-&gt;String(),((TObjString*)tokens-&gt;At(1))-&gt;String().Atoi(),</span>
<span class="lineNum">     767 </span><span class="lineNoCov">          0 :                         ((TObjString*)tokens-&gt;At(2))-&gt;String(),((TObjString*)tokens-&gt;At(3))-&gt;String(),</span>
<span class="lineNum">     768 </span><span class="lineNoCov">          0 :                         ((TObjString*)tokens-&gt;At(4))-&gt;String(),</span>
<span class="lineNum">     769 </span><span class="lineNoCov">          0 :                         ((TObjString*)tokens-&gt;At(6))-&gt;String().Atoi(),(Bool_t)(((TObjString*)tokens-&gt;At(7))-&gt;String().Atoi()),</span>
<span class="lineNum">     770 </span><span class="lineNoCov">          0 :                         (((TObjString*)tokens-&gt;At(8))-&gt;String().Atoi()),(((TObjString*)tokens-&gt;At(9))-&gt;String().Atoi()));</span>
<span class="lineNum">     771 </span><span class="lineNoCov">          0 :            if(!trclass-&gt;SetMasks(this,((TObjString*)tokens-&gt;At(5))-&gt;String())) {</span>
<span class="lineNum">     772 </span><span class="lineNoCov">          0 :              delete tokens;</span>
<span class="lineNum">     773 </span><span class="lineNoCov">          0 :              return kFALSE;</span>
<span class="lineNum">     774 </span>            :            }
<span class="lineNum">     775 </span>            :          }
<span class="lineNum">     776 </span><span class="lineCov">         18 :          AddClass(trclass);</span>
<span class="lineNum">     777 </span><span class="lineCov">         18 :        }</span>
<span class="lineNum">     778 </span>            :      default:
<span class="lineNum">     779 </span>            :        break;
<span class="lineNum">     780 </span>            :      }
<span class="lineNum">     781 </span><span class="lineCov">        140 :      delete tokens;</span>
<span class="lineNum">     782 </span>            : 
<span class="lineNum">     783 </span><span class="lineCov">         70 :      return kTRUE;</span>
<span class="lineNum">     784 </span><span class="lineCov">         89 : }</span>
<a name="785"><span class="lineNum">     785 </span>            : </a>
<span class="lineNum">     786 </span>            : //_____________________________________________________________________________
<span class="lineNum">     787 </span>            : AliTriggerConfiguration* AliTriggerConfiguration::LoadConfiguration(TString &amp; configuration)
<span class="lineNum">     788 </span>            : {
<span class="lineNum">     789 </span>            :    // Load one pre-created Configurations from database/file that match
<span class="lineNum">     790 </span>            :    // with the input string 'configuration'
<span class="lineNum">     791 </span>            :    // Ej: &quot;Pb-Pb&quot; or &quot;p-p-DIMUON CALIBRATION-CENTRAL-BARREL&quot;
<span class="lineNum">     792 </span>            :   // By default the files are stored in GRP/CTP folder.
<span class="lineNum">     793 </span>            :   // The filename is constructed as: GRP/CTP/&lt;configuration&gt;.cfg
<span class="lineNum">     794 </span>            : 
<span class="lineNum">     795 </span>            :    // Load the selected configuration
<span class="lineNum">     796 </span><span class="lineCov">          2 :   TString filename;</span>
<span class="lineNum">     797 </span><span class="lineCov">          3 :   if (configuration.EndsWith(&quot;.cfg&quot;) ||</span>
<span class="lineNum">     798 </span><span class="lineCov">          1 :       configuration.EndsWith(&quot;.shuttle&quot;)) {</span>
<span class="lineNum">     799 </span><span class="lineNoCov">          0 :     filename = configuration;</span>
<span class="lineNum">     800 </span>            :   }
<span class="lineNum">     801 </span>            :   else {
<span class="lineNum">     802 </span><span class="lineCov">          2 :     filename = gSystem-&gt;Getenv(&quot;ALICE_ROOT&quot;);</span>
<span class="lineNum">     803 </span><span class="lineCov">          1 :     filename += &quot;/GRP/CTP/&quot;;</span>
<span class="lineNum">     804 </span><span class="lineCov">          1 :     filename += configuration;</span>
<span class="lineNum">     805 </span><span class="lineCov">          1 :     filename += &quot;.cfg&quot;;</span>
<span class="lineNum">     806 </span>            :   }
<span class="lineNum">     807 </span>            : 
<span class="lineNum">     808 </span><span class="lineCov">          3 :    if( gSystem-&gt;AccessPathName( filename.Data() ) ) {</span>
<span class="lineNum">     809 </span><span class="lineNoCov">          0 :       AliErrorClass( Form( &quot;file (%s) not found&quot;, filename.Data() ) );</span>
<span class="lineNum">     810 </span><span class="lineNoCov">          0 :       return NULL;</span>
<span class="lineNum">     811 </span>            :    }
<span class="lineNum">     812 </span>            : 
<span class="lineNum">     813 </span>            : 
<span class="lineNum">     814 </span><span class="lineCov">          3 :    ifstream *file = new ifstream ( filename.Data() );</span>
<span class="lineNum">     815 </span><span class="lineCov">          2 :    if (!*file) {</span>
<span class="lineNum">     816 </span><span class="lineNoCov">          0 :      AliErrorClass(Form(&quot;Error opening file (%s) !&quot;,filename.Data()));</span>
<span class="lineNum">     817 </span><span class="lineNoCov">          0 :      file-&gt;close();</span>
<span class="lineNum">     818 </span><span class="lineNoCov">          0 :      delete file;</span>
<span class="lineNum">     819 </span><span class="lineNoCov">          0 :      return NULL;</span>
<span class="lineNum">     820 </span>            :    }
<span class="lineNum">     821 </span>            : 
<span class="lineNum">     822 </span><span class="lineCov">          2 :    AliTriggerConfiguration *cfg = new AliTriggerConfiguration();</span>
<span class="lineNum">     823 </span>            : 
<span class="lineNum">     824 </span><span class="lineCov">          1 :    Int_t level = 0;</span>
<span class="lineNum">     825 </span>            : 
<span class="lineNum">     826 </span><span class="lineCov">          1 :    TString strLine;</span>
<span class="lineNum">     827 </span><span class="lineCov">        270 :    while (strLine.ReadLine(*file)) {</span>
<span class="lineNum">     828 </span><span class="lineCov">        267 :      if (cfg-&gt;ProcessConfigurationLine(strLine, level) == kFALSE)</span>
<span class="lineNum">     829 </span>            :      {
<span class="lineNum">     830 </span><span class="lineNoCov">          0 :         delete cfg;</span>
<span class="lineNum">     831 </span>            :         cfg = 0;
<span class="lineNum">     832 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">     833 </span>            :      }
<span class="lineNum">     834 </span>            :    }
<span class="lineNum">     835 </span>            : 
<span class="lineNum">     836 </span><span class="lineCov">          1 :    file-&gt;close();</span>
<span class="lineNum">     837 </span><span class="lineCov">          2 :    delete file;</span>
<span class="lineNum">     838 </span>            : 
<span class="lineNum">     839 </span>            :    return cfg;
<span class="lineNum">     840 </span><span class="lineCov">          2 : }</span>
<a name="841"><span class="lineNum">     841 </span>            : </a>
<span class="lineNum">     842 </span>            : //_____________________________________________________________________________
<span class="lineNum">     843 </span>            : AliTriggerConfiguration* AliTriggerConfiguration::LoadConfigurationFromString(const char* configuration)
<span class="lineNum">     844 </span>            : {
<span class="lineNum">     845 </span>            :    // Loads configuration given as parameter &lt;configuration&gt;
<span class="lineNum">     846 </span>            : 
<span class="lineNum">     847 </span><span class="lineNoCov">          0 :    if (!configuration)</span>
<span class="lineNum">     848 </span><span class="lineNoCov">          0 :      return 0;</span>
<span class="lineNum">     849 </span>            : 
<span class="lineNum">     850 </span><span class="lineNoCov">          0 :    AliTriggerConfiguration *cfg = new AliTriggerConfiguration();</span>
<span class="lineNum">     851 </span>            : 
<span class="lineNum">     852 </span><span class="lineNoCov">          0 :    Int_t level = 0;</span>
<span class="lineNum">     853 </span>            : 
<span class="lineNum">     854 </span><span class="lineNoCov">          0 :    TObjArray* tokens = TString(configuration).Tokenize(&quot;\n&quot;);</span>
<span class="lineNum">     855 </span><span class="lineNoCov">          0 :    for (Int_t i=0; i&lt;tokens-&gt;GetEntries(); i++)</span>
<span class="lineNum">     856 </span>            :    {
<span class="lineNum">     857 </span><span class="lineNoCov">          0 :      TObjString* str = dynamic_cast&lt;TObjString*&gt;(tokens-&gt;At(i));</span>
<span class="lineNum">     858 </span><span class="lineNoCov">          0 :      if (!str)</span>
<span class="lineNum">     859 </span><span class="lineNoCov">          0 :        continue;</span>
<span class="lineNum">     860 </span>            : 
<span class="lineNum">     861 </span><span class="lineNoCov">          0 :      if (cfg-&gt;ProcessConfigurationLine(str-&gt;String(), level) == kFALSE)</span>
<span class="lineNum">     862 </span>            :      {
<span class="lineNum">     863 </span><span class="lineNoCov">          0 :         delete cfg;</span>
<span class="lineNum">     864 </span>            :         cfg = 0;
<span class="lineNum">     865 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">     866 </span>            :      }
<span class="lineNum">     867 </span><span class="lineNoCov">          0 :    }</span>
<span class="lineNum">     868 </span>            : 
<span class="lineNum">     869 </span><span class="lineNoCov">          0 :    delete tokens;</span>
<span class="lineNum">     870 </span>            : 
<span class="lineNum">     871 </span>            :    return cfg;
<span class="lineNum">     872 </span><span class="lineNoCov">          0 : }</span>
<a name="873"><span class="lineNum">     873 </span>            : </a>
<span class="lineNum">     874 </span>            : //_____________________________________________________________________________
<span class="lineNum">     875 </span>            : TObjArray* AliTriggerConfiguration::GetAvailableConfigurations( const char* filename )
<span class="lineNum">     876 </span>            : {
<span class="lineNum">     877 </span>            :    // Return an array of configuration in the file
<span class="lineNum">     878 </span>            : 
<span class="lineNum">     879 </span><span class="lineNoCov">          0 :    TString path;</span>
<span class="lineNum">     880 </span><span class="lineNoCov">          0 :    if( !filename[0] ) {</span>
<span class="lineNum">     881 </span><span class="lineNoCov">          0 :       path += gSystem-&gt;Getenv( &quot;ALICE_ROOT&quot; );</span>
<span class="lineNum">     882 </span><span class="lineNoCov">          0 :       path += fgkConfigurationFileName;</span>
<span class="lineNum">     883 </span>            :    }
<span class="lineNum">     884 </span>            :    else
<span class="lineNum">     885 </span><span class="lineNoCov">          0 :       path += filename;</span>
<span class="lineNum">     886 </span>            : 
<span class="lineNum">     887 </span><span class="lineNoCov">          0 :    if( gSystem-&gt;AccessPathName( path.Data() ) ) {</span>
<span class="lineNum">     888 </span><span class="lineNoCov">          0 :       AliErrorGeneral( &quot;AliTriggerConfiguration&quot;, Form( &quot;file (%s) not found&quot;, path.Data() ) );</span>
<span class="lineNum">     889 </span><span class="lineNoCov">          0 :       return NULL;</span>
<span class="lineNum">     890 </span>            :    }
<span class="lineNum">     891 </span>            : 
<span class="lineNum">     892 </span><span class="lineNoCov">          0 :    TObjArray* desArray = new TObjArray();</span>
<span class="lineNum">     893 </span>            : 
<span class="lineNum">     894 </span><span class="lineNoCov">          0 :    TFile file( path.Data(), &quot;READ&quot; );</span>
<span class="lineNum">     895 </span><span class="lineNoCov">          0 :    if( file.IsZombie() ) {</span>
<span class="lineNum">     896 </span><span class="lineNoCov">          0 :       AliErrorGeneral( &quot;AliTriggerConfiguration&quot;, Form( &quot;Error opening file (%s)&quot;, path.Data() ) );</span>
<span class="lineNum">     897 </span><span class="lineNoCov">          0 :       return NULL;</span>
<span class="lineNum">     898 </span>            :    }
<span class="lineNum">     899 </span>            : 
<span class="lineNum">     900 </span><span class="lineNoCov">          0 :    file.ReadAll();</span>
<span class="lineNum">     901 </span>            : 
<span class="lineNum">     902 </span>            :    TKey* key;
<span class="lineNum">     903 </span><span class="lineNoCov">          0 :    TIter next( file.GetListOfKeys() );</span>
<span class="lineNum">     904 </span><span class="lineNoCov">          0 :    while( (key = (TKey*)next()) ) {</span>
<span class="lineNum">     905 </span><span class="lineNoCov">          0 :       TObject* obj = key-&gt;ReadObj();</span>
<span class="lineNum">     906 </span><span class="lineNoCov">          0 :       if( obj-&gt;InheritsFrom( &quot;AliTriggerConfiguration&quot; ) ) {</span>
<span class="lineNum">     907 </span><span class="lineNoCov">          0 :          desArray-&gt;AddLast( obj );</span>
<span class="lineNum">     908 </span>            :       }
<span class="lineNum">     909 </span>            :    }
<span class="lineNum">     910 </span><span class="lineNoCov">          0 :    file.Close();</span>
<span class="lineNum">     911 </span>            : 
<span class="lineNum">     912 </span>            :    return desArray;
<span class="lineNum">     913 </span><span class="lineNoCov">          0 : }</span>
<a name="914"><span class="lineNum">     914 </span>            : </a>
<span class="lineNum">     915 </span>            : //_____________________________________________________________________________
<span class="lineNum">     916 </span>            : void AliTriggerConfiguration::WriteConfiguration( const char* filename )
<span class="lineNum">     917 </span>            : {
<span class="lineNum">     918 </span>            :    // Write the configuration
<span class="lineNum">     919 </span><span class="lineNoCov">          0 :    TString path;</span>
<span class="lineNum">     920 </span><span class="lineNoCov">          0 :    if( !filename[0] ) {</span>
<span class="lineNum">     921 </span><span class="lineNoCov">          0 :       path += gSystem-&gt;Getenv(&quot;ALICE_ROOT&quot;);</span>
<span class="lineNum">     922 </span><span class="lineNoCov">          0 :       path += fgkConfigurationFileName;</span>
<span class="lineNum">     923 </span>            :    }
<span class="lineNum">     924 </span>            :    else
<span class="lineNum">     925 </span><span class="lineNoCov">          0 :       path += filename;</span>
<span class="lineNum">     926 </span>            : 
<span class="lineNum">     927 </span><span class="lineNoCov">          0 :    TFile file( path.Data(), &quot;UPDATE&quot; );</span>
<span class="lineNum">     928 </span><span class="lineNoCov">          0 :    if( file.IsZombie() ) {</span>
<span class="lineNum">     929 </span><span class="lineNoCov">          0 :       AliErrorGeneral( &quot;AliTriggerConfiguration&quot;, </span>
<span class="lineNum">     930 </span>            :                         Form( &quot;Can't open file (%s)&quot;, path.Data() ) );
<span class="lineNum">     931 </span><span class="lineNoCov">          0 :       return;</span>
<span class="lineNum">     932 </span>            :    }
<span class="lineNum">     933 </span>            : 
<span class="lineNum">     934 </span><span class="lineNoCov">          0 :    Bool_t result = (Write( GetName(), TObject::kOverwrite ) != 0);</span>
<span class="lineNum">     935 </span><span class="lineNoCov">          0 :    if( !result )</span>
<span class="lineNum">     936 </span><span class="lineNoCov">          0 :       AliErrorGeneral( &quot;AliTriggerConfiguration&quot;,</span>
<span class="lineNum">     937 </span>            :                         Form( &quot;Can't write entry to file &lt;%s&gt;!&quot;, path.Data() ) );
<span class="lineNum">     938 </span><span class="lineNoCov">          0 :    file.Close();</span>
<span class="lineNum">     939 </span><span class="lineNoCov">          0 : }</span>
<a name="940"><span class="lineNum">     940 </span>            : </a>
<span class="lineNum">     941 </span>            : //_____________________________________________________________________________
<span class="lineNum">     942 </span>            : Int_t AliTriggerConfiguration::GetClassIndexFromName(const char* className) const
<span class="lineNum">     943 </span>            : {
<span class="lineNum">     944 </span>            :    //const TObjArray&amp; classes = cfg-&gt;GetClasses();
<span class="lineNum">     945 </span><span class="lineNoCov">          0 :    Int_t nclasses = (Int_t)fClasses.GetEntriesFast();</span>
<span class="lineNum">     946 </span><span class="lineNoCov">          0 :    for (Int_t i=0;i&lt;nclasses;i++) {</span>
<span class="lineNum">     947 </span><span class="lineNoCov">          0 :        AliTriggerClass* trgclass = (AliTriggerClass*)fClasses.At(i);</span>
<span class="lineNum">     948 </span><span class="lineNoCov">          0 :        if (TString(trgclass-&gt;GetName()).CompareTo(className) == 0) { </span>
<span class="lineNum">     949 </span><span class="lineNoCov">          0 :           return trgclass-&gt;GetIndex();</span>
<span class="lineNum">     950 </span>            :        }
<span class="lineNum">     951 </span><span class="lineNoCov">          0 :    }</span>
<span class="lineNum">     952 </span><span class="lineNoCov">          0 :    return -1;</span>
<a name="953"><span class="lineNum">     953 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     954 </span>            : //_____________________________________________________________________________
<span class="lineNum">     955 </span>            : const char* AliTriggerConfiguration::GetClassNameFromIndex(Int_t classIndex) const
<span class="lineNum">     956 </span>            : {
<span class="lineNum">     957 </span><span class="lineNoCov">          0 :    Int_t nclasses = (Int_t)fClasses.GetEntriesFast();</span>
<span class="lineNum">     958 </span><span class="lineNoCov">          0 :    for (Int_t i=0;i&lt;nclasses;i++) {</span>
<span class="lineNum">     959 </span><span class="lineNoCov">          0 :        AliTriggerClass* trgclass = (AliTriggerClass*)fClasses.At(i);</span>
<span class="lineNum">     960 </span><span class="lineNoCov">          0 :        if (trgclass-&gt;GetIndex() == classIndex) return trgclass-&gt;GetName();</span>
<span class="lineNum">     961 </span><span class="lineNoCov">          0 :    }</span>
<span class="lineNum">     962 </span><span class="lineNoCov">          0 :    return 0;</span>
<a name="963"><span class="lineNum">     963 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     964 </span>            : //_____________________________________________________________________________
<span class="lineNum">     965 </span>            : AliTriggerClass* AliTriggerConfiguration::GetTriggerClass(Int_t classIndex) const
<span class="lineNum">     966 </span>            : {
<span class="lineNum">     967 </span><span class="lineNoCov">          0 :    Int_t nclasses = (Int_t)fClasses.GetEntriesFast();</span>
<span class="lineNum">     968 </span><span class="lineNoCov">          0 :    for (Int_t i=0;i&lt;nclasses;i++) {</span>
<span class="lineNum">     969 </span><span class="lineNoCov">          0 :        AliTriggerClass* trgclass = (AliTriggerClass*)fClasses.At(i);</span>
<span class="lineNum">     970 </span><span class="lineNoCov">          0 :        if ( trgclass-&gt;GetIndex() == classIndex) return trgclass;</span>
<span class="lineNum">     971 </span><span class="lineNoCov">          0 :    }</span>
<span class="lineNum">     972 </span><span class="lineNoCov">          0 :    return 0;</span>
<a name="973"><span class="lineNum">     973 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">     974 </span>            : //_____________________________________________________________________________
<span class="lineNum">     975 </span>            : void AliTriggerConfiguration::Reset()
<span class="lineNum">     976 </span>            : {
<span class="lineNum">     977 </span><span class="lineCov">        188 :    for( Int_t j=0; j&lt;fInputs.GetEntriesFast(); j++ )</span>
<span class="lineNum">     978 </span><span class="lineCov">         88 :      ((AliTriggerInput*)fInputs.At(j))-&gt;Reset();</span>
<span class="lineNum">     979 </span>            : 
<span class="lineNum">     980 </span><span class="lineCov">        152 :    for( Int_t j=0; j&lt;fClasses.GetEntriesFast(); j++ )</span>
<span class="lineNum">     981 </span><span class="lineCov">         72 :      ((AliTriggerClass*)fClasses.At(j))-&gt;Reset();</span>
<span class="lineNum">     982 </span><span class="lineCov">          4 : }</span>
<a name="983"><span class="lineNum">     983 </span>            : </a>
<span class="lineNum">     984 </span>            : //_____________________________________________________________________________
<span class="lineNum">     985 </span>            : void AliTriggerConfiguration::Print( const Option_t*  ) const
<span class="lineNum">     986 </span>            : {
<span class="lineNum">     987 </span>            :    // Print
<span class="lineNum">     988 </span><span class="lineNoCov">          0 :   cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">     989 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;Trigger Configuration:&quot;  &lt;&lt; endl;</span>
<span class="lineNum">     990 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;  Name:              &quot; &lt;&lt; GetName() &lt;&lt; endl; </span>
<span class="lineNum">     991 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;  Description:       &quot; &lt;&lt; GetTitle() &lt;&lt; endl;</span>
<span class="lineNum">     992 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;  Version:           &quot; &lt;&lt; GetVersion() &lt;&lt; endl;</span>
<span class="lineNum">     993 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;  Active Detectors:  &quot; &lt;&lt; GetActiveDetectors() &lt;&lt; endl;</span>
<span class="lineNum">     994 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;  Trigger Detectors: &quot; &lt;&lt; GetTriggeringDetectors() &lt;&lt; endl;</span>
<span class="lineNum">     995 </span>            : 
<span class="lineNum">     996 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">     997 </span><span class="lineNoCov">          0 :    fInputs.Print();</span>
<span class="lineNum">     998 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">     999 </span><span class="lineNoCov">          0 :    fInteractions.Print();</span>
<span class="lineNum">    1000 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">    1001 </span><span class="lineNoCov">          0 :    fFunctions.Print();</span>
<span class="lineNum">    1002 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">    1003 </span><span class="lineNoCov">          0 :    fDescriptors.Print();</span>
<span class="lineNum">    1004 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">    1005 </span><span class="lineNoCov">          0 :    fClusters.Print();</span>
<span class="lineNum">    1006 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">    1007 </span><span class="lineNoCov">          0 :    fPFProtections.Print();</span>
<span class="lineNum">    1008 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">    1009 </span><span class="lineNoCov">          0 :    fMasks.Print();</span>
<span class="lineNum">    1010 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">    1011 </span><span class="lineNoCov">          0 :    fClasses.Print();</span>
<span class="lineNum">    1012 </span><span class="lineNoCov">          0 :    cout &lt;&lt; &quot;#################################################&quot; &lt;&lt; endl;</span>
<span class="lineNum">    1013 </span>            : 
<span class="lineNum">    1014 </span><span class="lineNoCov">          0 :    cout &lt;&lt; endl;</span>
<span class="lineNum">    1015 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">    1016 </span>            : 
<span class="lineNum">    1017 </span>            : 
<span class="lineNum">    1018 </span>            : //////////////////////////////////////////////////////////////////////////////
<span class="lineNum">    1019 </span>            : // Helper method
<a name="1020"><span class="lineNum">    1020 </span>            : </a>
<span class="lineNum">    1021 </span>            : //_____________________________________________________________________________
<span class="lineNum">    1022 </span>            : Bool_t AliTriggerConfiguration::IsSelected( TString detName, TString&amp; detectors ) const
<span class="lineNum">    1023 </span>            : {
<span class="lineNum">    1024 </span>            :    // check whether detName is contained in detectors
<span class="lineNum">    1025 </span>            :    // if yes, it is removed from detectors
<span class="lineNum">    1026 </span>            : 
<span class="lineNum">    1027 </span>            :    // check if all detectors are selected
<span class="lineNum">    1028 </span><span class="lineNoCov">          0 :    if( (detectors.CompareTo(&quot;ALL&quot;) == 0 ) ||</span>
<span class="lineNum">    1029 </span><span class="lineNoCov">          0 :         detectors.BeginsWith(&quot;ALL &quot;) ||</span>
<span class="lineNum">    1030 </span><span class="lineNoCov">          0 :         detectors.EndsWith(&quot; ALL&quot;) ||</span>
<span class="lineNum">    1031 </span><span class="lineNoCov">          0 :         detectors.Contains(&quot; ALL &quot;) ) {</span>
<span class="lineNum">    1032 </span><span class="lineNoCov">          0 :       detectors = &quot;ALL&quot;;</span>
<span class="lineNum">    1033 </span><span class="lineNoCov">          0 :       return kTRUE;</span>
<span class="lineNum">    1034 </span>            :    }
<span class="lineNum">    1035 </span>            : 
<span class="lineNum">    1036 </span>            :    // search for the given detector
<span class="lineNum">    1037 </span>            :    Bool_t result = kFALSE;
<span class="lineNum">    1038 </span><span class="lineNoCov">          0 :    if( (detectors.CompareTo( detName ) == 0) ||</span>
<span class="lineNum">    1039 </span><span class="lineNoCov">          0 :         detectors.BeginsWith( detName+&quot; &quot; ) ||</span>
<span class="lineNum">    1040 </span><span class="lineNoCov">          0 :         detectors.EndsWith( &quot; &quot;+detName ) ||</span>
<span class="lineNum">    1041 </span><span class="lineNoCov">          0 :         detectors.Contains( &quot; &quot;+detName+&quot; &quot; ) ) {</span>
<span class="lineNum">    1042 </span><span class="lineNoCov">          0 :       detectors.ReplaceAll( detName, &quot;&quot; );</span>
<span class="lineNum">    1043 </span>            :       result = kTRUE;
<span class="lineNum">    1044 </span><span class="lineNoCov">          0 :    }</span>
<span class="lineNum">    1045 </span>            : 
<span class="lineNum">    1046 </span>            :    // clean up the detectors string
<span class="lineNum">    1047 </span><span class="lineNoCov">          0 :    while( detectors.Contains(&quot;  &quot;) )  detectors.ReplaceAll( &quot;  &quot;, &quot; &quot; );</span>
<span class="lineNum">    1048 </span><span class="lineNoCov">          0 :    while( detectors.BeginsWith(&quot; &quot;) ) detectors.Remove( 0, 1 );</span>
<span class="lineNum">    1049 </span><span class="lineNoCov">          0 :    while( detectors.EndsWith(&quot; &quot;) )   detectors.Remove( detectors.Length()-1, 1 );</span>
<span class="lineNum">    1050 </span>            : 
<span class="lineNum">    1051 </span><span class="lineNoCov">          0 :    return result;</span>
<span class="lineNum">    1052 </span><span class="lineNoCov">          0 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
