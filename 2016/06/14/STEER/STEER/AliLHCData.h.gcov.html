<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - STEER/STEER/AliLHCData.h</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">STEER/STEER</a> - AliLHCData.h<span style="font-size: 80%;"> (source / <a href="AliLHCData.h.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">3</td>
            <td class="headerCovTableEntry">107</td>
            <td class="headerCovTableEntryLo">2.8 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">5</td>
            <td class="headerCovTableEntry">106</td>
            <td class="headerCovTableEntryLo">4.7 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : #ifndef ALILHCDATA_H</a>
<span class="lineNum">       2 </span>            : #define ALILHCDATA_H
<span class="lineNum">       3 </span>            : 
<span class="lineNum">       4 </span>            : /********************************************************************************
<span class="lineNum">       5 </span>            : *                                                                               *
<span class="lineNum">       6 </span>            : *   AliLHCData: summary of the LHC related information from LHC DIP.            *
<span class="lineNum">       7 </span>            : *   Created from the TMap provided by the AliLHCReader with optional beginning  *
<span class="lineNum">       8 </span>            : *                                                                               *
<span class="lineNum">       9 </span>            : *   The data are (wrapped in the AliLHCDipValT):                                *
<span class="lineNum">      10 </span>            : *   made of TimeStamp (double) and array of values                              *
<span class="lineNum">      11 </span>            : *                                                                               *
<span class="lineNum">      12 </span>            : *   Multiple entries for each type of data are possible. To obtaine number of   *
<span class="lineNum">      13 </span>            : *   records (with distinct timestamp) for give type od records use:             *
<span class="lineNum">      14 </span>            : *   int GetNBunchConfigMeasured(int beam) (with beam=0,1) etc.                  *
<span class="lineNum">      15 </span>            : *                                                                               *
<span class="lineNum">      16 </span>            : *   To get i-th entry, use brec= AliLHCDipValI* GetBunchConfigMeasured(bm,i);   *
<span class="lineNum">      17 </span>            : *   Note: exact type of templated AliLHCDipValT pointer depends on the record   *
<span class="lineNum">      18 </span>            : *   type, concult getters to know it.                                           *
<span class="lineNum">      19 </span>            : *                                                                               *
<span class="lineNum">      20 </span>            : *   Then, once the pointer is obtained, details can be accessed:                *
<span class="lineNum">      21 </span>            : *   int nBunches = brec-&gt;GetSize();                                             *
<span class="lineNum">      22 </span>            : *   for (int i=0;i&lt;nBunches;i++) printf(&quot;Bunch#%d: %d\n&quot;,i,(*brec)[i]);         *
<span class="lineNum">      23 </span>            : *                                                                               *
<span class="lineNum">      24 </span>            : *   ATTENTION: Bunch RFBucked is NEGATIVE for bunches interacting at IR2        *
<span class="lineNum">      25 </span>            : *                                                                               *
<span class="lineNum">      26 </span>            : *                                                                               *
<span class="lineNum">      27 </span>            : *                                                                               *
<span class="lineNum">      28 </span>            : *   Author: ruben.shahoyan@cern.ch                                              *
<span class="lineNum">      29 </span>            : *                                                                               *
<span class="lineNum">      30 </span>            : ********************************************************************************/
<span class="lineNum">      31 </span>            : 
<span class="lineNum">      32 </span>            : #include &quot;AliLHCDipValT.h&quot;
<span class="lineNum">      33 </span>            : #include &quot;TObject.h&quot;
<span class="lineNum">      34 </span>            : class TObjArray;
<span class="lineNum">      35 </span>            : //class AliLHCDipValT;
<span class="lineNum">      36 </span>            : 
<span class="lineNum">      37 </span>            : class AliDCSArray;
<span class="lineNum">      38 </span>            : class TString;
<span class="lineNum">      39 </span>            : class TMap;
<span class="lineNum">      40 </span>            : class AliLHCReader;
<span class="lineNum">      41 </span>            : class TGraph;
<span class="lineNum">      42 </span>            : 
<span class="lineNum">      43 </span>            : class AliLHCData : public TObject
<span class="lineNum">      44 </span>            : {
<span class="lineNum">      45 </span>            :  public:
<span class="lineNum">      46 </span>            :   enum          {kStart,kNStor};
<span class="lineNum">      47 </span>            :   enum BeamID_t {kBeam1,kBeam2};
<span class="lineNum">      48 </span>            :   enum BgID_t   {kBg1,kBg2,kBg3,kNBGs};
<span class="lineNum">      49 </span>            :   enum Proj_t   {kX,kY};
<span class="lineNum">      50 </span>            :   enum Side_t   {kLeft,kRight};
<span class="lineNum">      51 </span>            :   enum Collim_t {kTCTVB4L2, kTCTVB4R2, kTCLIA4R2, kNCollimators};
<span class="lineNum">      52 </span>            :   enum ColJaw_t {kGapDn,kGapUp,kLeftDn,kLeftUp,kRightDn,kRightUp,kNJaws};
<span class="lineNum">      53 </span>            :   enum          {kMaxBSlots = 3564, kOffsBeam1=346, kOffsBeam2 = 3019};
<span class="lineNum">      54 </span>            :   enum          {kMarginSOR = 60*60*24*30, // use margin of 30 days for SOR, when looking for the 1st record
<span class="lineNum">      55 </span>            :                  kMarginEOR = 60*15};      // use margin of 15 min for EOR, when looking for the last record
<span class="lineNum">      56 </span>            :   //
<span class="lineNum">      57 </span>            :   enum {kIntTot,kIntTotAv,kIntBunchAv,
<span class="lineNum">      58 </span>            :         kLumAcqMode,kLumTot,kLumTotErr,kLumBunch,kLumBunchErr,kLumCrossAng,kLumCrossAngErr,
<span class="lineNum">      59 </span>            :         kBunchConf,kFillNum,kBunchLgtNB,kBunchLgt,kBunchLgtFillB,
<span class="lineNum">      60 </span>            :         kRCInjSch,kRCBeta,kRCCrossAng,kRCVang,
<span class="lineNum">      61 </span>            :         kBeamSzAcqMode,kBeamSzSigH,kBeamSzSigV,kBeamSzEmittH,kBeamSzEmittV,kBeamSzSigHErr,kBeamSzSigVErr,
<span class="lineNum">      62 </span>            :         kCollPos,
<span class="lineNum">      63 </span>            :         kBPTXdeltaTB1B2,
<span class="lineNum">      64 </span>            :         kBPTXdeltaTRMSB1B2,
<span class="lineNum">      65 </span>            :         kBPTXPhase,
<span class="lineNum">      66 </span>            :         kBPTXPhaseRMS,
<span class="lineNum">      67 </span>            :         kBPTXPhaseShift,
<span class="lineNum">      68 </span>            :         //
<span class="lineNum">      69 </span>            :         kALILumiTotalInst,
<span class="lineNum">      70 </span>            :         kALILumiTotalDeliveredStabBeam,
<span class="lineNum">      71 </span>            :         kALILumiBunchInst,
<span class="lineNum">      72 </span>            :         kALIBackground,
<span class="lineNum">      73 </span>            :         kNRecordTypes};
<span class="lineNum">      74 </span>            :   //
<span class="lineNum">      75 </span>            :   //le
<a name="76"><span class="lineNum">      76 </span>            :  public:</a>
<span class="lineNum">      77 </span>            :   //
<span class="lineNum">      78 </span><span class="lineCov">         12 :  AliLHCData() : fTMin(0),fTMax(1e10),fFillNumber(0),fData(0),fkFile2Process(0),fkMap2Process(0) {Clear();}</span>
<a name="79"><span class="lineNum">      79 </span>            :   AliLHCData(const TMap*   dcsMap,  double tmin=0, double tmax=1.e10);</a>
<span class="lineNum">      80 </span>            :   AliLHCData(const Char_t* dcsFile, double tmin=0, double tmax=1.e10);
<span class="lineNum">      81 </span><span class="lineNoCov">          0 :   virtual ~AliLHCData() {}</span>
<span class="lineNum">      82 </span>            :   //
<a name="83"><span class="lineNum">      83 </span>            :   Bool_t                FillData(const TMap*   dcsMap,  double tmin=0, double tmax=1.e20);</a>
<a name="84"><span class="lineNum">      84 </span>            :   Bool_t                FillData(const Char_t* dcsFile, double tmin=0, double tmax=1.e20);</a>
<a name="85"><span class="lineNum">      85 </span><span class="lineNoCov">          0 :   Double_t              GetTMin()                                    const {return fTMin;}</span></a>
<a name="86"><span class="lineNum">      86 </span><span class="lineNoCov">          0 :   Double_t              GetTMax()                                    const {return fTMax;}</span></a>
<a name="87"><span class="lineNum">      87 </span><span class="lineNoCov">          0 :   Int_t                 GetFillNumber()                              const {return fFillNumber;}</span></a>
<a name="88"><span class="lineNum">      88 </span><span class="lineNoCov">          0 :   void                  SetFillNumber(Int_t fill)                          {fFillNumber = fill;}</span></a>
<span class="lineNum">      89 </span><span class="lineNoCov">          0 :   void                  SetTMin(Double_t t)                                {fTMin = t&lt;0?0:(t&gt;1e10?1e10:t);}</span>
<span class="lineNum">      90 </span><span class="lineNoCov">          0 :   void                  SetTMax(Double_t t)                                {fTMax = t&lt;0?0:(t&gt;1e10?1e10:t);}</span>
<span class="lineNum">      91 </span>            :   //
<span class="lineNum">      92 </span>            :   virtual void          Print(const Option_t *opt=&quot;&quot;)                const;
<a name="93"><span class="lineNum">      93 </span>            :   TGraph*               ExportGraph(Int_t *coord, Int_t elID=0)      const;</a>
<a name="94"><span class="lineNum">      94 </span>            :   //</a>
<a name="95"><span class="lineNum">      95 </span><span class="lineNoCov">          0 :   Int_t GetNBunchConfigMeasured(int bm)           const {return GoodPairID(bm)?fBunchConfMeas[bm][kNStor]:-1;}</span></a>
<a name="96"><span class="lineNum">      96 </span><span class="lineNoCov">          0 :   Int_t GetNBunchConfigDeclared(int bm)           const {return GoodPairID(bm)?fBunchConfDecl[bm][kNStor]:-1;}</span></a>
<a name="97"><span class="lineNum">      97 </span><span class="lineNoCov">          0 :   Int_t GetNBunchLengths(int bm)                  const {return GoodPairID(bm)?fBunchLengths[bm][kNStor]:-1;}</span></a>
<a name="98"><span class="lineNum">      98 </span><span class="lineNoCov">          0 :   Int_t GetNTotalIntensity(int bm)                const {return GoodPairID(bm)?fIntensTotal[bm][kNStor]:-1;}</span></a>
<a name="99"><span class="lineNum">      99 </span><span class="lineNoCov">          0 :   Int_t GetNTotalIntensityAv(int bm)              const {return GoodPairID(bm)?fIntensTotalAv[bm][kNStor]:-1;}</span></a>
<a name="100"><span class="lineNum">     100 </span><span class="lineCov">         16 :   Int_t GetNIntensityPerBunch(int bm)             const {return GoodPairID(bm)?fIntensPerBunch[bm][kNStor]:-1;}</span></a>
<a name="101"><span class="lineNum">     101 </span><span class="lineNoCov">          0 :   Int_t GetNEmittanceH(int bm)                    const {return GoodPairID(bm)?fEmittanceH[bm][kNStor]:-1;}</span></a>
<a name="102"><span class="lineNum">     102 </span><span class="lineNoCov">          0 :   Int_t GetNEmittanceV(int bm)                    const {return GoodPairID(bm)?fEmittanceV[bm][kNStor]:-1;}</span></a>
<span class="lineNum">     103 </span><span class="lineNoCov">          0 :   Int_t GetNBeamSigmaH(int bm)                    const {return GoodPairID(bm)?fBeamSigmaH[bm][kNStor]:-1;}</span>
<a name="104"><span class="lineNum">     104 </span><span class="lineNoCov">          0 :   Int_t GetNBeamSigmaV(int bm)                    const {return GoodPairID(bm)?fBeamSigmaV[bm][kNStor]:-1;}</span></a>
<a name="105"><span class="lineNum">     105 </span>            :   //</a>
<a name="106"><span class="lineNum">     106 </span><span class="lineNoCov">          0 :   Int_t GetNLuminosityTotal(int lr)               const {return GoodPairID(lr)?fLuminTotal[lr][kNStor]:-1;}</span></a>
<a name="107"><span class="lineNum">     107 </span><span class="lineNoCov">          0 :   Int_t GetNLuminosityPerBunch(int lr)            const {return GoodPairID(lr)?fLuminPerBC[lr][kNStor]:-1;}</span></a>
<span class="lineNum">     108 </span><span class="lineNoCov">          0 :   Int_t GetNLuminosityAcqMode(int lr)             const {return GoodPairID(lr)?fLuminAcqMode[lr][kNStor]:-1;}</span>
<a name="109"><span class="lineNum">     109 </span><span class="lineNoCov">          0 :   Int_t GetNCrossingAngle(int lr)                 const {return GoodPairID(lr)?fCrossAngle[lr][kNStor]:-1;}</span></a>
<a name="110"><span class="lineNum">     110 </span>            :   //</a>
<a name="111"><span class="lineNum">     111 </span><span class="lineNoCov">          0 :   Int_t GetNInjectionScheme()                     const {return fRCInjScheme[kNStor];}</span></a>
<a name="112"><span class="lineNum">     112 </span><span class="lineNoCov">          0 :   Int_t GetNRCBetaStar()                          const {return fRCBeta[kNStor];}</span></a>
<span class="lineNum">     113 </span><span class="lineNoCov">          0 :   Int_t GetNRCAngleH()                            const {return fRCAngH[kNStor];}</span>
<a name="114"><span class="lineNum">     114 </span><span class="lineNoCov">          0 :   Int_t GetNRCAngleV()                            const {return fRCAngV[kNStor];}</span></a>
<a name="115"><span class="lineNum">     115 </span>            :   //</a>
<a name="116"><span class="lineNum">     116 </span><span class="lineNoCov">          0 :   Int_t GetNLumiAlice()                           const {return fLumiAlice[kNStor];}</span></a>
<span class="lineNum">     117 </span><span class="lineNoCov">          0 :   Int_t GetNLumiAliceSBDelivered()                const {return fLumiAliceStB[kNStor];}</span>
<a name="118"><span class="lineNum">     118 </span><span class="lineNoCov">          0 :   Int_t GetNLumiAliceBunch()                      const {return fLumiAliceBbB[kNStor];}  </span></a>
<span class="lineNum">     119 </span>            :   //
<a name="120"><span class="lineNum">     120 </span><span class="lineNoCov">          0 :   Int_t GetNBckgAlice(int bg)                     const {return (bg&gt;-1&amp;&amp;bg&lt;kNBGs) ? fBckgAlice[bg][kNStor] : -1;}</span></a>
<a name="121"><span class="lineNum">     121 </span>            :   //</a>
<a name="122"><span class="lineNum">     122 </span><span class="lineNoCov">          0 :   Int_t GetNBPTXdeltaTB1B2()                      const {return fBPTXdTB1B2[kNStor];}</span></a>
<a name="123"><span class="lineNum">     123 </span><span class="lineNoCov">          0 :   Int_t GetNBPTXdeltaTRMSB1B2()                   const {return fBPTXdTRMSB1B2[kNStor];}</span></a>
<a name="124"><span class="lineNum">     124 </span><span class="lineNoCov">          0 :   Int_t GetNBPTXPhase(int bm)                     const {return GoodPairID(bm)?fBPTXPhase[bm][kNStor]:-1;}</span></a>
<span class="lineNum">     125 </span><span class="lineNoCov">          0 :   Int_t GetNBPTXPhaseRMS(int bm)                  const {return GoodPairID(bm)?fBPTXPhaseRMS[bm][kNStor]:-1;}</span>
<span class="lineNum">     126 </span><span class="lineNoCov">          0 :   Int_t GetNBPTXPhaseShift(int bm)                const {return GoodPairID(bm)?fBPTXPhaseShift[bm][kNStor]:-1;}</span>
<span class="lineNum">     127 </span>            :   //
<span class="lineNum">     128 </span>            :   //
<span class="lineNum">     129 </span>            :   Int_t GetNCollimatorJawPos(int coll,int jaw)    const;
<span class="lineNum">     130 </span>            :   //
<span class="lineNum">     131 </span>            :   AliLHCDipValI* GetBunchConfigMeasured(int bm, int i=0)  const;
<span class="lineNum">     132 </span>            :   AliLHCDipValF* GetBunchLengths(int bm, int i=0)         const;
<span class="lineNum">     133 </span>            :   AliLHCDipValI* GetBunchConfigDeclared(int bm, int i=0)  const;
<span class="lineNum">     134 </span>            :   AliLHCDipValF* GetTotalIntensity(int bm, int i=0)       const;
<span class="lineNum">     135 </span>            :   AliLHCDipValF* GetTotalIntensityAv(int bm, int i=0)     const;
<span class="lineNum">     136 </span>            :   AliLHCDipValF* GetIntensityPerBunch(int bm, int i=0)    const;
<span class="lineNum">     137 </span>            :   AliLHCDipValF* GetEmittanceH(int bm, int i=0)           const;
<span class="lineNum">     138 </span>            :   AliLHCDipValF* GetEmittanceV(int bm, int i=0)           const;
<span class="lineNum">     139 </span>            :   AliLHCDipValF* GetBeamSigmaH(int bm, int i=0)           const;
<span class="lineNum">     140 </span>            :   AliLHCDipValF* GetBeamSigmaV(int bm, int i=0)           const;
<span class="lineNum">     141 </span>            :   AliLHCDipValF* GetLuminosityTotal(int lr, int i=0)      const;
<span class="lineNum">     142 </span>            :   AliLHCDipValF* GetLuminosityPerBunch(int lr, int i=0)   const;
<span class="lineNum">     143 </span>            :   AliLHCDipValI* GetLuminosityAcqMode(int lr, int i=0)    const;
<span class="lineNum">     144 </span>            :   AliLHCDipValF* GetCrossAngle(int lr, int i=0)           const;
<span class="lineNum">     145 </span>            :   AliLHCDipValC* GetInjectionScheme(int i=0)              const;
<span class="lineNum">     146 </span>            :   AliLHCDipValF* GetRCBetaStar(int i=0)                   const;
<span class="lineNum">     147 </span>            :   AliLHCDipValF* GetRCAngleH(int i=0)                     const; 
<span class="lineNum">     148 </span>            :   AliLHCDipValF* GetRCAngleV(int i=0)                     const; 
<span class="lineNum">     149 </span>            :   AliLHCDipValF* GetCollimJawPos(int coll, int jaw, int i=0) const;
<span class="lineNum">     150 </span>            :   //
<span class="lineNum">     151 </span>            :   AliLHCDipValF* GetLumiAlice(int i=0)                    const; 
<span class="lineNum">     152 </span>            :   AliLHCDipValF* GetLumiAliceSBDelivered(int i=0)         const; 
<span class="lineNum">     153 </span>            :   AliLHCDipValF* GetLumiAliceBunch(int i=0)               const; 
<span class="lineNum">     154 </span>            :   AliLHCDipValF* GetBckgAlice(int bg, int i=0)            const; 
<span class="lineNum">     155 </span>            :   //
<span class="lineNum">     156 </span>            :   AliLHCDipValF* GetBPTXdeltaTB1B2(int i=0)               const;
<span class="lineNum">     157 </span>            :   AliLHCDipValF* GetBPTXdeltaTRMSB1B2(int i=0)            const;
<span class="lineNum">     158 </span>            :   AliLHCDipValF* GetBPTXPhase(int bm, int i=0)            const;
<span class="lineNum">     159 </span>            :   AliLHCDipValF* GetBPTXPhaseRMS(int bm, int i=0)         const;
<span class="lineNum">     160 </span>            :   AliLHCDipValF* GetBPTXPhaseShift(int bm, int i=0)       const;
<span class="lineNum">     161 </span>            :   //
<span class="lineNum">     162 </span>            :   Float_t        GetLumiAlice(Double_t tstamp)            const;
<span class="lineNum">     163 </span>            :   Float_t        GetLumiAliceSBDelivered(Double_t tstamp) const;
<span class="lineNum">     164 </span>            :   Float_t        GetBckgAlice(Int_t bg,Double_t tstamp)   const;
<span class="lineNum">     165 </span>            :   //
<span class="lineNum">     166 </span>            :   //  Float_t        GetLumiInstAlice(Double_t tstamp)        const;
<span class="lineNum">     167 </span>            :   //  Float_t        GetBckgInstAlice(Double_t tstamp)        const;
<span class="lineNum">     168 </span>            :   //
<span class="lineNum">     169 </span>            :   void           FlagInteractingBunches(const Int_t beam1[2],const Int_t beam2[2]);
<span class="lineNum">     170 </span>            :   TObject*       FindRecValidFor(int start,int nrec, double tstamp) const;
<span class="lineNum">     171 </span>            :   Int_t          FindEntryValidFor(int start,int nrec, double tstamp) const;
<span class="lineNum">     172 </span>            :   AliLHCDipValI* GetBunchConfigMeasured(int beam,double tstamp)  const;
<span class="lineNum">     173 </span>            :   AliLHCDipValI* GetBunchConfigDeclared(int beam,double tstamp)  const;
<span class="lineNum">     174 </span>            :   Int_t          GetNInteractingBunchesMeasured(int i=0)         const;
<span class="lineNum">     175 </span>            :   Int_t          GetNInteractingBunchesDeclared(int i=0)         const;
<span class="lineNum">     176 </span>            :   Int_t          IsPilotPresent(int i=0)                         const;
<a name="177"><span class="lineNum">     177 </span>            :   //</a>
<a name="178"><span class="lineNum">     178 </span>            :   // return array with beginning [0] and number of records for corresponding info (in the fData)</a>
<a name="179"><span class="lineNum">     179 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBunchConfigMeasured(int bm)         const {return GoodPairID(bm)?fBunchConfMeas[bm]:0;}</span></a>
<a name="180"><span class="lineNum">     180 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBunchConfigDeclared(int bm)         const {return GoodPairID(bm)?fBunchConfDecl[bm]:0;}</span></a>
<a name="181"><span class="lineNum">     181 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBunchLengths(int bm)                const {return GoodPairID(bm)?fBunchLengths[bm]:0;}</span></a>
<a name="182"><span class="lineNum">     182 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsTotalIntensity(int bm)              const {return GoodPairID(bm)?fIntensTotal[bm]:0;}</span></a>
<a name="183"><span class="lineNum">     183 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsTotalIntensityAv(int bm)            const {return GoodPairID(bm)?fIntensTotalAv[bm]:0;}</span></a>
<a name="184"><span class="lineNum">     184 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsIntensityPerBunch(int bm)           const {return GoodPairID(bm)?fIntensPerBunch[bm]:0;}</span></a>
<a name="185"><span class="lineNum">     185 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsEmittanceH(int bm)                  const {return GoodPairID(bm)?fEmittanceH[bm]:0;}</span></a>
<a name="186"><span class="lineNum">     186 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsEmittanceV(int bm)                  const {return GoodPairID(bm)?fEmittanceV[bm]:0;}</span></a>
<span class="lineNum">     187 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBeamSigmaH(int bm)                  const {return GoodPairID(bm)?fBeamSigmaH[bm]:0;}</span>
<a name="188"><span class="lineNum">     188 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBeamSigmaV(int bm)                  const {return GoodPairID(bm)?fBeamSigmaV[bm]:0;}</span></a>
<a name="189"><span class="lineNum">     189 </span>            :   //</a>
<a name="190"><span class="lineNum">     190 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsLuminosityTotal(int lr)             const {return GoodPairID(lr)?fLuminTotal[lr]:0;}</span></a>
<a name="191"><span class="lineNum">     191 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsLuminosityPerBunch(int lr)          const {return GoodPairID(lr)?fLuminPerBC[lr]:0;}</span></a>
<span class="lineNum">     192 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsLuminosityAcqMode(int lr)           const {return GoodPairID(lr)?fLuminAcqMode[lr]:0;}</span>
<a name="193"><span class="lineNum">     193 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsCrossingAngle(int lr)               const {return GoodPairID(lr)?fCrossAngle[lr]:0;}</span></a>
<a name="194"><span class="lineNum">     194 </span>            :   //</a>
<a name="195"><span class="lineNum">     195 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsInjectionScheme()                   const {return fRCInjScheme;}</span></a>
<a name="196"><span class="lineNum">     196 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsRCBetaStar()                        const {return fRCBeta;}</span></a>
<span class="lineNum">     197 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsRCAngleH()                          const {return fRCAngH;}</span>
<a name="198"><span class="lineNum">     198 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsRCAngleV()                          const {return fRCAngV;}</span></a>
<a name="199"><span class="lineNum">     199 </span>            :   //</a>
<a name="200"><span class="lineNum">     200 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsLumiAlice()                         const {return fLumiAlice;}</span></a>
<a name="201"><span class="lineNum">     201 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsLumiAliceSBDelivered()              const {return fLumiAliceStB;}</span></a>
<span class="lineNum">     202 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsLumiAliceBunch()                    const {return fLumiAliceBbB;}</span>
<a name="203"><span class="lineNum">     203 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBckgAlice(int bg)                   const {return (bg&gt;-1&amp;&amp;bg&lt;kNBGs) ? fBckgAlice[bg] : 0;}</span></a>
<a name="204"><span class="lineNum">     204 </span>            :   //</a>
<a name="205"><span class="lineNum">     205 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBPTXdeltaTB1B2()                       const {return fBPTXdTB1B2;}</span></a>
<a name="206"><span class="lineNum">     206 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBPTXdeltaTRMSB1B2()                    const {return fBPTXdTRMSB1B2;}</span></a>
<a name="207"><span class="lineNum">     207 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBPTXPhase(int bm)                      const {return GoodPairID(bm)?fBPTXPhase[bm]:0;}</span></a>
<span class="lineNum">     208 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBPTXPhaseRMS(int bm)                   const {return GoodPairID(bm)?fBPTXPhaseRMS[bm]:0;}</span>
<span class="lineNum">     209 </span><span class="lineNoCov">          0 :   const Int_t* GetOffsBPTXPhaseShift(int bm)                 const {return GoodPairID(bm)?fBPTXPhaseShift[bm]:0;}</span>
<span class="lineNum">     210 </span>            :   //
<a name="211"><span class="lineNum">     211 </span>            :   const Int_t* GetOffsCollimatorJawPos(int coll,int jaw)  const;</a>
<span class="lineNum">     212 </span>            :   //
<span class="lineNum">     213 </span><span class="lineNoCov">          0 :   const TObjArray&amp;  GetData()                             const {return fData;}</span>
<span class="lineNum">     214 </span>            :   //
<a name="215"><span class="lineNum">     215 </span>            :   // analysis methods</a>
<span class="lineNum">     216 </span>            :   Int_t GetMeanIntensity(int beamID, Double_t &amp;colliding, Double_t &amp;noncolliding, const TObjArray* bcmasks=0) const;
<span class="lineNum">     217 </span><span class="lineNoCov">          0 :   static Int_t GetBCId(int bucket, int beamID)                  {return (TMath::Abs(bucket)/10 + (beamID==0 ? kOffsBeam1:kOffsBeam2))%kMaxBSlots;}</span>
<span class="lineNum">     218 </span>            :   //
<span class="lineNum">     219 </span>            :   // for retrofitting, these methods has to be public
<span class="lineNum">     220 </span>            :   //  void                  FillLumiAliceOFL(Int_t nrec, Int_t* time, Double_t* val);
<span class="lineNum">     221 </span>            :   //  void                  FillBckgAliceOFL(Int_t nrec, Int_t* time, Double_t* val);
<span class="lineNum">     222 </span>            : 
<span class="lineNum">     223 </span>            :  protected:
<span class="lineNum">     224 </span>            :   //
<span class="lineNum">     225 </span>            :   Bool_t                FillData(double tmin=0, double tmax=1.e20);
<span class="lineNum">     226 </span>            :   virtual void          Clear(const Option_t *opt=&quot;&quot;);
<span class="lineNum">     227 </span>            :   void                  PrintAux(Bool_t full,const Int_t refs[2],const Option_t *opt=&quot;&quot;) const;
<span class="lineNum">     228 </span>            :   TObjArray*            GetDCSEntry(const char* key,int &amp;entry,int &amp;last,double tmin,double tmax) const;
<span class="lineNum">     229 </span>            :   Int_t                 FillScalarRecord(  int refs[2], const char* rec, const char* recErr=0, Double_t maxAbsVal=1.e30);
<span class="lineNum">     230 </span>            :   Int_t                 FillBunchConfig(   int refs[2], const char* rec);
<span class="lineNum">     231 </span>            :   Int_t                 FillStringRecord(  int refs[2], const char* rec);
<span class="lineNum">     232 </span>            :   Int_t                 FillAcqMode(       int refs[2], const char* rec);
<span class="lineNum">     233 </span>            :   Int_t                 FillBunchInfo(     int refs[2], const char* rec,int ibm, Bool_t inRealSlots, Double_t maxAbsVal=1.e30);
<span class="lineNum">     234 </span>            :   Int_t                 FillBCLuminosities(int refs[2], const char* rec, const char* recErr, Int_t useBeam, Double_t maxAbsVal=1.e30);
<span class="lineNum">     235 </span>            :   //
<span class="lineNum">     236 </span>            :   Int_t                 ExtractInt(AliDCSArray* dcsArray,Int_t el)    const;
<span class="lineNum">     237 </span>            :   Double_t              ExtractDouble(AliDCSArray* dcsArray,Int_t el) const;
<span class="lineNum">     238 </span>            :   TString&amp;              ExtractString(AliDCSArray* dcsArray)          const;
<span class="lineNum">     239 </span>            :   AliLHCData(const AliLHCData&amp; src) : TObject(src),fTMin(0),fTMax(0),fFillNumber(0),fData(0),fkFile2Process(0),fkMap2Process(0) { /*dummy*/ }
<span class="lineNum">     240 </span>            :   AliLHCData&amp; operator=(const AliLHCData&amp; ) { /*dummy*/ return *this;}
<span class="lineNum">     241 </span>            :   Int_t                 TimeDifference(double v1,double v2,double tol=0.9) const;
<span class="lineNum">     242 </span>            :   Bool_t                IzZero(double val, double tol=1e-16)         const {return TMath::Abs(val)&lt;tol;}
<span class="lineNum">     243 </span>            :   Bool_t                GoodPairID(int beam)                         const;
<span class="lineNum">     244 </span>            :   //
<span class="lineNum">     245 </span>            :  protected:
<span class="lineNum">     246 </span>            :   //
<span class="lineNum">     247 </span>            :   Double_t        fTMin;                              // selection timeMin
<span class="lineNum">     248 </span>            :   Double_t        fTMax;                              // selection timeMax
<span class="lineNum">     249 </span>            :   Int_t           fFillNumber;                        // fill number           : kFillNum
<span class="lineNum">     250 </span>            :   //
<span class="lineNum">     251 </span>            :   //---------------- Last index gives: 0 - beginning of the records in fData, 1 - number of records
<span class="lineNum">     252 </span>            :   //
<span class="lineNum">     253 </span>            :   //              infrormation from RunControl
<span class="lineNum">     254 </span>            :   Int_t           fRCInjScheme[2];                    // active injection scheme                       : String |kRCInjScheme
<span class="lineNum">     255 </span>            :   Int_t           fRCBeta[2];                         // target beta                                   : Float  |kRCBeta
<span class="lineNum">     256 </span>            :   Int_t           fRCAngH[2];                         // horisontal angle                              : Float  |kRCCrossAng
<span class="lineNum">     257 </span>            :   Int_t           fRCAngV[2];                         // vertical angle                                : Float  |kRCVang
<span class="lineNum">     258 </span>            :   Int_t           fBunchConfDecl[2][2];               // declared beam configuration                   : Float  |kBunchConf                
<span class="lineNum">     259 </span>            :   //
<span class="lineNum">     260 </span>            :   //              measured information
<span class="lineNum">     261 </span>            :   Int_t           fBunchConfMeas[2][2];               // measured beam configuration                   : Int    |kBunchLgtFillB
<span class="lineNum">     262 </span>            :   Int_t           fBunchLengths[2][2];                // measured beam lenghts                         : Float  |kBunchLgt
<span class="lineNum">     263 </span>            :   Int_t           fIntensTotal[2][2];                 // total beam intensities                        : Float  |kIntTot
<span class="lineNum">     264 </span>            :   Int_t           fIntensTotalAv[2][2];               // total beam intensities from bunch averages    : Float  |kIntTotAv
<span class="lineNum">     265 </span>            :   Int_t           fIntensPerBunch[2][2];              // bunch-by-bunch intensities                    : Float  |kIntBunchAv
<span class="lineNum">     266 </span>            :   //
<span class="lineNum">     267 </span>            :   Int_t           fCrossAngle[2][2];                  // crossing angle   at IP2 and its error         : Float  |kLimCrossAng, kLumCrossAngErr
<span class="lineNum">     268 </span>            :   Int_t           fEmittanceH[2][2];                  // beam H emittances                             : Float  |kBeamSzEmittH
<span class="lineNum">     269 </span>            :   Int_t           fEmittanceV[2][2];                  // beam V emittances                             : Float  |kBeamSzEmittV
<span class="lineNum">     270 </span>            :   Int_t           fBeamSigmaH[2][2];                  // beam H sigma and error                        : Float  |kBeamSzSigH,kBeamSzSigHErr
<span class="lineNum">     271 </span>            :   Int_t           fBeamSigmaV[2][2];                  // beam V sigma and error                        : Float  |kBeamSzSigV,kBeamSzSigVErr
<span class="lineNum">     272 </span>            :   //
<span class="lineNum">     273 </span>            :   Int_t           fLuminTotal[2][2];                  // total luminosity at IP2 and its error         : Float  |kLumTot, kLumTotErr
<span class="lineNum">     274 </span>            :   Int_t           fLuminPerBC[2][2];                  // luminosity at IP2 for each BC and its error   : Float  |kLumBunch,kLumBunchErr
<span class="lineNum">     275 </span>            :   Int_t           fLuminAcqMode[2][2];                // luminosity acquisition mode                   : Int    |kLumAcqMode
<span class="lineNum">     276 </span>            :   //
<span class="lineNum">     277 </span>            :   // here we will store the luminosity and the background measured by Alice. We store the value integrated from the start of fill.
<span class="lineNum">     278 </span>            :   // the inst. value can be obtained as its derivative
<span class="lineNum">     279 </span>            :   Int_t           fLumiAlice[2];                      // luminosity measured by Alice, Total_Inst      : Float  |kALILumiTotalInst
<span class="lineNum">     280 </span>            :   Int_t           fLumiAliceStB[2];                   // luminosity measured by Alice, Deli.StabBeam   : Float  |kALILumiTotalDeliveredStabBeam
<span class="lineNum">     281 </span>            :   Int_t           fLumiAliceBbB[2];                   // luminosity measured by Alice, B-by-B          : Float  |kALILumiBunchInst
<span class="lineNum">     282 </span>            :   //
<span class="lineNum">     283 </span>            :   Int_t           fBckgAlice[kNBGs][2];               // backgrounds measured by Alice                 : Float  |kALIBackground1,2,3
<span class="lineNum">     284 </span>            :   //
<span class="lineNum">     285 </span>            :   Int_t           fBPTXdTB1B2[2];                     // BPTX_deltaT_B1_B2                             : Float  |kBPTXdeltaTB1B2,
<span class="lineNum">     286 </span>            :   Int_t           fBPTXdTRMSB1B2[2];                  // BPTX_deltaTRMS_B1_B2                          : Float  |kBPTXdeltaTRMSB1B2,
<span class="lineNum">     287 </span>            :   Int_t           fBPTXPhase[2][2];                   // BPTX_Phase_B1, and BPTX_Phase_B2              : Float  |kBPTXPhase
<span class="lineNum">     288 </span>            :   Int_t           fBPTXPhaseRMS[2][2];                // BPTX_PhaseRMS_B1, and BPTX_PhaseRMS_B2        : Float  |kBPTXPhaseRMS
<span class="lineNum">     289 </span>            :   Int_t           fBPTXPhaseShift[2][2];              // BPTX_Phase_Shift_B1 and BPTX_Phase_Shift_B2   : Float  |kBPTXPhaseShift 
<span class="lineNum">     290 </span>            :   //
<span class="lineNum">     291 </span>            :   Int_t           fCollimators[kNCollimators][kNJaws][2];// collimator jaws positions                  : Float  |kCollPos
<span class="lineNum">     292 </span>            :   //
<span class="lineNum">     293 </span>            :   TObjArray       fData;                              // single storage for various records
<span class="lineNum">     294 </span>            :   //
<span class="lineNum">     295 </span>            :   static const Char_t *fgkDCSNames[];                 // beam related DCS names to extract
<span class="lineNum">     296 </span>            :   static const Char_t *fgkDCSColNames[];              // collimators to extract
<span class="lineNum">     297 </span>            :   static const Char_t *fgkDCSColJaws[];               // names of collimator pieces
<span class="lineNum">     298 </span>            :   //
<span class="lineNum">     299 </span>            :  private:
<span class="lineNum">     300 </span>            :   // non-persistent objects used at the filling time
<span class="lineNum">     301 </span>            :   const Char_t*   fkFile2Process;                      //! name of DCS file
<a name="302"><span class="lineNum">     302 </span>            :   const TMap*     fkMap2Process;                       //! DCS map to process </a>
<span class="lineNum">     303 </span>            : 
<span class="lineNum">     304 </span><span class="lineCov">        150 :   ClassDef(AliLHCData,4)</span>
<span class="lineNum">     305 </span>            : };
<span class="lineNum">     306 </span>            : 
<a name="307"><span class="lineNum">     307 </span>            : </a>
<span class="lineNum">     308 </span>            : //_____________________________________________________________________________
<span class="lineNum">     309 </span>            : inline Int_t AliLHCData::GetNCollimatorJawPos(int coll,int jaw) const {// get n records
<span class="lineNum">     310 </span><span class="lineNoCov">          0 :   return (coll&gt;=0&amp;&amp;coll&lt;kNCollimators&amp;&amp;jaw&gt;=0&amp;&amp;jaw&lt;kNJaws)? fCollimators[coll][jaw][kNStor]:0;</span>
<a name="311"><span class="lineNum">     311 </span>            : }</a>
<span class="lineNum">     312 </span>            : 
<span class="lineNum">     313 </span>            : inline const Int_t* AliLHCData::GetOffsCollimatorJawPos(int coll,int jaw)  const { // offset array
<span class="lineNum">     314 </span><span class="lineNoCov">          0 :   return (coll&gt;=0&amp;&amp;coll&lt;kNCollimators&amp;&amp;jaw&gt;=0&amp;&amp;jaw&lt;kNJaws)? fCollimators[coll][jaw]:0;</span>
<a name="315"><span class="lineNum">     315 </span>            : }</a>
<span class="lineNum">     316 </span>            : 
<span class="lineNum">     317 </span>            : inline AliLHCDipValI* AliLHCData::GetBunchConfigMeasured(int bm, int i) const { // get record
<span class="lineNum">     318 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBunchConfMeas[bm][kNStor]) ? (AliLHCDipValI*)fData[fBunchConfMeas[bm][kStart]+i]:0;</span>
<a name="319"><span class="lineNum">     319 </span>            : }</a>
<span class="lineNum">     320 </span>            : 
<span class="lineNum">     321 </span>            : inline AliLHCDipValF* AliLHCData::GetBunchLengths(int bm, int i) const { // get record
<span class="lineNum">     322 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBunchLengths[bm][kNStor]) ? (AliLHCDipValF*)fData[fBunchLengths[bm][kStart]+i]:0;</span>
<a name="323"><span class="lineNum">     323 </span>            : }</a>
<span class="lineNum">     324 </span>            : 
<span class="lineNum">     325 </span>            : inline AliLHCDipValI* AliLHCData::GetBunchConfigDeclared(int bm, int i) const { // get record
<span class="lineNum">     326 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBunchConfDecl[bm][kNStor]) ? (AliLHCDipValI*)fData[fBunchConfDecl[bm][kStart]+i]:0;</span>
<a name="327"><span class="lineNum">     327 </span>            : }</a>
<span class="lineNum">     328 </span>            : 
<span class="lineNum">     329 </span>            : inline AliLHCDipValF* AliLHCData::GetTotalIntensity(int bm, int i) const { // get record
<span class="lineNum">     330 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fIntensTotal[bm][kNStor]) ? (AliLHCDipValF*)fData[fIntensTotal[bm][kStart]+i]:0;</span>
<a name="331"><span class="lineNum">     331 </span>            : }</a>
<span class="lineNum">     332 </span>            : 
<span class="lineNum">     333 </span>            : inline AliLHCDipValF* AliLHCData::GetTotalIntensityAv(int bm, int i) const { // get record
<span class="lineNum">     334 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fIntensTotalAv[bm][kNStor]) ? (AliLHCDipValF*)fData[fIntensTotalAv[bm][kStart]+i]:0;</span>
<a name="335"><span class="lineNum">     335 </span>            : }</a>
<span class="lineNum">     336 </span>            : 
<span class="lineNum">     337 </span>            : inline AliLHCDipValF* AliLHCData::GetIntensityPerBunch(int bm, int i) const { // get record
<span class="lineNum">     338 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fIntensPerBunch[bm][kNStor]) ? (AliLHCDipValF*)fData[fIntensPerBunch[bm][kStart]+i]:0;</span>
<a name="339"><span class="lineNum">     339 </span>            : }</a>
<span class="lineNum">     340 </span>            : 
<span class="lineNum">     341 </span>            : inline AliLHCDipValF* AliLHCData::GetEmittanceH(int bm, int i) const { // get record
<span class="lineNum">     342 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fEmittanceH[bm][kNStor]) ? (AliLHCDipValF*)fData[fEmittanceH[bm][kStart]+i]:0;</span>
<a name="343"><span class="lineNum">     343 </span>            : }</a>
<span class="lineNum">     344 </span>            : 
<span class="lineNum">     345 </span>            : inline AliLHCDipValF* AliLHCData::GetEmittanceV(int bm, int i) const { // get record
<span class="lineNum">     346 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fEmittanceV[bm][kNStor]) ? (AliLHCDipValF*)fData[fEmittanceV[bm][kStart]+i]:0;</span>
<a name="347"><span class="lineNum">     347 </span>            : }</a>
<span class="lineNum">     348 </span>            : 
<span class="lineNum">     349 </span>            : inline AliLHCDipValF* AliLHCData::GetBeamSigmaH(int bm, int i) const { // get record
<span class="lineNum">     350 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBeamSigmaH[bm][kNStor]) ? (AliLHCDipValF*)fData[fBeamSigmaH[bm][kStart]+i]:0;</span>
<a name="351"><span class="lineNum">     351 </span>            : }</a>
<span class="lineNum">     352 </span>            : 
<span class="lineNum">     353 </span>            : inline AliLHCDipValF* AliLHCData::GetBeamSigmaV(int bm, int i) const { // get record
<span class="lineNum">     354 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBeamSigmaV[bm][kNStor]) ? (AliLHCDipValF*)fData[fBeamSigmaV[bm][kStart]+i]:0;</span>
<a name="355"><span class="lineNum">     355 </span>            : }</a>
<span class="lineNum">     356 </span>            : 
<span class="lineNum">     357 </span>            : inline AliLHCDipValF* AliLHCData::GetLuminosityTotal(int lr, int i) const { // get record
<span class="lineNum">     358 </span><span class="lineNoCov">          0 :   return (GoodPairID(lr) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fLuminTotal[lr][kNStor]) ? (AliLHCDipValF*)fData[fLuminTotal[lr][kStart]+i]:0;</span>
<a name="359"><span class="lineNum">     359 </span>            : }</a>
<span class="lineNum">     360 </span>            : 
<span class="lineNum">     361 </span>            : inline AliLHCDipValF* AliLHCData::GetLuminosityPerBunch(int lr, int i) const { // get record
<span class="lineNum">     362 </span><span class="lineNoCov">          0 :   return (GoodPairID(lr) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fLuminPerBC[lr][kNStor]) ? (AliLHCDipValF*)fData[fLuminPerBC[lr][kStart]+i]:0;</span>
<a name="363"><span class="lineNum">     363 </span>            : }</a>
<span class="lineNum">     364 </span>            : 
<span class="lineNum">     365 </span>            : inline AliLHCDipValI* AliLHCData::GetLuminosityAcqMode(int lr, int i) const { // get record
<span class="lineNum">     366 </span><span class="lineNoCov">          0 :   return (GoodPairID(lr) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fLuminAcqMode[lr][kNStor]) ? (AliLHCDipValI*)fData[fLuminAcqMode[lr][kStart]+i]:0;</span>
<a name="367"><span class="lineNum">     367 </span>            : }</a>
<span class="lineNum">     368 </span>            : 
<span class="lineNum">     369 </span>            : inline AliLHCDipValF* AliLHCData::GetCrossAngle(int lr, int i) const { // get record
<span class="lineNum">     370 </span><span class="lineNoCov">          0 :   return (GoodPairID(lr) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fCrossAngle[lr][kNStor]) ? (AliLHCDipValF*)fData[fCrossAngle[lr][kStart]+i]:0;</span>
<a name="371"><span class="lineNum">     371 </span>            : }</a>
<span class="lineNum">     372 </span>            : 
<span class="lineNum">     373 </span>            : inline AliLHCDipValC* AliLHCData::GetInjectionScheme(int i) const { // get record
<span class="lineNum">     374 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fRCInjScheme[kNStor]) ? (AliLHCDipValC*)fData[fRCInjScheme[kStart]+i]:0;</span>
<a name="375"><span class="lineNum">     375 </span>            : }</a>
<span class="lineNum">     376 </span>            : 
<span class="lineNum">     377 </span>            : inline AliLHCDipValF* AliLHCData::GetRCBetaStar(int i) const { // get record
<span class="lineNum">     378 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fRCBeta[kNStor]) ? (AliLHCDipValF*)fData[fRCBeta[kStart]+i]:0;</span>
<a name="379"><span class="lineNum">     379 </span>            : }</a>
<span class="lineNum">     380 </span>            : 
<span class="lineNum">     381 </span>            : inline AliLHCDipValF* AliLHCData::GetRCAngleH(int i) const { // get record
<span class="lineNum">     382 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fRCAngH[kNStor]) ? (AliLHCDipValF*)fData[fRCAngH[kStart]+i]:0;</span>
<a name="383"><span class="lineNum">     383 </span>            : }</a>
<span class="lineNum">     384 </span>            : 
<span class="lineNum">     385 </span>            : inline AliLHCDipValF* AliLHCData::GetRCAngleV(int i) const { // get record
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fRCAngV[kNStor]) ? (AliLHCDipValF*)fData[fRCAngV[kStart]+i]:0;</span>
<a name="387"><span class="lineNum">     387 </span>            : }</a>
<span class="lineNum">     388 </span>            : 
<span class="lineNum">     389 </span>            : inline AliLHCDipValF* AliLHCData::GetCollimJawPos(int coll, int jaw, int i) const { // get record
<span class="lineNum">     390 </span><span class="lineNoCov">          0 :   return (coll&gt;=0 &amp;&amp; coll&lt;kNCollimators &amp;&amp; jaw&gt;=0 &amp;&amp; jaw&lt;kNJaws &amp;&amp; </span>
<span class="lineNum">     391 </span><span class="lineNoCov">          0 :           i&gt;=0 &amp;&amp; i&lt;fCollimators[coll][jaw][kNStor]) ? (AliLHCDipValF*)fData[fCollimators[coll][jaw][kStart]+i]:0;</span>
<a name="392"><span class="lineNum">     392 </span>            : }</a>
<span class="lineNum">     393 </span>            : 
<span class="lineNum">     394 </span>            : inline AliLHCDipValF* AliLHCData::GetLumiAlice(int i) const { // get record on integrated luminosity
<span class="lineNum">     395 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fLumiAlice[kNStor]) ? (AliLHCDipValF*)fData[fLumiAlice[kStart]+i]:0;</span>
<a name="396"><span class="lineNum">     396 </span>            : }</a>
<span class="lineNum">     397 </span>            : 
<span class="lineNum">     398 </span>            : inline AliLHCDipValF* AliLHCData::GetLumiAliceSBDelivered(int i) const { // get record on st.beam delivered luminosity
<span class="lineNum">     399 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fLumiAliceStB[kNStor]) ? (AliLHCDipValF*)fData[fLumiAliceStB[kStart]+i]:0;</span>
<a name="400"><span class="lineNum">     400 </span>            : }</a>
<span class="lineNum">     401 </span>            : 
<span class="lineNum">     402 </span>            : inline AliLHCDipValF* AliLHCData::GetLumiAliceBunch(int i) const { // get record on b-by-b luminosity
<span class="lineNum">     403 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fLumiAliceBbB[kNStor]) ? (AliLHCDipValF*)fData[fLumiAliceBbB[kStart]+i]:0;</span>
<a name="404"><span class="lineNum">     404 </span>            : }</a>
<span class="lineNum">     405 </span>            : 
<span class="lineNum">     406 </span>            : inline AliLHCDipValF* AliLHCData::GetBckgAlice(int bg, int i) const { // get record on integrated background
<span class="lineNum">     407 </span><span class="lineNoCov">          0 :   return (bg&gt;=0&amp;&amp;bg&lt;kNBGs&amp;&amp;i&gt;=0&amp;&amp;i&lt;fBckgAlice[bg][kNStor]) ? (AliLHCDipValF*)fData[fBckgAlice[bg][kStart]+i]:0;</span>
<a name="408"><span class="lineNum">     408 </span>            : }</a>
<span class="lineNum">     409 </span>            : 
<span class="lineNum">     410 </span>            : inline AliLHCDipValF* AliLHCData::GetBPTXdeltaTB1B2(int i) const { // get record 
<span class="lineNum">     411 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fBPTXdTB1B2[kNStor]) ? (AliLHCDipValF*)fData[fBPTXdTB1B2[kStart]+i]:0;</span>
<a name="412"><span class="lineNum">     412 </span>            : }</a>
<span class="lineNum">     413 </span>            : 
<span class="lineNum">     414 </span>            : inline AliLHCDipValF* AliLHCData::GetBPTXdeltaTRMSB1B2(int i) const { // get record 
<span class="lineNum">     415 </span><span class="lineNoCov">          0 :   return (i&gt;=0 &amp;&amp; i&lt;fBPTXdTRMSB1B2[kNStor]) ? (AliLHCDipValF*)fData[fBPTXdTRMSB1B2[kStart]+i]:0;</span>
<a name="416"><span class="lineNum">     416 </span>            : }</a>
<span class="lineNum">     417 </span>            : 
<span class="lineNum">     418 </span>            : inline AliLHCDipValF* AliLHCData::GetBPTXPhase(int bm, int i) const { // get record 
<span class="lineNum">     419 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBPTXPhase[bm][kNStor]) ? (AliLHCDipValF*)fData[fBPTXPhase[bm][kStart]+i]:0;</span>
<a name="420"><span class="lineNum">     420 </span>            : }</a>
<span class="lineNum">     421 </span>            : 
<span class="lineNum">     422 </span>            : inline AliLHCDipValF* AliLHCData::GetBPTXPhaseRMS(int bm, int i) const { // get record 
<span class="lineNum">     423 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBPTXPhaseRMS[bm][kNStor]) ? (AliLHCDipValF*)fData[fBPTXPhaseRMS[bm][kStart]+i]:0;</span>
<a name="424"><span class="lineNum">     424 </span>            : }</a>
<span class="lineNum">     425 </span>            : 
<span class="lineNum">     426 </span>            : inline AliLHCDipValF* AliLHCData::GetBPTXPhaseShift(int bm, int i) const { // get record 
<span class="lineNum">     427 </span><span class="lineNoCov">          0 :   return (GoodPairID(bm) &amp;&amp; i&gt;=0 &amp;&amp; i&lt;fBPTXPhaseShift[bm][kNStor]) ? (AliLHCDipValF*)fData[fBPTXPhaseShift[bm][kStart]+i]:0;</span>
<a name="428"><span class="lineNum">     428 </span>            : }</a>
<span class="lineNum">     429 </span>            : 
<span class="lineNum">     430 </span>            : inline Float_t AliLHCData::GetLumiAlice(Double_t tStamp) const { // get closest in time value on integrated luminosity
<span class="lineNum">     431 </span><span class="lineNoCov">          0 :   int idx = FindEntryValidFor(fLumiAlice[kStart],fLumiAlice[kNStor],tStamp);</span>
<span class="lineNum">     432 </span><span class="lineNoCov">          0 :   return idx&lt;0 ? -1 : ((AliLHCDipValF*)fData[fLumiAlice[kStart]+idx])-&gt;GetValue();</span>
<a name="433"><span class="lineNum">     433 </span>            : }</a>
<span class="lineNum">     434 </span>            : 
<span class="lineNum">     435 </span>            : inline Float_t AliLHCData::GetLumiAliceSBDelivered(Double_t tStamp) const { // get closest in time value on delivered luminosity
<span class="lineNum">     436 </span><span class="lineNoCov">          0 :   int idx = FindEntryValidFor(fLumiAliceStB[kStart],fLumiAliceStB[kNStor],tStamp);</span>
<span class="lineNum">     437 </span><span class="lineNoCov">          0 :   return idx&lt;0 ? -1 : ((AliLHCDipValF*)fData[fLumiAliceStB[kStart]+idx])-&gt;GetValue();</span>
<a name="438"><span class="lineNum">     438 </span>            : }</a>
<span class="lineNum">     439 </span>            : 
<span class="lineNum">     440 </span>            : inline Float_t AliLHCData::GetBckgAlice(int bg,Double_t tStamp) const { // get closest in time value on integrated bckg
<span class="lineNum">     441 </span><span class="lineNoCov">          0 :   if (bg&lt;0||bg&gt;=kNBGs) return 0;</span>
<span class="lineNum">     442 </span><span class="lineNoCov">          0 :   int idx = FindEntryValidFor(fBckgAlice[bg][kStart],fBckgAlice[bg][kNStor],tStamp);</span>
<span class="lineNum">     443 </span><span class="lineNoCov">          0 :   return idx&lt;0 ? -1 : ((AliLHCDipValF*)fData[fBckgAlice[bg][kStart]+idx])-&gt;GetValue();</span>
<span class="lineNum">     444 </span><span class="lineNoCov">          0 : }</span>
<span class="lineNum">     445 </span>            : 
<a name="446"><span class="lineNum">     446 </span>            : </a>
<span class="lineNum">     447 </span>            : 
<span class="lineNum">     448 </span>            : inline Int_t AliLHCData::FindEntryValidFor(int start,int nrec, double tstamp) const
<span class="lineNum">     449 </span>            : {
<span class="lineNum">     450 </span>            :   // find index of record within this limits valid for given tstamp (i.e. the last one before or equal to tstamp)
<span class="lineNum">     451 </span>            :   int idx;
<span class="lineNum">     452 </span><span class="lineNoCov">          0 :   for (idx=0;idx&lt;nrec;idx++) {</span>
<span class="lineNum">     453 </span><span class="lineNoCov">          0 :     if (TimeDifference(tstamp,((AliLHCDipValI*)fData[start+idx])-&gt;GetTimeStamp())&lt;=0) break;</span>
<span class="lineNum">     454 </span>            :   }
<span class="lineNum">     455 </span><span class="lineNoCov">          0 :   return (idx&lt;nrec) ? idx : nrec-1;</span>
<span class="lineNum">     456 </span>            : }
<span class="lineNum">     457 </span>            : 
<span class="lineNum">     458 </span>            : #endif
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
