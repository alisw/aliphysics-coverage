<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - EMCAL/EMCALUtils/AliEMCALEMCGeometry.cxx</title>
  <link rel="stylesheet" type="text/css" href="../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../index.html">top level</a> - <a href="index.html">EMCAL/EMCALUtils</a> - AliEMCALEMCGeometry.cxx<span style="font-size: 80%;"> (source / <a href="AliEMCALEMCGeometry.cxx.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">272</td>
            <td class="headerCovTableEntry">468</td>
            <td class="headerCovTableEntryLo">58.1 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2016-06-14 17:26:59</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">11</td>
            <td class="headerCovTableEntry">19</td>
            <td class="headerCovTableEntryLo">57.9 %</td>
          </tr>
          <tr><td><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /**************************************************************************</a>
<span class="lineNum">       2 </span>            :  * Copyright(c) 1998-1999, ALICE Experiment at CERN, All rights reserved. *
<span class="lineNum">       3 </span>            :  *                                                                        *
<span class="lineNum">       4 </span>            :  * Author: The ALICE Off-line Project.                                    *
<span class="lineNum">       5 </span>            :  * Contributors are mentioned in the code where appropriate.              *
<span class="lineNum">       6 </span>            :  *                                                                        *
<span class="lineNum">       7 </span>            :  * Permission to use, copy, modify and distribute this software and its   *
<span class="lineNum">       8 </span>            :  * documentation strictly for non-commercial purposes is hereby granted   *
<span class="lineNum">       9 </span>            :  * without fee, provided that the above copyright notice appears in all   *
<span class="lineNum">      10 </span>            :  * copies and that both the copyright notice and this permission notice   *
<span class="lineNum">      11 </span>            :  * appear in the supporting documentation. The authors make no claims     *
<span class="lineNum">      12 </span>            :  * about the suitability of this software for any purpose. It is          *
<span class="lineNum">      13 </span>            :  * provided &quot;as is&quot; without express or implied warranty.                  *
<span class="lineNum">      14 </span>            :  **************************************************************************/
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            : // --- Root header files ---
<span class="lineNum">      17 </span>            : #include &lt;TObjArray.h&gt;
<span class="lineNum">      18 </span>            : #include &lt;TObjString.h&gt;
<span class="lineNum">      19 </span>            : #include &lt;TRegexp.h&gt;
<span class="lineNum">      20 </span>            : 
<span class="lineNum">      21 </span>            : // -- ALICE Headers.
<span class="lineNum">      22 </span>            : #include &quot;AliLog.h&quot;
<span class="lineNum">      23 </span>            : 
<span class="lineNum">      24 </span>            : // --- EMCAL headers
<span class="lineNum">      25 </span>            : #include &quot;AliEMCALEMCGeometry.h&quot;
<a name="26"><span class="lineNum">      26 </span>            : #include &lt;cassert&gt;</a>
<span class="lineNum">      27 </span>            : 
<span class="lineNum">      28 </span><span class="lineCov">         72 : ClassImp(AliEMCALEMCGeometry)</span>
<span class="lineNum">      29 </span>            : 
<span class="lineNum">      30 </span>            : // these initialisations are needed for a singleton
<span class="lineNum">      31 </span>            : Bool_t    AliEMCALEMCGeometry::fgInit      = kFALSE;
<span class="lineNum">      32 </span>            : const Char_t*   AliEMCALEMCGeometry::fgkDefaultGeometryName = &quot;EMCAL_COMPLETE12SMV1_DCAL_8SM&quot;;
<a name="33"><span class="lineNum">      33 </span>            : </a>
<span class="lineNum">      34 </span>            : 
<span class="lineNum">      35 </span>            : AliEMCALEMCGeometry::AliEMCALEMCGeometry() 
<span class="lineNum">      36 </span><span class="lineNoCov">          0 :   : TNamed(),</span>
<span class="lineNum">      37 </span><span class="lineNoCov">          0 :     fGeoName(0),fArrayOpts(0),fNAdditionalOpts(0),fECPbRadThickness(0.),fECScintThick(0.),</span>
<span class="lineNum">      38 </span><span class="lineNoCov">          0 :     fNECLayers(0),fArm1PhiMin(0.),fArm1PhiMax(0.),fArm1EtaMin(0.),fArm1EtaMax(0.),fIPDistance(0.),</span>
<span class="lineNum">      39 </span><span class="lineNoCov">          0 :     fShellThickness(0.),fZLength(0.),fDCALInnerEdge(0.),fDCALPhiMin(0),fDCALPhiMax(0),fEMCALPhiMax(0),</span>
<span class="lineNum">      40 </span><span class="lineNoCov">          0 :     fDCALStandardPhiMax(0),fDCALInnerExtandedEta(0),fNZ(0),fNPhi(0),fSampling(0.),fNumberOfSuperModules(0),</span>
<span class="lineNum">      41 </span><span class="lineNoCov">          0 :     fEMCSMSystem(0x0),fFrontSteelStrip(0.),fLateralSteelStrip(0.),fPassiveScintThick(0.),fPhiModuleSize(0.),</span>
<span class="lineNum">      42 </span><span class="lineNoCov">          0 :     fEtaModuleSize(0.),fPhiTileSize(0.),fEtaTileSize(0.),fLongModuleSize(0.),fPhiSuperModule(0),fNPhiSuperModule(0),</span>
<span class="lineNum">      43 </span><span class="lineNoCov">          0 :     fNPHIdiv(0),fNETAdiv(0), fNCells(0),fNCellsInSupMod(0),fNCellsInModule(0),</span>
<span class="lineNum">      44 </span><span class="lineNoCov">          0 :     fTrd1Angle(0.),f2Trd1Dx2(0.),fPhiGapForSM(0.),fKey110DEG(0),fnSupModInDCAL(0),fPhiBoundariesOfSM(0),</span>
<span class="lineNum">      45 </span><span class="lineNoCov">          0 :     fPhiCentersOfSM(0),fPhiCentersOfSMSec(0),fEtaMaxOfTRD1(0),fTrd1AlFrontThick(0.0), fTrd1BondPaperThick(0.),</span>
<span class="lineNum">      46 </span><span class="lineNoCov">          0 :     fCentersOfCellsEtaDir(0), fCentersOfCellsXDir(0),fCentersOfCellsPhiDir(0),</span>
<span class="lineNum">      47 </span><span class="lineNoCov">          0 :     fEtaCentersOfCells(0),fPhiCentersOfCells(0),fShishKebabTrd1Modules(0),</span>
<span class="lineNum">      48 </span><span class="lineNoCov">          0 :     fParSM(), fILOSS(-1), fIHADR(-1),</span>
<span class="lineNum">      49 </span>            :     //obsolete member data
<span class="lineNum">      50 </span><span class="lineNoCov">          0 :      fGap2Active(0.), fSteelFrontThick(0.), fTrd2AngleY(0.),</span>
<span class="lineNum">      51 </span><span class="lineNoCov">          0 :     f2Trd2Dy2(0.), fEmptySpace(0.), fTubsR(0.), fTubsTurnAngle(0.)</span>
<span class="lineNum">      52 </span><span class="lineNoCov">          0 : { </span>
<span class="lineNum">      53 </span>            :   // default ctor only for internal usage (singleton)
<span class="lineNum">      54 </span>            :   // must be kept public for root persistency purposes, 
<span class="lineNum">      55 </span>            :   // but should never be called by the outside world    
<span class="lineNum">      56 </span><span class="lineNoCov">          0 :   fParSM[0]=0; fParSM[1]=0; fParSM[2]=0;</span>
<span class="lineNum">      57 </span><span class="lineNoCov">          0 :   fEnvelop[0] = 0; fEnvelop[1] = 0; fEnvelop[2] = 0;</span>
<span class="lineNum">      58 </span><span class="lineNoCov">          0 :   for(Int_t i = 0; i &lt; 6; i++) fkAdditionalOpts[i] = &quot;&quot;;</span>
<span class="lineNum">      59 </span>            :   
<span class="lineNum">      60 </span><span class="lineNoCov">          0 :   AliDebug(2, &quot;AliEMCALEMCGeometry : default ctor &quot;);</span>
<a name="61"><span class="lineNum">      61 </span><span class="lineNoCov">          0 : }</span></a>
<span class="lineNum">      62 </span>            : //______________________________________________________________________
<span class="lineNum">      63 </span>            : AliEMCALEMCGeometry::AliEMCALEMCGeometry(const Text_t* name, const Text_t* title,
<span class="lineNum">      64 </span>            :                                          const Text_t* mcname, const Text_t* mctitle ) :
<span class="lineNum">      65 </span><span class="lineCov">          5 :   TNamed(name,title),</span>
<span class="lineNum">      66 </span><span class="lineCov">         10 :     fGeoName(0),fArrayOpts(0),fNAdditionalOpts(0),fECPbRadThickness(0.),fECScintThick(0.),</span>
<span class="lineNum">      67 </span><span class="lineCov">          5 :     fNECLayers(0),fArm1PhiMin(0.),fArm1PhiMax(0.),fArm1EtaMin(0.),fArm1EtaMax(0.),fIPDistance(0.),</span>
<span class="lineNum">      68 </span><span class="lineCov">          5 :     fShellThickness(0.),fZLength(0.),fDCALInnerEdge(0.),fDCALPhiMin(0),fDCALPhiMax(0),fEMCALPhiMax(0),</span>
<span class="lineNum">      69 </span><span class="lineCov">          5 :     fDCALStandardPhiMax(0),fDCALInnerExtandedEta(0),fNZ(0),fNPhi(0),fSampling(0.),fNumberOfSuperModules(0),</span>
<span class="lineNum">      70 </span><span class="lineCov">          5 :     fEMCSMSystem(0x0),fFrontSteelStrip(0.),fLateralSteelStrip(0.),fPassiveScintThick(0.),fPhiModuleSize(0.),</span>
<span class="lineNum">      71 </span><span class="lineCov">          5 :     fEtaModuleSize(0.),fPhiTileSize(0.),fEtaTileSize(0.),fLongModuleSize(0.),fPhiSuperModule(0),fNPhiSuperModule(0),</span>
<span class="lineNum">      72 </span><span class="lineCov">          5 :     fNPHIdiv(0),fNETAdiv(0), fNCells(0),fNCellsInSupMod(0),fNCellsInModule(0),</span>
<span class="lineNum">      73 </span><span class="lineCov">          5 :     fTrd1Angle(0.),f2Trd1Dx2(0.),fPhiGapForSM(0.),fKey110DEG(0),fnSupModInDCAL(0),fPhiBoundariesOfSM(0),</span>
<span class="lineNum">      74 </span><span class="lineCov">         15 :     fPhiCentersOfSM(0),fPhiCentersOfSMSec(0),fEtaMaxOfTRD1(0),fTrd1AlFrontThick(0.0), fTrd1BondPaperThick(0.),</span>
<span class="lineNum">      75 </span><span class="lineCov">         15 :     fCentersOfCellsEtaDir(0),fCentersOfCellsXDir(0),fCentersOfCellsPhiDir(0),</span>
<span class="lineNum">      76 </span><span class="lineCov">         15 :     fEtaCentersOfCells(0),fPhiCentersOfCells(0),fShishKebabTrd1Modules(0),</span>
<span class="lineNum">      77 </span><span class="lineCov">          5 :     fParSM(),fILOSS(-1), fIHADR(-1), </span>
<span class="lineNum">      78 </span>            :     //obsolete member data
<span class="lineNum">      79 </span><span class="lineCov">          5 :     fGap2Active(0.), fSteelFrontThick(0.), fTrd2AngleY(0.),</span>
<span class="lineNum">      80 </span><span class="lineCov">          5 :     f2Trd2Dy2(0.), fEmptySpace(0.), fTubsR(0.), fTubsTurnAngle(0.)</span>
<span class="lineNum">      81 </span><span class="lineCov">         25 : {</span>
<span class="lineNum">      82 </span>            :   // ctor only for internal usage (singleton)
<span class="lineNum">      83 </span><span class="lineCov">         25 :   AliDebug(2, Form(&quot;AliEMCALEMCGeometry(%s,%s,%s,%s) &quot;, name,title,mcname,mctitle));</span>
<span class="lineNum">      84 </span>            : 
<span class="lineNum">      85 </span><span class="lineCov">          5 :   Init(mcname,mctitle);</span>
<span class="lineNum">      86 </span>            : 
<span class="lineNum">      87 </span>            :   //  CreateListOfTrd1Modules();
<span class="lineNum">      88 </span>            : 
<span class="lineNum">      89 </span><span class="lineCov">         20 :   if (AliDebugLevel()&gt;=2) {</span>
<span class="lineNum">      90 </span><span class="lineNoCov">          0 :     PrintGeometry();</span>
<span class="lineNum">      91 </span>            :   }
<span class="lineNum">      92 </span>            : 
<a name="93"><span class="lineNum">      93 </span><span class="lineCov">         10 : }</span></a>
<span class="lineNum">      94 </span>            : //______________________________________________________________________
<span class="lineNum">      95 </span>            : AliEMCALEMCGeometry::AliEMCALEMCGeometry(const AliEMCALEMCGeometry&amp; geom)
<span class="lineNum">      96 </span><span class="lineNoCov">          0 :   : TNamed(geom),</span>
<span class="lineNum">      97 </span><span class="lineNoCov">          0 :     fGeoName(geom.fGeoName),</span>
<span class="lineNum">      98 </span><span class="lineNoCov">          0 :     fArrayOpts(geom.fArrayOpts),</span>
<span class="lineNum">      99 </span><span class="lineNoCov">          0 :     fNAdditionalOpts(geom.fNAdditionalOpts),</span>
<span class="lineNum">     100 </span><span class="lineNoCov">          0 :     fECPbRadThickness(geom.fECPbRadThickness),</span>
<span class="lineNum">     101 </span><span class="lineNoCov">          0 :     fECScintThick(geom.fECScintThick),</span>
<span class="lineNum">     102 </span><span class="lineNoCov">          0 :     fNECLayers(geom.fNECLayers),</span>
<span class="lineNum">     103 </span><span class="lineNoCov">          0 :     fArm1PhiMin(geom.fArm1PhiMin),</span>
<span class="lineNum">     104 </span><span class="lineNoCov">          0 :     fArm1PhiMax(geom.fArm1PhiMax),</span>
<span class="lineNum">     105 </span><span class="lineNoCov">          0 :     fArm1EtaMin(geom.fArm1EtaMin),</span>
<span class="lineNum">     106 </span><span class="lineNoCov">          0 :     fArm1EtaMax(geom.fArm1EtaMax),</span>
<span class="lineNum">     107 </span><span class="lineNoCov">          0 :     fIPDistance(geom.fIPDistance),</span>
<span class="lineNum">     108 </span><span class="lineNoCov">          0 :     fShellThickness(geom.fShellThickness),</span>
<span class="lineNum">     109 </span><span class="lineNoCov">          0 :     fZLength(geom.fZLength),</span>
<span class="lineNum">     110 </span><span class="lineNoCov">          0 :     fDCALInnerEdge(geom.fDCALInnerEdge),</span>
<span class="lineNum">     111 </span><span class="lineNoCov">          0 :     fDCALPhiMin(geom.fDCALPhiMin),</span>
<span class="lineNum">     112 </span><span class="lineNoCov">          0 :     fDCALPhiMax(geom.fDCALPhiMax),</span>
<span class="lineNum">     113 </span><span class="lineNoCov">          0 :     fEMCALPhiMax(geom.fEMCALPhiMax),</span>
<span class="lineNum">     114 </span><span class="lineNoCov">          0 :     fDCALStandardPhiMax(geom.fDCALStandardPhiMax),</span>
<span class="lineNum">     115 </span><span class="lineNoCov">          0 :     fDCALInnerExtandedEta(geom.fDCALInnerExtandedEta),</span>
<span class="lineNum">     116 </span><span class="lineNoCov">          0 :     fNZ(geom.fNZ),</span>
<span class="lineNum">     117 </span><span class="lineNoCov">          0 :     fNPhi(geom.fNPhi),</span>
<span class="lineNum">     118 </span><span class="lineNoCov">          0 :     fSampling(geom.fSampling),</span>
<span class="lineNum">     119 </span><span class="lineNoCov">          0 :     fNumberOfSuperModules(geom.fNumberOfSuperModules),</span>
<span class="lineNum">     120 </span><span class="lineNoCov">          0 :     fEMCSMSystem(new Int_t[fNumberOfSuperModules]),</span>
<span class="lineNum">     121 </span><span class="lineNoCov">          0 :     fFrontSteelStrip(geom.fFrontSteelStrip),</span>
<span class="lineNum">     122 </span><span class="lineNoCov">          0 :     fLateralSteelStrip(geom.fLateralSteelStrip),</span>
<span class="lineNum">     123 </span><span class="lineNoCov">          0 :     fPassiveScintThick(geom.fPassiveScintThick),</span>
<span class="lineNum">     124 </span><span class="lineNoCov">          0 :     fPhiModuleSize(geom.fPhiModuleSize),</span>
<span class="lineNum">     125 </span><span class="lineNoCov">          0 :     fEtaModuleSize(geom.fEtaModuleSize),</span>
<span class="lineNum">     126 </span><span class="lineNoCov">          0 :     fPhiTileSize(geom.fPhiTileSize),</span>
<span class="lineNum">     127 </span><span class="lineNoCov">          0 :     fEtaTileSize(geom.fEtaTileSize),</span>
<span class="lineNum">     128 </span><span class="lineNoCov">          0 :     fLongModuleSize(geom.fLongModuleSize),</span>
<span class="lineNum">     129 </span><span class="lineNoCov">          0 :     fPhiSuperModule(geom.fPhiSuperModule),</span>
<span class="lineNum">     130 </span><span class="lineNoCov">          0 :     fNPhiSuperModule(geom.fNPhiSuperModule),</span>
<span class="lineNum">     131 </span><span class="lineNoCov">          0 :     fNPHIdiv(geom.fNPHIdiv),</span>
<span class="lineNum">     132 </span><span class="lineNoCov">          0 :     fNETAdiv(geom.fNETAdiv),</span>
<span class="lineNum">     133 </span><span class="lineNoCov">          0 :     fNCells(geom.fNCells),</span>
<span class="lineNum">     134 </span><span class="lineNoCov">          0 :     fNCellsInSupMod(geom.fNCellsInSupMod),</span>
<span class="lineNum">     135 </span><span class="lineNoCov">          0 :     fNCellsInModule(geom.fNCellsInModule),</span>
<span class="lineNum">     136 </span><span class="lineNoCov">          0 :     fTrd1Angle(geom.fTrd1Angle),</span>
<span class="lineNum">     137 </span><span class="lineNoCov">          0 :     f2Trd1Dx2(geom.f2Trd1Dx2),</span>
<span class="lineNum">     138 </span><span class="lineNoCov">          0 :     fPhiGapForSM(geom.fPhiGapForSM),</span>
<span class="lineNum">     139 </span><span class="lineNoCov">          0 :     fKey110DEG(geom.fKey110DEG),</span>
<span class="lineNum">     140 </span><span class="lineNoCov">          0 :     fnSupModInDCAL(geom.fnSupModInDCAL),</span>
<span class="lineNum">     141 </span><span class="lineNoCov">          0 :     fPhiBoundariesOfSM(geom.fPhiBoundariesOfSM),</span>
<span class="lineNum">     142 </span><span class="lineNoCov">          0 :     fPhiCentersOfSM(geom.fPhiCentersOfSM),</span>
<span class="lineNum">     143 </span><span class="lineNoCov">          0 :     fPhiCentersOfSMSec(geom.fPhiCentersOfSMSec),</span>
<span class="lineNum">     144 </span><span class="lineNoCov">          0 :     fEtaMaxOfTRD1(geom.fEtaMaxOfTRD1),</span>
<span class="lineNum">     145 </span><span class="lineNoCov">          0 :     fTrd1AlFrontThick(geom.fTrd1AlFrontThick),</span>
<span class="lineNum">     146 </span><span class="lineNoCov">          0 :     fTrd1BondPaperThick(geom.fTrd1BondPaperThick),</span>
<span class="lineNum">     147 </span><span class="lineNoCov">          0 :     fCentersOfCellsEtaDir(geom.fCentersOfCellsEtaDir),</span>
<span class="lineNum">     148 </span><span class="lineNoCov">          0 :     fCentersOfCellsXDir(geom.fCentersOfCellsXDir),</span>
<span class="lineNum">     149 </span><span class="lineNoCov">          0 :     fCentersOfCellsPhiDir(geom.fCentersOfCellsPhiDir),</span>
<span class="lineNum">     150 </span><span class="lineNoCov">          0 :     fEtaCentersOfCells(geom.fEtaCentersOfCells),</span>
<span class="lineNum">     151 </span><span class="lineNoCov">          0 :     fPhiCentersOfCells(geom.fPhiCentersOfCells),</span>
<span class="lineNum">     152 </span><span class="lineNoCov">          0 :     fShishKebabTrd1Modules(geom.fShishKebabTrd1Modules),</span>
<span class="lineNum">     153 </span><span class="lineNoCov">          0 :     fILOSS(geom.fILOSS), fIHADR(geom.fIHADR),</span>
<span class="lineNum">     154 </span>            :     //obsolete member data
<span class="lineNum">     155 </span><span class="lineNoCov">          0 :     fGap2Active(geom.fGap2Active),</span>
<span class="lineNum">     156 </span><span class="lineNoCov">          0 :     fSteelFrontThick(geom.fSteelFrontThick),</span>
<span class="lineNum">     157 </span><span class="lineNoCov">          0 :     fTrd2AngleY(geom.fTrd2AngleY),</span>
<span class="lineNum">     158 </span><span class="lineNoCov">          0 :     f2Trd2Dy2(geom.f2Trd2Dy2),</span>
<span class="lineNum">     159 </span><span class="lineNoCov">          0 :     fEmptySpace(geom.fEmptySpace),</span>
<span class="lineNum">     160 </span><span class="lineNoCov">          0 :     fTubsR(geom.fTubsR),</span>
<span class="lineNum">     161 </span><span class="lineNoCov">          0 :     fTubsTurnAngle(geom.fTubsTurnAngle)</span>
<span class="lineNum">     162 </span><span class="lineNoCov">          0 : {</span>
<span class="lineNum">     163 </span>            :   //copy ctor
<span class="lineNum">     164 </span><span class="lineNoCov">          0 :   for(Int_t i=0;i&lt;fNumberOfSuperModules;i++)</span>
<span class="lineNum">     165 </span><span class="lineNoCov">          0 :     fEMCSMSystem[i] = geom.fEMCSMSystem[i];</span>
<span class="lineNum">     166 </span><span class="lineNoCov">          0 :   fParSM[0]=geom.fParSM[0]; </span>
<span class="lineNum">     167 </span><span class="lineNoCov">          0 :   fParSM[1]=geom.fParSM[1]; </span>
<span class="lineNum">     168 </span><span class="lineNoCov">          0 :   fParSM[2]=geom.fParSM[2];</span>
<span class="lineNum">     169 </span><span class="lineNoCov">          0 :   fEnvelop[0] = geom.fEnvelop[0]; </span>
<span class="lineNum">     170 </span><span class="lineNoCov">          0 :   fEnvelop[1] = geom.fEnvelop[1]; </span>
<span class="lineNum">     171 </span><span class="lineNoCov">          0 :   fEnvelop[2] = geom.fEnvelop[2];</span>
<span class="lineNum">     172 </span><span class="lineNoCov">          0 :   for(Int_t i = 0; i &lt; 6; i++) fkAdditionalOpts[i] = geom.fkAdditionalOpts[i];</span>
<span class="lineNum">     173 </span>            : 
<span class="lineNum">     174 </span><span class="lineNoCov">          0 : }</span>
<a name="175"><span class="lineNum">     175 </span>            : </a>
<span class="lineNum">     176 </span>            : //______________________________________________________________________
<span class="lineNum">     177 </span><span class="lineNoCov">          0 : AliEMCALEMCGeometry::~AliEMCALEMCGeometry(void){</span>
<span class="lineNum">     178 </span>            :     // dtor
<span class="lineNum">     179 </span><span class="lineNoCov">          0 :   delete[] fEMCSMSystem; // was created with new[], note the brackets</span>
<span class="lineNum">     180 </span>            :   // TODO, FIXME Hans, Aug 2015: Shouldn't one add
<span class="lineNum">     181 </span>            :   // if(fArrayOpts){fArrayOpts-&gt;Delete();delete fArrayOpts;}
<span class="lineNum">     182 </span>            :   // End Hans, Aug 2015
<span class="lineNum">     183 </span>            : 
<span class="lineNum">     184 </span><span class="lineNoCov">          0 : }</span>
<a name="185"><span class="lineNum">     185 </span>            : </a>
<span class="lineNum">     186 </span>            : //______________________________________________________________________
<span class="lineNum">     187 </span>            : void AliEMCALEMCGeometry::Init(const Text_t* mcname, const Text_t* mctitle){
<span class="lineNum">     188 </span>            :   //
<span class="lineNum">     189 </span>            :   // Initializes the EMCAL parameters based on the name
<span class="lineNum">     190 </span>            :   // Only Shashlyk geometry is available, but various combinations of
<span class="lineNum">     191 </span>            :   // layers and number of supermodules can be selected with additional
<span class="lineNum">     192 </span>            :   // options or geometry name
<span class="lineNum">     193 </span>            :   //
<span class="lineNum">     194 </span>            : 
<span class="lineNum">     195 </span><span class="lineCov">         10 :   fkAdditionalOpts[0] = &quot;nl=&quot;;       // number of sampling layers (fNECLayers)</span>
<span class="lineNum">     196 </span><span class="lineCov">          5 :   fkAdditionalOpts[1] = &quot;pbTh=&quot;;     // cm, Thickness of the Pb   (fECPbRadThick)</span>
<span class="lineNum">     197 </span><span class="lineCov">          5 :   fkAdditionalOpts[2] = &quot;scTh=&quot;;     // cm, Thickness of the Sc    (fECScintThick)</span>
<span class="lineNum">     198 </span><span class="lineCov">          5 :   fkAdditionalOpts[3] = &quot;latSS=&quot;;    // cm, Thickness of lateral steel strip (fLateralSteelStrip)</span>
<span class="lineNum">     199 </span><span class="lineCov">          5 :   fkAdditionalOpts[4] = &quot;allILOSS=&quot;; // = 0,1,2,3,4 (4 - energy loss without fluctuation)</span>
<span class="lineNum">     200 </span><span class="lineCov">          5 :   fkAdditionalOpts[5] = &quot;allIHADR=&quot;; // = 0,1,2 (0 - no hadronic interaction)</span>
<span class="lineNum">     201 </span>            : 
<span class="lineNum">     202 </span><span class="lineCov">          5 :   fNAdditionalOpts = sizeof(fkAdditionalOpts) / sizeof(char*);</span>
<span class="lineNum">     203 </span>            : 
<span class="lineNum">     204 </span>            :   // geometry
<span class="lineNum">     205 </span><span class="lineCov">          5 :   fgInit = kFALSE; // Assume failed until proven otherwise.</span>
<span class="lineNum">     206 </span><span class="lineCov">          5 :   fGeoName   = GetName();</span>
<span class="lineNum">     207 </span><span class="lineCov">          5 :   fGeoName.ToUpper();</span>
<span class="lineNum">     208 </span>            : 
<span class="lineNum">     209 </span>            :   //Convert old geometry names to new ones
<span class="lineNum">     210 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;SHISH_77_TRD1_2X2_FINAL_110DEG&quot;)) {</span>
<span class="lineNum">     211 </span><span class="lineNoCov">          0 :     if(fGeoName.Contains(&quot;PBTH=0.144&quot;) &amp;&amp; fGeoName.Contains(&quot;SCTH=0.176&quot;)) {</span>
<span class="lineNum">     212 </span><span class="lineNoCov">          0 :       fGeoName = &quot;EMCAL_COMPLETE&quot;;</span>
<span class="lineNum">     213 </span><span class="lineNoCov">          0 :     } else {</span>
<span class="lineNum">     214 </span><span class="lineNoCov">          0 :       fGeoName = &quot;EMCAL_PDC06&quot;;</span>
<span class="lineNum">     215 </span>            :     }
<span class="lineNum">     216 </span>            :   }
<span class="lineNum">     217 </span>            :   
<span class="lineNum">     218 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;WSUC&quot;)) fGeoName = &quot;EMCAL_WSUC&quot;;</span>
<span class="lineNum">     219 </span>            : 
<span class="lineNum">     220 </span>            :   //check that we have a valid geometry name
<span class="lineNum">     221 </span><span class="lineCov">          5 :   if(!( fGeoName.Contains(&quot;EMCAL_PDC06&quot;)</span>
<span class="lineNum">     222 </span><span class="lineCov">         10 :      || fGeoName.Contains(&quot;EMCAL_WSUC&quot;)  </span>
<span class="lineNum">     223 </span><span class="lineCov">         10 :      || fGeoName.Contains(&quot;EMCAL_COMPLETE&quot;)</span>
<span class="lineNum">     224 </span><span class="lineCov">          5 :      || fGeoName.Contains(&quot;EMCAL_COMPLETEV1&quot;)</span>
<span class="lineNum">     225 </span><span class="lineNoCov">          0 :      || fGeoName.Contains(&quot;EMCAL_COMPLETE12SMV1&quot;) </span>
<span class="lineNum">     226 </span><span class="lineNoCov">          0 :      || fGeoName.Contains(&quot;EMCAL_FIRSTYEAR&quot;)</span>
<span class="lineNum">     227 </span><span class="lineNoCov">          0 :      || fGeoName.Contains(&quot;EMCAL_FIRSTYEARV1&quot;) )) {</span>
<span class="lineNum">     228 </span><span class="lineNoCov">          0 :     Fatal(&quot;Init&quot;, &quot;%s is an undefined geometry!&quot;, fGeoName.Data()) ; </span>
<span class="lineNum">     229 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     230 </span>            : 
<span class="lineNum">     231 </span>            :   // Option to know whether we have the &quot;half&quot; supermodule(s) or not
<span class="lineNum">     232 </span><span class="lineCov">          5 :   fKey110DEG = 0;</span>
<span class="lineNum">     233 </span><span class="lineCov">          5 :   if(  fGeoName.Contains(&quot;COMPLETE&quot;)</span>
<span class="lineNum">     234 </span><span class="lineCov">          5 :     || fGeoName.Contains(&quot;PDC06&quot;) </span>
<span class="lineNum">     235 </span><span class="lineCov">          5 :     || fGeoName.Contains(&quot;12SM&quot;)) fKey110DEG = 1; // for GetAbsCellId</span>
<span class="lineNum">     236 </span><span class="lineCov">          8 :   if(fGeoName.Contains(&quot;COMPLETEV1&quot;))  fKey110DEG = 0; </span>
<span class="lineNum">     237 </span><span class="lineCov">          5 :   fShishKebabTrd1Modules = 0;</span>
<span class="lineNum">     238 </span>            : 
<span class="lineNum">     239 </span><span class="lineCov">          5 :   fnSupModInDCAL = 0;</span>
<span class="lineNum">     240 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;DCAL_DEV&quot;)){</span>
<span class="lineNum">     241 </span><span class="lineNoCov">          0 :     fnSupModInDCAL = 10;  </span>
<span class="lineNum">     242 </span><span class="lineCov">          5 :   } else if(fGeoName.Contains(&quot;DCAL_8SM&quot;)){</span>
<span class="lineNum">     243 </span><span class="lineCov">          2 :     fnSupModInDCAL = 8;</span>
<span class="lineNum">     244 </span><span class="lineCov">          5 :   } else if(fGeoName.Contains(&quot;DCAL&quot;)){</span>
<span class="lineNum">     245 </span><span class="lineNoCov">          0 :     fnSupModInDCAL = 6;</span>
<span class="lineNum">     246 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     247 </span>            : 
<span class="lineNum">     248 </span>            :   // JLK 13-Apr-2008
<span class="lineNum">     249 </span>            :   //default parameters are those of EMCAL_COMPLETE geometry
<span class="lineNum">     250 </span>            :   //all others render variations from these at the end of
<span class="lineNum">     251 </span>            :   //geometry-name specific options
<span class="lineNum">     252 </span>            : 
<span class="lineNum">     253 </span><span class="lineCov">          5 :   fNumberOfSuperModules = 12;       // 12 = 6 * 2 (6 in phi, 2 in Z)</span>
<span class="lineNum">     254 </span><span class="lineCov">          5 :   fNPhi                 = 12;       // module granularity in phi within smod (azimuth)</span>
<span class="lineNum">     255 </span><span class="lineCov">          5 :   fNZ                   = 24;       // module granularity along Z within smod (eta)</span>
<span class="lineNum">     256 </span><span class="lineCov">          5 :   fNPHIdiv = fNETAdiv   = 2;        // tower granularity within module</span>
<span class="lineNum">     257 </span><span class="lineCov">          5 :   fArm1PhiMin           = 80.0;     // degrees, Starting EMCAL Phi position</span>
<span class="lineNum">     258 </span><span class="lineCov">          5 :   fArm1PhiMax           = 200.0;    // degrees, Ending EMCAL Phi position</span>
<span class="lineNum">     259 </span><span class="lineCov">          5 :   fArm1EtaMin           = -0.7;     // pseudorapidity, Starting EMCAL Eta position</span>
<span class="lineNum">     260 </span><span class="lineCov">          5 :   fArm1EtaMax           = +0.7;     // pseudorapidity, Ending EMCAL Eta position</span>
<span class="lineNum">     261 </span><span class="lineCov">          5 :   fIPDistance           = 428.0;    // cm, radial distance to front face from nominal vertex point</span>
<span class="lineNum">     262 </span><span class="lineCov">          5 :   fPhiGapForSM          = 2.;       // cm, only for final TRD1 geometry</span>
<span class="lineNum">     263 </span><span class="lineCov">          5 :   fFrontSteelStrip      = 0.025;    // 0.025cm = 0.25mm  (13-may-05 from V.Petrov)</span>
<span class="lineNum">     264 </span><span class="lineCov">          5 :   fPassiveScintThick    = 0.8;      // 0.8cm   = 8mm     (13-may-05 from V.Petrov)</span>
<span class="lineNum">     265 </span><span class="lineCov">          5 :   fLateralSteelStrip    = 0.01;     // 0.01cm  = 0.1mm   (13-may-05 from V.Petrov) - was 0.025</span>
<span class="lineNum">     266 </span><span class="lineCov">          5 :   fTrd1Angle            = 1.5;      // in degrees       </span>
<span class="lineNum">     267 </span>            : 
<span class="lineNum">     268 </span><span class="lineCov">          5 :   fSampling             = 1.;       // should be calculated with call to DefineSamplingFraction()</span>
<span class="lineNum">     269 </span><span class="lineCov">          5 :   fNECLayers            = 77;       // (13-may-05 from V.Petrov) - can be changed with additional options</span>
<span class="lineNum">     270 </span><span class="lineCov">          5 :   fECScintThick         = 0.176;    // scintillator layer thickness</span>
<span class="lineNum">     271 </span><span class="lineCov">          5 :   fECPbRadThickness     = 0.144;    // lead layer thickness</span>
<span class="lineNum">     272 </span>            : 
<span class="lineNum">     273 </span><span class="lineCov">          5 :   fPhiModuleSize = 12.26 - fPhiGapForSM / Float_t(fNPhi); // first assumption</span>
<span class="lineNum">     274 </span><span class="lineCov">          5 :   fEtaModuleSize = fPhiModuleSize;</span>
<span class="lineNum">     275 </span>            : 
<span class="lineNum">     276 </span><span class="lineCov">          5 :   fZLength              = 700.;     // Z coverage (cm)</span>
<span class="lineNum">     277 </span><span class="lineCov">          5 :   fPhiSuperModule       = 20. ;     // phi in degree</span>
<span class="lineNum">     278 </span><span class="lineCov">          5 :   fDCALInnerEdge        = fIPDistance * TMath::Tan( fTrd1Angle * 8.* TMath::DegToRad());</span>
<span class="lineNum">     279 </span>            : 
<span class="lineNum">     280 </span>            :   //needs to be called for each geometry and before setting geometry
<span class="lineNum">     281 </span>            :   //parameters which can depend on the outcome
<span class="lineNum">     282 </span><span class="lineCov">          5 :   CheckAdditionalOptions();</span>
<span class="lineNum">     283 </span>            : 
<span class="lineNum">     284 </span>            :   //modifications to the above for PDC06 geometry
<span class="lineNum">     285 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;PDC06&quot;)){ // 18-may-05 - about common structure</span>
<span class="lineNum">     286 </span><span class="lineNoCov">          0 :     fECScintThick  = fECPbRadThickness = 0.16;// (13-may-05 from V.Petrov)    </span>
<span class="lineNum">     287 </span><span class="lineNoCov">          0 :     CheckAdditionalOptions();</span>
<span class="lineNum">     288 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     289 </span>            : 
<span class="lineNum">     290 </span>            :   //modifications to the above for WSUC geometry
<span class="lineNum">     291 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;WSUC&quot;)){ // 18-may-05 - about common structure</span>
<span class="lineNum">     292 </span><span class="lineNoCov">          0 :     fNumberOfSuperModules = 2;  // 27-may-05; Nov 24,2010 for TB</span>
<span class="lineNum">     293 </span><span class="lineNoCov">          0 :     fNPhi = fNZ = 4; </span>
<span class="lineNum">     294 </span><span class="lineNoCov">          0 :     fTrd1AlFrontThick   = 1.0;  // one cm</span>
<span class="lineNum">     295 </span>            :     // Bond paper - two sheets around Sc tile
<span class="lineNum">     296 </span><span class="lineNoCov">          0 :     fTrd1BondPaperThick = 0.01; // 0.01cm = 0.1 mm</span>
<span class="lineNum">     297 </span>            :     
<span class="lineNum">     298 </span><span class="lineNoCov">          0 :     fPhiModuleSize = 12.0;</span>
<span class="lineNum">     299 </span><span class="lineNoCov">          0 :     fEtaModuleSize = fPhiModuleSize;</span>
<span class="lineNum">     300 </span><span class="lineNoCov">          0 :     fLateralSteelStrip = 0.015; // 0.015cm  = 0.15mm</span>
<span class="lineNum">     301 </span>            : 
<span class="lineNum">     302 </span><span class="lineNoCov">          0 :     CheckAdditionalOptions();</span>
<span class="lineNum">     303 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     304 </span>            : 
<span class="lineNum">     305 </span>            :   //In 2009-2010 data taking runs only 4 SM, in the upper position.
<span class="lineNum">     306 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;FIRSTYEAR&quot;)){ </span>
<span class="lineNum">     307 </span><span class="lineNoCov">          0 :     fNumberOfSuperModules = 4;  </span>
<span class="lineNum">     308 </span><span class="lineNoCov">          0 :     fArm1PhiMax           = 120.0;</span>
<span class="lineNum">     309 </span><span class="lineNoCov">          0 :     CheckAdditionalOptions();   </span>
<span class="lineNum">     310 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     311 </span>            :   
<span class="lineNum">     312 </span><span class="lineCov">         12 :   if(fGeoName.Contains(&quot;FIRSTYEARV1&quot;) || fGeoName.Contains(&quot;COMPLETEV1&quot;) || fGeoName.Contains(&quot;COMPLETE12SMV1&quot;) ){</span>
<span class="lineNum">     313 </span>            :     // Oct 26,2010 : First module has tilt = 0.75 degree : 
<span class="lineNum">     314 </span>            :     // look to AliEMCALShishKebabTrd1Module::DefineFirstModule(key)
<span class="lineNum">     315 </span>            :     // New sizes from production drawing, added Al front plate.
<span class="lineNum">     316 </span>            :     // The thickness of sampling is change due to existing two sheets of paper.
<span class="lineNum">     317 </span>            :     
<span class="lineNum">     318 </span>            :     // Will replace fFrontSteelStrip
<span class="lineNum">     319 </span><span class="lineCov">          5 :     fTrd1AlFrontThick   = 1.0;  // one cm</span>
<span class="lineNum">     320 </span>            :     // Bond paper - two sheets around Sc tile
<span class="lineNum">     321 </span><span class="lineCov">          5 :     fTrd1BondPaperThick = 0.01; // 0.01cm = 0.1 mm</span>
<span class="lineNum">     322 </span>            :     
<span class="lineNum">     323 </span><span class="lineCov">          5 :     fPhiModuleSize = 12.0;</span>
<span class="lineNum">     324 </span><span class="lineCov">          5 :     fEtaModuleSize = fPhiModuleSize;</span>
<span class="lineNum">     325 </span><span class="lineCov">          5 :     fLateralSteelStrip = 0.015; // 0.015cm  = 0.15mm</span>
<span class="lineNum">     326 </span>            :     
<span class="lineNum">     327 </span><span class="lineCov">          5 :     if(fGeoName.Contains(&quot;COMPLETEV1&quot;))</span>
<span class="lineNum">     328 </span>            :     {
<span class="lineNum">     329 </span><span class="lineCov">          3 :       fNumberOfSuperModules = 10;       </span>
<span class="lineNum">     330 </span><span class="lineCov">          3 :       fArm1PhiMax           = 180.0;</span>
<span class="lineNum">     331 </span><span class="lineCov">          3 :     }</span>
<span class="lineNum">     332 </span><span class="lineCov">          2 :     else if (fGeoName.Contains(&quot;COMPLETE12SMV1&quot;))</span>
<span class="lineNum">     333 </span>            :     {
<span class="lineNum">     334 </span><span class="lineCov">          2 :       fNumberOfSuperModules = 12;       </span>
<span class="lineNum">     335 </span><span class="lineCov">          2 :       fArm1PhiMax           = 200.0; </span>
<span class="lineNum">     336 </span><span class="lineCov">          2 :     }</span>
<span class="lineNum">     337 </span><span class="lineCov">          5 :     if (fGeoName.Contains(&quot;DCAL&quot;))</span>
<span class="lineNum">     338 </span>            :     {
<span class="lineNum">     339 </span><span class="lineCov">          2 :       fNumberOfSuperModules = 12 + fnSupModInDCAL;</span>
<span class="lineNum">     340 </span><span class="lineCov">          2 :       fArm1PhiMax           = 320.0; </span>
<span class="lineNum">     341 </span><span class="lineCov">          4 :       if(fGeoName.Contains(&quot;DCAL_8SM&quot;))      fArm1PhiMax      = 340.0;            // degrees, End of DCAL Phi position</span>
<span class="lineNum">     342 </span><span class="lineNoCov">          0 :       else if(fGeoName.Contains(&quot;DCAL_DEV&quot;)) fArm1PhiMin      = 40.0;     // degrees, Starting EMCAL(shifted) Phi position</span>
<span class="lineNum">     343 </span><span class="lineCov">          2 :       fDCALPhiMin           = fArm1PhiMax - 10.*fnSupModInDCAL; </span>
<span class="lineNum">     344 </span><span class="lineCov">          2 :     }</span>
<span class="lineNum">     345 </span><span class="lineCov">          5 :     CheckAdditionalOptions();   </span>
<span class="lineNum">     346 </span><span class="lineCov">          5 :   }</span>
<span class="lineNum">     347 </span>            :   
<span class="lineNum">     348 </span>            :   //
<span class="lineNum">     349 </span>            :   // Init EMCal/DCal SMs type array
<span class="lineNum">     350 </span><span class="lineCov">          5 :   if(fEMCSMSystem) delete[] fEMCSMSystem;</span>
<span class="lineNum">     351 </span>            :   
<span class="lineNum">     352 </span><span class="lineCov">          5 :   fEMCSMSystem = new Int_t[fNumberOfSuperModules];</span>
<span class="lineNum">     353 </span>            :   
<span class="lineNum">     354 </span><span class="lineCov">        150 :   for(Int_t i=0;i&lt;fNumberOfSuperModules;i++)</span>
<span class="lineNum">     355 </span><span class="lineCov">         70 :     fEMCSMSystem[i]=kNotExistent;</span>
<span class="lineNum">     356 </span>            :   
<span class="lineNum">     357 </span>            :   Int_t iSM = 0;
<span class="lineNum">     358 </span>            :   
<span class="lineNum">     359 </span>            :   //
<span class="lineNum">     360 </span>            :   // BASIC EMCAL SM
<span class="lineNum">     361 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;WSUC&quot;) ){</span>
<span class="lineNum">     362 </span><span class="lineNoCov">          0 :     for(int i = 0; i&lt;2; i++){</span>
<span class="lineNum">     363 </span><span class="lineNoCov">          0 :       fEMCSMSystem[iSM] = kEMCAL_Standard;</span>
<span class="lineNum">     364 </span><span class="lineNoCov">          0 :       iSM++;</span>
<span class="lineNum">     365 </span>            :     }
<span class="lineNum">     366 </span><span class="lineCov">          5 :   } else if(fGeoName.Contains(&quot;FIRSTYEAR&quot;) ){</span>
<span class="lineNum">     367 </span><span class="lineNoCov">          0 :     for(int i = 0; i&lt;4; i++){</span>
<span class="lineNum">     368 </span><span class="lineNoCov">          0 :       fEMCSMSystem[iSM] = kEMCAL_Standard;</span>
<span class="lineNum">     369 </span><span class="lineNoCov">          0 :       iSM++;</span>
<span class="lineNum">     370 </span>            :     }
<span class="lineNum">     371 </span><span class="lineCov">         10 :   } else if( fGeoName.Contains(&quot;PDC06&quot;)</span>
<span class="lineNum">     372 </span><span class="lineCov">         10 :             || fGeoName.Contains(&quot;COMPLETE&quot;) ){</span>
<span class="lineNum">     373 </span><span class="lineCov">        110 :     for(int i = 0; i&lt;10; i++){</span>
<span class="lineNum">     374 </span><span class="lineCov">         50 :       fEMCSMSystem[iSM] = kEMCAL_Standard;</span>
<span class="lineNum">     375 </span><span class="lineCov">         50 :       iSM++;</span>
<span class="lineNum">     376 </span>            :     }
<span class="lineNum">     377 </span><span class="lineCov">          5 :   }</span>
<span class="lineNum">     378 </span>            :   
<span class="lineNum">     379 </span>            :   //
<span class="lineNum">     380 </span>            :   // EMCAL 110SM
<span class="lineNum">     381 </span><span class="lineCov">          7 :   if(fKey110DEG &amp;&amp; fGeoName.Contains(&quot;12SM&quot;) ){</span>
<span class="lineNum">     382 </span><span class="lineCov">         12 :     for(int i = 0; i&lt;2; i++){</span>
<span class="lineNum">     383 </span><span class="lineCov">          4 :       fEMCSMSystem[iSM] = kEMCAL_Half;</span>
<span class="lineNum">     384 </span><span class="lineCov">          4 :       if(fGeoName.Contains(&quot;12SMV1&quot;) ){</span>
<span class="lineNum">     385 </span><span class="lineCov">          4 :         fEMCSMSystem[iSM] = kEMCAL_3rd;</span>
<span class="lineNum">     386 </span><span class="lineCov">          4 :       }</span>
<span class="lineNum">     387 </span><span class="lineCov">          4 :       iSM++;</span>
<span class="lineNum">     388 </span>            :     }
<span class="lineNum">     389 </span><span class="lineCov">          2 :   }</span>
<span class="lineNum">     390 </span>            :   
<span class="lineNum">     391 </span>            :   //
<span class="lineNum">     392 </span>            :   // DCAL SM
<span class="lineNum">     393 </span><span class="lineCov">          7 :   if(fnSupModInDCAL &amp;&amp; fGeoName.Contains(&quot;DCAL&quot;)){</span>
<span class="lineNum">     394 </span><span class="lineCov">          2 :     if(fGeoName.Contains(&quot;8SM&quot;)) {</span>
<span class="lineNum">     395 </span><span class="lineCov">         28 :       for(int i = 0; i&lt;fnSupModInDCAL-2; i++){</span>
<span class="lineNum">     396 </span><span class="lineCov">         12 :         fEMCSMSystem[iSM] = kDCAL_Standard;</span>
<span class="lineNum">     397 </span><span class="lineCov">         12 :         iSM++;</span>
<span class="lineNum">     398 </span>            :       }
<span class="lineNum">     399 </span><span class="lineCov">         12 :       for(int i = 0; i&lt;2; i++){</span>
<span class="lineNum">     400 </span><span class="lineCov">          4 :         fEMCSMSystem[iSM] = kDCAL_Ext;</span>
<span class="lineNum">     401 </span><span class="lineCov">          4 :         iSM++;</span>
<span class="lineNum">     402 </span>            :       }
<span class="lineNum">     403 </span><span class="lineCov">          2 :     } else {</span>
<span class="lineNum">     404 </span><span class="lineNoCov">          0 :       for(int i = 0; i&lt;fnSupModInDCAL; i++){</span>
<span class="lineNum">     405 </span><span class="lineNoCov">          0 :         fEMCSMSystem[iSM] = kDCAL_Standard;</span>
<span class="lineNum">     406 </span><span class="lineNoCov">          0 :         iSM++;</span>
<span class="lineNum">     407 </span>            :       }
<span class="lineNum">     408 </span>            :     }
<span class="lineNum">     409 </span>            :   }
<span class="lineNum">     410 </span>            : 
<span class="lineNum">     411 </span>            :   // constant for transition absid &lt;--&gt; indexes
<span class="lineNum">     412 </span><span class="lineCov">          5 :   fNCellsInModule = fNPHIdiv*fNETAdiv;</span>
<span class="lineNum">     413 </span><span class="lineCov">          5 :   fNCellsInSupMod = fNCellsInModule*fNPhi*fNZ;</span>
<span class="lineNum">     414 </span><span class="lineCov">          5 :   fNCells = 0;</span>
<span class="lineNum">     415 </span><span class="lineCov">        150 :    for( int i=0; i&lt;fNumberOfSuperModules; i++) {</span>
<span class="lineNum">     416 </span><span class="lineCov">        120 :      if(      GetSMType(i) == kEMCAL_Standard) fNCells +=   fNCellsInSupMod   ;</span>
<span class="lineNum">     417 </span><span class="lineCov">         20 :      else if( GetSMType(i) == kEMCAL_Half)     fNCells +=   fNCellsInSupMod/2 ;</span>
<span class="lineNum">     418 </span><span class="lineCov">         24 :      else if( GetSMType(i) == kEMCAL_3rd)      fNCells +=   fNCellsInSupMod/3 ;</span>
<span class="lineNum">     419 </span><span class="lineCov">         28 :      else if( GetSMType(i) == kDCAL_Standard)  fNCells += 2*fNCellsInSupMod/3 ;</span>
<span class="lineNum">     420 </span><span class="lineCov">          8 :      else if( GetSMType(i) == kDCAL_Ext)       fNCells +=   fNCellsInSupMod/3 ;</span>
<span class="lineNum">     421 </span><span class="lineNoCov">          0 :      else AliError(Form(&quot;Uknown SuperModule Type !!&quot;));</span>
<span class="lineNum">     422 </span>            :    }
<span class="lineNum">     423 </span>            : 
<span class="lineNum">     424 </span><span class="lineCov">          5 :   fNPhiSuperModule = fNumberOfSuperModules/2;</span>
<span class="lineNum">     425 </span><span class="lineCov">          5 :   if(fNPhiSuperModule &lt; 1) fNPhiSuperModule = 1;</span>
<span class="lineNum">     426 </span>            :     
<span class="lineNum">     427 </span><span class="lineCov">          5 :   fPhiTileSize = fPhiModuleSize/double(fNPHIdiv) - fLateralSteelStrip; // 13-may-05 </span>
<span class="lineNum">     428 </span><span class="lineCov">          5 :   fEtaTileSize = fEtaModuleSize/double(fNETAdiv) - fLateralSteelStrip; // 13-may-05 </span>
<span class="lineNum">     429 </span>            : 
<span class="lineNum">     430 </span><span class="lineCov">          5 :   fLongModuleSize = fNECLayers*(fECScintThick + fECPbRadThickness);  </span>
<span class="lineNum">     431 </span><span class="lineCov">          5 :   if(fGeoName.Contains(&quot;V1&quot;)){</span>
<span class="lineNum">     432 </span><span class="lineCov">          5 :     Double_t ws = fECScintThick + fECPbRadThickness + 2.*fTrd1BondPaperThick; // sampling width</span>
<span class="lineNum">     433 </span>            :     // Number of Pb tiles = Number of Sc tiles - 1
<span class="lineNum">     434 </span><span class="lineCov">          5 :     fLongModuleSize = fTrd1AlFrontThick + (ws*fNECLayers - fECPbRadThickness);</span>
<span class="lineNum">     435 </span><span class="lineCov">          5 :   }</span>
<span class="lineNum">     436 </span><span class="lineCov">          5 :   f2Trd1Dx2 = fEtaModuleSize + 2.*fLongModuleSize*TMath::Tan(fTrd1Angle*TMath::DegToRad()/2.);</span>
<span class="lineNum">     437 </span>            : 
<span class="lineNum">     438 </span><span class="lineCov">         10 :   if(!fGeoName.Contains(&quot;WSUC&quot;)) fShellThickness  = TMath::Sqrt(fLongModuleSize*fLongModuleSize + f2Trd1Dx2*f2Trd1Dx2);</span>
<span class="lineNum">     439 </span>            : 
<span class="lineNum">     440 </span>            :   //These parameters are used to create the mother volume to hold the supermodules
<span class="lineNum">     441 </span>            :   //2cm padding added to allow for misalignments - JLK 30-May-2008
<span class="lineNum">     442 </span><span class="lineCov">          5 :   fEnvelop[0]     = fIPDistance - 1.; // mother volume inner radius</span>
<span class="lineNum">     443 </span><span class="lineCov">          5 :   fEnvelop[1]     = fIPDistance + fShellThickness + 1.; // mother volume outer r.</span>
<span class="lineNum">     444 </span><span class="lineCov">          5 :   fEnvelop[2]     = fZLength + 2.; //mother volume length </span>
<span class="lineNum">     445 </span>            : 
<span class="lineNum">     446 </span>            :   // Local coordinates
<span class="lineNum">     447 </span><span class="lineCov">          5 :   fParSM[0] = GetShellThickness()/2.;        </span>
<span class="lineNum">     448 </span><span class="lineCov">          5 :   fParSM[1] = GetPhiModuleSize() * GetNPhi()/2.;</span>
<span class="lineNum">     449 </span><span class="lineCov">          5 :   fParSM[2] = fZLength/4.;  //divide by 4 to get half-length of SM</span>
<span class="lineNum">     450 </span>            : 
<span class="lineNum">     451 </span>            :   // SM phi boundaries - (0,1),(2,3) ... - has the same boundaries;
<span class="lineNum">     452 </span><span class="lineCov">          5 :   fPhiBoundariesOfSM.Set(fNumberOfSuperModules);</span>
<span class="lineNum">     453 </span><span class="lineCov">          5 :   fPhiCentersOfSM.Set(fNumberOfSuperModules/2);</span>
<span class="lineNum">     454 </span><span class="lineCov">          5 :   fPhiCentersOfSMSec.Set(fNumberOfSuperModules/2);</span>
<span class="lineNum">     455 </span><span class="lineCov">          5 :   Double_t kfSupermodulePhiWidth = fPhiSuperModule*TMath::DegToRad();</span>
<span class="lineNum">     456 </span><span class="lineCov">          5 :   fPhiCentersOfSM[0]    = (fArm1PhiMin + fPhiSuperModule/2.) * TMath::DegToRad(); // Define from First SM</span>
<span class="lineNum">     457 </span><span class="lineCov">          5 :   fPhiCentersOfSMSec[0] = fPhiCentersOfSM[0];  // the same in the First SM</span>
<span class="lineNum">     458 </span><span class="lineCov">          5 :   fPhiBoundariesOfSM[0] = fPhiCentersOfSM[0] - TMath::ATan2(fParSM[1] , fIPDistance); // 1th and 2th modules)</span>
<span class="lineNum">     459 </span><span class="lineCov">          5 :   fPhiBoundariesOfSM[1] = fPhiCentersOfSM[0] + TMath::ATan2(fParSM[1] , fIPDistance);</span>
<span class="lineNum">     460 </span><span class="lineCov">          5 :   if(fNumberOfSuperModules &gt; 2) { // 2 to Max</span>
<span class="lineNum">     461 </span><span class="lineCov">          5 :     Int_t tmpSMType = GetSMType(2);</span>
<span class="lineNum">     462 </span><span class="lineCov">         70 :      for(int i = 1; i&lt;fNPhiSuperModule; i++) {</span>
<span class="lineNum">     463 </span><span class="lineCov">         30 :        fPhiBoundariesOfSM[2*i]   += fPhiBoundariesOfSM[2*i-2] + kfSupermodulePhiWidth;</span>
<span class="lineNum">     464 </span><span class="lineCov">         30 :        if(tmpSMType == GetSMType(2*i)) {</span>
<span class="lineNum">     465 </span><span class="lineCov">         24 :          fPhiBoundariesOfSM[2*i+1]  += fPhiBoundariesOfSM[2*i-1] + kfSupermodulePhiWidth;</span>
<span class="lineNum">     466 </span><span class="lineCov">         24 :        } else { </span>
<span class="lineNum">     467 </span>            :          //changed SM Type, redefine the [2*i+1] Boundaries
<span class="lineNum">     468 </span><span class="lineCov">          6 :          tmpSMType = GetSMType(2*i);</span>
<span class="lineNum">     469 </span><span class="lineCov">          6 :          if(        GetSMType(2*i)  == kEMCAL_Standard) {</span>
<span class="lineNum">     470 </span><span class="lineNoCov">          0 :            fPhiBoundariesOfSM[2*i+1] = fPhiBoundariesOfSM[2*i] + kfSupermodulePhiWidth;</span>
<span class="lineNum">     471 </span><span class="lineCov">          6 :          } else if( GetSMType(2*i)  == kEMCAL_Half)     {</span>
<span class="lineNum">     472 </span><span class="lineNoCov">          0 :            fPhiBoundariesOfSM[2*i+1] = fPhiBoundariesOfSM[2*i] + 2.*TMath::ATan2((fParSM[1])/2, fIPDistance);</span>
<span class="lineNum">     473 </span><span class="lineCov">          6 :          } else if( GetSMType(2*i)  == kEMCAL_3rd )     {</span>
<span class="lineNum">     474 </span><span class="lineCov">          2 :            fPhiBoundariesOfSM[2*i+1] = fPhiBoundariesOfSM[2*i] + 2.*TMath::ATan2((fParSM[1])/3, fIPDistance);</span>
<span class="lineNum">     475 </span><span class="lineCov">          6 :          } else if( GetSMType(2*i)  == kDCAL_Standard ) {      // jump the gap</span>
<span class="lineNum">     476 </span><span class="lineCov">          2 :            fPhiBoundariesOfSM[2*i]   = (fDCALPhiMin - fArm1PhiMin)*TMath::DegToRad() + fPhiBoundariesOfSM[0];</span>
<span class="lineNum">     477 </span><span class="lineCov">          2 :            fPhiBoundariesOfSM[2*i+1] = (fDCALPhiMin - fArm1PhiMin)*TMath::DegToRad() + fPhiBoundariesOfSM[1];</span>
<span class="lineNum">     478 </span><span class="lineCov">          4 :          } else if( GetSMType(2*i)  == kDCAL_Ext)       {</span>
<span class="lineNum">     479 </span><span class="lineCov">          2 :            fPhiBoundariesOfSM[2*i+1] = fPhiBoundariesOfSM[2*i] + 2.*TMath::ATan2((fParSM[1])/3, fIPDistance); </span>
<span class="lineNum">     480 </span><span class="lineCov">          2 :          }</span>
<span class="lineNum">     481 </span>            :       }
<span class="lineNum">     482 </span><span class="lineCov">         30 :       fPhiCentersOfSM[i]    = (fPhiBoundariesOfSM[2*i]+fPhiBoundariesOfSM[2*i+1])/2.;</span>
<span class="lineNum">     483 </span><span class="lineCov">         30 :       fPhiCentersOfSMSec[i] = fPhiBoundariesOfSM[2*i] + TMath::ATan2(fParSM[1] , fIPDistance);</span>
<span class="lineNum">     484 </span>            :     }
<span class="lineNum">     485 </span><span class="lineCov">          5 :   }</span>
<span class="lineNum">     486 </span>            : 
<span class="lineNum">     487 </span>            :   //inner extend in eta (same as outer part) for DCal (0.189917), //calculated from the smallest gap (1# cell to the 80-degree-edge),
<span class="lineNum">     488 </span>            :   Double_t fInnerExtandedPhi = 1.102840997; //calculated from the smallest gap (1# cell to the 80-degree-edge), too complicatd to explain...
<span class="lineNum">     489 </span><span class="lineCov">          5 :   fDCALInnerExtandedEta = -TMath::Log(TMath::Tan( (TMath::Pi()/2. - 8*fTrd1Angle*TMath::DegToRad() + (TMath::Pi()/2 - fNZ*fTrd1Angle*TMath::DegToRad() - TMath::ATan(TMath::Exp(fArm1EtaMin))*2))/2.));</span>
<span class="lineNum">     490 </span>            : 
<span class="lineNum">     491 </span><span class="lineCov">          5 :   fEMCALPhiMax  = fArm1PhiMin;    </span>
<span class="lineNum">     492 </span><span class="lineCov">          5 :   fDCALPhiMax   = fDCALPhiMin;// DCAl extention will not be included</span>
<span class="lineNum">     493 </span><span class="lineCov">         80 :   for( Int_t i = 0; i &lt; fNumberOfSuperModules; i+=2) {</span>
<span class="lineNum">     494 </span><span class="lineCov">         60 :     if(      GetSMType(i) == kEMCAL_Standard ) fEMCALPhiMax += 20.;</span>
<span class="lineNum">     495 </span><span class="lineCov">         10 :     else if( GetSMType(i) == kEMCAL_Half     ) fEMCALPhiMax += fPhiSuperModule/2. + fInnerExtandedPhi;</span>
<span class="lineNum">     496 </span><span class="lineCov">         12 :     else if( GetSMType(i) == kEMCAL_3rd      ) fEMCALPhiMax += fPhiSuperModule/3. + 4.0*fInnerExtandedPhi/3.0;</span>
<span class="lineNum">     497 </span><span class="lineCov">         14 :     else if( GetSMType(i) == kDCAL_Standard  ) {fDCALPhiMax  += 20.; fDCALStandardPhiMax = fDCALPhiMax;}</span>
<span class="lineNum">     498 </span><span class="lineCov">          4 :     else if( GetSMType(i) == kDCAL_Ext       ) fDCALPhiMax  += fPhiSuperModule/3. + 4.0*fInnerExtandedPhi/3.0;</span>
<span class="lineNum">     499 </span><span class="lineNoCov">          0 :     else AliError(&quot;Unkown SM Type!!&quot;);</span>
<span class="lineNum">     500 </span>            :   }
<span class="lineNum">     501 </span>            : // for compatible reason
<span class="lineNum">     502 </span>            : // if(fNumberOfSuperModules == 4) {fEMCALPhiMax = fArm1PhiMax ;}
<span class="lineNum">     503 </span><span class="lineCov">          5 :  if(fNumberOfSuperModules == 12) {fEMCALPhiMax = fArm1PhiMax ;}  </span>
<span class="lineNum">     504 </span>            :   
<span class="lineNum">     505 </span>            :   // called after setting of scintillator and lead layer parameters
<span class="lineNum">     506 </span>            :   // called now in AliEMCALv0::CreateGeometry() - 15/03/16
<span class="lineNum">     507 </span>            :   //DefineSamplingFraction(mcname,mctitle);
<span class="lineNum">     508 </span>            : 
<span class="lineNum">     509 </span><span class="lineCov">          5 :   fgInit = kTRUE; </span>
<span class="lineNum">     510 </span><span class="lineCov">          5 : }</span>
<a name="511"><span class="lineNum">     511 </span>            : </a>
<span class="lineNum">     512 </span>            : //___________________________________________________________________
<span class="lineNum">     513 </span>            : void AliEMCALEMCGeometry::PrintGeometry()
<span class="lineNum">     514 </span>            : {
<span class="lineNum">     515 </span>            :   // Separate routine is callable from broswer; Nov 7,2006
<span class="lineNum">     516 </span><span class="lineCov">          8 :   printf(&quot;\nInit: geometry of EMCAL named %s :\n&quot;, fGeoName.Data());</span>
<span class="lineNum">     517 </span><span class="lineCov">          4 :   if(fArrayOpts) {</span>
<span class="lineNum">     518 </span><span class="lineNoCov">          0 :     for(Int_t i=0; i&lt;fArrayOpts-&gt;GetEntries(); i++){</span>
<span class="lineNum">     519 </span><span class="lineNoCov">          0 :       TObjString *o = (TObjString*)fArrayOpts-&gt;At(i);</span>
<span class="lineNum">     520 </span><span class="lineNoCov">          0 :       printf(&quot; %i : %s \n&quot;, i, o-&gt;String().Data());</span>
<span class="lineNum">     521 </span>            :     }
<span class="lineNum">     522 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     523 </span><span class="lineCov">          4 :   if(fGeoName.Contains(&quot;DCAL&quot;)) {</span>
<span class="lineNum">     524 </span><span class="lineNoCov">          0 :    printf(&quot;Phi min of DCAL SuperModule: %7.1f, DCAL has %d SuperModule\n&quot;, fDCALPhiMin, fnSupModInDCAL);</span>
<span class="lineNum">     525 </span><span class="lineNoCov">          0 :    printf(&quot;The DCAL inner edge is +- %7.1f\n&quot;, fDCALInnerEdge);</span>
<span class="lineNum">     526 </span><span class="lineNoCov">          0 :     if(fGeoName.Contains(&quot;DCAL_8SM&quot;)) printf(&quot;DCAL has its 2 EXTENTION SM\n&quot;);</span>
<span class="lineNum">     527 </span>            :   }
<span class="lineNum">     528 </span><span class="lineCov">          4 :   printf(&quot;Granularity: %d in eta and %d in phi\n&quot;, GetNZ(), GetNPhi()) ;</span>
<span class="lineNum">     529 </span><span class="lineCov">          4 :   printf(&quot;Layout: phi = (%7.1f, %7.1f), eta = (%5.2f, %5.2f), IP = %7.2f -&gt; for EMCAL envelope only\n&quot;,  </span>
<span class="lineNum">     530 </span><span class="lineCov">          4 :            GetArm1PhiMin(), GetArm1PhiMax(),GetArm1EtaMin(), GetArm1EtaMax(), GetIPDistance() );</span>
<span class="lineNum">     531 </span>            : 
<span class="lineNum">     532 </span><span class="lineCov">          4 :   printf( &quot;               ECAL      : %d x (%f cm Pb, %f cm Sc) \n&quot;, </span>
<span class="lineNum">     533 </span><span class="lineCov">          4 :   GetNECLayers(), GetECPbRadThick(), GetECScintThick() ) ; </span>
<span class="lineNum">     534 </span><span class="lineCov">          4 :   printf(&quot;                fSampling %5.2f \n&quot;,  fSampling );</span>
<span class="lineNum">     535 </span><span class="lineCov">          4 :   printf(&quot; fIPDistance       %6.3f cm \n&quot;, fIPDistance);</span>
<span class="lineNum">     536 </span><span class="lineCov">          4 :   printf(&quot; fNPhi %i   |  fNZ %i \n&quot;, fNPhi, fNZ);</span>
<span class="lineNum">     537 </span><span class="lineCov">          4 :   printf(&quot; fNCellsInModule %i : fNCellsInSupMod %i : fNCells %i\n&quot;,fNCellsInModule, fNCellsInSupMod, fNCells);</span>
<span class="lineNum">     538 </span><span class="lineCov">          4 :   printf(&quot; X:Y module size     %6.3f , %6.3f cm \n&quot;, fPhiModuleSize, fEtaModuleSize);</span>
<span class="lineNum">     539 </span><span class="lineCov">          4 :   printf(&quot; X:Y   tile size     %6.3f , %6.3f cm \n&quot;, fPhiTileSize, fEtaTileSize);</span>
<span class="lineNum">     540 </span><span class="lineCov">          4 :   printf(&quot; #of sampling layers %i(fNECLayers) \n&quot;, fNECLayers);</span>
<span class="lineNum">     541 </span><span class="lineCov">          4 :   printf(&quot; fLongModuleSize     %6.3f cm \n&quot;, fLongModuleSize);</span>
<span class="lineNum">     542 </span><span class="lineCov">          4 :   printf(&quot; #supermodule in phi direction %i \n&quot;, fNPhiSuperModule );</span>
<span class="lineNum">     543 </span><span class="lineCov">          4 :   printf(&quot; supermodule width in phi direction %f \n&quot;, fPhiSuperModule );</span>
<span class="lineNum">     544 </span><span class="lineCov">          4 :   printf(&quot; fILOSS %i : fIHADR %i \n&quot;, fILOSS, fIHADR);</span>
<span class="lineNum">     545 </span><span class="lineCov">          4 :   printf(&quot; fTrd1Angle %7.4f\n&quot;, fTrd1Angle);</span>
<span class="lineNum">     546 </span><span class="lineCov">          4 :   printf(&quot; f2Trd1Dx2  %7.4f\n&quot;,  f2Trd1Dx2);</span>
<span class="lineNum">     547 </span><span class="lineCov">          4 :   printf(&quot; fTrd1AlFrontThick   %7.4f \n&quot;, fTrd1AlFrontThick);</span>
<span class="lineNum">     548 </span><span class="lineCov">          4 :   printf(&quot; fTrd1BondPaperThick %5.4f \n&quot;, fTrd1BondPaperThick);</span>
<span class="lineNum">     549 </span><span class="lineCov">          4 :   printf(&quot;SM dimensions(TRD1) : dx %7.2f dy %7.2f dz %7.2f (SMOD, BOX)\n&quot;, </span>
<span class="lineNum">     550 </span><span class="lineCov">          4 :          fParSM[0],fParSM[1],fParSM[2]);</span>
<span class="lineNum">     551 </span><span class="lineCov">          4 :   printf(&quot; fPhiGapForSM  %7.4f cm (%7.4f &lt;- phi size in degree)\n&quot;,  </span>
<span class="lineNum">     552 </span><span class="lineCov">          4 :          fPhiGapForSM, TMath::ATan2(fPhiGapForSM,fIPDistance)*TMath::RadToDeg());</span>
<span class="lineNum">     553 </span><span class="lineCov">          4 :   if( fKey110DEG &amp;&amp; !fGeoName.Contains(&quot;12SMV1&quot;) ) printf(&quot; Last two modules have size 10 degree in  phi (180&lt;phi&lt;190)\n&quot;);</span>
<span class="lineNum">     554 </span><span class="lineCov">          4 :   if( fKey110DEG &amp;&amp; fGeoName.Contains(&quot;12SMV1&quot;)) printf(&quot; Last two modules have size 6.6 degree in  phi (180&lt;phi&lt;186.6)\n&quot;);</span>
<span class="lineNum">     555 </span><span class="lineCov">          4 :   printf(&quot; phi SM boundaries \n&quot;); </span>
<span class="lineNum">     556 </span><span class="lineCov">         48 :   for(int i=0; i&lt;fPhiBoundariesOfSM.GetSize()/2.; i++) {</span>
<span class="lineNum">     557 </span><span class="lineCov">         20 :     printf(&quot; %i : %7.15f(%7.12f) -&gt; %7.15f(%7.12f) : center %7.15f(%7.12f) \n&quot;, i, </span>
<span class="lineNum">     558 </span><span class="lineCov">         20 :            fPhiBoundariesOfSM[2*i], fPhiBoundariesOfSM[2*i]*TMath::RadToDeg(),</span>
<span class="lineNum">     559 </span><span class="lineCov">         20 :            fPhiBoundariesOfSM[2*i+1], fPhiBoundariesOfSM[2*i+1]*TMath::RadToDeg(),</span>
<span class="lineNum">     560 </span><span class="lineCov">         20 :            fPhiCentersOfSM[i], fPhiCentersOfSM[i]*TMath::RadToDeg());</span>
<span class="lineNum">     561 </span>            :   }
<span class="lineNum">     562 </span>            : 
<span class="lineNum">     563 </span><span class="lineCov">          4 : }</span>
<a name="564"><span class="lineNum">     564 </span>            : </a>
<span class="lineNum">     565 </span>            : //______________________________________________________________________
<span class="lineNum">     566 </span>            : void AliEMCALEMCGeometry::CheckAdditionalOptions()
<span class="lineNum">     567 </span>            : {
<span class="lineNum">     568 </span>            :   // Feb 06,2006
<span class="lineNum">     569 </span>            :   // Additional options that
<span class="lineNum">     570 </span>            :   // can be used to select
<span class="lineNum">     571 </span>            :   // the specific geometry of 
<span class="lineNum">     572 </span>            :   // EMCAL to run
<span class="lineNum">     573 </span>            :   // Dec 27,2006
<span class="lineNum">     574 </span>            :   // adeed allILOSS= and allIHADR= for MIP investigation
<span class="lineNum">     575 </span>            :   // TODO, FIXME Hans, Aug 2015: Shouldn't one add
<span class="lineNum">     576 </span>            :   // if(fArrayOpts){fArrayOpts-&gt;Delete();delete fArrayOpts;}
<span class="lineNum">     577 </span>            :   // This function is called twice in the Init()
<span class="lineNum">     578 </span>            :   // End Hans, Aug 2015
<span class="lineNum">     579 </span><span class="lineCov">         30 :   fArrayOpts = new TObjArray;</span>
<span class="lineNum">     580 </span><span class="lineCov">         10 :   Int_t nopt = ParseString(fGeoName, *fArrayOpts);</span>
<span class="lineNum">     581 </span><span class="lineCov">         10 :   if(nopt==1) { // no aditional option(s)</span>
<span class="lineNum">     582 </span><span class="lineCov">         10 :     fArrayOpts-&gt;Delete();</span>
<span class="lineNum">     583 </span><span class="lineCov">         20 :     delete fArrayOpts;</span>
<span class="lineNum">     584 </span><span class="lineCov">         10 :     fArrayOpts = 0; </span>
<span class="lineNum">     585 </span><span class="lineCov">         10 :     return;</span>
<span class="lineNum">     586 </span>            :   }              
<span class="lineNum">     587 </span><span class="lineNoCov">          0 :   for(Int_t i=1; i&lt;nopt; i++){</span>
<span class="lineNum">     588 </span><span class="lineNoCov">          0 :     TObjString *o = (TObjString*)fArrayOpts-&gt;At(i); </span>
<span class="lineNum">     589 </span>            : 
<span class="lineNum">     590 </span><span class="lineNoCov">          0 :     TString addOpt = o-&gt;String();</span>
<span class="lineNum">     591 </span>            :     Int_t indj=-1;
<span class="lineNum">     592 </span><span class="lineNoCov">          0 :     for(Int_t j=0; j&lt;fNAdditionalOpts; j++) {</span>
<span class="lineNum">     593 </span><span class="lineNoCov">          0 :       TString opt = fkAdditionalOpts[j];</span>
<span class="lineNum">     594 </span><span class="lineNoCov">          0 :       if(addOpt.Contains(opt,TString::kIgnoreCase)) {</span>
<span class="lineNum">     595 </span>            :           indj = j;
<span class="lineNum">     596 </span><span class="lineNoCov">          0 :         break;</span>
<span class="lineNum">     597 </span>            :       }
<span class="lineNum">     598 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     599 </span><span class="lineNoCov">          0 :     if(indj&lt;0) {</span>
<span class="lineNum">     600 </span><span class="lineNoCov">          0 :       AliDebug(2,Form(&quot;&lt;E&gt; option |%s| unavailable : ** look to the file AliEMCALGeometry.h **\n&quot;, </span>
<span class="lineNum">     601 </span>            :                       addOpt.Data()));
<span class="lineNum">     602 </span><span class="lineNoCov">          0 :       assert(0);</span>
<span class="lineNum">     603 </span>            :     } else {
<span class="lineNum">     604 </span><span class="lineNoCov">          0 :       AliDebug(2,Form(&quot;&lt;I&gt; option |%s| is valid : number %i : |%s|\n&quot;, </span>
<span class="lineNum">     605 </span>            :                       addOpt.Data(), indj, fkAdditionalOpts[indj]));
<span class="lineNum">     606 </span><span class="lineNoCov">          0 :       if       (addOpt.Contains(&quot;NL=&quot;,TString::kIgnoreCase))   {// number of sampling layers</span>
<span class="lineNum">     607 </span><span class="lineNoCov">          0 :         sscanf(addOpt.Data(),&quot;NL=%i&quot;, &amp;fNECLayers);</span>
<span class="lineNum">     608 </span><span class="lineNoCov">          0 :         AliDebug(2,Form(&quot; fNECLayers %i (new) \n&quot;, fNECLayers));</span>
<span class="lineNum">     609 </span><span class="lineNoCov">          0 :       } else if(addOpt.Contains(&quot;PBTH=&quot;,TString::kIgnoreCase)) {//Thickness of the Pb(fECPbRadThicknes)</span>
<span class="lineNum">     610 </span><span class="lineNoCov">          0 :         sscanf(addOpt.Data(),&quot;PBTH=%f&quot;, &amp;fECPbRadThickness);</span>
<span class="lineNum">     611 </span><span class="lineNoCov">          0 :       } else if(addOpt.Contains(&quot;SCTH=&quot;,TString::kIgnoreCase)) {//Thickness of the Sc(fECScintThick)</span>
<span class="lineNum">     612 </span><span class="lineNoCov">          0 :         sscanf(addOpt.Data(),&quot;SCTH=%f&quot;, &amp;fECScintThick);</span>
<span class="lineNum">     613 </span><span class="lineNoCov">          0 :       } else if(addOpt.Contains(&quot;LATSS=&quot;,TString::kIgnoreCase)) {// Thickness of lateral steel strip (fLateralSteelStrip)</span>
<span class="lineNum">     614 </span><span class="lineNoCov">          0 :         sscanf(addOpt.Data(),&quot;LATSS=%f&quot;, &amp;fLateralSteelStrip);</span>
<span class="lineNum">     615 </span><span class="lineNoCov">          0 :         AliDebug(2,Form(&quot; fLateralSteelStrip %f (new) \n&quot;, fLateralSteelStrip));</span>
<span class="lineNum">     616 </span><span class="lineNoCov">          0 :       } else if(addOpt.Contains(&quot;ILOSS=&quot;,TString::kIgnoreCase)) {// As in Geant</span>
<span class="lineNum">     617 </span><span class="lineNoCov">          0 :         sscanf(addOpt.Data(),&quot;ALLILOSS=%i&quot;, &amp;fILOSS);</span>
<span class="lineNum">     618 </span><span class="lineNoCov">          0 :         AliDebug(2,Form(&quot; fILOSS %i \n&quot;, fILOSS));</span>
<span class="lineNum">     619 </span><span class="lineNoCov">          0 :       } else if(addOpt.Contains(&quot;IHADR=&quot;,TString::kIgnoreCase)) {// As in Geant</span>
<span class="lineNum">     620 </span><span class="lineNoCov">          0 :         sscanf(addOpt.Data(),&quot;ALLIHADR=%i&quot;, &amp;fIHADR);</span>
<span class="lineNum">     621 </span><span class="lineNoCov">          0 :         AliDebug(2,Form(&quot; fIHADR %i \n&quot;, fIHADR));</span>
<span class="lineNum">     622 </span>            :       }
<span class="lineNum">     623 </span>            :     }
<span class="lineNum">     624 </span><span class="lineNoCov">          0 :   }</span>
<span class="lineNum">     625 </span><span class="lineCov">         10 : }</span>
<a name="626"><span class="lineNum">     626 </span>            : </a>
<span class="lineNum">     627 </span>            : //__________________________________________________________________
<span class="lineNum">     628 </span>            : void AliEMCALEMCGeometry::DefineSamplingFraction(const Text_t* mcname, const Text_t* mctitle)
<span class="lineNum">     629 </span>            : {
<span class="lineNum">     630 </span>            :   // Jun 05,2006
<span class="lineNum">     631 </span>            :   // Look http://rhic.physics.wayne.edu/~pavlinov/ALICE/SHISHKEBAB/RES/linearityAndResolutionForTRD1.html
<span class="lineNum">     632 </span>            :   // Keep for compatibilty
<span class="lineNum">     633 </span>            :   //
<span class="lineNum">     634 </span>            :   
<span class="lineNum">     635 </span>            :   // Sampling factor for G3
<span class="lineNum">     636 </span><span class="lineCov">          2 :   fSampling = 10.87; // Default value - Nov 25,2010</span>
<span class="lineNum">     637 </span><span class="lineCov">          1 :   if(fNECLayers == 69) {        // 10% layer reduction</span>
<span class="lineNum">     638 </span><span class="lineNoCov">          0 :     fSampling = 12.55;</span>
<span class="lineNum">     639 </span><span class="lineCov">          1 :   } else if(fNECLayers == 61) { // 20% layer reduction</span>
<span class="lineNum">     640 </span><span class="lineNoCov">          0 :     fSampling = 12.80;</span>
<span class="lineNum">     641 </span><span class="lineCov">          1 :   } else if(fNECLayers == 77) {</span>
<span class="lineNum">     642 </span><span class="lineCov">          1 :     if(fGeoName.Contains(&quot;V1&quot;)){</span>
<span class="lineNum">     643 </span><span class="lineCov">          1 :       fSampling = 10.87; //Adding paper sheets and cover plate; Nov 25,2010</span>
<span class="lineNum">     644 </span><span class="lineCov">          1 :     } else if   (fECScintThick&gt;0.159 &amp;&amp; fECScintThick&lt;0.161) { // original sampling fraction, equal layers</span>
<span class="lineNum">     645 </span><span class="lineNoCov">          0 :       fSampling = 12.327; // fECScintThick = fECPbRadThickness = 0.160;</span>
<span class="lineNum">     646 </span><span class="lineNoCov">          0 :     } else if (fECScintThick&gt;0.175 &amp;&amp; fECScintThick&lt;0.177) { // 10% Pb thicknes reduction</span>
<span class="lineNum">     647 </span><span class="lineNoCov">          0 :       fSampling = 10.5; // fECScintThick = 0.176, fECPbRadThickness=0.144;</span>
<span class="lineNum">     648 </span><span class="lineNoCov">          0 :     } else if(fECScintThick&gt;0.191 &amp;&amp; fECScintThick&lt;0.193) { // 20% Pb thicknes reduction</span>
<span class="lineNum">     649 </span><span class="lineNoCov">          0 :       fSampling = 8.93; // fECScintThick = 0.192, fECPbRadThickness=0.128;</span>
<span class="lineNum">     650 </span><span class="lineNoCov">          0 :     }</span>
<span class="lineNum">     651 </span>            :   }
<span class="lineNum">     652 </span>            : 
<span class="lineNum">     653 </span>            :   // Default sampling factor for G3, modify it for other transport model
<span class="lineNum">     654 </span><span class="lineCov">          1 :   TString mcName  = mcname;</span>
<span class="lineNum">     655 </span><span class="lineCov">          1 :   TString mcTitle = mctitle;</span>
<span class="lineNum">     656 </span>            :     
<span class="lineNum">     657 </span>            :   Float_t samplingFactorTranportModel = 1. ;
<span class="lineNum">     658 </span><span class="lineCov">          3 :   if     (mcName.Contains(&quot;Geant3&quot;)) samplingFactorTranportModel = 1.;//0.988 // Do nothing</span>
<span class="lineNum">     659 </span><span class="lineNoCov">          0 :   else if(mcName.Contains(&quot;Fluka&quot;) ) samplingFactorTranportModel = 1.; // To be set</span>
<span class="lineNum">     660 </span><span class="lineNoCov">          0 :   else if(mcName.Contains(&quot;Geant4&quot;))</span>
<span class="lineNum">     661 </span>            :   {
<span class="lineNum">     662 </span><span class="lineNoCov">          0 :     if     ( mcTitle.Contains(&quot;EMV-EMCAL&quot;) ) samplingFactorTranportModel = 0.86 ; // EMC list but for EMCal </span>
<span class="lineNum">     663 </span><span class="lineNoCov">          0 :     else if( mcTitle.Contains(&quot;EMV&quot;) )       samplingFactorTranportModel = 1.096; // 0.906, 0.896 (OPT)</span>
<span class="lineNum">     664 </span>            :     else                                     samplingFactorTranportModel = 0.86 ; // 1.15 (CHIPS), 1.149 (BERT), 1.147 (BERT_CHIPS) 
<span class="lineNum">     665 </span>            :   }      
<span class="lineNum">     666 </span>            :   
<span class="lineNum">     667 </span><span class="lineCov">          5 :   AliInfo(Form(&quot;MC modeler &lt;%s&gt;, Title &lt;%s&gt;: Sampling %2.3f, model fraction with respect to G3 %2.3f, final sampling %2.3f&quot;,</span>
<span class="lineNum">     668 </span>            :                mcName.Data(),mcTitle.Data(),fSampling,samplingFactorTranportModel,fSampling*samplingFactorTranportModel));
<span class="lineNum">     669 </span>            :   
<span class="lineNum">     670 </span><span class="lineCov">          1 :   fSampling*=samplingFactorTranportModel;</span>
<span class="lineNum">     671 </span>            :   
<span class="lineNum">     672 </span><span class="lineCov">          1 : }</span>
<a name="673"><span class="lineNum">     673 </span>            : </a>
<span class="lineNum">     674 </span>            : //________________________________________________________________________________________________
<span class="lineNum">     675 </span>            : Double_t AliEMCALEMCGeometry::GetPhiCenterOfSMSec(Int_t nsupmod) const
<span class="lineNum">     676 </span>            : {
<span class="lineNum">     677 </span>            :   //returns center of supermodule in phi
<span class="lineNum">     678 </span><span class="lineCov">        180 :   int i = nsupmod/2;</span>
<span class="lineNum">     679 </span><span class="lineCov">         90 :   return fPhiCentersOfSMSec[i];</span>
<span class="lineNum">     680 </span>            : 
<span class="lineNum">     681 </span>            : }
<a name="682"><span class="lineNum">     682 </span>            : </a>
<span class="lineNum">     683 </span>            : //________________________________________________________________________________________________
<span class="lineNum">     684 </span>            : Double_t AliEMCALEMCGeometry::GetPhiCenterOfSM(Int_t nsupmod) const
<span class="lineNum">     685 </span>            : {
<span class="lineNum">     686 </span>            :   //returns center of supermodule in phi
<span class="lineNum">     687 </span><span class="lineCov">       2472 :   int i = nsupmod/2;</span>
<span class="lineNum">     688 </span><span class="lineCov">       1236 :   return fPhiCentersOfSM[i];</span>
<span class="lineNum">     689 </span>            : 
<span class="lineNum">     690 </span>            : }
<a name="691"><span class="lineNum">     691 </span>            : </a>
<span class="lineNum">     692 </span>            : //________________________________________________________________________________________________
<span class="lineNum">     693 </span>            : Bool_t AliEMCALEMCGeometry::GetPhiBoundariesOfSM(Int_t nSupMod, Double_t &amp;phiMin, Double_t &amp;phiMax) const
<span class="lineNum">     694 </span>            : {
<span class="lineNum">     695 </span>            :   // 0&lt;= nSupMod &lt;=17; phi in rad
<span class="lineNum">     696 </span>            :   static int i;
<span class="lineNum">     697 </span><span class="lineCov">        420 :   if(nSupMod&lt;0 || nSupMod &gt;12+fnSupModInDCAL-1) return kFALSE;</span>
<span class="lineNum">     698 </span><span class="lineCov">        140 :   i = nSupMod/2;</span>
<span class="lineNum">     699 </span><span class="lineCov">        140 :   phiMin = (Double_t)fPhiBoundariesOfSM[2*i];</span>
<span class="lineNum">     700 </span><span class="lineCov">        140 :   phiMax = (Double_t)fPhiBoundariesOfSM[2*i+1];</span>
<span class="lineNum">     701 </span><span class="lineCov">        140 :   return kTRUE;</span>
<span class="lineNum">     702 </span><span class="lineCov">        140 : }</span>
<a name="703"><span class="lineNum">     703 </span>            : </a>
<span class="lineNum">     704 </span>            : //________________________________________________________________________________________________
<span class="lineNum">     705 </span>            : Bool_t AliEMCALEMCGeometry::GetPhiBoundariesOfSMGap(Int_t nPhiSec, Double_t &amp;phiMin, Double_t &amp;phiMax) const
<span class="lineNum">     706 </span>            : {
<span class="lineNum">     707 </span>            :   // 0&lt;= nPhiSec &lt;=max; phi in rad
<span class="lineNum">     708 </span>            :   // 0;  gap boundaries between  0th&amp;2th  | 1th&amp;3th SM
<span class="lineNum">     709 </span>            :   // 1;  gap boundaries between  2th&amp;4th  | 3th&amp;5th SM
<span class="lineNum">     710 </span>            :   // 2;  gap boundaries between  4th&amp;6th  | 5th&amp;7th SM
<span class="lineNum">     711 </span>            :   // 3;  gap boundaries between  6th&amp;8th  | 7th&amp;9th SM
<span class="lineNum">     712 </span>            :   // 4;  gap boundaries between  8th&amp;10th | 9th&amp;11th SM
<span class="lineNum">     713 </span>            :   // 5;  gap boundaries between 10th&amp;12th | 11h&amp;13th SM
<span class="lineNum">     714 </span>            :   //             ...
<span class="lineNum">     715 </span><span class="lineNoCov">          0 :   if(nPhiSec&lt;0 || nPhiSec &gt;5+fnSupModInDCAL/2-1) return kFALSE;</span>
<span class="lineNum">     716 </span><span class="lineNoCov">          0 :   phiMin = fPhiBoundariesOfSM[2*nPhiSec+1];</span>
<span class="lineNum">     717 </span><span class="lineNoCov">          0 :   phiMax = fPhiBoundariesOfSM[2*nPhiSec+2];</span>
<span class="lineNum">     718 </span><span class="lineNoCov">          0 :   return kTRUE;</span>
<span class="lineNum">     719 </span><span class="lineNoCov">          0 : }</span>
<a name="720"><span class="lineNum">     720 </span>            : </a>
<span class="lineNum">     721 </span>            : //________________________________________________________________________________________________
<span class="lineNum">     722 </span>            : int AliEMCALEMCGeometry::ParseString(const TString &amp;topt, TObjArray &amp;Opt)
<span class="lineNum">     723 </span>            : { 
<span class="lineNum">     724 </span>            :         //Parse string, does what? GCB 08/09
<span class="lineNum">     725 </span><span class="lineCov">         20 :         Ssiz_t begin, index, end, end2;</span>
<span class="lineNum">     726 </span><span class="lineCov">         10 :         begin = index = end = end2 = 0;</span>
<span class="lineNum">     727 </span><span class="lineCov">         10 :         TRegexp separator(&quot;[^ ;,\\t\\s/]+&quot;);</span>
<span class="lineNum">     728 </span><span class="lineCov">         60 :         while ( (begin &lt; topt.Length()) &amp;&amp; (index != kNPOS) ) {</span>
<span class="lineNum">     729 </span>            :                 // loop over given options
<span class="lineNum">     730 </span><span class="lineCov">         10 :                 index = topt.Index(separator,&amp;end,begin);</span>
<span class="lineNum">     731 </span><span class="lineCov">         10 :                 if (index &gt;= 0 &amp;&amp; end &gt;= 1) {</span>
<span class="lineNum">     732 </span><span class="lineCov">         20 :                         TString substring(topt(index,end));</span>
<span class="lineNum">     733 </span><span class="lineCov">         40 :                         Opt.Add(new TObjString(substring.Data()));</span>
<span class="lineNum">     734 </span><span class="lineCov">         10 :                 }</span>
<span class="lineNum">     735 </span><span class="lineCov">         10 :                 begin += end+1;</span>
<span class="lineNum">     736 </span>            :         }
<span class="lineNum">     737 </span><span class="lineCov">         10 :         return Opt.GetEntries();</span>
<span class="lineNum">     738 </span><span class="lineCov">         10 : }</span>
<span class="lineNum">     739 </span>            : 
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.11</a></td></tr>
  </table>
  <br>

</body>
</html>
